/*
    Copyright (c) 2015 Anaplan All rights reserved
*///>>built
require({cache:{"anaplan/modelmap/IsolateModeDropDown":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/on dojo/dom-class dijit/_WidgetBase dijit/form/DropDownButton dijit/DropDownMenu anaplan/widgets/MenuItem dijit/RadioMenuItem dijit/MenuSeparator".split(" "),function(g,b,k,p,r,n,f,s,l,a,e,d){return g([f],{graph:null,button:null,dropdown:null,menu:null,postCreate:function(){this.inherited(arguments);this.graph.on("enable_button",b.hitch(this,"_enableIsolationButtons"));
this.graph.on("disable_button",b.hitch(this,"_disableIsolationButtons"));this.graph.on("exit_isolate_mode",b.hitch(this,"_decorateToggle"))},buildRendering:function(){this.inherited(arguments);this.button=p.toDom('\x3cbutton title\x3d"Toggle Isolation Mode" type\x3d"button" disabled class\x3d"groupedToggle"\x3e\x3cspan class\x3d"anaplanModelMapsSprite toggleVisible disabled"\x3e\x3c/span\x3e\x3c/button\x3e');this.own(r(this.button,"click",b.hitch(this,"_onToggleIsolationClick")));this.dropdown=new s({baseClass:"isolationModeDropdown",
showLabel:!1,disabled:!0});this.menu=this._createDropdown();this.dropdown.set("dropDown",this.menu);this.domNode.appendChild(this.button);this.domNode.appendChild(this.dropdown.domNode)},destroy:function(){this.inherited(arguments);this.menu.destroy();this.dropdown.destroy()},_onToggleIsolationClick:function(){this._toggleVisible()},_enableIsolationButtons:function(){this.dropdown.set("disabled",!1);this.button.removeAttribute("disabled");n.remove(this.button,"disabled");n.remove(this.button.parentNode,
"disabled");n.remove(this.button.firstChild,"disabled")},_disableIsolationButtons:function(){this.dropdown.set("disabled",!0);this.button.setAttribute("disabled","disabled");n.add(this.button,"disabled");n.add(this.button.parentNode,"disabled");n.add(this.button.firstChild,"disabled")},_onShowAll:function(){this.graph.isIsolateMode()&&this._toggleVisible()},_onShowSelection:function(){this.graph.isIsolateMode()||this._toggleVisible()},_onClearSelection:function(){this.graph.clearSelection();this._decorateToggle()},
_toggleVisible:function(){this.graph.switchMode();this._decorateToggle()},_decorateToggle:function(){var a=this.menu.getChildren(),d=this.graph.isIsolateMode()?1:0;k.forEach(a,function(a,c){a.set("checked",c===d)});this.graph.isIsolateMode()?n.add(this.button,"enabled"):n.remove(this.button,"enabled")},_createDropdown:function(){var q=new l({baseClass:"modelMap"}),h=new e({label:"Show All",checked:!0,group:"isolateMode",onClick:b.hitch(this,"_onShowAll")}),f=new e({label:"Show Selection",group:"isolateMode",
onClick:b.hitch(this,"_onShowSelection")}),c=new a({label:"Clear Selection",onClick:b.hitch(this,"_onClearSelection")});q.addChild(h);q.addChild(f);q.addChild(new d);q.addChild(c);q.startup();this.own(q,h,f);return q}})})},"anaplan/home/TableOfContents/DataProvider":function(){define("anaplan/data/ModelContentCache anaplan/data/ModelContentHelper dojo/Evented dojo/_base/lang dojo/_base/declare anaplan/api/service anaplan/constants dojo/i18n!anaplan/nls/tableOfContents anaplan/utils/FormatHelper".split(" "),
function(g,b,k,p,r,n,f,s,l){return r("anaplan.home.TableOfContents.DataProvider",[k],{constructor:function(a){this._suspended=!1;this._data=null;g.addObserver(this)},update:function(){!0!==this._suspended&&this.modelDefinitionSerialNumber!==n.modelDefinitionSerialNumber&&setTimeout(function(){this.buildData();this.emit("update",this._data)}.bind(this),0)},buildData:function(){this._data=n.model.query({functionalAreas:{setters:{icon:"functionalArea"},merge:[{entityLongId:-1,entityId:s.labelOtherContents}],
children:{modules:{query:{functionalAreaId:"parent.entityLongId"},setters:{icon:"module"},children:{views:{query:{moduleEntityLongId:"parent.entityLongId"},setters:{icon:"subsidiaryView2"},rename:{entityLongId:"value",entityId:"label",showInContents:"isVisible"},props:["label","value","icon","isVisible"]}},rename:{entityLongId:"value",entityId:"label",showInContents:"isVisible"},props:["label","value","icon","isVisible"]},dashboards:{query:{functionalAreaId:"parent.entityLongId"},rename:{entityLongId:"value",
entityId:"label",showInContents:"isVisible"},props:["label","value","icon","isVisible"]}},rename:{entityLongId:"value",entityId:"label",showInContents:"isVisible"},props:["label","value","icon","isVisible"]}});this.modelDefinitionSerialNumber=n.modelDefinitionSerialNumber;return this._data},getData:function(){this._data||this.buildData();return this._data},getEnableAccessToHiddenContent:function(){return n.model.getModelProperty(f.MODEL_PROPERTY_NAMES.ENABLE_ACCESS_TO_HIDDEN_CONTENT)},resume:function(){this._suspended=
!1;this.update()},suspend:function(){this._suspended=!0},destroy:function(){g.deleteObserver(this)}})})},"anaplan/settings/Time2/Forms/FourWeekPeriods":function(){define("dojo/_base/lang ./FormBase ./Widgets/FiscalYearLabelAlignmentWeeks ./Widgets/CurrentFiscalYearForWeeksSelect ./Widgets/CurrentPeriodFilteringSelect ./Widgets/SelectWithData ./Widgets/ThirteenWeekSelect ./Widgets/YearsSpinner dojo/_base/declare dojo/_base/sniff".split(" "),function(g,b,k,p,r,n,f,s,l){return l([b],{testableName:"formFourWeekPeriods",
_formfields:[{name:"fiscalYearEndType",triggerCurrentPeriod:!0},{name:"takeFiscalYearNameFromPeriodStart",nls:"labelTakeFiscalYearNameFromPeriodStart",Ctor:k},{name:"currentFiscalYear",nls:"labelCurrentFiscalYear",Ctor:p,triggerCurrentPeriod:!0},{name:"numberOfPastYears",nls:"labelNumberOfPastYears",Ctor:s,options:{constraints:{min:0,max:20},required:!0},triggerCurrentPeriod:!0},{name:"numberOfFutureYears",nls:"labelNumberOfFutureYears",Ctor:s,options:{constraints:{min:0,max:50},required:!0},triggerCurrentPeriod:!0},
{name:"fiscalYearExtraWeekMonth",nls:"labelFiscalYearExtraWeekMonth",Ctor:f,triggerCurrentPeriod:!0},{name:"weekFormat",nls:"labelWeekFormat",Ctor:n,triggerCurrentPeriod:!0,options:{useLabelAsValue:!0}},{name:"currentPeriod",nls:"labelCurrentPeriod",Ctor:r},{name:"include",options:{showFiscalYearExtraMonthQuarter:!0,showHalfYearTotals:!1}}],_attach:function(){this.inherited(arguments);this.fields.fiscalYearEndType.on("valuechange",g.hitch(this,function(){this.applyFormLogic(this.get("value"))}));
this.fields.takeFiscalYearNameFromPeriodStart.on("change",g.hitch(this,function(){this.applyFormLogic(this.get("value"))}))},applyFormLogic:function(a){var e=a.fiscalYearEndDayInWeek!==this._oldVal.fiscalYearEndDayInWeek,d=a.fiscalYearEndType!==this._oldVal.fiscalYearEndType,b=a.takeFiscalYearNameFromPeriodStart!==this._oldVal.takeFiscalYearNameFromPeriodStart;(a.fiscalYearEndMonth!==this._oldVal.fiscalYearEndMonth||b||e||d)&&this.fields.currentFiscalYear.refreshValues(a.takeFiscalYearNameFromPeriodStart,
a.fiscalYearEndType,a.fiscalYearEndMonth,a.fiscalYearEndDayInWeek);this.fields.includeOptions.applyFormLogic(a,!0);this.inherited(arguments)}})})},"anaplan/validators/GeneralListsValidator":function(){define("anaplan/constants anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/utils/EntityLongIdHelper dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/generalListsValidator dojo/string".split(" "),function(g,b,k,p,r,n,f,s,l){var a=function(a,d,l){g.HIERARCHY_ENTITY_TYPE_INDEX===
p.getEntityTypeIndex(l)&&(l=b.getHierarchyInfo(l))&&-1===l.parentHierarchyEntityLongId&&"false"===a.originalText!==("false"===a.cellText)&&"true"===a.cellText&&(d[s.messageConfirmNumberedListConversion]="messageConfirmNumberedListConversion")};return n(null,{name:"GeneralListsValidator",constructor:function(){this._resetConfirmationFlags()},confirm:function(e){var d={};e=e.getCellUpdates();if(!e.isEmpty()){e=e.getItemsArray();for(var q=e.length,h,n=0;n<q;n++)h=e[n],this._confirmRenameOrDeleteSubset&&
-1!==r.indexOf(h.entityLongIds,g.SYSTEM_PROPERTY_HIERARCHY_SUBSETS)?h.originalText!==h.cellText&&(d[s.messageConfirmRenameOrDeleteSubset]="messageConfirmRenameOrDeleteSubset"):this._confirmRenameOrDeleteProperty&&-1!==r.indexOf(h.entityLongIds,g.SYSTEM_PROPERTY_HIERARCHY_PROPERTIES)?h.originalText!==h.cellText&&(d[s.messageConfirmRenameOrDeleteProperty]="messageConfirmRenameOrDeleteProperty"):this._confirmRemoveHasWorkflow&&-1!==r.indexOf(h.entityLongIds,g.SYSTEM_PROPERTY_HIERARCHY_HAS_WORKFLOW)?
"true"===h.originalText!==("true"===h.cellText)&&"false"===h.cellText&&(d[s.messageConfirmRemoveHasWorkflow]="messageConfirmRemoveHasWorkflow"):this._confirmSetSelectiveAccess&&-1!==r.indexOf(h.entityLongIds,g.SYSTEM_PROPERTY_HIERARCHY_SELECTIVE_ACCESS)?"false"===h.originalText!==("false"===h.cellText)&&"true"===h.cellText&&(d[s.messageConfirmSetSelectiveAccess]="messageConfirmSetSelectiveAccess"):(this._confirmRemoveProductionData||this._confirmSetProductionData)&&-1!==r.indexOf(h.entityLongIds,
g.SYSTEM_PROPERTY_HIERARCHY_PRODUCTION_DATA)?"true"===h.originalText!==("true"===h.cellText)&&"false"===h.cellText&&this._confirmRemoveProductionData?(h=k.getHierarchyLabel(b,h.entityLongIds[0]),h=l.substitute(s.messageConfirmRemoveProductionData,{productionListName:h}),d[h]="messageConfirmRemoveProductionData"):"false"===h.originalText!==("false"===h.cellText)&&("true"===h.cellText&&this._confirmSetProductionData)&&(d[s.messageConfirmSetProductionData]="messageConfirmSetProductionData"):this._confirmNumberedListConversion&&
-1!==r.indexOf(h.entityLongIds,g.SYSTEM_PROPERTY_HIERARCHY_NUMBERED_LIST)&&r.forEach(h.entityLongIds,f.hitch(this,a,h,d))}return d},setDisabledConfirmationKeys:function(a){this._resetConfirmationFlags();if(a)for(var d=a.length,b=0;b<d;b++)-1!==a[b].indexOf(this.name+".messageConfirmRenameOrDeleteSubset")&&(this._confirmRenameOrDeleteSubset=!1),-1!==a[b].indexOf(this.name+".messageConfirmRenameOrDeleteProperty")&&(this._confirmRenameOrDeleteProperty=!1),-1!==a[b].indexOf(this.name+".messageConfirmRemoveHasWorkflow")&&
(this._confirmRemoveHasWorkflow=!1),-1!==a[b].indexOf(this.name+".messageConfirmSetSelectiveAccess")&&(this._confirmSetSelectiveAccess=!1),-1!==a[b].indexOf(this.name+".messageConfirmSetProductionData")&&(this._confirmSetProductionData=!1),-1!==a[b].indexOf(this.name+".messageConfirmRemoveProductionData")&&(this._confirmRemoveProductionData=!1),-1!==a[b].indexOf(this.name+".messageConfirmNumberedListConversion")&&(this._confirmNumberedListConversion=!1)},_resetConfirmationFlags:function(){this._confirmNumberedListConversion=
this._confirmRemoveProductionData=this._confirmSetProductionData=this._confirmSetSelectiveAccess=this._confirmRemoveHasWorkflow=this._confirmRenameOrDeleteProperty=this._confirmRenameOrDeleteSubset=!0}})})},"anaplan/settings/UsersAndRoles/Users/_Roles":function(){define("anaplan/data/Aggregator dojo/_base/declare dojo/Evented anaplan/common/ViewSerialNumbers dojo/_base/lang anaplan/constants anaplan/data/ModelContentHelper anaplan/data/RequestFactory".split(" "),function(g,b,k,p,r,n,f,s){return b([k],
{constructor:function(b){this._workspaceId=b.workspaceId;this._modelId=b.modelId;this._registeredObserver=!1;this._viewDefinition=null;this._serialNumbers=new p},destroy:function(){this._registeredObserver&&g.deleteObserver(this)},error:function(b){this.onError(b)},initialize:function(){g.addObserver(this);this._registeredObserver=!0},update:function(b){var a=this._serialNumbers,e=this._serialNumbers=b[0].serialNumbers;this._viewIndex=b[0].viewIndex;if(a.rowAxisSerialNumber!==e.rowAxisSerialNumber)this.onUpdate(b[0].rowLabelPages[0])},
view:function(){var b=this._serialNumbers,b={workspaceId:this._workspaceId,modelId:this._modelId,viewDefinition:this._getViewDefinition(),dataPageRequests:[],rowLabelPageRequests:[{start:0,count:-1}],columnLabelPageRequests:[],cellSelectorLabelsRequired:!1,pageSelectorLabelsRequired:!1,columnAxisSerialNumber:b.columnAxisSerialNumber,rowAxisSerialNumber:b.rowAxisSerialNumber,dataSerialNumber:b.dataSerialNumber,pageInfoSerialNumber:b.pageInfoSerialNumber,viewIndex:this._viewIndex||-1};return s.createRequest(this._workspaceId,
[],[b],[])},_getViewDefinition:function(){if(null==this._viewDefinition){var b={type:"MODEL_DEFINITION",staticContextIdentifiers:[]},a=f.getAxesForViewDefinition([n.SYSTEM_AXIS_IDENTIFIER_MODEL_ROLE_IDENTIFIER],[n.SYSTEM_AXIS_IDENTIFIER_EMPTY_0_1_IDENTIFIER]);r.mixin(b,a);this._viewDefinition=b}return this._viewDefinition},onError:function(){},onUpdate:function(){}})})},"anaplan/settings/Actions/_ExportDefinitions":function(){define("anaplan/data/Aggregator dojo/_base/declare anaplan/data/ModelContentHelper anaplan/common/ViewSerialNumbers anaplan/data/RequestFactory dojo/_base/lang dojo/json anaplan/constants".split(" "),
function(g,b,k,p,r,n,f,s){return b([],{constructor:function(){this._exportDefinitions=[];this._registeredObserver=!1;this._viewDefinition=null;this._serialNumbers=new p},destroy:function(){this._registeredObserver&&g.deleteObserver(this)},error:function(b){this.onError(b)},getExportDefinitions:function(){return this._exportDefinitions},initialize:function(){g.addObserver(this);this._registeredObserver=!0},onError:function(){},onUpdate:function(){},update:function(b){b=b[0];var a=this._serialNumbers,
e=this._serialNumbers=new p(b.serialNumbers);this._viewIndex=b.viewIndex;if(a.rowAxisSerialNumber!==e.rowAxisSerialNumber||a.dataSerialNumber!==e.dataSerialNumber){a.rowAxisSerialNumber!==e.rowAxisSerialNumber&&(this._rowLabelPage=b.rowLabelPages[0]);a.dataSerialNumber!==e.dataSerialNumber&&(this._dataPage=b.dataPages[0]);b=[];for(var d=this._rowLabelPage,a=d.entityLongIds[0],e=d.labels[0],q=this._dataPage.cellValues,d=d.count,h=0;h<d;h++)b.push({entityLongId:a[h],label:e[h],exportDefinitionJson:f.parse(q[h])});
this._exportDefinitions=b;this.onUpdate()}},view:function(){var b={modelId:modelId,viewDefinition:this._getViewDefinition(),columnLabelPageRequests:[{start:0,count:-1}],dataPageRequests:[{startRow:0,startColumn:0,rowCount:-1,columnCount:-1}],rowLabelPageRequests:[{start:0,count:-1}],cellSelectorLabelsRequired:!1,pageSelectorLabelsRequired:!1,serialNumbers:this._serialNumbers,viewIndex:this._viewIndex||-1};return r.createRequest(workspaceId,[],[b],[])},_getViewDefinition:function(){if(null==this._viewDefinition){var b=
{type:"MODEL_DEFINITION"},a=k.getAxesForViewDefinition([s.SYSTEM_AXIS_IDENTIFIER_EXPORT_IDENTIFIER],[s.SYSTEM_AXIS_IDENTIFIER_EXPORT_PROPERTY_IDENTIFIER]);n.mixin(b,a);this._viewDefinition=b}return this._viewDefinition}})})},"anaplan/gridlet/_editor/RemoteModelEditor":function(){define("anaplan/constants anaplan/Exceptions anaplan/utils/EntityLongIdHelper anaplan/utils/JsHelper anaplan/utils/SubmissionHandler anaplan/utils/UIHelper dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/data/ItemFileReadStore dojo/dom-class dojo/i18n!anaplan/nls/manageImportSources dojo/i18n!anaplan/nls/remoteModelEditor dojo/i18n!dijit/nls/common dojo/i18n!dijit/nls/loading dojo/string dojo/text!anaplan/templates/RemoteModelEditor.html anaplan/widgets/Button anaplan/widgets/MasterSelector dijit/form/FilteringSelect".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z){return e("anaplan.gridlet._editor.RemoteModelEditor",[s,f,l],{baseClass:"dijitContentPane dijit dijitReset dijitLeft remoteModelEditor",lblCancel:t.buttonCancel,lblLoading:m.loadingState,lblOk:t.buttonOk,lblModel:u.labelModel,lblWorkspace:u.labelWorkspace,name:"",tabIndex:-1,templateString:z,constructor:function(a){this._selectedWorkspaceId=a.workspaceId;this._selectedModelId=a.modelId;this._escapedRemoteModelLabel=a.escapedRemoteModelLabel;this._remoteModelEntityLongId=
a.remoteModelEntityLongId;this._messageDisplayed=!1},focus:function(){},onCancel:function(){},onChange:function(){},postCreate:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments);this._doRequest()},_disableControls:function(){this.inputOk.set("disabled",!0);this.modelSelector.set("disabled",!0);this.workspaceSelector.set("disabled",!0)},_displayMessage:function(){var b=d.exists("workspaces.entityIds",this._dataSources)&&-1<a.indexOf(this._dataSources.workspaces.entityIds[0],
this._selectedWorkspaceId),e=d.exists("models.entityIds",this._dataSources)&&-1<a.indexOf(this._dataSources.models.entityIds[0],this._selectedModelId),m=b&&e?"Info":"Warn",b=b&&e?m:m+k.getEntityTypeIndex(this._remoteModelEntityLongId);this.messageText.innerHTML=w.substitute(c["messageText"+b],{escapedRemoteModelLabel:this._escapedRemoteModelLabel||""});h.add(this.messageIcon,"messageIcon"+m);this.messageIcon.style.visibility="visible"},_doRequest:function(){try{this.busyIndicator.style.display="";
this._disableControls();var a={actionId:g.SYSTEM_ACTIONS.GET_DATA_SOURCES,params:{workspaceId:this._selectedWorkspaceId}};(new r({showPleaseWait:!1})).post([],[],[a],!1).then(d.hitch(this,function(a){this.domNode&&(this.busyIndicator.style.display="none",this._rebuild(a.result.systemActionResults[0]),this._enableControls(),this._messageDisplayed||(this._displayMessage(),this._messageDisplayed=!0))}),d.hitch(this,function(a){this.busyIndicator.style.display="none";this._enableControls()}))}catch(c){n.showErrorReporter(new b.ClientException(this.declaredClass+
"._doRequest",c,{widgetId:this.id})),this.busyIndicator.style.display="none",this._enableControls()}},_enableControls:function(){this.workspaceSelector.set("disabled",!1);this.modelSelector.set("disabled",!this.workspaceSelector.isValid());var a=this._isEmptySelection(this.modelSelector.get("value"));this.inputOk.set("disabled",a)},_isEmptySelection:function(a){return p.isNullOrUndefined(a)||p.isNullOrUndefined(a.value)||p.isNullOrUndefined(a.text)},_onKeyPress:function(a){a.currentTarget===this.domNode&&
a.stopPropagation()},_onInputOkClick:function(){try{this._onSubmit()}catch(a){n.showErrorReporter(new b.ClientException(this.declaredClass+"_onInputOkClick",a,{widgetId:this.id}))}},_onInputCancelClick:function(){this.onCancel()},_onModelSelectionChange:function(){try{if(!this.modelSelector.get("disabled")){var a=this.modelSelector.get("value");this._isEmptySelection(a)?this._selectedModelId=null:this._selectedModelId=a.value;this._enableControls()}}catch(c){n.showErrorReporter(new b.ClientException(this.declaredClass+
"onModelSelectionChange",c,{widgetId:this.id}))}},_onSubmit:function(){var c=this._dataSources.workspaces,b,d=a.indexOf(c.entityIds[0],this._selectedWorkspaceId);if(-1===d)this.onCancel();else b=c.labels[0][d];var c=this._dataSources.models,e,d=a.indexOf(c.entityIds[0],this._selectedModelId);if(-1===d)this.onCancel();else e=c.labels[0][d];this.onChange({workspaceId:this._selectedWorkspaceId,workspaceName:b,modelId:this._selectedModelId,modelName:e})},_onWorkspaceSelectionChange:function(){try{this.workspaceSelector.isValid()&&
(this._selectedWorkspaceId=this.workspaceSelector.get("value"),this._selectedModelId=null,this.modelSelector.clear(),this._doRequest())}catch(a){n.showErrorReporter(new b.ClientException(this.declaredClass+"onWorkspaceSelectionChange",a,{widgetId:this.id}))}},_rebuild:function(a){try{this._dataSources=a,p.isNullOrUndefined(a)||(!0!==a.successful?n.showErrorReporter(new b.IllegalStateException(a.errorDetail.localMessageText),!1,!1):(a.workspaces&&this._rebuildWorkspaces(a.workspaces),a.errorDetail&&
n.showErrorReporter(new b.BaseException(a.errorDetail.localMessageText),!0,!0),a.models&&this._rebuildModels(a.models)))}catch(c){n.showErrorReporter(new b.ClientException("anaplan.view.ManageImportSources._ModelSource._rebuild",c))}},_rebuildModels:function(c){var b=[];if(0<c.count){for(var d=c.entityIds[0],e=c.labels[0],h=c.styles[0],m=0;m<c.count;++m)b.push({modelId:d[m],modelName:e[m],activeState:h[m]});c=a.indexOf(d,this._selectedModelId);this.modelSelector.set("ModelSummaries",b);-1<c&&(this.modelSelector.set("value",
{value:this._selectedModelId},!1),this.modelSelector.scrollToSelection())}},_rebuildWorkspaces:function(c){for(var b=c.entityIds[0],d=c.labels[0],e=[],h=0;h<c.count;++h)e.push({identifier:b[h],label:d[h]});c=new q({data:{identifier:"identifier",label:"label",items:e}});this.workspaceSelector.set("store",c);-1<a.indexOf(b,this._selectedWorkspaceId)&&this.workspaceSelector.set("value",this._selectedWorkspaceId,!1);this.workspaceSelector.validate()}})})},"anaplan/widgets/SimpleConfirmationDialog":function(){define("dijit/Destroyable dojo/Evented anaplan/utils/UIHelper anaplan/view/Confirmation dojo/_base/declare dojo/_base/lang dojo/on".split(" "),
function(g,b,k,p,r,n,f){return r([b,g],{_dialog:null,constructor:function(b){this.inherited(arguments);var l=new p({heading:"",innerHtml:b.content});this._dialog=k.getSharedDialog({roles:["confirm","simple-confirm"]});this._dialog.set("class","simpleConfirmationDialog");this._dialog.set("content",l.domNode);this._dialog.set("title",b.title);this._dialog.set("refocus",!0);this._handleHide=f(l,"DialogHide",n.hitch(this,function(){this._dialog._destroyed||this.emit("cancel")}));this._handleCancel=f(l,
"Cancel",n.hitch(this,function(){this.hide()}));this._handleConfirm=f(l,"Confirm",n.hitch(this,function(){this.emit("confirm")}))},show:function(){this._dialog.show()},hide:function(){this._dialog.hide()},destroy:function(){this._handleHide.remove();this._handleCancel.remove();this._handleConfirm.remove();this.hide();this.inherited(arguments)}})})},"anaplan/tabs/View":function(){define("anaplan/keyboard/helpers anaplan/anapediaKeys anaplan/utils/UIHelper anaplan/utils/FormatHelper anaplan/data/Aggregator dojo/_base/declare anaplan/utils/GridletHelper anaplan/data/ModelContentCache anaplan/layout/ManagedContainer anaplan/gridlet/cellmenu/_CellMenuMixin anaplan/toolbar/_ButtonsMixin anaplan/layout/_DashboardMixin anaplan/widgets/Button dijit/form/ToggleButton dijit/Menu dijit/MenuSeparator dijit/PopupMenuItem dijit/Toolbar dijit/ToolbarSeparator anaplan/common/SelectiveAccess anaplan/data/ContextCache anaplan/common/ViewDefinition anaplan/common/PageInfo anaplan/common/ViewSerialNumbers anaplan/constants anaplan/data/ChangeFactory anaplan/data/RequestFactory anaplan/data/ModelContentHelper anaplan/Exceptions anaplan/utils/EntityLongIdHelper anaplan/utils/JsHelper anaplan/utils/SelectionHelper anaplan/utils/TestAttributesHelper anaplan/utils/PromiseUtil anaplan/utils/SubmissionHandler anaplan/view/AddModuleFormula anaplan/view/Compare anaplan/view/Grid anaplan/view/Export anaplan/view/Pivot anaplan/view/SavedViewSaveAs anaplan/widgets/CheckedMenuItem anaplan/widgets/ConfirmationDialog anaplan/widgets/DropDownButton anaplan/widgets/ManageViewsDialog anaplan/widgets/MenuItem anaplan/widgets/ArrowlessMenuItem anaplan/widgets/SearchToolbarButton anaplan/widgets/Tooltip dojo/dom-class anaplan/view/FormulaWindow dojo/_base/lang dojo/_base/array dojo/topic dojo/on dojo/Deferred dojo/string dojo/dom-style dojo/json dojo/i18n!anaplan/nls/gridlet dojo/i18n!anaplan/nls/toolbar dojo/i18n!anaplan/nls/history dojo/i18n!anaplan/nls/view dojo/i18n!anaplan/nls/exportLabels anaplan/keyboard/keyboardEvents".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I,P,J,O,T,Q,ca,Z,X,V,da,S,$,M,aa,W,Y,R,ba,ga,ea,la,ja,na,ma,fa,U,ka,ha,oa,ia){return n([l,d,e,a],{gutters:!1,constructor:function(a){this._content=a.content;this._viewMenuConnections=[];this._tooltips=[];this._selectionCoords=null;this._showTipsOnStartup=a.showTipsOnStartup;this._showBreakbackMarkersOnStartup=a.showBreakbackMarkersOnStartup;this._showQuickSumOnStartup=a.showQuickSumOnStartup;this._globalFormulaEditModule=
a.globalFormulaEditModule||null;a.viewDefinition&&(this._content.viewDefinition=a.viewDefinition,this._content.viewDefinition.globalContextIdentifiers=x.getContextIdentifiers());this._previousView=a.previousView?a.previousView:null},focus:function(){try{var a=this;this._focusTimeout=setTimeout(function(){a._grid&&a._grid._gridlet&&a._grid._gridlet.focus()},100)}catch(c){throw new L.ClientException("anaplan.tabs.View.focus",c);}},getPreviousView:function(){return this._grid?this._grid.getPreviousView():
null},postCreate:function(){this.inherited(arguments);this._confirmationDialog=new X;W.add(this.domNode,"anaplanTabsView")},canDetach:function(){return!this._grid?!0:this._grid._getActiveEditor()instanceof Y?!1:!0},hide:function(a){if(a===v.TIPS){for(var c=0;c<this._tooltips.length;c++)this._tooltips[c].destroy();this._tooltips=[]}a===v.BREAKBACK_MARKERS&&(this._showBreakbackMarkersOnStartup=!1);this.inherited(arguments)},resume:function(a){var c,b;this.inherited(arguments);if(a)if(a.viewDefinition)c=
a.viewDefinition,c.globalContextIdentifiers=x.getContextIdentifiers(),this._grid.revertView({viewDefinition:c});else if(a.content){c=this._grid._model.getViewReference();b=a.content;var d=b.savedViewReference.entityDefaultViewEntityLongId||b.moduleViewReference.entityDefaultViewEntityLongId;if(!(c&&(c?c.entityDefaultViewEntityLongId:null)===d))b.savedViewReference.entityDefaultViewEntityLongId?this._grid.openSubView(d):(c=R.mixin(R.clone(this._content),{viewReference:{entityDefaultViewEntityLongId:this._content.moduleViewReference.entityDefaultViewEntityLongId,
globalContextIdentifiers:x.getContextIdentifiers()}}),this._grid.revertView(c))}},show:function(a){a===v.TIPS&&this._createTooltips();a===v.BREAKBACK_MARKERS&&(this._showBreakbackMarkersOnStartup=!0);this.inherited(arguments)},startup:function(){this._started&&console.warn("startup "+this.id);try{this.inherited(arguments);this._defaultModuleDefinition=R.mixin(R.clone(this._content),{viewReference:{entityDefaultViewEntityLongId:this._content.moduleViewReference.entityDefaultViewEntityLongId}});var a=
this._content.savedViewReference.entityDefaultViewEntityLongId?this._content.savedViewReference.entityDefaultViewEntityLongId:this._content.moduleViewReference.entityDefaultViewEntityLongId;this._definitionToLoad=R.mixin(R.clone(this._content),{viewReference:{entityDefaultViewEntityLongId:a}});var c=a==this._content.savedViewReference.entityDefaultViewEntityLongId,b=this._previousView;null===b&&(b=c?this._defaultModuleDefinition:null);this._grid=new O({region:"center",moduleViewReference:this._defaultModuleDefinition.viewReference,
viewDefinition:this._definitionToLoad.viewDefinition,viewReference:this._definitionToLoad.viewReference,previousView:b,params:this._definitionToLoad.params||{},globalFormulaEditModule:this._globalFormulaEditModule,showBreakbackMarkersOnStartup:this._showBreakbackMarkersOnStartup,showQuickSumOnStartup:this._showQuickSumOnStartup});this.addChild(this._grid);var d=new m({region:"top"});this._toolbar=d;this._toolbar.domNode.classList.add("qa-toolbar");this._toolbar.domNode.classList.add("qa-module-toolbar");
this.addChild(this._toolbar);var e=this._createMenus();ba.forEach(e,function(a){d.addChild(a)});d.addChild(new w);this._blueprintButton=this._createBlueprintButton();this._toolbar.addChild(this._blueprintButton);this._toolbar.addChild(new w);this._insertButton=this._createInsertButton();this._deleteButton=this._createDeleteButton();this._reOrderButton=this._createReOrderButton(!1,!0,!0);this._editButtonsToolbarSeparator=new w({style:"display: none;"});this._toolbar.addChild(this._insertButton);this._toolbar.addChild(this._deleteButton);
this._toolbar.addChild(this._reOrderButton);this._toolbar.addChild(this._editButtonsToolbarSeparator);this._pivotButton=this._createSlicerButton();this._totalGroupingButton=this._createTotalGroupingButton();this._createFilterButton();this._createSortButton();this._compareButton=this._createCompareButton();this._createConditionalFormattingButton();this._viewButtonsToolbarSeparator=new w;this._toolbar.addChild(this._pivotButton);this._toolbar.addChild(this._totalGroupingButton);this._toolbar.addChild(this._filterButton);
this._toolbar.addChild(this._sortButton);this._toolbar.addChild(this._conditionalFormattingButton);this._toolbar.addChild(this._compareButton);this._toolbar.addChild(this._viewButtonsToolbarSeparator);this._toolbar.addChild(this._createChartSelectorMenu());this._chartMenuToolbarSeparator=new w;this._toolbar.addChild(this._chartMenuToolbarSeparator);s.hasEntitlement(v.ENTITLED_FEATURES.DATA_INPUT_UNDO)&&(this._undoButton=this._createUndoButton(),this._toolbar.addChild(this._undoButton),this._toolbar.addChild(new w));
this._copyAcrossButton=this._createCopyAcrossButton();this._copyDownButton=this._createCopyDownButton();this._copyAcrossButtonToolbarSeparator=new w;this._toolbar.addChild(this._copyDownButton);this._toolbar.addChild(this._copyAcrossButton);this._toolbar.addChild(this._copyAcrossButtonToolbarSeparator);this._searchButton=this._createSearchButton();this._toolbar.addChild(this._searchButton);this._confirmationDialog.startup();var h=ea(this._grid,"Reset",R.hitch(this,"_reset")),l=ea(this._grid,"SelectionChange",
R.hitch(this,"_onSelectionChange")),q=ea(this._grid,"Update",R.hitch(this,"_onGridUpdate"));this.own(h,l,q);var f=ga.subscribe("anaplan/formula/startGlobalEdit",R.hitch(this,"_setGlobalFormulaEditModule")),t=ga.subscribe("anaplan/formula/endGlobalEdit",R.hitch(this,"_setGlobalFormulaEditModule"));this.own(t,f);this._showTipsOnStartup&&this.show(v.TIPS);this._showQuickSumOnStartup&&this.show(v.QUICK_SUM);this._showBreakbackMarkersOnStartup&&this.show(v.BREAKBACK_MARKERS);this._isFormulaEditMode()&&
this._disableButtons(this._toolbar);this._bindEvent(this.domNode,ia.ANAPLAN_TOGGLE_BLUEPRINT,R.hitch(this,this.toggleBlueprint));this.own(g.addListener(this.domNode,ia.ANAPLAN_SEARCH,function(){this._searchButton.get("disabled")||(this._searchButton.openDropDown(),this._searchButton.dropDown.focus())}.bind(this)));this._reset()}catch(k){console.error(k)}},uninitialize:function(){this._focusTimeout&&clearTimeout(this._focusTimeout);this._removeViewMenuConnections();for(var a=0;a<this._tooltips.length;a++)this._tooltips[a]&&
(this._tooltips[a].destroy(),this._tooltips[a]=null);this._tooltips=[];this._confirmationDialog&&(this._confirmationDialog.destroy(),this._confirmationDialog=null);this.inherited(arguments)},isCloseableMayPrompt:function(){if(this.isDirty()){var a=new la,c=this.getParent().get("title");k.showDirtyTabsMessage([c]).then(function(){a.resolve(!1)},function(c){console.error("anaplan.tabs.View isClosableMayPrompt",c);a.resolve(!1)});return a.promise}return H.resolve(!0)},_addCurrentViewToDashboard:function(a){try{this._grid&&
this._addViewsToDashboard(a,[{dashboardElementType:v.dashboardElementType.GRID,pageInfo:this._grid._model.getPageInfo(),viewDefinition:this._grid._model.getViewDefinition(),menuToolbarOptions:ma.stringify({showToolbar:!0})}])}catch(c){k.throwClientException(this,c)}},_addSelectedLineItemsToDashboard:function(a){try{this._grid&&(this._grid.getCurrentSelection()?this._getGridController().getLineItemCellViewInfosForDashboardElements().then(R.hitch(this,function(c){this._addViewsToDashboard(a,c)}),function(a){k.showErrorReporter(new L.ClientException("anaplan.tabs.View._addSelectedLineItemsToDashboard: error generating view infos for line items",
a))}):k.showInfoDialog(fa.messagePublishLineItemsToDashboardNoSelection,{title:fa.titlePublishLineItemsToDashboard}))}catch(c){throw new L.ClientException("anaplan.tabs.View._addSelectedLineItemsToDashboard",c);}},_canCopyAcross:function(){var a=this._grid._model;return this.inherited(arguments)&&!!a&&a.isDataView()},_canCopyDown:function(){var a=this._grid._model;return this.inherited(arguments)&&!!a&&a.isDataView()},_canDelete:function(a){var c=N.canDelete(a,this._getGridController().getContext());
return!this._isModuleRowSelected(a)&&c},_canFilter:function(){var a=this._grid._model;return!!a&&a.isDataView()},_canManageConditionalFormatting:function(){var a=this._grid._model;return this.inherited(arguments)&&!!a&&a.isDataView()},_canSort:function(a){var c=this._grid._model;return!!a&&!!c&&c.isDataView()},_checkHeldCellCount:function(a,c){var b=new B(this._grid.getPageInfo());f.checkHeldCellCount(b)?this._showConfirmationDialog(fa.titleHeldCellConfirmation,fa.messageHeldCellConfirmation,a,c):
a()},_createBlueprintButton:function(){var a=new h({iconClass:"anaplanEditorIcon anaplanEditorIconBlueprint",showLabel:!1,"data-anaplan-element-name":"toolbar-button-blueprint"});this._bindClick(a,this.toggleBlueprint);return a},_createBlueprintMenuItem:function(){var a=new Z({iconClass:"anaplanEditorIcon anaplanEditorIconBlueprint",label:U.labelBlueprint,accelKey:g.render(ia.ANAPLAN_TOGGLE_BLUEPRINT)});this._bindClick(a,this.toggleBlueprint);return this._blueprintMenuItem=a},_createChartMenuItems:function(){this._menuItemChartColumn=
this._createColumnChartletMenuItem();this._menuItemChartBar=this._createBarChartletMenuItem();this._menuItemChartLine=this._createLineChartletMenuItem();this._menuItemChartPie=this._createPieChartletMenuItem();this._menuItemChartStackedAbsolute=this._createStackedAbsoluteChartletMenuItem();this._menuItemChartStackedPercentage=this._createStackedPercentageChartletMenuItem();this._menuItemChartBarAbsolute=this._createStackedBarAbsoluteChartletMenuItem();this._menuItemChartBarPercentage=this._createStackedBarPercentageChartletMenuItem();
this._menuItemChartWaterfall=this._createWaterfallChartletMenuItem();this._menuItemChartMap=this._createMapChartMenuItem();this._menuItemChartTimeline=this._createColumnRangeChartletMenuItem();this._menuItemChartCombination=this._createCombinationChartMenuItem();this._menuItemChartFunnel=this._createFunnelChartletMenuItem()},_addItemsToChartMenu:function(a){a.addChild(this._menuItemChartColumn);a.addChild(this._menuItemChartBar);a.addChild(this._menuItemChartLine);a.addChild(this._menuItemChartPie);
a.addChild(this._menuItemChartStackedAbsolute);a.addChild(this._menuItemChartStackedPercentage);a.addChild(this._menuItemChartBarAbsolute);a.addChild(this._menuItemChartBarPercentage);a.addChild(this._menuItemChartWaterfall);a.addChild(this._menuItemChartTimeline);a.addChild(this._menuItemChartMap);a.addChild(this._menuItemChartCombination);a.addChild(this._menuItemChartFunnel)},_createChartsMenu:function(){var a=null,c;try{c=new u,this._createChartMenuItems(),this._addItemsToChartMenu(c),this._chartsMenu=
a=new t({label:U.labelCharts,popup:c}),a.startup()}catch(b){k.throwClientException(this,b)}return a},_createColumnChartletMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorIconColumnChart",label:U.labelColumnChart});this._bindClick(a,function(){this._displayChart(v.chartType.COLUMN,{chartVariation:"column",chartStacking:""})});return a},_createBarChartletMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorIconBarChart",label:U.labelBarChart});this._bindClick(a,
function(){this._displayChart(v.chartType.COLUMN,{chartVariation:"bar",chartStacking:""})});return a},_createStackedAbsoluteChartletMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorIconStackedAbsoluteChart",label:U.labelStackedAbsoluteChart});this._bindClick(a,function(){this._displayChart(v.chartType.COLUMN,{chartVariation:"column",chartStacking:"normal"})});return a},_createStackedPercentageChartletMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorStackedPercentageChart",
label:U.labelStackedPercentageChart});this._bindClick(a,function(){this._displayChart(v.chartType.COLUMN,{chartVariation:"column",chartStacking:"percent"})});return a},_createStackedBarAbsoluteChartletMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorIconStackedBarAbsoluteChart",label:U.labelStackedBarAbsoluteChart});this._bindClick(a,function(){this._displayChart(v.chartType.COLUMN,{chartVariation:"bar",chartStacking:"normal"})});return a},_createStackedBarPercentageChartletMenuItem:function(){var a=
new S({iconClass:"anaplanEditorIcon anaplanEditorIconStackedBarPercentageChart",label:U.labelStackedBarPercentageChart});this._bindClick(a,function(){this._displayChart(v.chartType.COLUMN,{chartVariation:"bar",chartStacking:"percent"})});return a},_createColumnRangeChartletMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorIconColumnRangeChart",label:U.labelColumnRangeChart});this._bindClick(a,function(){this._displayChart(v.chartType.COLUMNRANGE)});return a},_createFunnelChartletMenuItem:function(){var a=
new S({iconClass:"anaplanEditorIcon anaplanEditorIconFunnelChart",label:U.labelFunnelChart});this._bindClick(a,function(){this._displayChart(v.chartType.FUNNEL)});return a},_createWaterfallChartletMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorIconWaterfallChart",label:U.labelWaterfallChart});this._bindClick(a,function(){this._displayChart(v.chartType.WATERFALL,{chartVariation:"",chartStacking:""})});return a},_createDataMenu:function(){var a=null;try{var b=new u({style:"display: none;"});
this._dataMenu=a=new V({label:U.menuData,dropDown:b,"data-anaplan-element-name":"toolbar-button-data"});b.addChild(this._createImportMenuItem());b.addChild(this._createExportMenuItem());b.addChild(new c);b.addChild(this._createTotalsPositionMenuItem());b.addChild(this._createFilterMenuItem());s.hasEntitlement(v.ENTITLED_FEATURES.QUICK_FILTER)?b.addChild(this._createSortMenu()):b.addChild(this._createSortMenuItem());b.addChild(new c);this._breakbackMenu=this._createBreakbackMenu();b.addChild(this._breakbackMenu);
b.addChild(new c);b.addChild(this._createShowHistoryMenuItem());b.addChild(new c);this._drillDownMenuItem=this._createDrillDownMenuItem();b.addChild(this._drillDownMenuItem);this._drillToTransactionMenuItem=this._createDrillToTransactionMenuItem();b.addChild(this._drillToTransactionMenuItem)}catch(d){k.throwClientException(this,d)}return a},_createEditMenu:function(){var a=null;try{var b=new u({style:"display: none;",refocus:!1});this._editMenu=a=new V({label:U.menuEdit,dropDown:b,"data-anaplan-element-name":"toolbar-button-edit"});
s.hasEntitlement(v.ENTITLED_FEATURES.DATA_INPUT_UNDO)&&(this._undoMenuItem=this._createUndoMenuItem(),b.addChild(this._undoMenuItem),b.addChild(new c),this.own(ga.subscribe("anaplan/undoManager/"+this._grid._model.getContainerId()+"/stackSize",R.hitch(this,"_enableUndo"))));this._insertMenuItem=this._createInsertMenuItem();this._deleteMenuItem=this._createDeleteMenuItem();this._moveMenuItem=this._createMoveMenuItem();this._reOrderMenuItem=this._createReOrderMenuItem();this._refreshMenuItem=this._createRefreshMenuItem();
b.addChild(this._insertMenuItem);b.addChild(this._deleteMenuItem);b.addChild(this._moveMenuItem);b.addChild(this._reOrderMenuItem);b.addChild(this._createCopyAcrossMenuItem());b.addChild(this._createCopyDownMenuItem());z.isAuthorized(v.userActions.MAINTAIN_CUSTOM_MODULES)&&(this._addModuleFormulaMenuItem=this._createAddModuleFormulaMenuItem(),b.addChild(this._addModuleFormulaMenuItem),this._addModuleFormulaMenuItem.domNode.style.display="none");b.addChild(new c);b.addChild(this._createSearchMenuItem());
b.addChild(new c);b.addChild(this._refreshMenuItem)}catch(d){k.throwClientException(this,d)}return a},_createFormatMenu:function(){var a=new u({style:"display: none;"}),b=new V({label:U.menuFormat,dropDown:a,"data-anaplan-element-name":"toolbar-button-format"}),d=this._getGridController();this._hideSubMenu=this._createHideSubMenu(fa.messageHideSelection,d);a.addChild(this._hideSubMenu);this._showSubMenu=this._createShowSubMenu(fa.messageShowSelection,d);a.addChild(this._showSubMenu);this._hideMenuItem=
this._createHideMenuItem(fa.messageHideSelection,d,null);a.addChild(this._hideMenuItem);this._showMenuItem=this._createShowMenuItem(fa.messageShowSelection,d,null);a.addChild(this._showMenuItem);this._showAllMenuItem=this._createShowAllMenuItem(d);a.addChild(this._showAllMenuItem);this._menuItemSelectLevels=this._createMenuItemSelectLevels(d,null);a.addChild(this._menuItemSelectLevels);this._menuItemSelectItems=this._createMenuItemSelectItems(d,null);a.addChild(this._menuItemSelectItems);a.addChild(new c);
a.addChild(this._createMenuItemColumnSettings());a.addChild(this._createConditionalFormattingMenuItem());a.addChild(this._createCompareMenuItem());return this._formatMenu=b},_createChartSelectorMenu:function(){var a=null;try{var c=new u({style:"display: none;"});this._chartsIconMenu=a=new V({iconClass:"anaplanEditorIcon anaplanEditorIconColumnChart",title:U.menuChart,dropDown:c,"data-anaplan-element-name":"toolbar-button-chart"});this._createChartMenuItems();this._addItemsToChartMenu(c)}catch(b){k.throwClientException(this,
b)}return a},_createLineChartletMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorIconLineChart",label:U.labelLineChart});this._bindClick(a,function(){this._displayChart(v.chartType.LINE,{chartVariation:null,chartStacking:null})});return a},_createCombinationChartMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorIconCombinationChart",label:U.labelCombinationChart});this._bindClick(a,function(){this._displayChart(v.chartType.COMBINATION)});return a},
_createMapChartMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorIconMapChart",label:U.labelMapChart});this._bindClick(a,function(){this._displayChart(v.chartType.MAP)});return a},_createOpenSavedViewMenu:function(){var a=new t({label:U.labelOpenSavedView,popup:new u});a.startup();return this._openSavedViewMenu=a},_createPieChartletMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorIconPieChart",label:U.labelPieChart});this._bindClick(a,function(){this._displayChart(v.chartType.PIE,
{chartVariation:null,chartStacking:null})});return a},_createSearchMenuItem:function(){var a=new S({accelKey:g.render(ia.ANAPLAN_SEARCH),iconClass:"anaplanEditorIcon anaplanEditorIconSearch",label:U.labelSearch});this._bindClick(a,function(){this._searchButton.openDropDown();this._searchButton.dropDown.focus()});return this._searchMenuItem=a},_createCompareButton:function(){var a=new q({iconClass:"anaplanEditorIcon anaplanEditorIconCompare",showLabel:!1,"data-anaplan-element-name":"toolbar-button-compare"});
this._bindClick(a,R.hitch(this,function(){this._checkHeldCellCount(R.hitch(this,"_displayCompareDialog"))}));return a},_createCompareMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorIconCompare",label:U.labelCompare});this._bindClick(a,function(){this._checkHeldCellCount(R.hitch(this,"_displayCompareDialog"))});return this._compareMenuItem=a},_createDrillDownMenuItem:function(){var a=new $({label:U.labelDrillDown,iconClass:"anaplanEditorIcon anaplanEditorIconDrillDown",accelKey:g.render(ia.ANAPLAN_DRILL_DOWN)});
this._bindClick(a,this._triggerDD);return a},_createDrillToTransactionMenuItem:function(){var a=new $({label:U.labelDrillToTransaction,iconClass:"anaplanEditorIcon anaplanEditorIconDrillToTransaction",accelKey:g.render(ia.ANAPLAN_DRILL_TO_TRANSACTION)}),c=this;this.own(a.on("click",function(){c._getGridController().drillToTransaction()}));return a},_createShowHistoryMenuItem:function(){var a=new u,c=new t({iconClass:"anaplanEditorIcon anaplanEditorIconShowHistory",label:U.labelShowHistory,popup:a}),
b=function(c,b){var d=new S({label:c});a.addChild(d);d.on("Click",R.hitch(this,function(){this._displayHistoryDialog(b)}))};b.call(this,ka.showHistory24hrsLabel,"24");b.call(this,ka.showHistory7dLabel,"7");b.call(this,ka.showHistory30dLabel,"30");b.call(this,ka.showHistoryAllLabel,"ALL");b.call(this,ka.showHistoryDateRangeNoColonLabel,"RANGE");return this._showHistoryMenuItem=c},_createTotalGroupingButton:function(){var a=new q({iconClass:"anaplanEditorIcon anaplanEditorIconTotalGrouping",showLabel:!1,
"data-anaplan-element-name":"toolbar-button-total-grouping"});this._bindClick(a,this._displayTotalGroupingDialog);return a},_createTotalsPositionMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorIconTotalGrouping",label:U.labelTotalsPosition});this._bindClick(a,this._displayTotalGroupingDialog);return this._totalGroupingMenuItem=a},_createAddModuleFormulaMenuItem:function(){var a=new S({label:U.labelAddModuleFormula});this._bindClick(a,this._displayAddModuleFormulaDialog);
return a},_createMenus:function(){var a=[];try{a.push(this._createViewMenu()),a.push(this._createEditMenu()),a.push(this._createFormatMenu()),a.push(this._createDataMenu())}catch(c){k.throwClientException(this,c)}return a},_createPivotMenuItem:function(){var a=new S({iconClass:"anaplanEditorIcon anaplanEditorIconPivot",label:U.labelPivot});this._bindClick(a,function(){this._checkHeldCellCount(R.hitch(this,"_displaySlicerDialog"))});return this._pivotMenuItem=a},_createSavedViewMenuItem:function(a,
c,b,d){a=new S({label:p.escapeHTML(a),style:c?"font-weight: bold;":""});c=this._bindClick(a,function(){d?this._grid.revertView(this._defaultModuleDefinition):this._grid.openSubView(b);this._grid.focus()});this._viewMenuConnections.push(c);return a},_createSearchButton:function(){return new M({widget:this._grid._gridlet,model:this._grid._model,iconClass:"anaplanEditorIcon anaplanEditorIconSearch",label:U.labelSearch+" ("+g.renderAsText(ia.ANAPLAN_SEARCH)+")",showLabel:!1,"data-anaplan-element-name":"toolbar-button-search"})},
_createSlicerButton:function(){var a=new q({iconClass:"anaplanEditorIcon anaplanEditorIconPivot",showLabel:!1,"data-anaplan-element-name":"toolbar-button-pivot"});this._bindClick(a,function(){this._checkHeldCellCount(R.hitch(this,"_displaySlicerDialog"))});return a},_createTooltip:function(a,c){var b=a instanceof S?["after","before"]:["below","above"],d=a.get("label"),e=ha["tooltip"+c.split(" ").join("")];if(!e)return null;a.get("showLabel")||a.set("title","");e=p.searchAndReplacePlaceholders(e);
return new aa({label:e,connectId:[a.domNode],position:b,title:d})},_createTooltips:function(){this._tooltips.length?console.warn("View expected to find no tooltips found "+this._tooltips.length):(this._tooltips.push(this._createTooltip(this._blueprintButton,"BlueprintToggle"),this._createTooltip(this._blueprintMenuItem,"BlueprintToggle"),this._createTooltip(this._importMenuItem,"FileImport"),this._createTooltip(this._exportMenuItem,"FileExport"),this._createTooltip(this._showHistoryMenuItem,"HistoryDataMenu"),
this._createTooltip(this._pivotButton,"Slicer"),this._createTooltip(this._pivotMenuItem,"Slicer"),this._createTooltip(this._copyAcrossButton,"CopyAcross"),this._createTooltip(this._copyAcrossMenuItem,"CopyAcross"),this._createTooltip(this._copyDownButton,"CopyDown"),this._createTooltip(this._copyDownMenuItem,"CopyDown"),this._createTooltip(this._compareButton,"Compare"),this._createTooltip(this._compareMenuItem,"Compare"),this._createTooltip(this._conditionalFormattingButton,"ConditionalFormatting"),
this._createTooltip(this._conditionalFormattingMenuItem,"ConditionalFormatting"),this._createTooltip(this._filterButton,"Filter"),this._createTooltip(this._filterMenuItem,"Filter"),this._createTooltip(this._sortButton,"Sort"),this._createTooltip(this._sortMenuItem,"Sort"),this._createTooltip(this._totalGroupingButton,"Total Grouping"),this._createTooltip(this._totalGroupingMenuItem,"Total Grouping"),this._createTooltip(this._menuItemColumnSettings,"ColumnSettings"),this._createTooltip(this._viewMenu,
z.isAuthorized(v.userActions.CAN_VIEW_TOOLTIP)?"ViewsAdministrator":"Views")),this._reOrderButton&&this._tooltips.push(this._createTooltip(this._reOrderButton,"ReOrder")),this._reOrderMenuItem&&this._tooltips.push(this._createTooltip(this._reOrderMenuItem,"ReOrder")),this._moveMenuItem&&this._tooltips.push(this._createTooltip(this._moveMenuItem,"Move")),this._insertButton&&this._tooltips.push(this._createTooltip(this._insertButton,"Insert")),this._insertMenuItem&&this._tooltips.push(this._createTooltip(this._insertMenuItem,
"Insert")),this._deleteButton&&this._tooltips.push(this._createTooltip(this._deleteButton,"Delete")),this._deleteMenuItem&&this._tooltips.push(this._createTooltip(this._deleteMenuItem,"Delete")),this._tooltips.push(this._createTooltip(this._refreshMenuItem,"Refresh")))},_createViewMenu:function(){var a=null;try{var b=new u({style:"display: none;"}),d=ea(b,"Open",R.hitch(this,"_updateViewMenuItems"));this.own(d);this._viewMenu=a=new V({label:U.menuView,dropDown:b,"data-anaplan-element-name":"toolbar-button-view"});
b.addChild(this._createBlueprintMenuItem());b.addChild(new c);b.addChild(this._createPivotMenuItem());b.addChild(new c);b.addChild(this._createChartsMenu());b.addChild(new c);b.addChild(this._createOpenSavedViewMenu());if(z.isAuthorized(v.userActions.MAINTAIN_CUSTOM_SAVED_VIEWS)){var e=new S({label:U.labelSaveView}),h=ea(e,"Click",R.hitch(this,"_onSaveView"));this.own(h);b.addChild(e);var m=new S({label:U.labelSaveViewAs});this._bindClick(m,function(){this._displaySaveViewAsDialog(ha.titleSaveAs)});
b.addChild(m);var l=new S({label:U.labelManageViews});this._bindClick(l,this._displayManageViewsDialog);b.addChild(l);b.addChild(new c);this._menuItemPublishToDashboard=this._createPublishToDashboardMenu();b.addChild(this._menuItemPublishToDashboard);this._menuItemPublishToDashboard.startup();this._menuItemPublishLineItemsToDashboard=this._createPublishLineItemsToDashboardMenu();b.addChild(this._menuItemPublishLineItemsToDashboard);this._menuItemPublishLineItemsToDashboard.startup();this._menuItemPublishPageSelectorsToDashboard=
this._createPublishPageSelectorsToDashboardMenu();b.addChild(this._menuItemPublishPageSelectorsToDashboard);this._menuItemPublishPageSelectorsToDashboard.startup()}}catch(q){k.throwClientException(this,q)}return a},_displayAddModuleFormulaDialog:function(){try{var a=this,c=K.getEntityLongId(v.ENTITY_TYPE_ENTITY_TYPE_INDEX,v.VERSION_ENTITY_TYPE_INDEX);this._grid._model.getSelectorLabelPage(c,function(){var c=k.getSharedDialog({roles:["module-formula"]});c.set("title",ha.titleAddModuleFormula);c.set("refocus",
!1);var d=a._grid._model.getModuleEntityLongId(),d=new P({moduleEntityLongId:d});c.set("content",d.domNode);a._bindEvent(d,"Close",function(){c.onCancel();a._grid.focus()});a._bindEvent(d,"AddModuleFormula",function(b){a._grid.addModuleFormula(b);c.hide()});c.setHelpContent(b.versionFormula);c.show()})}catch(d){k.showErrorReporter(new L.ClientException(this.id+" _displayAddModuleFormulaDialog",d))}},_displayChart:function(a,c){var b=this._grid._model,d=b.getViewDefinition(),e=R.mixin({chartType:a,
showModuleName:!0,showPageLabels:!0,viewDefinition:d},c||{}),h=this._getGridController().getContext(),m=this._getCurrentSelection(),l=m.getViews(h,!0),q,h=[],f=[];for(q=0;q<l.length;q++){if(!m.isWholeRowSelected()&&!m.isWholeGridSelected())for(var t=l[q].x[1],g=l[q].x[0];g<=t;g++){var s=b.getColumn(g);s.entityLongIds&&s.entityLongIds.length&&h.push(s.entityLongIds[0])}if(!m.isWholeColumnSelected()&&!m.isWholeGridSelected()){t=l[q].y[1];for(g=l[q].y[0];g<=t;g++)s=b.getRow(g),s.entityLongIds&&s.entityLongIds.length&&
f.push(s.entityLongIds[0])}}if(f.length>v.SELECTION_DEFINITION_SIZE_LIMIT||h.length>v.SELECTION_DEFINITION_SIZE_LIMIT)b=ja.substitute(fa.unsupportedOperationDisplayChart,{limit:v.SELECTION_DEFINITION_SIZE_LIMIT}),k.showErrorReporter(new L.UnsupportedOperationException(b),!0);else if(h.length&&(d.columnAxisSpecification=G.removeSelectionFromAxisSpecification(d.columnAxisSpecification),m=ba.map(h,function(a){return[K.entityLongIdToEntityLongIdIdentifier(a)]}),d.columnAxisSpecification=G.addSelectionToAxisSpecification(d.columnAxisSpecification,
"SHOW",m)),f.length&&(d.rowAxisSpecification=G.removeSelectionFromAxisSpecification(d.rowAxisSpecification),m=ba.map(f,function(a){return[K.entityLongIdToEntityLongIdIdentifier(a)]}),d.rowAxisSpecification=G.addSelectionToAxisSpecification(d.rowAxisSpecification,"SHOW",m)),m=v.chartType,a===m.COMBINATION&&!this._handleCombinationChartsSelection(e,h))k.showInfoDialog(fa.messageCombinationChartsHasInvalidSelectionOnRowsOrColumns);else{if(-1<ba.indexOf([m.COLUMNRANGE,m.MAP,m.FUNNEL],a)){if(!b.isLineItemsOnRows()&&
!b.isLineItemsOnColumns()){k.showInfoDialog(fa.messageChartRequiresLineItemSelectionOnRowsOrColumns);return}e.selectedLineItemEntityLongIds=b.isLineItemsOnRows()?f:h;b.isLineItemsOnRows()&&(e.viewDefinition=G.transposeView(e.viewDefinition))}else if(G.axisSpecificationContainsTime(d.rowAxisSpecification)||G.axisSpecificationContainsTime(d.columnAxisSpecification)){this._displayChartWithBestGuessSelectionBasedOnLevel(e);return}ga.publish("anaplan/show",v.POPUP_CHART,e)}},_handleCombinationChartsSelection:function(a,
c){var b=G.axisSpecificationContainsLineItems(a.viewDefinition.rowAxisSpecification),d=G.axisSpecificationContainsLineItemSubset(a.viewDefinition.rowAxisSpecification),e=G.axisSpecificationContainsLineItems(a.viewDefinition.columnAxisSpecification),h=G.axisSpecificationContainsLineItemSubset(a.viewDefinition.columnAxisSpecification);if((e=b||d||e||h)&&h&&!b&&!d)a.selectedLineItemEntityLongIds=c,a.viewDefinition=G.transposeView(a.viewDefinition);return e},_displayChartWithBestGuessSelectionBasedOnLevel:function(a){var c=
a.viewDefinition,b=null,d=!0;if(G.axisSpecificationContainsTime(c.rowAxisSpecification))b=c.rowAxisSpecification,d=!1;else if(G.axisSpecificationContainsTime(c.columnAxisSpecification))b=c.columnAxisSpecification;else{console.warn(this.id,"expected either row or column axis specification to contain time",c);ga.publish("anaplan/show",v.POPUP_CHART,a);return}this._forceLoadTimeLabelPageInContextOfView(R.clone(c),d).then(function(c){if(R.exists("result.viewRequestResults",c)){c=d?c.result.viewRequestResults[0].columnLabelPages[0]:
c.result.viewRequestResults[0].rowLabelPages[0];var e=[];if(c.count)for(var h=c.isAggregate[0],m=c.entityLongIds[0],q=c.styles,l=0;l<c.count;l++)(h[l]===h[0]&&D.isNullOrUndefined(q)||q[0][l]===q[0][0])&&e.push(m[l]);e.length>v.SELECTION_DEFINITION_SIZE_LIMIT?(c=ja.substitute(fa.unsupportedOperationDisplayChart,{limit:v.SELECTION_DEFINITION_SIZE_LIMIT}),k.showErrorReporter(new L.UnsupportedOperationException(c),!0)):(G.axisDefinitionContainsSelection(b.axisDefinition)&&(b=G.removeSelectionFromAxisSpecification(b)),
b=G.addSelectionToAxisSpecification(b,"SHOW",ba.map(e,function(a){return[K.entityLongIdToEntityLongIdIdentifier(a)]})),d?a.viewDefinition.columnAxisSpecification=b:a.viewDefinition.rowAxisSpecification=b,ga.publish("anaplan/show",v.POPUP_CHART,a))}},function(a){console.error("_displayChartWithBestGuessLevelBasedSelectionOnTime",a)})},_forceLoadTimeLabelPageInContextOfView:function(a,c){var b=[{start:0,count:-1}],b={modelId:modelId,viewDefinition:a,columnLabelPageRequests:c?b:[],dataPageRequests:[],
rowLabelPageRequests:c?[]:b,cellSelectorLabelsRequired:!1,pageSelectorLabelsRequired:!1,serialNumbers:new y,viewIndex:-1};return(new I({showPleaseWait:!0})).post([],[b],[]).promise},_displayCompareDialog:function(){var a=R.clone(this._grid.getPageInfo()),c=k.getSharedDialog({roles:["compare"]}),a=new J({pageInfo:a,gridController:this._getGridController()});c.set("title",ha.titleCompare);c.set("refocus",!1);c.set("content",a.domNode);this._bindEvent(a,"BeforeCompare",function(){this._grid.reset()});
this._bindEvent(a,"AfterCompare",function(){c.hide()});this._bindEvent(a,"Cancel",function(){c.onCancel()});this._bindEvent(a,"DialogHide",function(){this._grid.focus()});c.setHelpContent(b.compare);c.show()},_displayExportDialog:function(){try{var a=this._grid._model.getModuleId(),c=this._grid._model.getViewDefinition(),b=this._grid._model.getPageInfo(),d=this._grid.getLineItemId(),e=k.getSharedDialog({roles:["export"]}),h=new T({modelId:modelId,viewDefinition:c,pageInfo:b,lineItemId:d,moduleId:a});
e.set("title",oa.titleExport);e.set("refocus",!1);e.set("content",h.domNode);this._bindEvent(h,"AfterExport",function(){e.hide()});this._bindEvent(h,"Cancel",function(){e.onCancel()});e.show()}catch(m){k.throwClientException(this,m)}},_displayHistoryDialog:function(a){var c=this._getGridController(),b=this._getCurrentSelection();c.beginShowHistory(b,a)},_triggerDD:function(){try{this._getGridController().drillDown(this._getCurrentSelection())}catch(a){throw new L.ClientException("anaplan.tabs.View._triggerDD",
a);}},_post:function(a,c,b){var d=function(a,c){b&&b(a,c)};r.post(a,!1,function(a,b){var e=null;a.result&&a.result.systemActionResults&&a.result.systemActionResults.length?(e=a.result.systemActionResults[0],c&&c(e)):d(a,b)},d)},_canToggleViewDefinitionForGrid:function(){var a=this._grid?!0:!1;try{this._grid&&(a=this._grid._areWeInMiddleOfModuleFormulaEdit())}catch(c){console.error(this.id,"_canToggleViewDefinitionForGrid",c)}finally{return a}},_displayTotalGroupingDialog:function(){try{this._getGridController().beginTotalGrouping()}catch(a){k.showErrorReporter(new L.ClientException("anaplan/tabs/View#_displayTotalGroupingDialog",
a))}},_displayManageViewsDialog:function(){if(this._grid){var a=k.getSharedDialog({roles:["manage-views"]}),c=new da({viewDefinition:this._grid._model.getViewDefinition(),grid:this._grid});a.set("title",ha.titleManageViews);a.set("refocus",!1);a.set("content",c.domNode);a.set("isLayoutContainer",!1);ea(c,"Close",function(){a.onCancel()});ea(c,"DialogHide",function(){this._grid.focus()});ea(c,"ResetDefaultView",R.hitch(this,function(){this._grid.revertView(this._defaultModuleDefinition)}));a.setHelpContent(b.views);
a.show()}},_displayNewDashboardDialog:function(a){try{if(this._grid)if(a===v.dashboardElementType.GRID){var c=this._grid._model.getViewDefinition(),b=this._grid._model.getPageInfo();this._displayNewDashboardDialogWithViewInfos([{dashboardElementType:v.dashboardElementType.GRID,viewDefinition:c,pageInfo:b,menuToolbarOptions:ma.stringify({showToolbar:!0})}])}else a===v.dashboardElementType.CELL?this._getGridController().getLineItemCellViewInfosForDashboardElements().then(R.hitch(this,function(a){this._displayNewDashboardDialogWithViewInfos(a)}),
function(a){k.showErrorReporter(new L.ClientException("anaplan.tabs.View._displayNewDashboardDialog: error generating view infos for line items",a))}):a===v.dashboardElementType.PAGE_SELECTOR&&this._displayNewDashboardDialogWithViewInfos(this._getGridController().getPageSelectorViewInfosForDashboardElements())}catch(d){k.throwClientException(this,d)}},_displaySaveViewAsDialog:function(a){if(this._grid){var c=k.getSharedDialog({roles:["save"]}),d=this._getGridController(),e=G.getModuleEntityLongIdForViewDefinitionOrReference(s,
this._grid._model.getViewDefinition()),d=new ca({workspaceId:workspaceId,modelId:modelId,moduleEntityLongId:e,viewDefinition:d.getDataViewDefinition()});c.set("title",a);c.set("refocus",!1);c.set("content",d.domNode);c.set("isLayoutContainer",!1);this._bindEvent(d,"AfterSave",function(){c.hide()});this._bindEvent(d,"Cancel",function(){c.onCancel()});this._bindEvent(d,"DialogHide",R.hitch(this,function(){this._grid.focus()}));c.setHelpContent(b.views);c.show()}},_displaySlicerDialog:function(){var a=
this,c=this._grid._model.getPageInfo(),d=k.getSharedDialog({roles:["pivot"]}),e=new Q({gridController:this._getGridController(),pageInfo:c});d.set("title",ha.titleSlicer);d.set("refocus",!1);d.set("content",e.domNode);this._bindEvent(e,"AfterSlice",function(){d.hide()});this._bindEvent(e,"Cancel",function(){d.onCancel()});this._bindEvent(d,"Hide",function(){e.destroy();a._grid.focus()});d.setHelpContent(b.pivot);d.show()},_enableBlueprint:function(a){if(this._grid){var c=this._grid._model;a=a?!1:
c.isDataView();var c=this._canToggleViewDefinitionForGrid(),b=R.hitch(this,function(a,c){function b(a,c){this[c]&&na.set(this[c].domNode,"display",a)}a.forEach(b.bind(this,""));c.forEach(b.bind(this,"none"))}),d="_pivotButton _filterButton _sortButton _totalGroupingButton _compareButton _viewButtonsToolbarSeparator _conditionalFormattingButton _chartsIconMenu _copyAcrossButton _copyDownButton _copyAcrossButtonToolbarSeparator".split(" "),e=["_addModuleFormulaMenuItem","_insertButton","_deleteButton",
"_reOrderButton"];a?(b(d,e),this._blueprintMenuItem.set("iconClass","anaplanEditorIcon anaplanEditorIconBlueprint")):(b(e,d),this._blueprintMenuItem.set("iconClass","anaplanEditorIcon anaplanEditorIconBlueprintTicked"));this._blueprintButton.set("checked",!a);this._blueprintMenuItem.set("checked",!a);this._blueprintButton.set("disabled",c);this._blueprintMenuItem.set("disabled",c)}},_enableButtons:function(a){var c=this._grid._model,b=c.isDataView(),d=c.isNestedView(),c=this._grid.getGridController();
this._enableBlueprint();var e=a?!1:!0;if(this._importMenuItem){var h=!z.isAuthorized(v.userActions.CAN_IMPORT_FILES)&&!b;this._importMenuItem.set("disabled",h)}this._showHistoryMenuItem&&this._showHistoryMenuItem.set("disabled",!z.canExport());ba.forEach([this._searchButton,this._searchMenuItem,this._viewMenu,this._editMenu,this._formatMenu,this._dataMenu,this._chartsIconMenu],function(a){a&&a.set("disabled",!1)});ba.forEach([this._pivotButton,this._pivotMenuItem,this._compareButton,this._compareMenuItem,
this._totalGroupingButton,this._totalGroupingMenuItem,this._menuItemPublishToDashboard],function(a){a&&a.set("disabled",!b)});var m=b&&!d&&!e;ba.forEach([this._chartsMenu,this._chartsIconMenu],function(a){a&&a.get("disabled")===m&&a.set("disabled",!m)});this._addModuleFormulaMenuItem&&this._addModuleFormulaMenuItem.set("disabled",b);this._insertButton&&!b&&(this._canInsert(a)&&!this._insertButton.isShowing())&&this._insertButton.show();this._deleteButton&&!b&&(this._canDelete(a)&&!this._deleteButton.isShowing())&&
this._deleteButton.show();d=this._canReOrder(a);this._reOrderButton&&!b&&(d&&!this._reOrderButton.isShowing())&&this._reOrderButton.show();this._reOrderMenuItem&&(d?(this._toggleWidgetDisplayed(this._moveMenuItem,!1),this._toggleWidgetDisplayed(this._reOrderMenuItem,!0)):(this._toggleWidgetDisplayed(this._moveMenuItem,!0),this._toggleWidgetDisplayed(this._reOrderMenuItem,!1)));this._conditionalFormattingButton&&!b&&(this._canManageConditionalFormatting()&&!this._conditionalFormattingButton.isShowing())&&
this._conditionalFormattingButton.show();this._enableCellMenuItems(c,a);this._setToolbarButtonVisibilities(a);this.inherited(arguments)},_enableUndo:function(a){this._undoMenuItem&&this._undoMenuItem.set("disabled",0===a);this._undoButton&&this._undoButton.set("disabled",0===a)},_getCurrentSelection:function(){return!this._grid?null:this._grid.getCurrentSelection()},_getFirstRowSelected:function(a){if(!a)return!1;var c=this._getGridController();return 0===a.getStartRowIndex(c.getContext())},_getGridController:function(){return!this._grid?
null:this._grid.getGridController()},_isDataView:function(){return this._grid&&this._grid._model?this._grid._model.isDataView():!1},_isFormulaEditMode:function(){return null!=this._globalFormulaEditModule},_isModuleRowSelected:function(a){return!this._isDataView()&&this._getFirstRowSelected(a)},_setGlobalFormulaEditModule:function(a){a?(this._disableButtons(this._toolbar),this._enableBlueprint()):this._enableButtons(this._getCurrentSelection());this._globalFormulaEditModule=a},toggleBlueprint:function(){this._checkHeldCellCount(R.hitch(this,
"_toggleBlueprintWithoutCellCheck"))},_toggleBlueprintWithoutCellCheck:function(){var a=this._getGridController();a&&(a=a.toggleBlueprintView(),this._enableBlueprint(a))},_onGridUpdate:function(){try{var a=this._grid._model.getViewDefinition(),c=this._grid._model.getPageInfo();this._sortButton&&this._manageSortCheckBox(a,c);this._filterButton&&this._manageFilterCheckBox(a,c);this._conditionalFormattingButton&&this._manageConditionalFormattingCheckBox(a,c);this._getGridController().checkBreakbackHoldMessages();
this._enableBlueprint()}catch(b){k.showErrorReporter(new L.ClientException("View: _onGridUpdate",b))}},_manageConditionalFormattingCheckBox:function(a,c){var b=new A(a);if(b.getConditionalFormattingDefinition()){this._conditionalFormattingButton.showCheckBox(!0);var d=(new B(c)).getConditionalFormattingInfo(),b=b.getConditionalFormattingIsActive(),d=!(d&&d.hasInvalidRule());this._conditionalFormattingButton.getCheckBox().checked!=b&&this._conditionalFormattingButton.getCheckBox().set("checked",b);
this._conditionalFormattingButton.isValid()!=d&&this._conditionalFormattingButton.setValid(d)}else this._conditionalFormattingButton.setValid(!0),this._conditionalFormattingButton.showCheckBox(!1)},_manageFilterCheckBox:function(a,c){var b=f.getSortAndFilterDefinitions(c),d=b.length;if(0<d){this._filterButton.showCheckBox(!0);for(var e=!1,h=!0,m,v,l,q,t=0;t<d;t++){m=b[t];m.isActive&&(e=!0);m=m.filterConditionInfos;v=m.length;for(l=0;l<v;l++)q=m[l],q.isValid||(h=!1)}this._filterButton.getCheckBox().checked!=
e&&this._filterButton.getCheckBox().set("checked",e);this._filterButton.isValid()!=h&&this._filterButton.setValid(h)}else this._filterButton.setValid(!0),this._filterButton.showCheckBox(!1)},_manageSortCheckBox:function(a,c){var b=f.getSortDefinitions(c),d=b.length;if(0<d){this._sortButton.showCheckBox(!0);for(var e=!1,h=!0,m,v,l,q,t=0;t<d;t++){m=b[t];m.isActive&&(e=!0);m=m.sortRuleInfos;v=m.length;for(l=0;l<v;l++)q=m[l],q.isValid||(h=!1)}this._sortButton.getCheckBox().checked!=e&&this._sortButton.getCheckBox().set("checked",
e);this._sortButton.isValid()!=h&&this._sortButton.setValid(h)}else this._sortButton.setValid(!0),this._sortButton.showCheckBox(!1)},_onSaveView:function(){try{this._getGridController().isSavedView()?this._showConfirmationDialog(ha.titleConfirmSavedViewOverwrite,ha.messageConfirmSavedViewOverwrite,function(){this._saveView()}):this._displaySaveViewAsDialog(ha.titleSave)}catch(a){k.showErrorReporter(new L.ClientException("View._onSaveView",a))}},_onSelectionChange:function(a){this._isFormulaEditMode()||
this._enableButtons(a)},_reset:function(){this._disableButtons(this._toolbar);this._pageInfoSerialNumber=null},_saveView:function(){if(!this._getGridController().isSavedView())throw new L.ClientException("View._saveView: not currently in a Saved View");var a=this._grid._model.getViewDefinition(),c=this._grid._model.getViewReference(),a=[(new E).getCellChangeGenerator().getCellChange({modelId:modelId,noCurrentValue:!0,originalText:null,entityLongIds:[c.entityDefaultViewEntityLongId,v.SYSTEM_PROPERTY_SAVED_VIEW_DEFINITION],
cellText:ma.stringify(a)})],a=C.createRequest(workspaceId,[{workspaceId:workspaceId,cellChanges:a,modelChanges:[]}],[],[]);r.gather(a)},_showConfirmationDialog:function(a,c,b,d){this._confirmationHandles&&ba.forEach(this._confirmationHandles,function(a){a.remove()});this._confirmationDialog.set("title",a);this._confirmationDialog.set("content",c);this._confirmationHandles=[this._bindEvent(this._confirmationDialog,"execute",b)];d&&(a=this._bindEvent(this._confirmationDialog,"Cancel",d),this._confirmationHandles.push(a));
this._confirmationDialog.show()},_removeViewMenuConnections:function(){ba.forEach(this._viewMenuConnections,function(a){a.remove()});this._viewMenuConnections=[]},_updateViewMenuItems:function(){try{this._removeViewMenuConnections();this._viewMenu.closeDropDown(!1);var a=this._openSavedViewMenu.popup;a.destroyDescendants();var c=null,c=this._grid?this._grid._model.getViewDefinition()||this._grid._model.getViewReference():this._defaultModuleDefinition.viewDefinition||this._defaultModuleDefinition.viewReference,
b=G.getModuleEntityLongIdForViewDefinitionOrReference(s,c),d=s.getViewsInfo(),e=d.moduleEntityLongIds,h=d.viewsLabelPage,c=null;this._grid&&(c=this._grid._model.getViewReference());var m=s.getModulesLabelPage(),v=ba.indexOf(m.entityLongIds[0],b),l=c&&c.entityDefaultViewEntityLongId==b,q=this._createSavedViewMenuItem(m.labels[0][v],l,b,!0);a.addChild(q);for(m=0;m<h.count;m++)if(e[m]==b){var f=h.entityLongIds[0][m],l=c&&c.entityDefaultViewEntityLongId==f,t=this._createSavedViewMenuItem(h.labels[0][m],
l,f);a.addChild(t)}this._dashboardsList&&this._updateDashboardsList()}catch(g){k.throwClientException(this,g)}},_bindClick:function(a,c,b){return this._bindEvent(a,"Click",c,b)},_bindEvent:function(a,c,b,d){a=ea(a,c,R.hitch(this,function(){b.apply(this,arguments)}));this.own(a);return a}})})},"anaplan/settings/Time2/Forms/Widgets/FiscalYearDayInWeekSelect":function(){define(["dijit/form/Select","dojo/_base/declare","dojo/data/ObjectStore","dojo/i18n!dojo/cldr/nls/gregorian","dojo/store/Memory"],function(g,
b,k,p,r){return b(g,{sortByLabel:!1,labelType:"text",required:!0,startup:function(){this.refreshValues();this.inherited(arguments)},refreshValues:function(){var b=this.value,f=new k({objectStore:this._getData()});this.set("store",f);b&&this.set("value",b)},_getData:function(){for(var b=[],f=0;7>f;f++)b.push({id:f+1,label:p["days-format-abbr"][f]});return new r({data:b})}})})},"anaplan/view/BulkCopy":function(){define("anaplan/data/Aggregator dojo/_base/declare dojo/on dojo/_base/lang anaplan/data/RequestFactory anaplan/Exceptions anaplan/layout/StackContainer anaplan/utils/UIHelper anaplan/view/BulkCopy/_MainView anaplan/view/Confirmation anaplan/view/Information anaplan/widgets/Dialog2 anaplan/widgets/PleaseWait dojo/i18n!anaplan/nls/bulkCopy".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h){return b([f,d.ContentMixin],{constructor:function(a){this._workspaceId=a.workspaceId;this._modelId=a.modelId},onBeforeDialogHide:function(){var a=!0;this.selectedChildWidget===this._mainView?a=this._mainView.getCanClose():this._selectedChildWidget===this._pleaseWaitView&&(this._copyCompleted||(a=!1));return a},onAfterCopy:function(){},onCancel:function(){},postCreate:function(){this.inherited(arguments);this._mainView=new l({workspaceId:this._workspaceId,modelId:this._modelId});
this._pleaseWaitView=new q;this._confirmationView=new a({heading:h.labelConfirmationHeading});this._informationView=new e;this.addChild(this._mainView);this.addChild(this._pleaseWaitView);this.addChild(this._confirmationView);this.addChild(this._informationView);this.own(k(this._mainView,"Cancel",p.hitch(this,"_onCancel")),k(this._mainView,"Ok",p.hitch(this,"_onInitiateCopy")),k(this._confirmationView,"Confirm",p.hitch(this,"_onConfirmCopy")),k(this._confirmationView,"Cancel",p.hitch(this,"_onCancelCopy")),
k(this._informationView,"Ok",p.hitch(this,"_onAfterCopy")),k(this._informationView,"HelpChange",p.hitch(this,"onHelpChange")))},_doCopy:function(){try{var a=this,c=this._copyInfo,b=r.createRequest(this._workspaceId,[],[],[{actionId:"BULK_DATA_COPY",params:{modelId:this._modelId,fromEntityLongId:c.sourceEntityLongId,toEntityLongId:c.targetEntityLongId}}]);g.post(b,!1,function(c){try{if(c.result.systemActionResults&&c.result.systemActionResults.length){var b=c.result.systemActionResults[0].totalCellsCopied,
d=h.messageNoCellsCopied,d=1<b?h.messageTotalCellsCopied.replace(/\$\{totalCellsCopied\}/,b):1===b?h.messageOneCellCopied:h.messageNoCellsCopied;a._informationView.set("message",d);a.selectChild(a._informationView)}else throw new n.ClientException("anaplan.view.BulkCopy: _doCopy has no system action results");}catch(e){a._onError(new n.ClientException("anaplan.view.BulkCopy: _doCopy (load)",e,{widgetId:a.id}))}},function(c,b){try{if(n.isException(c))a._onError(c);else{var d={};b&&(b.xhr&&b.xhr.status)&&
(d.httpStatus=b.xhr.status,d.httpStatusText=b.xhr.statusText);c.error?a._onError(new n.ServerException(c.error,null,d)):!b||!b.xhr||!b.xhr.status?a._onError(new n.TransportException("anaplan.view.BulkCopy: _doCopy (No HTTP status response)")):(d.response=c,a._onError(new n.ClientException("anaplan.view.BulkCopy: _doCopy (Unexpected failure)",null,d)))}}catch(e){a._onError(new n.ClientException("anaplan.view.BulkCopy: _doCopy (error)",e,{widgetId:a.id}))}})}catch(d){s.throwClientException(this,d)}},
_onAfterCopy:function(){this._copyCompleted=!0;g.gather();this.onAfterCopy()},_onCancel:function(){this.onCancel()},_onCancelCopy:function(){this.selectChild(this._mainView)},_onConfirmCopy:function(){this.selectChild(this._pleaseWaitView);this._doCopy()},_onError:function(a){s.showErrorReporter(a,a instanceof n.ServerException)},_onInitiateCopy:function(a,c){this._copyInfo={sourceEntityLongId:a.entityLongId,targetEntityLongId:c.entityLongId};var b=h.labelConfirmationMessage.replace(/\$\{source\}/g,
a.label).replace(/\$\{target\}/g,c.label);this._confirmationView.set("message",b);this.selectChild(this._confirmationView)}})})},"anaplan/widgets/SearchBarFull":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/sniff dijit/_WidgetBase dijit/popup anaplan/widgets/SearchBar anaplan/widgets/SearchBarResults".split(" "),function(g,b,k,p,r,n,f,s,l,a){n.add("new-ie",function(){return n("ie")||-1<navigator.userAgent.indexOf("Trident")});return g([f],{baseClass:"anaplanFullSearchBar",
disabled:!1,updateOnKeyUp:!0,cachedResults:null,store:null,blockClose:!1,buildRendering:function(){this.domNode=k.create("div")},postCreate:function(){this.inherited(arguments);this.searchBar=new l({disabled:this.disabled,updateOnKeyUp:this.updateOnKeyUp});this.dropDown||(this.dropDown=new a);this.own(this.searchBar,this.dropDown);this.searchBar.on("cancel",b.hitch(this,"_onPopupCancel"));this.searchBar.on("focusout",b.hitch(this,"_closePopup"));this.searchBar.on("move_up",b.hitch(this.dropDown,"moveUp"));
this.searchBar.on("move_down",b.hitch(this.dropDown,"moveDown"));this.searchBar.on("make_selection",b.hitch(this.dropDown,"select"));this.searchBar.on("search",b.hitch(this,"_filterResults"));this.searchBar.on("focusin",b.hitch(this,"_onFocus"));this.dropDown.on("selection",b.hitch(this,function(a){this.emit("selection",a)}));this.domNode.appendChild(this.searchBar.domNode)},startup:function(){this._started||(this.inherited(arguments),this.dropDown.startup(),this.searchBar.startup())},destroy:function(){this.inherited(arguments);
this._closePopup()},_showPopup:function(a){this.searchBar.hasFocus()&&(this.cachedResults=a,this.dropDown.display(a),this.searchBar.complete(),s.open({parent:this,popup:this.dropDown,around:this.domNode,orient:["below-alt"],padding:{y:10},onExecute:b.hitch(this,"_closePopup"),onCancel:b.hitch(this,"_onPopupCancel")}),n("new-ie")&&(this.dropDown.domNode.parentNode.style.overflowY="auto",this.own(r(this.dropDown.domNode.parentNode,"mousedown",b.hitch(this,function(a){this.blockClose=p.contains(a.target,
"dijitPopup");this.searchBar.preventBlur()})))))},_onFocus:function(a){this.cachedResults&&!this.searchBar.silentFocus()&&(this.deferredOpen=this.defer(function(){this._showPopup(this.cachedResults)},200))},_onPopupCancel:function(){this.cachedResults=null;this._closePopup()},_closePopup:function(){this.blockClose?this.blockClose=!1:(this.deferredOpen&&void 0!==this.deferredOpen.remove&&this.deferredOpen.remove(),s.close(this.dropDown))},_filterResults:function(a){null!==this.store&&(a=this.store.query(a.value),
void 0!==a.then?a.then(b.hitch(this,"_showPopup")):this._showPopup(a))}})})},"anaplan/validators/UserListValidator":function(){define("anaplan/api/service anaplan/constants anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/utils/EntityLongIdHelper dojo/_base/array dojo/_base/declare dojo/i18n!anaplan/nls/userListValidator dojo/string".split(" "),function(g,b,k,p,r,n,f,s,l){return f(null,{name:"UserListValidator",constructor:function(){this._resetConfirmationFlags()},confirm:function(a){var e=
{};a=a.getCellUpdates();if(!a.isEmpty()){a=a.getItemsArray();for(var d=a.length,l,h=0;h<d;h++)l=a[h],this._confirmSwitchExceptionUser&&-1!==n.indexOf(l.entityLongIds,b.SYSTEM_PROPERTY_USER_AUTHENTICATION_SSO)?("true"===l.originalText!==("true"===l.cellText)&&"false"===l.cellText&&(e[s.messageConfirmActivateExceptionUser]="messageConfirmActivateExceptionUser"),"false"===l.originalText!==("false"===l.cellText)&&"true"===l.cellText&&(e[s.messageConfirmDeactivateExceptionUser]="messageConfirmDeactivateExceptionUser")):
-1!==n.indexOf(l.entityLongIds,b.SYSTEM_PROPERTY_USER_MODEL_ROLE)&&l.cellText===b.roles.NO_ACCESS&&(e[s.contentConfirmSetRoleToNoAccess]="contentConfirmSetRoleToNoAccess")}return e},setDisabledConfirmationKeys:function(a){this._resetConfirmationFlags();a&&(-1!==n.indexOf(a,this.name+".messageConfirmActivateExceptionUser")&&(this._confirmSwitchExceptionUser=!1),-1!==n.indexOf(a,this.name+".messageConfirmDeactivateExceptionUser")&&(this._confirmSwitchExceptionUser=!1))},_resetConfirmationFlags:function(){this._confirmSwitchExceptionUser=
!0}})})},"anaplan/tabs/Settings/Header":function(){define(["anaplan/utils/UIHelper","dijit/_TemplatedMixin","dijit/_WidgetBase","dojo/_base/declare","dojo/text!anaplan/templates/Tabs/Settings/Header.html"],function(g,b,k,p,r){return p("anaplan.tabs.Settings.Header",[k,b],{baseClass:"modelSettingsHeadline",templateString:r,setHeader:function(b){g.setText(this._header,b)}})})},"anaplan/widgets/SubsetSelector":function(){define("anaplan/utils/UIHelper anaplan/data/Aggregator anaplan/utils/EntityLongIdHelper dojo/_base/event dijit/_Contained dijit/_Templated dijit/_WidgetBase anaplan/common/ViewSerialNumbers anaplan/constants anaplan/data/ViewRequestRequestGenerator anaplan/Exceptions anaplan/utils/LabelPageHelper anaplan/utils/SelectorFactory dojo/i18n!dijit/nls/loading dojo/i18n!anaplan/nls/bulkDelete dojo/text!anaplan/templates/SubsetSelector.html dojo/_base/declare dojo/dom-geometry dojo/dom-class dojo/dom-construct dojo/_base/lang dojo/_base/array dojo/window dojo/query dojo/has anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y){return t([f,n,r],{baseClass:"subsetSelector",templateString:c,widgetsInTemplate:!0,constructor:function(a){try{this._listSize=a.hasOwnProperty("listSize")?a.listSize:-1;this._listLabel=a.listLabel;this._treeLabel=a.treeLabel;this._selectionListLabel=a.selectionListLabel;this._deselectLabel=a.deselectLabel;this._selectedItems=a.selectedItems||[];this._rowLabelPage=a.labelPage||null;this._viewDefinition=a.viewDefinition||null;this._model=a.model||
null;this._dimensionIdentifier=a.dimensionIdentifier;this._actions=a.actions||{};this._filter=a.filter||null;this._selectionFilter=a.selectionFilter||null;this._readOnly=a.readOnly;var c=g.getListSizeLimit();this._loadList=this._viewDefinition&&-1!==this._listSize&&this._listSize<=c;this._treeSelection=null;this._selectedEntityLongIdMap={};this._selectedModuleEntityLongIds=[];this._pageInfo=null;this._serialNumbers=new s;this._viewIndex=-1}catch(b){g.throwClientException(this,b)}},error:function(a){console.error("anaplan.widgets.SubsetSelector: error",
a)},getSelectedItems:function(){return this._selectedItems},onCancel:function(){},onDelete:function(){},postCreate:function(){try{this.inherited(arguments),g.setText(this.treeLabel,this._treeLabel),g.setText(this.selectionListLabel,this._selectionListLabel),g.setText(this.loadingLabel,h.loadingState),this._actions.selectButton?this.selectButton.set("label",this._actions.selectButton):this.selectButton.domNode.style.display="none",this._actions.deselectButton?this.deselectButton.set("label",this._actions.deselectButton):
this.deselectButton.domNode.style.display="none",this._actions.selectAllButton?this.selectAllButton.set("label",this._actions.selectAllButton):this.selectAllButton.domNode.style.display="none",this._actions.selectAllLeafItemsButton?this.selectAllLeafItemsButton.set("label",this._actions.selectAllLeafItemsButton):this.selectAllLeafItemsButton.domNode.style.display="none",this._actions.selectDescendantsButton?this.selectDescendantsButton.set("label",this._actions.selectDescendantsButton):this.selectDescendantsButton.domNode.style.display=
"none",this._actions.deselectAllButton?this.deselectAllButton.set("label",this._actions.deselectAllButton):this.deselectAllButton.domNode.style.display="none",this._actions.moveUpButton?this._readOnly&&this.moveUpButton.set("disabled",!0):this.moveUpButton.domNode.style.display="none",this._actions.moveDownButton?this._readOnly&&this.moveDownButton.set("disabled",!0):this.moveDownButton.domNode.style.display="none",this._actions.arrowIndicator&&w.add(this.arrowIndicatorDiv,"arrowIndicator")}catch(a){g.throwClientException(this,
a)}},resize:function(a){try{a&&m.setMarginBox(this.domNode,a);this.inherited(arguments);var c=m.getMarginSize(this.domNode),b={w:(c.w-80)/2};y(".innerContainer",this.domNode).forEach(function(a){m.setMarginBox(a,b)});var d=m.getMarginBox(this.treeLabel),e=c.h-d.h;m.setMarginBox(this.treeContainer,{h:e});m.setMarginBox(this.selectionListContainer,{h:e});m.setMarginBox(this.buttonPanel,{w:80,h:e,t:0,l:b.w});if(this._tree){var h=m.getContentBox(this.treeContainer);this._tree.resize({w:h.w,h:h.h>e?e:
h.h})}if(this.selectionListContainer){var l=m.getContentBox(this.selectionListContainer),q=l.h>e?e:l.h;this.selectionListContainer.style.height=q+"px";this.selectionListContainerWrapper.style.height=q+"px"}}catch(f){g.throwClientException(this,f)}},startup:function(){try{this.inherited(arguments),this._loadList?(b.addObserver(this),this._isObserver=!0,b.gather()):this._rebuild()}catch(a){g.throwClientException(this,a)}},uninitialize:function(){try{this._isObserver&&(b.deleteObserver(this),this._isObserver=
!1),this._tree&&(this._tree.destroy(),this._tree=null),this.inherited(arguments)}catch(a){g.throwClientException(this,a)}},update:function(a){var c,b;try{x.isArray(a)&&(a=a[0]),b=this._serialNumbers,c=this._serialNumbers=new s(a.serialNumbers),this._pageInfo=a.pageInfo,this._viewIndex=a.viewIndex,b.rowAxisSerialNumber!==c.rowAxisSerialNumber&&(1!==a.rowLabelPages.length&&console.warn("anaplan.widgets.SubsetSelector; "+a.rowLabelPages.length+" row label pages; expected 1"),this._rowLabelPage=a.rowLabelPages[0],
this._initialized||this._rebuild())}catch(d){g.throwClientException(this,d)}},view:function(){return(new a(workspaceId)).getRequest({modelId:modelId,viewDefinition:this._viewDefinition,pageRequests:[{startRow:0,startColumn:0,rowCount:this._initialized?1:-1,columnCount:this._initialized?1:-1}],cellSelectorLabelsRequired:!1,pageSelectorLabelsRequired:!1,serialNumbers:this._serialNumbers,viewIndex:this._viewIndex})},_addSelectionItem:function(a){try{var c=this._createItem(a);if(c){if(this._canAddItemToSelection(c)){var b=
this,d=this._getSelectionItemId(a),e=z.create("div",{id:d,onclick:function(){b._selectSelectionItem(a)}}),h=z.create("div",{"class":"selectedItemLabel",onclick:function(c){b._selectSelectionItem(a);p.stop(c)}},e),m=z.create("div",{"class":"selectedItemRemoveLink"},e),q=z.create("a",{href:"#",disabled:this._readOnly},m);z.create("div",{style:"clear: both;"},e);g.setText(h,c.label);g.setText(q,this._deselectLabel);z.place(e,this.selectionListContainer.firstChild);this._selectedEntityLongIdMap[a]||(this._selectedItems.push(c),
this._selectedEntityLongIdMap[a]=!0,k.getEntityTypeIndex(a)===l.MODULE_ENTITY_TYPE_INDEX&&this._selectedModuleEntityLongIds.push(a));B.scrollIntoView(e)}}else console.warn("anaplan.widgets.SubsetSelector: item not found with entityLongId "+a)}catch(f){g.throwClientException(this,f)}},_addSelectionItems:function(a){var c=this;try{var b,d,e;0<a.length?this._showPleaseWaitDialog():this._hidePleaseWaitDialog();var h=function(a){var m=a.length;for(d=0;d<m;d++){if(100===d){setTimeout(function(){h(a.slice(d))},
25);break}a[d]&&(x.isObject(a[d])?(b=a[d],e=b.entityLongId):(e=a[d],b=c._createItem(e)),c._addSelectionItem(e))}};h(a)}catch(m){g.throwClientException(this,m)}finally{c._enableButtons(),c._hidePleaseWaitDialog()}},_canAddItemToSelection:function(a){try{return!a?!1:!this._selectionFilter?!0:this._selectionFilter(a)}catch(c){g.throwClientException(this,c)}},_createItem:function(a){try{if(this._rowLabelPage){var c=this._rowLabelPage,b=A.indexOf(c.entityLongIds[0],a);if(-1!==b)return{canDelete:c.canDelete[0][b],
isItemEditable:c.isItemEditable[0][b],canInsertSibling:c.canInsertSibling[0][b],entityId:c.entityIds[0][b],entityLongId:c.entityLongIds[0][b],isAggregate:c.isAggregate[0][b],label:c.labels[0][b]}}}catch(d){g.throwClientException(this,d)}return null},_createTree:function(){try{this._tree&&this._tree.destroy();var a=this;this.loading.style.display="none";var c=m.getContentBox(this.treeContainer),b=this._filterLabelPage(this._rowLabelPage),h=d.getOrderedParentChildArray(b),l=d.getItems(h,{});this._tree=
q.createSelector({widgetContainer:this.treeContainer,labelPage:b,items:l,style:"width: "+c.w+"px; height: "+c.h+"px;",onSelectionChange:function(c){try{a._treeSelection=c,null!==c&&(!a._readOnly&&!a._selectedEntityLongIdMap[c]?a._addSelectionItem(c):a._scrollToSelectionItem(c))}catch(b){g.showErrorReporter(new e.ClientException("anaplan.widgets.SubsetSelector: _createTree (onSelectionChange)",b))}}})}catch(f){g.throwClientException(this,f)}},_filterLabelPage:function(a){try{if(!this._filter)return a;
for(var c={start:0,count:0,nestingCount:1,showLabel:null,entityLongIds:[[]],entityIds:[[]],entityCodes:[[]],labels:[[]],styles:[[]],treeLineSequences:[[]],parentEntityLongIds:[[]],isAggregate:[[]],isEditable:[[]],canDelete:[[]],isItemEditable:[[]],canInsertSibling:[[]],span:[[]]},b=a.count-1;0<=b;--b){var d=this._filter({entityLongId:a.entityLongIds[0][b],entityId:a.entityIds[0][b],entityCode:a.entityCodes[0][b],label:a.labels[0][b],style:a.styles[0][b],treeLineSequence:a.treeLineSequences[0][b],
parentEntityLongId:a.parentEntityLongIds[0][b],isAggregate:a.isAggregate[0][b],isEditable:a.isEditable[0][b],canDelete:a.canDelete[0][b],isItemEditable:a.isItemEditable[0][b],canInsertSibling:a.canInsertSibling[0][b],span:a.span[0][b]});d&&(c.entityLongIds[0].unshift(d.entityLongId),c.entityIds[0].unshift(d.entityId),c.entityCodes[0].unshift(d.entityCode),c.labels[0].unshift(d.label),c.styles[0].unshift(d.style),c.treeLineSequences[0].unshift(d.treeLineSequence),c.parentEntityLongIds[0].unshift(d.parentEntityLongId),
c.isAggregate[0].unshift(d.isAggregate),c.isEditable[0].unshift(d.isEditable),c.canDelete[0].unshift(d.canDelete),c.isItemEditable[0].unshift(d.isItemEditable),c.canInsertSibling[0].unshift(d.canInsertSibling),c.span[0].unshift(d.span),++c.count)}return c}catch(e){g.throwClientException(this,e)}},_selectAll:function(){try{this._disableButtons(),this._addSelectionItems(this._rowLabelPage.entityLongIds[0])}catch(a){g.throwClientException(this,a)}},_selectDescendants:function(a,c){var b=this;this._recurseCount++;
this._selectedEntityLongIdMap[a.entityLongId]||c.push(a.entityLongId);var d=function(a){for(var e=a.length,h=0;h<e;h++){if(100===h){setTimeout(function(){d(a.slice(h))},25);return}b._selectDescendants(a[h],c)}b._recurseCount--;b._recurseCount||b._addSelectionItems(c)};d(a.children)},_disableButtons:function(){try{this.selectAllButton.set("disabled",!0),this.selectAllLeafItemsButton.set("disabled",!0),this.selectDescendantsButton.set("disabled",!0),this.deselectAllButton.set("disabled",!0),this.okButton&&
this.okButton.set("disabled",!0),this.cancelButton&&this.cancelButton.set("disabled",!0)}catch(a){g.throwClientException(this,a)}},_enableButtons:function(){try{this._loadList&&(this.selectAllButton.set("disabled",!1),this.selectAllLeafItemsButton.set("disabled",!1),this.selectDescendantsButton.set("disabled",!1),this.deselectAllButton.set("disabled",!1))}catch(a){g.throwClientException(this,a)}},_getAllNodes:function(){this._allNodes||(this._allNodes={},d.getItems(this._getOrderedParentChildArray(),
this._allNodes));return this._allNodes},_getOrderedParentChildArray:function(){this._orderedParentChildArray||(this._orderedParentChildArray=d.getOrderedParentChildArray(this._rowLabelPage));return this._orderedParentChildArray},_getSelectionItemId:function(a){var c=null;try{c=this.id+":"+a}catch(b){g.throwClientException(this,b)}return c},_hidePleaseWaitDialog:function(){try{this._pleaseWaitTimeout&&clearTimeout(this._pleaseWaitTimeout),g.hidePleaseWaitDialog()}catch(a){g.throwClientException(this,
a)}},_onCancelButtonClick:function(a){this.onCancel()},_onSelectAllButtonClick:function(a){this._selectAll()},_onSelectDescendantsButtonClick:function(a){try{if(this._treeSelection&&this._rowLabelPage){this._disableButtons();var c=this._getAllNodes()[this._treeSelection];this._showPleaseWaitDialog();this._recurseCount=0;this._selectDescendants(c,[])}else this._selectAll()}catch(b){g.showErrorReporter(new e.ClientException("anaplan.widgets.SubsetSelector: _onSelectDescendantsButtonClick",b,{widgetId:this.id},
a))}},_onSelectAllLeafItemsButtonClick:function(a){try{this._rowLabelPage&&this._rowLabelPage.count&&(this._disableButtons(),this._showPleaseWaitDialog(),this._selectLeafItems())}catch(c){g.showErrorReporter(new e.ClientException("anaplan.widgets.SubsetSelector: _onSelectAllLeafItemsButtonClick",c,{widgetId:this.id},a))}},_onSelectButtonClick:function(){},_onDeselectAllButtonClick:function(a){this._disableButtons();this._removeSelectionItems();this._enableButtons()},_onDeselectButtonClick:function(){},
_onSelectionListContainerClick:function(a){try{var c=a.target;if("A"===c.nodeName&&!this._readOnly){var b=c.parentNode.parentNode.id.split(":");this._removeSelectionItem(Number(b[1]))}}catch(d){g.showErrorReporter(new e.ClientException("anaplan.widgets.SubsetSelector: _onSelectionListContainerClick",d,{widgetId:this.id},a))}},_onMoveUpButtonClick:function(a){try{for(var c=this._selectedItems,b=c.length,d,h=null,m=0;m<b;++m){d=c[m];var l=document.getElementById(this._getSelectionItemId(d.entityLongId));
d.entityLongId==this._selectedEntityLongId&&(h&&m)&&l&&(z.place(l,h,"before"),c[m]=c[m-1],c[m-1]=d);h=l}}catch(q){g.showErrorReporter(new e.ClientException("anaplan.widgets.SubsetSelector: _onMoveUpButtonClick",q,{widgetId:this.id},a))}},_onMoveDownButtonClick:function(a){try{for(var c=this._selectedItems,b=c.length,d,h=null,m=b-1;0<=m;--m){d=c[m];var l=document.getElementById(this._getSelectionItemId(d.entityLongId));d.entityLongId==this._selectedEntityLongId&&(h&&m<b-1)&&l&&(z.place(l,h,"after"),
c[m]=c[m+1],c[m+1]=d);h=l}}catch(q){g.showErrorReporter(new e.ClientException("anaplan.widgets.SubsetSelector: onMoveDownButtonClick",q,{widgetId:this.id},a))}},_rebuild:function(){try{if(this._loadList||!this._viewDefinition)this._createTree();else{this.loading.style.display="none";var a=z.create("div",{"class":"warningMessage"},this.treeContainer);g.setText(a,u.labelNoSelector);this.selectAllButton.set("disabled",!0);this.selectAllLeafItemsButton.set("disabled",!0);this.selectDescendantsButton.set("disabled",
!0);this.deselectAllButton.set("disabled",!0)}var c=this._selectedItems;this._selectedItems=[];for(var b=c.length;b--;)this._canAddItemToSelection(c[b])||c.splice(b,1);this._addSelectionItems(c);this.resize();this._initialized=!0}catch(d){g.throwClientException(this,d)}},_removeSelectionItem:function(a){try{var c=document.getElementById(this._getSelectionItemId(a));c&&z.destroy(c);for(var b=this._selectedItems,d=b.length,e,c=0;c<d;c++)if(e=b[c],e.entityLongId==a){b.splice(c,1);delete this._selectedEntityLongIdMap[a];
if(k.getEntityTypeIndex(a)===l.MODULE_ENTITY_TYPE_INDEX){var h=A.indexOf(this._selectedModuleEntityLongIds,a);-1!==h&&this._selectedModuleEntityLongIds.splice(h,1)}this.okButton&&this.okButton.set("disabled",0===this._selectedItems.length);break}}catch(m){g.throwClientException(this,m)}},_removeSelectionItems:function(){try{this._selectedItems=[],this._selectedEntityLongIdMap={},this._selectedModuleEntityLongIds=[],this.selectionListContainer.replaceChild(document.createElement("div"),this.selectionListContainer.firstChild)}catch(a){g.throwClientException(this,
a)}},_scrollToSelectionItem:function(a){try{var c=document.getElementById(this._getSelectionItemId(a));c&&B.scrollIntoView(c)}catch(b){g.throwClientException(this,b)}},_selectLeafItems:function(){try{var a=this,c=[],b=this._getAllNodes(),d=this._getOrderedParentChildArray(),e=this._selectedEntityLongIdMap,h=function(d){for(var m=d.length,l,q=0;q<m;q++){if(100===q){setTimeout(function(){h(d.slice(q))},25);return}l=d[q].entityLongId;0===b[l].children.length&&!e[l]&&c.push(l)}a._addSelectionItems(c)};
h(d)}catch(m){g.throwClientException(this,m)}},_selectSelectionItem:function(a){try{for(var c=this._selectedItems,b=c.length,d,h=0;h<b;h++){d=c[h];var m=document.getElementById(this._getSelectionItemId(d.entityLongId));m&&(d.entityLongId==a?w.toggle(m,"selected"):w.remove(m,"selected"))}this._selectedEntityLongId=a}catch(l){g.showErrorReporter(new e.ClientException("anaplan.widgets.SubsetSelector: _selectSelectionItem",l,{widgetId:this.id},event))}},_showPleaseWaitDialog:function(){try{this._pleaseWaitTimeout&&
clearTimeout(this._pleaseWaitTimeout),this._pleaseWaitTimeout=setTimeout(function(){g.showPleaseWaitDialog()},2E3)}catch(a){g.throwClientException(this,a)}}})})},"anaplan/view/FormulaBar":function(){define(["dojo/_base/declare","anaplan/view/_Editor","dojo/text!anaplan/templates/FormulaBar.html","dijit/form/ToggleButton","anaplan/widgets/Button"],function(g,b,k){return g("anaplan.view.FormulaBar",[b],{baseClass:"formulaBar",templateString:k})})},"anaplan/view/FormulaEditor":function(){define("dojo/_base/declare anaplan/view/_Editor dijit/_Container dijit/layout/utils anaplan/widgets/Button anaplan/Exceptions anaplan/view/_editor/_Plugin anaplan/view/_editor/plugins/Help anaplan/utils/UIHelper dojo/_base/lang dojo/dom-geometry dojo/text!anaplan/templates/FormulaEditor.html anaplan/widgets/Button dijit/form/ToggleButton".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d){return g([b,k],{baseClass:"formulaEditor",editMode:!1,templateString:d,constructor:function(){this._plugins=[]},addPlugin:function(a){this._plugins.push(a);a.setEditor(this);a.setToolbar(this)},appendText:function(a){a&&(this.formula.value=this.get("formulaValue")+a)},execCommand:function(a,b){this.insertExpression(b)},execute:function(){},resize:function(b){try{b&&(0<b.w&&0<b.h)&&e.setMarginBox(this.domNode,b);var d=a.mixin(e.getMarginBox(this.domNode),b||{});this._layoutChildren(p.marginBox2contentBox(this.domNode,
d))}catch(f){d={widgetId:this.id},b&&(d.size=b),l.showErrorReporter(new n.ClientException("FormulaEditor: resize",f,d))}},startup:function(){this.addPlugin(new s);this.addPlugin(new f({buttonClass:r,command:"divide",commandArg:"/",iconClass:"anaplanEditorIcon anaplanEditorIconDivide"}));this.addPlugin(new f({buttonClass:r,command:"multiply",commandArg:"*",iconClass:"anaplanEditorIcon anaplanEditorIconMultiply"}));this.addPlugin(new f({buttonClass:r,command:"minus",commandArg:"-",iconClass:"anaplanEditorIcon anaplanEditorIconMinus"}));
this.addPlugin(new f({buttonClass:r,command:"plus",commandArg:"+",iconClass:"anaplanEditorIcon anaplanEditorIconPlus"}));this.inherited(arguments)},uninitialize:function(){this.inherited(arguments)},_execute:function(){this._setEditModeAttr(!1);this.execute()},_layoutChildren:function(a){e.getMarginBox(this.formulaHeader);e.getMarginBox(this.top)},_setEditModeAttr:function(a){this.inherited(arguments);for(var b=1;b<this.getChildren().length;b++)this.getChildren()[b].set("disabled",!a)}})})},"dijit/ToolbarSeparator":function(){define(["dojo/_base/declare",
"dojo/dom","./_Widget","./_TemplatedMixin"],function(g,b,k,p){return g("dijit.ToolbarSeparator",[k,p],{templateString:'\x3cdiv class\x3d"dijitToolbarSeparator dijitInline" role\x3d"presentation"\x3e\x3c/div\x3e',buildRendering:function(){this.inherited(arguments);b.setSelectable(this.domNode,!1)},isFocusable:function(){return!1}})})},"anaplan/settings/Modules/FunctionalAreasView":function(){define("anaplan/utils/FormatHelper anaplan/data/Aggregator dojo/_base/declare anaplan/layout/ManagedContainer anaplan/toolbar/_ButtonsMixin anaplan/widgets/Button anaplan/widgets/Toolbar dijit/ToolbarSeparator anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/GridletFactory anaplan/widgets/SearchToolbarButton anaplan/data/ModelContentHelper anaplan/widgets/Tooltip anaplan/gridlet/Selection anaplan/utils/SelectionHelper anaplan/utils/UIHelper anaplan/gridlet/ViewRequestGridModel anaplan/constants anaplan/Exceptions dojo/_base/array dojo/_base/lang dojo/on dojo/topic dojo/i18n!anaplan/nls/functionalAreas dojo/i18n!anaplan/nls/toolbar dojo/i18n!anaplan/nls/view".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E){return k([p,r],{gutters:!1,_numDataRows:0,constructor:function(a){this._viewDefinition=a.viewDefinition||this._getViewDefinition();this._showTipsOnStartup=a.showTipsOnStartup;this._isShowing=!1;this._tooltips=[];this._gridlet=null},hide:function(a){a===m.TIPS&&(z.forEach(this._tooltips,function(a){a.destroy()}),this._tooltips=[]);this.inherited(arguments)},onHide:function(){this._isShowing=!1;this._handleSuspend()},onShow:function(){this._isShowing=
!0;this._handleResume();this.getParent().getParent()&&!this._gridlet&&(this._createGridlet(),this._enableButtons(this._gridlet.selection))},postCreate:function(){this.inherited(arguments);this._createToolbar()},resume:function(){this.inherited(arguments);this._handleResume()},show:function(a){a===m.TIPS&&this._createTooltips();this.inherited(arguments)},startup:function(){this.inherited(arguments);this._showTipsOnStartup&&this.show(m.TIPS)},suspend:function(){this.inherited(arguments);this._handleSuspend()},
uninitialize:function(){z.forEach(this._tooltips,function(a){a.destroy()});this.inherited(arguments)},_createGridlet:function(){try{this._model=new t({viewDefinition:this._viewDefinition});this._gridlet=(new a({editorFactory:new l})).createGridlet({region:"center",model:this._model,defaultColumnWidth:150,selection:(new h).initializeToDefaults()});this.addChild(this._gridlet);var d=A(this._gridlet,"SelectionChange",x.hitch(this,"_onSelectionChange")),e=A(this._gridlet,"Update",x.hitch(this,"_onUpdate")),
m=A(this._gridlet,"reset",x.hitch(this,"_reset"));this.own(d,e,m);b.gather();this._searchButton.set("model",this._model);this._searchButton.set("widget",this._gridlet);this._gridlet.focus()}catch(f){c.throwClientException(this,f)}},_createOpenButton:function(){var a=new n({label:y.buttonOpenFunctionalArea,iconClass:"anaplanEditorIcon anaplanEditorIconOpen","data-anaplan-element-name":"toolbar-button-open"}),c=a.on("click",x.hitch(this,"_doOpen"));this.own(c);return a},_createSearchButton:function(){return new e({iconClass:"anaplanEditorIcon anaplanEditorIconSearch",
label:v.labelSearch,showLabel:!1,"data-anaplan-element-name":"toolbar-button-search"})},_createToolbar:function(){try{var a=new f({region:"top"});this._toolbar=a;this.addChild(a);this._openButton=this._createOpenButton();a.addChild(this._openButton);a.addChild(new s);this._insertButton=this._createInsertButton();a.addChild(this._insertButton);this._deleteButton=this._createDeleteButton();a.addChild(this._deleteButton);this._reOrderButton=this._createReOrderButton();a.addChild(this._reOrderButton);
z.forEach([this._insertButton,this._deleteButton,this._reOrderButton],function(a){a&&(a.show(),a.set("disabled",!0),a.set("showLabel",!0),a.set("title",""))});this._insertDeleteMoveSeparator=new s;a.addChild(this._insertDeleteMoveSeparator);this._refreshButton=this._createRefreshButton();a.addChild(this._refreshButton);a.addChild(new s);this._searchButton=this._createSearchButton();a.addChild(this._searchButton)}catch(b){c.throwClientException(this,b)}},_createTooltip:function(a,b){var d=null;try{var e=
a.get("label"),h=y["tooltip"+b.split(" ").join("")];h||(h=E["tooltip"+b.split(" ").join("")]);if(!h)return null;var m=g.searchAndReplacePlaceholders(h),d=new q({label:m,connectId:[a.domNode],position:["below","above"],title:e})}catch(l){c.throwClientException(this,l)}return d},_createTooltips:function(){this._tooltips.length?console.warn("anaplan.settings.FunctionalAreasView expected to find no tooltips, found "+this._tooltips.length):(this._tooltips.push(this._createTooltip(this._openButton,"Open")),
this._tooltips.push(this._createTooltip(this._insertButton,"Insert")),this._tooltips.push(this._createTooltip(this._deleteButton,"Delete")),this._tooltips.push(this._createTooltip(this._reOrderButton,"ReOrder")),this._tooltips.push(this._createTooltip(this._refreshButton,"Refresh")))},_doOpen:function(){try{for(var a=this._gridlet,b=this._getGridController(),d=u.getSelection(a._selection,b.getContext()),e=d.count,a=[],b=0;b<e;b++)a.push(d.entityLongIds[0][b]);a.length&&B.publish("anaplan/views",a)}catch(h){c.showErrorReporter(new w.ClientException("anaplan.settings.FunctionalAreasView: _doOpen",
h,{widgetId:this.id}))}},_enableButtons:function(a){this._searchButton.set("disabled",!1);var c=!1,b=!1;a&&(b=this._getGridController(),c=u.isOperationOnColumns(a,b.getContext()),b=u.canReOrder(a,b.getContext()));this._openButton&&this._openButton.set("disabled",c);this._reOrderButton&&this._reOrderButton.set("disabled",!b);this.inherited(arguments)},_getGridController:function(){return!this._gridlet?null:this._gridlet.getGridController()},_getViewDefinition:function(){var a={type:"MODEL_DEFINITION",
staticContextIdentifiers:[]},c=d.getAxesForViewDefinition([m.SYSTEM_AXIS_IDENTIFIER_FUNCTIONAL_AREA_IDENTIFIER],[m.SYSTEM_AXIS_IDENTIFIER_FUNCTIONAL_AREA_PROPERTY_IDENTIFIER]);x.mixin(a,c);return a},_handleResume:function(){var a=this._getGridController();a&&a.resume()},_handleSuspend:function(){this.inherited(arguments);this._gridlet&&this._gridlet.getGridController().suspend()},_onSelectionChange:function(a){this._enableButtons(a)},_onUpdate:function(){var a=this._getNumDataRows();(this._gridlet&&
!this._gridlet._selection||0===this._numDataRows&&0<a||0<this._numDataRows&&0===a)&&this._gridlet._gridController.setBestSelection();this._numDataRows=a;this._onSelectionChange(this._gridlet._selection)},_reset:function(){this._disableButtons(this._toolbar)},_getNumDataRows:function(){var a=0;this._gridlet&&(this._gridlet._sizer&&"undefined"!==typeof this._gridlet._sizer._dataRowCount)&&(a=this._gridlet._sizer._dataRowCount);return a}})})},"anaplan/validators/VersionsValidator":function(){define(["anaplan/constants",
"dojo/_base/array","dojo/_base/declare","dojo/i18n!anaplan/nls/versionsValidator"],function(g,b,k,p){return k(null,{name:"VersionsValidator",constructor:function(){this._resetConfirmationFlags()},confirm:function(k){var n={};k=k.getCellUpdates();if(!k.isEmpty()){k=k.getItemsArray();for(var f=k.length,s,l=0;l<f;l++)s=k[l],this._confirmSwitchoverChange&&-1!==b.indexOf(s.entityLongIds,g.SYSTEM_PROPERTY_VERSION_SWITCHOVER)&&s.originalText!==s.cellText&&(n[p.switchoverChange]="switchoverChange"),this._confirmSettingAsCurrentVersion&&
-1!==b.indexOf(s.entityLongIds,g.SYSTEM_PROPERTY_VERSION_IS_CURRENT)&&"true"==s.cellText&&(n[p.settingAsCurrentVersion]="settingAsCurrentVersion")}return n},setDisabledConfirmationKeys:function(g){this._resetConfirmationFlags();g&&(-1!==b.indexOf(g,this.name+".switchoverChange")&&(this._confirmSwitchoverChange=!1),-1!==b.indexOf(g,this.name+".settingAsCurrentVersion")&&(this._confirmSettingAsCurrentVersion=!1))},_resetConfirmationFlags:function(){this._confirmSettingAsCurrentVersion=this._confirmSwitchoverChange=
!0}})})},"anaplan/settings/RevisionTags":function(){define("anaplan/constants anaplan/layout/ContentPane anaplan/layout/_ManagedMixin anaplan/react/_ReactContainerMixin dojo/_base/declare dojo/dom-style".split(" "),function(g,b,k,p,r,n){return r([b,k,p],{scrollbarWidth:null,tableContainer:null,postCreate:function(){this._started||(this.inherited(arguments),this.setComponentType(App.components.RevisionTagScreenContainerAdapter),this.renderReact({className:"full-screen-spinner",id:"revisionTagScreenContainer",
onFormToggle:this.toggleInlineForm.bind(this)}),this.tableContainer=this.containerNode.querySelector(".table-container"),this.scrollbarWidth=this.getStoreState().browser.browserInfo.scrollbarWidth||16,n.set(this.containerNode,"overflow-y","hidden"))},resize:function(b){this.inherited(arguments);if(this.tableContainer){var g=this.containerNode.querySelector(".tabular-list-form");this.setTableContainerHeight(g,b.h)}},toggleInlineForm:function(b){this.tableContainer&&(b=this.containerNode.querySelector(".tabular-list-form"),
this.setTableContainerHeight(b,this.containerNode.offsetHeight))},setTableContainerHeight:function(b,g){var l=72;this.containerNode.clientWidth!==this.containerNode.scrollWidth&&(l+=this.scrollbarWidth);b&&(l+=41);n.set(this.tableContainer,"maxHeight",g-l+"px")}})})},"anaplan/layout/TabContainer":function(){define("anaplan/api/service anaplan/anapediaKeys anaplan/utils/topics anaplan/utils/FormatHelper anaplan/data/Aggregator dijit/layout/_TabContainerBase dojo/aspect dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/on dojo/json dojo/string dojo/topic dojo/Deferred dojo/promise/all dojo/window anaplan/utils/JsHelper anaplan/utils/UIHelper anaplan/utils/UrlHelper anaplan/utils/DrillDownWindowManager anaplan/common/SelectiveAccess anaplan/data/UserInfo anaplan/data/ModelContentCache anaplan/data/ContextCache anaplan/utils/EntityLongIdHelper anaplan/tabs/Dashboard anaplan/widgets/_WidgetMixin anaplan/charts/PopupChartlet2 anaplan/constants anaplan/data/ModelContentHelper anaplan/Exceptions anaplan/layout/ManagedTab anaplan/layout/ScrollingTabController anaplan/view/ModelManagement anaplan/widgets/FloatingTab dojo/i18n!anaplan/nls/tabs dojo/i18n!anaplan/nls/highchartlet anaplan/keyboard/keyboardEvents anaplan/keyboard/helpers anaplan/utils/LabelPageHelper anaplan/charts/HighChartsHelper anaplan/charts/ViewRequestChartletModel anaplan/view/NewDashboard anaplan/dashboard/DashboardHelper dijit/registry dojo/i18n!anaplan/nls/toolbar dojo/i18n!anaplan/nls/view dojo/query dojo/NodeList-traverse".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I,P,J,O,T,Q,ca,Z,X,V,da,S,$,M,aa,W,Y,R){return l("anaplan.layout.TabContainer",[n,D],{testAttrName:"Tabs",focused:!0,maxNonEmptyClosableModuleTabs:3,maxNonEmptyClosableDashboardTabs:3,useMenu:!0,useSlider:!0,constructor:function(){this._contentDefinitions={};this._tabParams={};this._lastChildId=null;this._floatingTabs={};this._floatingConnectionsByTab={};this._floatingWindows={};this._show={};this._staticTabIds=[F.WORKFLOW_TAB,
F.SETTINGS_TAB,F.MODELMAP_TAB];this._permittedTabIds=[];this._tabHistory=[];this._homeDashboardEntityLongId=H.getLoggedInUserDefaultDashboard(C);this._hasWorkflowEntityLongId=H.getHasWorkflowEntityLongId(C)},postCreate:function(){this.inherited(arguments);d.add(this.domNode,"tabContainer");C.addObserver(this);this.own(h(this,"contextmenu",a.hitch(this,function(a){this.allowOnContextMenuEventPropagation(a)||a.stopPropagation()})),X.addListener(window,Z.ANAPLAN_TAB_FORWARD,a.hitch(this,"forward")),
X.addListener(window,Z.ANAPLAN_TAB_BACK,a.hitch(this,"back")),f.after(E,"onChange",a.hitch(this,"_onUserInfoChange")),t.subscribe(this.id+"-selectChild",a.hitch(this,"_onSelectChild")),t.subscribe(this.id+"-addChild",a.hitch(this,"_onAddChild")),t.subscribe(this.id+"-removeChild",a.hitch(this,"_onRemoveChild")),t.subscribe(this.id+"-detachChild",a.hitch(this,"_onDetachChild")),t.subscribe("anaplan/"+this.id+"/dashboardStateChange",a.hitch(this,"_publishDashboardStateChange")),t.subscribe("anaplan/global/context",
a.hitch(this,"_globalContext")),t.subscribe("anaplan/tabContainer/closeModelSpecificContent",a.hitch(this,"closeModelSpecificContent")),t.subscribe("anaplan/views",a.hitch(this,"_views")),t.subscribe("anaplan/show",a.hitch(this,"_onShow")),t.subscribe("anaplan/hide",a.hitch(this,"_onHide")),t.subscribe("anaplan/formula/startGlobalEdit",a.hitch(this,"_setGlobalFormulaEditModule")),t.subscribe("anaplan/formula/endGlobalEdit",a.hitch(this,"_setGlobalFormulaEditModule")),t.subscribe("anaplan/dashboard",
a.hitch(this,"_dashboard")),t.subscribe("anaplan/result",a.hitch(this,"_setResult")),t.subscribe("anaplan/refresh",a.hitch(this,"_refresh")))},closeChild:function(a){return this.closeChildAsync(a).otherwise(function(a){if(!(a instanceof I.UserAbortException))throw a;})},closeChildAsync:function(a){return a.close(this)},addAsStaticTab:function(a){var c="",d=A.generateId(a),h=b[a];if(a===F.MODELMAP_TAB)c="anaplanModelMapsSprite anaplanViewModelMap";else if(a===F.WORKFLOW_TAB)c="sidebarButtonIcon sidebarButtonIconWorkflow";
else if(a===F.SETTINGS_TAB)c="sidebarButtonIcon sidebarButtonIconSettings";else throw new I.InvalidArgumentException(null,null,{value:a});a=this._createEmptyTab(d,-1,"",!1,c,h);this.addChild(a,0);e.set(a.controlButton.domNode,"title",Q[d]||d);return a},closeModelSpecificContent:function(){var c=new m;try{this._hideDrillDownWindows(),this._hideFloatingWindows(),this._closeAllClosableChildren().then(a.hitch(this,function(a){s.some(a,function(a){return!1===a});this._publishOpenCount();c.resolve(a)}),
function(a){c.reject(a)})}catch(b){A.throwClientException(this,b)}return c.promise},getDirtyTabs:function(){var a=[];s.forEach(this.getChildren(),function(c){"function"===typeof c.isDirty&&c.isDirty()&&a.push(c)});for(var c in this._floatingTabs)if(this._floatingTabs.hasOwnProperty(c)){var b=this._floatingTabs[c].getChildren()[0];b.isDirty()&&a.push(b)}return a},canCloseManagedTab:function(a){var c=a.getChildren();if(1===c.length)if(c=c[0],this._isDashboard(a.contentEntityLongId)){if(!c.isInClosableState())return!1}else if("function"===
typeof c.isDirty&&c.isDirty())return!1;return!0},getNonClosableTabs:function(){var a=this.getChildren().filter(function(a){return!this.canCloseManagedTab(a)}.bind(this)),c;for(c in this._floatingTabs)if(this._floatingTabs.hasOwnProperty(c)){var b=this._floatingTabs[c].getChildren()[0];this.canCloseManagedTab(b)||a.push(b)}return a},_getNewIndex:function(a,c,b,d){a=s.indexOf(a,c);if(b)return a<d.length-1?++a:0;if(!b)return 0<a?--a:d.length-1},_adjacent:function(a){var c=this.getChildren(),b=R(".dijitTabContainerTop-tabs"),
d;if(!b)return d=s.indexOf(c,this.selectedChildWidget),d+=a?1:c.length-1,c[d%c.length];var b=s.map(b.children(),function(a){return aa.byNode(a)}),e=s.map(b,function(a){return a.id.toString().replace(/content_tablist_/gi,"")});d=this._getNewIndex(e,this.selectedChildWidget.id,a,c);return s.filter(c,function(a){return a.id.toString()===e[d]})[0]},forward:function(){return this.selectChild(this._adjacent(!0),!0)},back:function(){return this.selectChild(this._adjacent(!1),!0)},selectChild:function(){try{var a=
this,c=arguments;A.dirtyFormCheck(function(){a.inherited(c)},function(){})}catch(b){A.throwClientException(this,b)}},uninitialize:function(){C.deleteObserver(this);this.inherited(arguments)},update:function(){if(C.getModelInfo()){var c=null,b=[],d=C.getModulesLabelPage();d&&(b=d.entityLongIds[0]);for(d=this.getChildren().length-1;0<=d;d--){var e=this.getChildren()[d];if(e.closable)if(this._isView(e.contentEntityLongId)){this._isModuleView(e.contentEntityLongId)?c=e.contentEntityLongId:this._isSavedView(e.contentEntityLongId)&&
(c=H.getModuleEntityLongIdForSavedView(C,e.contentEntityLongId));var h=p.escapeHTML(H.getModuleLabel(C,c));e.get("title")!==h&&e.set("title",h)}else this._isDashboard(e.contentEntityLongId)?(h=p.escapeHTML(H.getDashboardLabel(C,e.contentEntityLongId)),e.get("title")!==h&&e.set("title",h)):(this.removeChild(e),e.destroyRecursive())}this._updateHomeDashboardTabIndexIfRequired();d=H.getHasWorkflowEntityLongId(C);d!==this._hasWorkflowEntityLongId&&(e=this._getChildIndex(F.WORKFLOW_TAB),-1<d?-1===e&&this.addAsStaticTab(F.WORKFLOW_TAB):
(e=this.getChildren()[e],this.removeChild(e),e.destroyRecursive()),this._hasWorkflowEntityLongId=d);for(var m in this._floatingTabs)this._floatingTabs.hasOwnProperty(m)&&(d=this._floatingTabs[m],e=d.getChildren()[0].get("id"),h=d.contentEntityLongId,this._isView(h)?(this._isModuleView(h)?c=h:this._isSavedView(h)&&(c=H.getModuleEntityLongIdForSavedView(C,h)),e=p.escapeHTML(H.getModuleLabel(C,c)),d.get("title")!==e&&d.set("title",e)):this._isDashboard(h)?(e=p.escapeHTML(H.getDashboardLabel(C,h)),d.get("title")!==
e&&d.set("title",e)):(this._floatingConnectionsByTab[e]?(s.forEach(this._floatingConnectionsByTab[e],a.hitch(this,"_removeHandle")),delete this._floatingConnectionsByTab[e]):console.warn("anaplan.layout.TabContainer: expected to find floating tab connections by tab but did not "+e+" "+d.title),this._floatingTabs[e]?delete this._floatingTabs[e]:console.warn("anaplan.layout.TabContainer: expected to find floating tab but did not "+e+" "+d.title),d.hide()));for(m in this._floatingWindows)this._floatingWindows.hasOwnProperty(m)&&
(d=this._floatingWindows[m],d.getChildren().length&&-1===s.indexOf(b,c)&&(delete this._floatingWindows[m],d.hide()))}},_updateHomeDashboardTabIndexIfRequired:function(){var a=H.getLoggedInUserDefaultDashboard(C);if(this._homeDashboardEntityLongId!==a){if(-1<a){var c=A.generateId(a),b=this._getChildIndex(c);-1<b&&(c=this._getIndexPositionHomeDashboard(),b!==c&&(b=this.getChildren()[b],this._removeChildPreservingContentDefinition(b),this.addChild(b,c)))}this._homeDashboardEntityLongId=a;t.publish("anaplan/tabContainer/homeDashboardChanged",
a)}},_activateTab:function(a){if(this.selectedChildWidget&&this.selectedChildWidget.id===a||this._floatingTabs[a])return!0;a=this._getChildById(a);if(!a)return!1;this.selectChild(a);return!0},_ageTabs:function(a,c){this._isDashboard(c)?this._ageDashboardTabs(a):this._isView(c)&&this._ageModuleTabs(a)},_ageModuleTabs:function(c){for(var b=0,d=[],e=this.getChildren(),h=this._tabHistory.slice(),m=0;m<h.length;m++){var l=this._getChildIndex(h[m]),l=e[l];l.closable&&l.hasChildren()&&this._isView(l.contentEntityLongId)&&
(b++,this._viewMayBeAged(l)&&l.id!==c&&d.push(l))}var f=[];s.forEach(d,function(a){f.push(a.id)});c=Math.max(1,this.maxNonEmptyClosableModuleTabs);if(b>c-1)for(e=0;e<d.length&&!(h=d[e],m=this._getTabState(h),this._tabParams[h.id]=a.mixin(this._tabParams[h.id]||{},m),h.destroyDescendants(),b--,b===c-1);e++);},_ageDashboardTabs:function(a){for(var c=0,b=[],d=this.getChildren(),e=this._tabHistory.slice(),h=0;h<e.length;h++){var m=this._getChildIndex(e[h]),m=d[m],l=m.getChildren()[0];m.closable&&(m.hasChildren()&&
this._isDashboard(m.contentEntityLongId)&&m.id!==a&&l.canBeAged(m))&&(c++,b.push(l))}a=Math.max(1,this.maxNonEmptyClosableDashboardTabs);if(c>a-1)for(d=0;d<b.length&&!(b[d].ageTab(),c--,c===a-1);d++);},_closeAllClosableChildren:function(){var c=new m,b=this.selectedChildWidget,d=[];s.forEach(this.getChildren(),a.hitch(this,function(a){b!==a&&a.closable&&d.push(this.closeChildAsync(a))}));for(var e in this._floatingTabs)this._floatingTabs.hasOwnProperty(e)&&d.push(this._closeFloatingTabAsync(e));b&&
b.closable&&d.push(this.closeChildAsync(b));w(d).then(function(a){this._tabHistory=[];this._tabParams={};c.resolve(a)},function(a){d.length=0;d=null;c.reject("Not all tabs could be closed")});return c.promise},_closeFloatingTabAsync:function(a){var c=this._floatingTabs[a];return c.getChildren()[0].getChildren()[0].isCloseableMayPrompt().then(function(a){if(a)c.onCancel();return a})},_createEmptyTab:function(c,b,d,e,h,m){return new P({testAttrName:e?d.split(" ").join("_"):c,helpId:m,id:c,contentEntityLongId:b,
title:p.escapeHTML(d),closable:e,iconClass:h?h:"",openerId:this.selectedChildWidget?a.clone(this.selectedChildWidget.id):null})},_getPopulatedDashboards:function(){return s.filter(A.findByClass("anaplan/tabs/Dashboard"),function(a){return a._widgets&&a._widgets.length})},_getTabState:function(c){var b={};try{if(c.getChildren().length){var d=c.getChildren()[0];if(d){x.isFunction(d.getPreviousView)&&a.mixin(b,{previousView:d.getPreviousView()});var e=d._getGridController();if(e&&x.isFunction(e.getViewDefinition)){var h=
e.getViewDefinition();if(h){a.mixin(b,{viewDefinition:h});var m=a.clone(this._contentDefinitions[c.id]||{});e.isSavedView()||a.mixin(m,{savedViewReference:{entityDefaultViewEntityLongId:null}});a.mixin(b,{content:m})}}}}}catch(l){console.error(this.id,"_getTabState",l)}finally{return b}},_viewMayBeAged:function(a){return-1<this._globalFormulaEditModuleEntityLongId&&a.id===A.generateId(this._globalFormulaEditModuleEntityLongId)||x.isFunction(a.isDirty)&&a.isDirty()?!1:!0},_displayModelManagementDialog:function(c){try{if(v.isAuthorized(F.userActions.CAN_VIEW_MODEL_MANAGEMENT)){var b,
d,e,m;"object"===typeof c?(b=c.openOnStatusTab,d=c.setModelId,e=c.showPleaseWait,m=c.pleaseWaitTitle):b=c;var l=A.getSharedDialog({roles:["model-management"]}),f=new O({workspaceId:window.workspaceId,workspaceName:window.workspaceName,modelId:d||window.modelId,showPleaseWait:e||!1,pleaseWaitTitle:m,openOnStatusTab:b});l.set("refocus",!0);l.set("content",f.domNode);var q=this;this._shouldRedirectAfterHide=!0;var t=h(l,"hide",function(){t.remove();!window.modelId&&q._shouldRedirectAfterHide&&setTimeout(function(){window.location=
B.getUrl(F.URL_IDS.LAUNCHPAD_URL_ID)+"/nonpublic/tiles/ModelSelect.action"},200);this._shouldRedirectAfterHide=!0});f.own(h(f,"CloseWithoutRedirection",a.hitch(this,function(){this._shouldRedirectAfterHide=!1;l.onCancel()})),h(f,"Close",a.hitch(this,function(){this._shouldRedirectAfterHide=!0;l.onCancel()})),h(f,"SwitchModel",a.hitch(this,function(a,c){q._loadModel(a,c)})),h(f,"CreateModel",a.hitch(this,function(a,c){q._loadModel(a,c)})),h(f,"CopyModel",a.hitch(this,function(a,c){q._loadModel(a,c)})),
h(f,"CopyAndArchiveModel",a.hitch(this,function(a,c){q._loadModel(a,c)})),h(f,"RenameModel",a.hitch(this,function(){})),h(f,"ImportModel",a.hitch(this,function(a,c){q._loadModel(a,c)})));h(f,"ModelModeStatusChanged",a.hitch(this,function(a,c,b){c=v.isModelAccessibleForCurrentUser();a=window.modelId&&window.modelId===a;c&&a&&r.gather()}));l.show()}}catch(g){throw new I.ClientException("anaplan.layout.TabContainer._displayModelManagementDialog",g);}},_getChildById:function(a){for(var c=this.getChildren(),
b=c.length,d=0;d<b;d++)if(c[d].id===a)return c[d];return null},_getChildIndex:function(a){for(var c=this.getChildren(),b=c.length,d=0;d<b;d++)if(c[d].id===a)return d;return-1},_getContentDefinitionsForEntityLongId:function(a){var c=[];try{var b=L.getEntityTypeIndex(a),d=null,e=null,h=null,m=null,l=null,f={};if(b===F.FUNCTIONAL_AREA_ENTITY_TYPE_INDEX){for(var q=C.getModelInfo(),t=q.moduleInfos,g=q.modulesLabelPage,b=0;b<t.length;b++)t[b].functionalAreaEntityLongId===a&&(c=c.concat(this._getContentDefinitionsForEntityLongId(g.entityLongIds[0][b])));
for(var k=q.dashboardsInfo,s=k.dashboardsLabelPage,w=k.dashboardInfos,q=0;q<w.length;q++)w[q].functionalAreaEntityLongId===a&&(c=c.concat(this._getContentDefinitionsForEntityLongId(s.entityLongIds[0][q])))}else{if(b===F.MODULE_ENTITY_TYPE_INDEX){d=A.generateId(a);h=a;e=H.getModuleLabel(C,h);if(null==e)return null;f.readOnly="Archived Opportunities"===e;l="grid"}else if(b===F.DASHBOARD_ENTITY_TYPE_INDEX){d=A.generateId(a);e=H.getDashboardLabel(C,a);if(null==e)return null;l="dashboard"}else h=H.getModuleEntityLongIdForSavedView(C,
a),m=a,d=A.generateId(h),e=H.getModuleLabel(C,h),f.readOnly="Archived Opportunities"===e,l="grid";c.push({title:e,content:{id:d,entityLongId:a,workspaceId:workspaceId,modelId:modelId,viewAs:l,pageLabelsRequired:!0,moduleViewReference:{entityDefaultViewEntityLongId:h},savedViewReference:{entityDefaultViewEntityLongId:m},params:f}})}}catch(n){console.error("anaplan.layout.TabContainer._getContentDefinitionsForEntityLongId: "+n+": entityLongId")}return c},_globalContext:function(a,c,b){for(var d in this._floatingTabs)if(this._floatingTabs.hasOwnProperty(d)){var e=
this._floatingTabs[d];e&&e.setGlobalContext&&this._floatingTabs[d].setGlobalContext(a,c,b)}d=this.getChildren();for(var e=d.length,h,m=0;m<e;m++)h=d[m],h.setGlobalContext&&h.setGlobalContext(a,c,b)},_hideDrillDownWindows:function(){try{y.closeAll()}catch(a){throw new I.ClientException("anaplan.layout.TabContainer._hideDrillDownWindows",a);}},_hideFloatingWindows:function(){for(var a in this._floatingWindows)if(this._floatingWindows.hasOwnProperty(a)){var c=this._floatingWindows[a];c&&c.hide&&c.hide()}this._floatingWindows=
{}},_isDashboard:function(a){return g.dashboards.containsEntityLongId(a)},_isFloatingTab:function(a){return this._floatingTabs[a]?!0:!1},_isModuleView:function(a){var c=C.getModulesLabelPage();return-1===s.indexOf(c.entityLongIds[0],a)?!1:!0},_isSavedView:function(a){var c=C.getViewsLabelPage();return-1===s.indexOf(c.entityLongIds[0],a)?!1:!0},_isStaticTab:function(a){return-1===s.indexOf(this._staticTabIds,a)?!1:!0},_isView:function(a){return this._isModuleView(a)||this._isSavedView(a)},_loadModel:function(a,
c){try{var b=C.getWorkspaceInfo(),d=v.isAuthorized(F.userActions.CAN_ASSERT_MODEL);H.assertModel(b,a,d)?setTimeout(function(){A.checkDirtyTabsAndForm().then(function(c){c||window.location.replace("?selectedWorkspaceId\x3d"+workspaceId+"\x26selectedModelId\x3d"+a)})},45):k.redirectToTiles()}catch(e){A.throwClientException(this,e)}},_makeController:function(a){var c=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout");("top"!==this.tabPosition&&"bottom"!==this.tabPosition||this.nested)&&console.warn("anaplan.layout.TabContainer TODO: Scrolling controller only works for horizontal non-nested tabs");
return new J({id:this.id+"_tablist",tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":c,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},a)},_onAddChild:function(){this._publishOpenCount()},_onDetachChild:function(c){try{if(c)if(this._floatingTabs[c.id])console.warn("anaplan.layout.TabContainer: received request to detach tab which is already detached "+c.id);else if(-1===
this._getChildIndex(c.id))console.warn("anaplan.layout.TabContainer: received request to detach tab which is not current child "+c.id);else{if(-1<this._globalFormulaEditModuleEntityLongId){var b=A.generateId(this._globalFormulaEditModuleEntityLongId);if(c.id===b){var e=c.getChildren()[0];if("function"===typeof e.canDetach&&!e.canDetach()){A.showInfoDialog("Please attach the formula editor for this module and try again.",{title:"Unable to detach tab"});return}}}var m=this._isDashboard(c.contentEntityLongId),
l=c.getTabContent();if(l){if(m){if(!c.hasMoreThanOneChild()||!l.canDetach())return;c.suspend&&c.suspend()}"function"===typeof l.beforeDetach&&l.beforeDetach();m?this.removeChild(c):this._removeChildPreservingContentDefinition(c);d.remove(c.domNode,"dijitHidden");var f=new T({title:c.title,contentEntityLongId:c.contentEntityLongId,menu:c.get("menu")});"function"===typeof l.afterDetach&&l.afterDetach();var t=z.getBox(),g=x.getObjectKeys(this._floatingTabs).length,k=q.position(this.domNode,!1),w=(0<
k.y?k.y:0)+5,n=g?5:t.w/2+1.25;q.setMarginBox(f.domNode,{t:t.t+w,l:t.l+n,w:t.w-n-(g?t.w/2+1.25:5),h:t.h-w-5});var b=[],v=h(f,"Attach",function(){this._onReattachChild(f)}.bind(this));b.push(v);b.push(h(f,"Cancel",a.hitch(this,function(){for(var c in this._floatingTabs)if(this._floatingTabs[c]==f){this._floatingConnectionsByTab[c]?(s.forEach(this._floatingConnectionsByTab[c],a.hitch(this,this._removeHandle)),delete this._floatingConnectionsByTab[c]):console.warn("anaplan.layout.TabContainer:_onDetachChild:onCancel expected to find floating tab connections by tab but did not "+
c+" "+f.title);f.hide();this._floatingTabs[c]?delete this._floatingTabs[c]:console.warn("anaplan.layout.TabContainer:_onDetachChild:onCancel expected to find floating tab but did not "+c+" "+f.title);this._publishOpenCount();return}console.warn("anaplan.layout.TabContainer:_onDetachChild:onCancel expected to find floating tab but did not "+f.id+" "+f.title)})));this._floatingTabs[c.id]=f;this._floatingConnectionsByTab[c.id]=b;f.startup();f.addChild(c);f.show();this._publishOpenCount();c!=this.selectedChildWidget&&
(c.hasChildren()?c.resume():this._isDashboard(c.contentEntityLongId)?c.scheduleLoad(F.DASHBOARD_TAB,{dashboardId:c.contentEntityLongId,showTipsOnStartup:this._show[F.TIPS]||!1,showBreakbackMarkersOnStartup:this._show[F.BREAKBACK_MARKERS]||!1,showQuickSumOnStartup:this._show[F.QUICK_SUM]||!1},function(){f.resize();r.gather()}):c.scheduleLoad(F.VIEW_TAB,{content:this._contentDefinitions[c.id],showTipsOnStartup:this._show[F.TIPS]||!1,showBreakbackMarkersOnStartup:this._show[F.BREAKBACK_MARKERS]||!1,
showQuickSumOnStartup:this._show[F.QUICK_SUM]||!1},function(){f.resize();r.gather()}));"function"===typeof l.afterDetachCompleted&&l.afterDetachCompleted()}}}catch(u){console.error(u)}},_onReattachChild:function(a){var c=a.getChildren()[0],b=c.getChildren()[0];"function"===typeof b.beforeReattach&&b.beforeReattach();this._floatingConnectionsByTab[c.id]?(s.forEach(this._floatingConnectionsByTab[c.id],function(a){a.remove()}),delete this._floatingConnectionsByTab[c.id]):console.warn("anaplan.layout.TabContainer:_onDetachChild:onAttach expected to find floating tab connections by tab but did not "+
c.id+" "+a.title);a.removeChild(c);d.remove(c.domNode,"dijitHidden");c.contentEntityLongId===H.getLoggedInUserDefaultDashboard(C)?this.addChild(c,this._getIndexPositionHomeDashboard()):this.addChild(c);this._floatingTabs[c.id]?delete this._floatingTabs[c.id]:console.warn("anaplan.layout.TabContainer:_onDetachChild:onAttach expected to find floating tab but did not "+c.id+" "+a.title);a.destroy();this.selectChild(c);"function"===typeof b.afterReattach&&b.afterReattach();this._ageTabs(c.id,c.contentEntityLongId)},
_onHide:function(a){(a===F.TIPS||a===F.BREAKBACK_MARKERS||a===F.QUICK_SUM)&&delete this._show[a];for(var c=this.getChildren().length,b,d=0;d<c;d++)b=this.getChildren()[d],b.hide&&b.hide(a);for(var e in this._floatingTabs)this._floatingTabs.hasOwnProperty(e)&&(c=this._floatingTabs[e])&&c.hhide&&c.hhide(a)},_onRemoveChild:function(a){var c=s.indexOf(this._tabHistory,a.id);-1<c&&this._tabHistory.splice(c,1);this._publishOpenCount();this._publishDashboardStateChange();this._contentDefinitions[a.id]&&
delete this._contentDefinitions[a.id];this.selectedChildWidget==a&&((a=this._getChildById(a.openerId))?this.selectChild(a):t.publish("anaplan/"+this.id+"-nothingSelected"))},_onSelectChild:function(c){var b;try{if(c.closable){var d=s.indexOf(this._tabHistory,c.id);-1<d&&this._tabHistory.splice(d,1);this._tabHistory.push(c.id)}var e=this._getChildById(this._lastChildId);e&&e.suspend();this._lastChildId=this.selectedChildWidget.id;this.selectedChildWidget.isSuspended()&&(b=a.mixin({},this._tabParams[this.selectedChildWidget.id]),
this.selectedChildWidget.resume(b));if(this.selectedChildWidget.id===F.MODELMAP_TAB)this.selectedChildWidget.hasChildren()||(b={},this.selectedChildWidget.scheduleLoad(F.MODELMAP_TAB,b,a.hitch(this,function(){this.selectedChildWidget.resize();r.gather()})));else if(this.selectedChildWidget.id===F.WORKFLOW_TAB)this.selectedChildWidget.hasChildren()||(b=a.mixin({},this._tabParams[this.selectedChildWidget.id],{showTipsOnStartup:this._show[F.TIPS]||!1}),this.selectedChildWidget.scheduleLoad(F.WORKFLOW_TAB,
b,a.hitch(this,function(){this.selectedChildWidget.resize();r.gather()})));else if(this.selectedChildWidget.id===F.SETTINGS_TAB)this.selectedChildWidget.hasChildren()||(b=a.mixin({},this._tabParams[this.selectedChildWidget.id],{showTipsOnStartup:this._show[F.TIPS]||!1,showBreakbackMarkersOnStartup:this._show[F.BREAKBACK_MARKERS]||!1,globalFormulaEditModule:this._globalFormulaEditModule||null}),this.selectedChildWidget.scheduleLoad(this.selectedChildWidget.id,b,a.hitch(this,function(){this.selectedChildWidget.resize()}),
!0),delete this._tabParams[this.selectedChildWidget.id]);else if(this._isView(this.selectedChildWidget.contentEntityLongId)){if(!this.selectedChildWidget.hasChildren()){this._ageModuleTabs(this.selectedChildWidget.id);var h=this._tabParams[this.selectedChildWidget.id]||{};h.hasOwnProperty("viewDefinition")&&null!==h.viewDefinition&&(h.hasOwnProperty("overrideDefaultPages")&&h.overrideDefaultPages?a.mixin(h.viewDefinition,{globalContextIdentifiers:G.getContextIdentifiers()}):a.mixin(h.viewDefinition,
{currentPageIdentifiers:[],globalContextIdentifiers:G.getContextIdentifiers()}));b=a.mixin({content:this._contentDefinitions[this.selectedChildWidget.id],showTipsOnStartup:this._show[F.TIPS]||!1,showBreakbackMarkersOnStartup:this._show[F.BREAKBACK_MARKERS]||!1,showQuickSumOnStartup:this._show[F.QUICK_SUM]||!1,globalFormulaEditModule:this._globalFormulaEditModule||null},h);this.selectedChildWidget.scheduleLoad(F.VIEW_TAB,b,a.hitch(this,function(){this.selectedChildWidget.resize();r.gather()}))}delete this._tabParams[this.selectedChildWidget.id]}else this._isDashboard(this.selectedChildWidget.contentEntityLongId)&&
(this._ageDashboardTabs(this.selectedChildWidget.id),this.selectedChildWidget.hasChildren()?this.selectedChildWidget.getTabContent().isAged()?this.selectedChildWidget.getTabContent().unageTab():this._tabParams[this.selectedChildWidget.id]&&this._tabParams[this.selectedChildWidget.id].gatherRequired&&r.gather():(b={dashboardId:this.selectedChildWidget.contentEntityLongId,showTipsOnStartup:this._show[F.TIPS]||!1,showBreakbackMarkersOnStartup:this._show[F.BREAKBACK_MARKERS]||!1,showQuickSumOnStartup:this._show[F.QUICK_SUM]||
!1,viewInfos:this._tabParams[this.selectedChildWidget.id]?this._tabParams[this.selectedChildWidget.id].viewInfos:null},this._tabParams[this.selectedChildWidget.id]&&this._tabParams[this.selectedChildWidget.id].result&&(b.result=this._tabParams[this.selectedChildWidget.id].result),this._tabParams[this.selectedChildWidget.id]&&this._tabParams[this.selectedChildWidget.id].task&&(b.task=this._tabParams[this.selectedChildWidget.id].task),this.selectedChildWidget.scheduleLoad(F.DASHBOARD_TAB,b),delete this._tabParams[this.selectedChildWidget.id]),
delete this._tabParams[this.selectedChildWidget.id])}catch(m){A.showErrorReporter(new I.ClientException("_onSelectChild",m,{widgetId:this.id}))}},_onShow:function(c,e){if(c===F.TIPS||c===F.BREAKBACK_MARKERS||c===F.QUICK_SUM){this._show[c]=!0;for(var h=this.getChildren(),m=h.length,l,f=0;f<m;f++)l=h[f],l.show&&l.show(c);for(var q in this._floatingTabs)this._floatingTabs.hasOwnProperty(q)&&(h=this._floatingTabs[q])&&h.sshow&&h.sshow(c)}else c===F.HELP_FOR_THIS_PAGE?this.selectedChildWidget&&(q=this.selectedChildWidget.getHelpId(),
q=B.createAnapediaUrl(q),window.open(q,"_blank")):c===F.LIVE_CHAT?(q=B.getUrl(F.URL_IDS.LIVE_CHAT_URL_ID),window.open(q,"guest","width\x3d575,height\x3d490")):c===F.POPUP_CHART?e&&(q=z.getBox(),q={style:["width:",q.w*(e.chartType&&e.chartType===F.chartType.PIE?0.33:0.5)+300,"px; height:",0.8*q.h,"px;"].join("")},e.chartType===F.chartType.COMBINATION?this._handleCombinationChartDialog(e):(q=new N(a.mixin(e,q)),h=A.getSharedDialog(),h.set("title",ca.menuChartOptions),h.set("refocus",!1),h.set("content",
q.domNode),d.toggle(h.domNode,"selectionOptionsDialog",!0),h.setHelpContent(b.charts),q.startup(),h.show()),r.gather()):c===F.MODEL_MANAGEMENT?(q=a.hitch(this,function(){this._displayModelManagementDialog(e)}),A.dirtyFormCheck(q,function(){})):console.warn("anaplan.layout.TabContainer TODO: replace with exception (?) unrecognized request to show "+c)},_handleCombinationChartDialog:function(c){var b=a.mixin(c,{chartConfig:{}}),b=a.clone(b),d=new S(a.mixin(b,{maxRowsToRequestFromServer:da.getMaxRowsToRequestFromServer(c.chartType)})),
e={update:function(a){a=App.interim.charts.getCombinationChartOptions({highChartsHelper:da,labelPageHelper:V,selection:a[0],pageInfo:a[1],modelContentHelper:H,model:d});d.deleteObserver(e);App.interim.charts.setupAndShowCombinationChartModal(a,C,null,W.labelNewDashboard,I,v.isAuthorized(F.userActions.MAINTAIN_CUSTOM_DASHBOARDS),d,M.publishComboChart.bind(M))}};d.addObserver(e)},_onUserInfoChange:function(){null===E.getPermittedActions()?console.warn("anaplan.layout.TabContainer: _onUserInfoChange permitted actions are null"):
A.showInfoDialog(Q.messagePermittedActionsChanged,{title:Q.titleUserSettings}).then(function(){window.location.reload()})},_publishDashboardStateChange:function(){for(var a=[],c=this.getChildren(),b=0;b<c.length;b++){var d=c[b];if(d.hasChildren()){var e=d.getChildren()[0];e instanceof K&&(e.isDirty()||e.getServerDashboardDefinitionChanged())&&a.push(d.domNode.id)}}this.selectedChildWidget&&this._ageDashboardTabs(this.selectedChildWidget.id);t.publish("anaplan/"+this.id+"_tablist/dashboardStateChange",
a)},_publishOpenCount:function(){try{var a=this._floatingTabs?x.getObjectKeys(this._floatingTabs).length:0,c=this._floatingWindows?x.getObjectKeys(this._floatingWindows).length:0,b=this.getChildren().length;t.publish("anaplan/tabContainer/openCount",b+a+c-this._permittedTabIds.length)}catch(d){A.throwClientException(this,d)}},_refresh:function(a){var c=!1;s.forEach(this._getPopulatedDashboards(),function(b){try{var d;d=!0===a?b.refreshAllGridsAndCharts():b.refresh(null);c=c||d}catch(e){console.error(e)}});
return a&&c?(r.gather(),!1):c},_removeChildPreservingContentDefinition:function(a){if(this._contentDefinitions[a.id]){var c=this._contentDefinitions[a.id];this.removeChild(a);this._contentDefinitions[a.id]=c}else console.warn("anaplan.layout.TabContainer: _removeChildPreservingContentDefinitionexpected to find content definition but did not"),this.removeChild(a)},_removeHandle:function(a){a&&a.remove()},_setGlobalFormulaEditModule:function(a){try{if(null!==a){var c=H.getModuleEntityLongId(C,a);if(-1<
c){this._globalFormulaEditModuleEntityLongId=c;this._globalFormulaEditModule=a;return}console.warn(this.id,"_setGlobalFormulaEditModule expected to find module and did not",a)}this._ageModuleTabs(null);this._globalFormulaEditModuleEntityLongId=-1;this._globalFormulaEditModule=null}catch(b){A.showErrorReporter(new I.ClientException("TabContainer: _setGlobalFormulaEditModule",b))}},_setResult:function(a,c){if(-1<c.dashboardEntityLongId&&this.selectedChildWidget.contentEntityLongId!==Number(c.dashboardEntityLongId))this._dashboard(c.dashboardEntityLongId,
{result:a,task:c,gatherRequired:!1});else{var b=A.publishGlobalContextForResult(a,c);if(!0===c.promptToShowNewlyCreatedItems&&this.selectedChildWidget&&this.selectedChildWidget.getChildren().length&&this.selectedChildWidget.getChildren()[0].promptToShowNewlyCreatedItems)this.selectedChildWidget.getChildren()[0].promptToShowNewlyCreatedItems(a,c,b);else{var d=this._refresh(),b=b||d;-1<c.dashboardEntityLongId?this._dashboard(c.dashboardEntityLongId,{result:a,task:c,gatherRequired:b}):b&&setTimeout(function(){r.gather()},
200)}}},_transition:function(a,c){try{if(c&&null!=this._globalFormulaEditModule){var b=A.generateId(this._globalFormulaEditModuleEntityLongId);-1<this._getChildIndex(b)&&a.id!==b&&t.publish("anaplan/formula/detach",null)}}catch(d){A.showErrorReporter(new I.ClientException("TabContainer: _transition",d))}finally{this.inherited(arguments)}},_dashboard:function(c,b){if(c){var d=b.hasOwnProperty("result")?b.result:null,e=b.hasOwnProperty("task")?b.task:null,h=b.hasOwnProperty("gatherRequired")?b.gatherRequired:
!1,m=A.publishGlobalContextForResult(d,e),h=h||m;!1===(!0===e.promptToShowNewlyCreatedItems)&&(m=this._refresh(),h=h||m);m=A.generateId(c);d=a.mixin(this._tabParams[m]||{result:d,task:e,gatherRequired:h});-1<this._getChildIndex(m)&&(this._tabParams[m]=d);this._views(c,d)}},_views:function(d,e){var h,m;if(this._isStaticTab(d))this._activateTab(d);else{x.isArray(d)||(d=[d]);if(1===d.length&&-1===d[0]){for(var l=[],f=C.getModelInfo(),q=f.dashboardsInfo,t=q.dashboardInfos,q=q.dashboardsLabelPage,g=0;g<
q.count;g++)-1==t[g].functionalAreaEntityLongId&&l.push(q.entityLongIds[0][g]);t=f.modulesLabelPage;f=f.moduleInfos;for(q=0;q<t.count;q++)-1==f[q].functionalAreaEntityLongId&&l.push(t.entityLongIds[0][q]);d=l}l=[];t=d.length;for(g=0;g<t;g++)if(f=d[g],(q=a.isObject(f)?[f]:this._getContentDefinitionsForEntityLongId(f))&&q.length)l=l.concat(q);else{var k=Q,l=null;a.isObject(f)?(console.warn("anaplan.layout.TabContainer._views: no content definition for view",f),l=k.messageActionUnavailable):(f=L.getEntityTypeIndex(f),
f===F.FUNCTIONAL_AREA_ENTITY_TYPE_INDEX&&(l=c.substitute(k.messageNoContentInFunctionalArea,{role:E.getLoggedInUserCurrentModelRole()})),f===F.MODULE_ENTITY_TYPE_INDEX&&(l=c.substitute(k.messageNoPermissionToViewModule,{role:E.getLoggedInUserCurrentModelRole()})),f===F.DASHBOARD_ENTITY_TYPE_INDEX&&(l=c.substitute(k.messageNoPermissionToViewDashboard,{role:E.getLoggedInUserCurrentModelRole()})));A.showInfoDialog(l,{title:k.titleInvalidAction});return}for(var f=null,t=l.length,s,g=0;g<t;g++){h=l[g];
q=a.clone(h.content);if(!q){console.warn("anaplan.layout.TabContainer TODO: replace with exception? TabContainer:_views expected at least one content item found "+q);return}s="dashboard"===q.viewAs;k=q.id;q.viewDefinition&&console.warn("anaplan.layout.TabContainer _views did not expect old style view definition");if(this._isFloatingTab(k))h=this._floatingTabs[k],h.rresume(dojo.mixin({},q?{content:q}:null,e));else{this._contentDefinitions[k]=s?null:q;m=null;m=this._getChildIndex(k);if(-1===m){this._tabParams[k]=
e||null;var w=s&&q.entityLongId===H.getLoggedInUserDefaultDashboard(C);m=this._createEmptyTab(k,s?q.entityLongId:q.moduleViewReference.entityDefaultViewEntityLongId,h.title,!0,w?"anaplanEditorIcon sidebarButtonIconHome":s?"anaplanEditorIcon anaplanEditorIconDashboard":"anaplanModuleIcon anaplanModuleIconGreen",s?b[F.DASHBOARD_TAB]:b[F.VIEW_TAB]);w?this.addChild(m,this._getIndexPositionHomeDashboard()):this.addChild(m)}else this._tabParams[k]=a.mixin({},q?{content:q}:null,e),m=this.getChildren()[m];
f=f||m}}f&&(this.selectedChildWidget===f?(f.suspend(),f.resume(this._tabParams[k]),this._hasPendingResult(k)&&(this._tabParams[k].gatherRequired&&setTimeout(function(){r.gather()},200),delete this._tabParams[k])):this.selectChild(f))}},_getIndexPositionHomeDashboard:function(){var a=this._getChildIndex(F.SETTINGS_TAB);if(-1<a)return a+1;a=this._getChildIndex(F.WORKFLOW_TAB);return-1<a?a+1:0},_hasPendingDrillToTransaction:function(a){return!!this._tabParams[a]&&this._tabParams[a].hasOwnProperty("viewDefinition")},
_hasPendingResult:function(a){return!!this._tabParams[a]&&this._tabParams[a].hasOwnProperty("result")}})})},"anaplan/view/AddModuleFormula":function(){define("anaplan/data/ModelContentCache anaplan/widgets/Dialog2 dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/i18n!dijit/nls/common dojo/text!anaplan/templates/AddModuleFormula.html anaplan/widgets/MasterSelector anaplan/widgets/Button dijit/a11yclick".split(" "),function(g,b,k,p,r,n,f,
s,l){return f([p,b.ContentMixin,k,r],{baseClass:"addModuleFormula",tabindex:-1,templateString:l,widgetsInTemplate:!0,constructor:function(a){this._moduleEntityLongId=a.moduleEntityLongId;this._selectedVersionEntityLongId=null},focus:function(){this.inputOk.focus()},onAddModuleFormula:function(){},onClose:function(){},onDialogShow:function(){},postCreate:function(){this.inherited(arguments);this.inputOk.set("label",s.buttonOk);this.inputCancel.set("label",s.buttonCancel);this.inputOk.set("disabled",
!0)},startup:function(){this.inherited(arguments);this._refreshLineItemSubsetSelector();this._refreshVersionSelector()},_filterLineItemSubsetsLabelPage:function(a){if(a){var b=g.getModuleInfo(this._moduleEntityLongId);if(!b)return null;for(var b=b.lineItemSubsetEntityLongIds,d=[],l=[],h=0;h<a.count;h++)-1!=n.indexOf(b,a.entityLongIds[0][h])&&(d.push(a.entityLongIds[0][h]),l.push(a.labels[0][h]));return{count:d.length,labels:[l],entityLongIds:[d]}}},_isSelectionValid:function(){return null!=this._selectedLineItemSubsetEntityLongId&&
null!=this._selectedVersionEntityLongId},_layoutChildren:function(){console.warn(this.id+" TODO: _layoutChildren")},_onInputOkClick:function(){this.onAddModuleFormula({lineItemSubsetEntityLongId:this._selectedLineItemSubsetEntityLongId,versionEntityLongId:this._selectedVersionEntityLongId})},_onInputCancelClick:function(){this.onClose()},_onLineItemSubsetSelectionChange:function(a){this._selectedLineItemSubsetEntityLongId=a;this.inputOk.set("disabled",!this._isSelectionValid())},_onVersionSelectionChange:function(a){this._selectedVersionEntityLongId=
a;this.inputOk.set("disabled",!this._isSelectionValid())},_refreshLineItemSubsetSelector:function(){var a=g.getLineItemSubsetsInfo(),a=this._filterLineItemSubsetsLabelPage(a.lineItemSubsetsLabelPage);this.lineItemSubsetSelector.set("labelPage",a);a&&(a.entityLongIds&&a.entityLongIds.length)&&this.lineItemSubsetSelector.set("value",{value:a.entityLongIds[0]})},_refreshVersionSelector:function(){this.versionSelector.set("labelPage",g.getVersionsLabelPage());var a=g.getVersionsLabelPage();a&&a.count&&
this.versionSelector.set("value",{value:a.entityLongIds[0][0]})}})})},"anaplan/modelmap/data/ModelMapStore":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/store/Memory"],function(g,b,k,p){return g([p],{queryEngine:function(g){return b.hitch(this,function(){return this._find(g)})},_find:function(g){var n=[];this._modules={};this._functionalAreas={};k.forEach(this.data,b.hitch(this,function(b){this._modules[b.name]={label:b.name,id:b.id};this._functionalAreas[b.parent]=
{label:b.parent,id:b.parent}}));var f=this._filterList(g,"Modules",this._modules);g=this._filterList(g,"Functional Areas",this._functionalAreas);0<f.results.length&&n.push(f);0<g.results.length&&n.push(g);return n},_filterList:function(b,g,f){b=b.toLowerCase();g={parent:g,results:[]};for(var k in f)-1<k.toLowerCase().indexOf(b)&&g.results.push(f[k]);return g}})})},"anaplan/settings/UsersAndRoles":function(){define("dojo/_base/declare dijit/layout/TabContainer anaplan/settings/UsersAndRoles/_Users anaplan/layout/ManagedContainer anaplan/settings/View anaplan/data/ModelContentHelper anaplan/constants anaplan/utils/EntityLongIdHelper dojo/topic dojo/_base/lang dojo/i18n!anaplan/nls/usersAndRoles".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e){return g("anaplan.settings.UsersAndRoles",[b],{nested:!1,tabindex:-1,constructor:function(b){this._workspaceId=b.workspaceId;this._modelId=b.modelId;this._modelContent={entityLongId:f.MODEL_CONTENT_USERS_ENTITY_LONG_ID};this._tabIds="USERS ROLES ROLES_TO_MODULES ROLES_TO_VERSIONS ROLES_TO_LISTS ROLES_TO_ACTIONS".split(" ");var l=s.entityLongIdToEntityLongIdIdentifier(f.SYSTEM_PROPERTY_MODEL_ROLE_ACCESS_LEVEL),h=s.entityLongIdToEntityLongIdIdentifier(f.SYSTEM_PROPERTY_MODEL_ROLE_SELECTIVE_EDITING),
g=s.entityLongIdToEntityLongIdIdentifier(f.SYSTEM_PROPERTY_MODEL_ROLE_CAN_RUN_ACTION);this._viewDefinitions={USERS:null,ROLES:a.mixin({name:e.ROLES,type:"MODEL_DEFINITION",staticContextIdentifiers:[],columnSizes:{defaultColumnWidth:150,customRowLabelWidthsByDimension:[],customWidthsByLineItem:[],customWidthsByStyle:[]}},n.getAxesForViewDefinition([f.SYSTEM_AXIS_IDENTIFIER_FULL_ACCESS_WITH_CUSTOM_MODEL_ROLE_IDENTIFIER],[f.SYSTEM_AXIS_IDENTIFIER_MODEL_ROLE_PROPERTY_IDENTIFIER])),ROLES_TO_MODULES:a.mixin({name:e.ROLES_TO_MODULES,
type:"MODEL_DEFINITION",staticContextIdentifiers:[l],columnSizes:{defaultColumnWidth:150,customRowLabelWidthsByDimension:[],customWidthsByLineItem:[],customWidthsByStyle:[]}},n.getAxesForViewDefinition([f.SYSTEM_AXIS_IDENTIFIER_MODULE_ALL_IDENTIFIER],[f.SYSTEM_AXIS_IDENTIFIER_MODEL_ROLE_IDENTIFIER])),ROLES_TO_VERSIONS:a.mixin({name:e.ROLES_TO_VERSIONS,type:"MODEL_DEFINITION",staticContextIdentifiers:[l],columnSizes:{defaultColumnWidth:150,customRowLabelWidthsByDimension:[],customWidthsByLineItem:[],
customWidthsByStyle:[]}},n.getAxesForViewDefinition([f.SYSTEM_AXIS_IDENTIFIER_VERSION_ALL_IDENTIFIER],[f.SYSTEM_AXIS_IDENTIFIER_MODEL_ROLE_IDENTIFIER])),ROLES_TO_LISTS:a.mixin({name:e.ROLES_TO_LISTS,type:"MODEL_DEFINITION",staticContextIdentifiers:[h],columnSizes:{defaultColumnWidth:150,customRowLabelWidthsByDimension:[],customWidthsByLineItem:[],customWidthsByStyle:[]}},n.getAxesForViewDefinition([f.SYSTEM_AXIS_IDENTIFIER_HIERARCHY_IDENTIFIER],[f.SYSTEM_AXIS_IDENTIFIER_MODEL_ROLE_IDENTIFIER])),ROLES_TO_ACTIONS:a.mixin({name:e.ROLES_TO_ACTIONS,
type:"MODEL_DEFINITION",staticContextIdentifiers:[g],columnSizes:{defaultColumnWidth:150,customRowLabelWidthsByDimension:[],customWidthsByLineItem:[],customWidthsByStyle:[]}},n.getAxesForViewDefinition([f.SYSTEM_AXIS_IDENTIFIER_ACTION_WITH_HEADING_IDENTIFIER],[f.SYSTEM_AXIS_IDENTIFIER_MODEL_ROLE_IDENTIFIER]))};this._show={};this._showTipsOnStartup=b.showTipsOnStartup;this._suspended=!1},postCreate:function(){this.inherited(arguments);for(var b=0;b<this._tabIds.length;b++){var f=this._tabIds[b],h=
(e[f]||f).split(" "),h=new p({id:f,title:h.join("\x3cspan class\x3d'anaplanEditorIcon anaplanEditorIconArrowTab'\x3e\x3c/span\x3e"),gutters:!1});this.addChild(h);0===b&&(this._lastChildId=f,this._populateTab(h))}b=l.subscribe(this.id+"-selectChild",a.hitch(this,"_onSelectChild"));this.own(b)},hide:function(a){if(a===f.TIPS){delete this._show[a];for(var b=0;b<this.getChildren().length;b++){var e=this.getChildren()[b];e.hide&&e.hide(a)}}},resume:function(){this._suspended?this._suspended=!1:console.warn(this.id+
" resume");this.selectedChildWidget.resume?this.selectedChildWidget.resume():console.warn(this.id+" child without resume "+this.selectedChildWidget.id)},show:function(a){if(a===f.TIPS){this._show[a]=!0;for(var b=0;b<this.getChildren().length;b++){var e=this.getChildren()[b];e.show&&e.show(a)}}},startup:function(){this.inherited(arguments);this._showTipsOnStartup&&this.show(f.TIPS)},suspend:function(){this._suspended?console.warn(this.id+" suspend"):this._suspended=!0;this.selectedChildWidget.suspend?
this.selectedChildWidget.suspend():console.warn(this.id+" child without suspend "+this.selectedChildWidget.id)},uninitialize:function(){this.inherited(arguments)},_getChildIndex:function(a){for(var b=this.getChildren().length,e=0;e<b;e++)if(this.getChildren()[e].id==a)return e;return-1},_onSelectChild:function(){if(this.getParent()){var a=this._getChildIndex(this._lastChildId);-1!==a&&(a=this.getChildren()[a],a.suspend?a.suspend():console.warn(this.id+" child without suspend "+this._lastChildId));
this._lastChildId=this.selectedChildWidget.id;0===this.selectedChildWidget.getChildren().length?this._populateTab(this.selectedChildWidget):this.selectedChildWidget.resume?this.selectedChildWidget.resume():console.warn(this.id+" child without resume "+this.selectedChildWidget.id)}},_populateTab:function(b){var l={modelId:this._modelId,region:"center",workspaceId:this._workspaceId};if("USERS"===b.id)b.addChild(new k(a.mixin(l,{modelContent:this._modelContent,showTipsOnStartup:this._show[f.TIPS]||!1})));
else{var h=this._viewDefinitions[b.id],g={label:e[b.id]};"ROLES"===b.id?g.entityTypeIndex=f.CUSTOM_MODEL_ROLE_ENTITY_TYPE_INDEX:"ROLES_TO_ACTIONS"===b.id&&(g.entityTypeIndex=f.ACTION_ENTITY_TYPE_INDEX);b.addChild(new r(a.mixin(l,{content:[{workspaceId:this._workspaceId,modelId:this._modelId,viewAs:"grid",pageLabelsRequired:!1,viewDefinition:h}],modelContent:g,showTipsOnStartup:this._show[f.TIPS]||!1})))}}})})},"anaplan/view/ModelManagement/RenameModelView":function(){define("anaplan/utils/UIHelper anaplan/utils/FormatHelper anaplan/data/ModelContentCache anaplan/Exceptions anaplan/utils/IdChecker anaplan/view/ModelManagement/ModelView dojo/_base/declare dojo/_base/event dojo/dom-attr dojo/i18n!anaplan/nls/modelManagement dojo/i18n!dijit/nls/common dojo/keys dojo/string dojo/text!anaplan/templates/ModelManagement/RenameModelView.html dijit/form/ValidationTextBox anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h){return f([n],{templateString:h,cancelButton:null,modelNameLabel:null,okButton:null,onRenameModel:function(){},onValidStateChange:function(a){this.okButton.set("disabled",!a)},postCreate:function(){try{this.inherited(arguments);g.setText(this.modelNameLabel,a.labelModelName);this.okButton.set("label",e.buttonOk);this.cancelButton.set("label",e.buttonCancel);l.set(this.modelNameLabel,"for",this.modelNameTextBox.id);var b=this;this.modelNameTextBox.validator=function(a){a=
b._checkModelName(a);return null!=a&&0<a.length?(this.invalidMessage=a,!1):!0}}catch(c){throw new p.ClientException("RenameModelView#postCreate",c);}},setModel:function(a,c){this._modelId=a;this._modelName=c},_checkModelName:function(b){var c=new r;b=q.trim(b);if(!c.checkId(b))return c.getInvalidIdMessage();if((c=k.getWorkspaceInfo())&&c.modelSummaries)for(var c=c.modelSummaries,d=c.length,e=0;e<d;e++){var h=c[e].modelName.toLowerCase();if(h!==this._modelName.toLowerCase()&&b.toLowerCase()==h)return a.errorDuplicateModelName}return null},
_onRenameModel:function(){try{if(this.isValid()){var a=this.modelNameTextBox.get("value");this.onRenameModel(this._modelId,q.trim(a))}}catch(c){throw new p.ClientException("RenameModelView#_onRenameModel",c);}},_onOkButtonClick:function(){this._onRenameModel()},_onKeyDown:function(a){try{var c=a.keyCode;c===d.ESCAPE?(this._onCancel(),s.stop(a)):c===d.ENTER&&(this._onRenameModel(),s.stop(a))}catch(b){g.showErrorReporter(new p.ClientException("RenameModelView#_onKeyDown",b,{widgetId:this.id},a))}},
_onShow:function(){try{var d=b.escapeHTML(this._modelName);this.onTitleChange(a.titleRenameModel.replace(/\$\{modelName\}/,d));this.onHelpChange(null);this.modelNameTextBox.focus()}catch(c){throw new p.ClientException("RenameModelView#_onShow",c);}}})})},"anaplan/settings/History":function(){define("anaplan/anapediaKeys anaplan/Exceptions anaplan/utils/UIHelper anaplan/view/History anaplan/widgets/FullScreenDialog dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/registry dojo/_base/declare dojo/dom-style dojo/date/stamp dojo/dom-attr dojo/dom-geometry dojo/on dojo/_base/lang dojo/topic anaplan/constants anaplan/common/SelectiveAccess dojo/i18n!anaplan/nls/history dojo/i18n!anaplan/nls/view dojo/text!anaplan/templates/History_Form.html dojo/text!anaplan/templates/RestoreToLockedDialog.html dijit/form/RadioButton dijit/form/DateTextBox dijit/form/TextBox dijit/form/CheckBox anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B){return a([f,n,s],{baseClass:"showHistoryPreferences",tabindex:-1,templateString:A,constructor:function(a){this._workspaceId=a.workspaceId;this._modelId=a.modelId},postCreate:function(){this._initializeForm();var a=t.subscribe("anaplan/modelId",c.hitch(this,"_setModelId"));this.own(a)},resize:function(a){var c;try{a&&(0<a.h&&0<a.w)&&h.setMarginBox(this.domNode,a)}catch(d){c={widgetId:this.id},a&&(c.size=a),k.showErrorReporter(new b.ClientException("anaplan.widgets.History#resize",
d,c))}},canSaveExport:function(){return this._modelId&&w.canCreate(m.EXPORT_ENTITY_TYPE_INDEX)},startup:function(){},uninitialize:function(){this.inherited(arguments)},_initializeForm:function(){this.showHistory24hrsLabel.innerHTML=z.showHistory24hrsLabel;this.showHistory7dLabel.innerHTML=z.showHistory7dLabel;this.showHistory30dLabel.innerHTML=z.showHistory30dLabel;this.showHistoryAllLabel.innerHTML=z.showHistoryAllLabel;this.showHistoryDateRangeLabel.innerHTML=z.showHistoryDateRangeLabel;this.showHistorySaveOptionsCheckLabel.innerHTML=
z.showHistorySaveOptionsCheckLabel;this.showHistorySaveOptionsExportNameLabel.innerHTML=z.showHistorySaveOptionsExportNameLabel;q.set(this.auditLogButton,"label",z.labelShowHistoryButton);this.canSaveExport()?(e.set(this.showHistorySaveOptionsCheck.domNode,{visibility:"visible"}),e.set(this.showHistorySaveOptionsCheckLabel,{visibility:"visible"}),e.set(this.showHistorySaveOptionsExportNameLabel,{visibility:"visible"}),e.set(this.showHistorySaveOptionsExportName.domNode,{visibility:"visible"})):(e.set(this.showHistorySaveOptionsCheck.domNode,
{visibility:"hidden"}),e.set(this.showHistorySaveOptionsCheckLabel,{visibility:"hidden"}),e.set(this.showHistorySaveOptionsExportNameLabel,{visibility:"hidden"}),e.set(this.showHistorySaveOptionsExportName.domNode,{visibility:"hidden"}))},_validateDate:function(){var a=l.byId("showHistoryDateRange").get("checked"),c=["showHistoryFromDate","showHistoryToDate"],b,d,e;if(a)for(e=d=0;2>d;d++)b=c[d],b=l.byId(b),e|=b._getDisplayedValueAttr().length&&b._isInvalidDate(b._getValueAttr());this.auditLogButton.set("disabled",
!(!a||!e));this._onSaveOptionsChange()},_onDateRangeChange:function(){var a=!l.byId("showHistoryDateRange").get("checked");this.showHistoryFromDate.set("disabled",a);this.showHistoryToDate.set("disabled",a);this._validateDate();this._onSaveOptionsChange()},_onSaveOptionsChange:function(){var a=!l.byId("showHistorySaveOptionsCheck").get("checked");a&&this.showHistorySaveOptionsExportName.set("value","");this.showHistorySaveOptionsExportName.set("disabled",a);if(!a&&(a=this.showHistorySaveOptionsExportName.get("value"),
!a||0===a.length||a===this._exportNameDefaultValue))this._exportNameDefaultValue=this._getDefaultExportName(),this.showHistorySaveOptionsExportName.set("value",this._exportNameDefaultValue)},_getDefaultExportName:function(){var a=this._getHistoryDuration();if("24"===a)return"Model History - Last 24 Hours.txt";if("7"===a)return"Model History - Last 7 Days.txt";if("30"===a)return"Model History - Last 30 Days.txt";if("RANGE"===a){var c=l.byId("showHistoryFromDate").get("value"),b=a=null;c&&(a=this._convertToIsoDate(c));
(c=l.byId("showHistoryToDate").get("value"))&&(b=this._convertToIsoDate(c));if(a||b)return c="Model History - Range",a&&(c=c+" From: "+a),b&&(c+=" To: ",c+=b),c+".txt"}return"Model History.txt"},_setModelId:function(a){this._modelId=a},_onHistoryButtonClick:function(){this._displayHistoryDialog()},_getHistoryDuration:function(){for(var a=document.getElementsByName("showHistoryRadio"),c=a.length,b,d="ALL";c--;)if(b=a[c],b.checked){d=b.value;break}return d},_convertToIsoDate:function(a){var c={selector:"date"};
return a?d.toISOString(a,c):a},_onAuditLogButtonClick:function(){var a={includeFullModelHistory:!0,viewDefinition:null,pageInfo:null,rowsSelectionEntityLongIds:null,columnsSelectionEntityLongIds:null,historyDuration:this._getHistoryDuration()},c,b,d,e;try{if("RANGE"===a.historyDuration){if(b=l.byId("showHistoryFromDate").get("value"))a.historyFromDate=this._convertToIsoDate(b);if(d=l.byId("showHistoryToDate").get("value"))a.historyToDate=this._convertToIsoDate(d)}if(l.byId("showHistorySaveOptionsCheck").get("checked")){var h=
this.showHistorySaveOptionsExportName.get("value");null!==h&&(void 0!==h&&0<h.length)&&(a.saveOptions=!0,a.exportName=h)}e=new p(a);c=new r({roles:["history","settings-history"],anapediaKey:g.showHistory,title:x.titleHistory,refocus:!1,content:e});c.own(u(c,"hide",function(){c.destroyRecursive()}),u(e,"cancel",function(){c.hide()}));c.show()}catch(m){k.throwClientException(this,m)}}})})},"anaplan/modelmap/Graph":function(){define(["dojo/_base/declare"],function(g){return g(null,{_hasLoaded:!1,currentData:null,
nodes:{},edges:[],constructor:function(){},_addNode:function(b){this.nodes[b.name]=b;this.addNode(b)},addNode:function(){},_addEdge:function(b,g){void 0!==this.nodes[b]&&void 0!==this.nodes[g]?(this.edges.push({from:b,to:g}),this.addEdge(b,g)):console.warn("Node does not exist when attempting to make connection: from "+b+" to "+g)},addEdge:function(){},restoreData:function(){this.clear();this.load(this.currentData)},load:function(b){this._clear();this.currentData=b;for(var g=0;g<b.length;g++)this._addNode(b[g]);
for(g=0;g<b.length;g++)for(var p=b[g],r=0;r<p.relationships.length;r++)0<p.relationships[r].length&&void 0!==this.nodes[p.relationships[r]]&&this._addEdge(p.name,p.relationships[r]);this._hasLoaded=!0},_clear:function(){this._hasLoaded&&(this.currentData=null,this.nodes={},this.edges=[],this.clear(),this._hasLoaded=!1)},clear:function(){console.warn("Clear function not implemented when calling it on a graph instance")},draw:function(){console.warn("Draw function not implemented when calling it on a graph instance")}})})},
"anaplan/settings/Time2/Forms/Widgets/FiscalYearExtraMonthQuarterSelect":function(){define("anaplan/widgets/_DomVisibleMixin dijit/form/Select dojo/_base/declare dojo/data/ObjectStore dojo/i18n!anaplan/nls/time dojo/store/Memory".split(" "),function(g,b,k,p,r,n){return k([b,g],{sortByLabel:!1,labelType:"text",required:!0,startup:function(){this.inherited(arguments);this.refreshValues()},refreshValues:function(){var b=new p({objectStore:this._getData()});this.set("store",b)},_getData:function(){for(var b=
[r.optionFiscalYearExtraMonthQuarter1,r.optionFiscalYearExtraMonthQuarter2,r.optionFiscalYearExtraMonthQuarter3,r.optionFiscalYearExtraMonthQuarter4],g=[],l=0;4>l;l++)g.push({id:l+1,label:b[l]});return new n({data:g})}})})},"anaplan/utils/confirmationDialogHelper":function(){define(["anaplan/utils/JsHelper","anaplan/widgets/SimpleConfirmationDialog","dojo/_base/lang"],function(g,b,k){var p={showDialog:function(k,n,f){if(!g.isFunction(f)||g.isNullOrUndefined(n)||g.isNullOrUndefined(k))throw Error("Invalid args when showing the confirmation dialog");
var s=new b({content:n,title:k});s.on("cancel",function(){f(!1);s.destroy()});s.on("confirm",function(){f(!0);s.destroy()});s.show()}};k.setObject("anaplan.utils.confirmationDialogHelper",p);return p})},"anaplan/tabs/TabFactory":function(){define("anaplan/Exceptions anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/tabs/ModelMap anaplan/tabs/DashboardWrapper anaplan/tabs/Settings anaplan/tabs/View anaplan/tabs/Workflow anaplan/constants dojo/_base/lang dojo/_base/array dojo/json".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d){var q={loadTab:function(h,q,c){var t={region:"center"};switch(h){case l.MODELMAP_TAB:c=new p(a.mixin(c||{},t));q.addChild(c);break;case l.VIEW_TAB:c=new f(a.mixin(c||{},t));q.addChild(c);break;case l.SETTINGS_TAB:c=new n(a.mixin(c||{},t));q.addChild(c);break;case l.WORKFLOW_TAB:c=new s(a.mixin(c||{},t));q.addChild(c);break;case l.DASHBOARD_TAB:h=q.contentEntityLongId;var m=b.getDashboardInfo(h),w=k.getLoggedInUserDefaultDashboard(b),w=h===w,z=b.getDashboardsLabelPage(),
x=e.indexOf(z.entityLongIds[0],h),z=z.entityIds[0][x];null!==m&&(m=d.parse(m.dashboardDefinitionJsonString),c=a.mixin(a.mixin(c||{},t),{dashboardEntityLongId:h,dashboardDefinition:m,dashboardEntityId:z,isHomeDashboard:w,tabButtonId:a.exists("controlButton.containerNode.id",q)?q.controlButton.containerNode.id:null}),c=new r(c),q.addChild(c));break;default:throw new g.InvalidArgumentException(null,null,{value:h});}}};a.setObject("anaplan.tabs.TabFactory",q);return q})},"anaplan/view/FormulaWindow":function(){define("anaplan/utils/UIHelper dojo/_base/declare anaplan/view/_Editor dijit/layout/_LayoutWidget anaplan/widgets/Button anaplan/Exceptions anaplan/view/_editor/_Plugin anaplan/view/_editor/plugins/Help dojo/window dojo/on dojo/dnd/move dojox/layout/ResizeHandle dojo/_base/lang dojo/_base/array dojo/dom-construct dojo/sniff dojo/_base/html dojo/dom-geometry dojo/dom-style dojo/text!anaplan/templates/FormulaWindow.html dijit/form/ToggleButton anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z){return b([k,p],{attachAs:null,baseClass:"dijitDialog formulaWindow",templateString:z,windowTitle:null,constructor:function(){this._plugins=[];this._resizeHandles=[]},addPlugin:function(a){this._plugins.push(a);a.setEditor(this);a.setToolbar(this)},appendText:function(a){a&&(this.formula.value=this.get("formulaValue")+a)},execCommand:function(a,c){this.insertExpression(c)},onAttach:function(){},postCreate:function(){this.inherited(arguments);this._moveable=
new e.parentConstrainedMoveable(this.domNode,{handle:this.titleBar,area:"content",within:!0});this._resizeHandles=[];h.forEach(["TR","BR","BL","TL"],function(a){a=new d({targetId:this.domNode.id,activeResize:!0,minHeight:300,minWidth:250,position:a,resizeAxis:"xy",onResize:q.hitch(this,function(){try{this._ensureVisible()}catch(a){console.error(this.id,"onResize",a)}})});this._resizeHandles.push(a);u.place(a.domNode,this.domNode)},this);if(!1===(c("ios")||c("android"))){var b=a(window,"resize",q.hitch(this,
"_onWindowResize"));this.own(b)}this.attachButton.set("iconClass","FormulaBar"===this.attachAs?"anaplanEditorIcon anaplanEditorIconFormulaPanelContract":"anaplanEditorIcon anaplanEditorIconFormulaWindowAttach")},startup:function(){this.addPlugin(new s);this.addPlugin(new f({buttonClass:r,command:"divide",commandArg:"/",iconClass:"anaplanEditorIcon anaplanEditorIconDivide"}));this.addPlugin(new f({buttonClass:r,command:"multiply",commandArg:"*",iconClass:"anaplanEditorIcon anaplanEditorIconMultiply"}));
this.addPlugin(new f({buttonClass:r,command:"minus",commandArg:"-",iconClass:"anaplanEditorIcon anaplanEditorIconMinus"}));this.addPlugin(new f({buttonClass:r,command:"plus",commandArg:"+",iconClass:"anaplanEditorIcon anaplanEditorIconPlus"}));this.inherited(arguments)},uninitialize:function(){this._resizeTimeout&&clearTimeout(this._resizeTimeout);this._moveable&&(this._moveable.destroy(),this._moveable=null);this._resizeHandle&&(this._resizeHandle.destroy(),this._resizeHandle=null)},layout:function(){var a=
m.getMarginBox(this.titleBar),c=m.getMarginBox(this.formulaHeader),b=m.getMarginBox(this.top);m.getMarginBox(this.toolbar);m.setMarginBox(this.formula,{h:this._contentBox.h-a.h-c.h-b.h-11})},_ensureVisible:function(){try{if(this.domNode){var a=l.getBox(),c=t.coords(this.domNode),b=Math.max(0,c.l);c.l+c.w>a.l+a.w&&(b=Math.max(0,a.l+a.w-c.w));var d=Math.max(0,c.t);c.t+c.h>a.t+a.h&&(d=Math.max(0,a.t+a.h-c.h));(b!==c.l||d!==c.t)&&w.set(this.domNode,{top:d+"px",left:b+"px"});var e=c.h;d+e>a.t+a.h&&(e=
a.t+a.h-d);var h=c.w;b+h>a.l+a.w&&(h=a.l+a.w-b);(h!==c.w||e!==c.h)&&this.resize({w:h,h:e})}}catch(m){console.error(this.id,m)}},_onAttachButtonClick:function(){this.onAttach()},_onWindowResize:function(a){try{this._resizeTimeout&&clearTimeout(this._resizeTimeout),this.domNode&&(this._resizeTimeout=setTimeout(q.hitch(this,function(){this._ensureVisible()}),250))}catch(c){g.showErrorReporter(new n.ClientException("FormulaWindow: _onWindowResize",c,null,a))}},_setEditModeAttr:function(a){this.inherited(arguments);
for(var c=1;c<this.getChildren().length;c++)this.getChildren()[c].set("disabled",!a)},_setWindowTitleAttr:function(a){a?g.setText(this.moduleName,a):u.empty(this.moduleName)}})})},"anaplan/settings/ModelContentsTree":function(){define("anaplan/anapediaKeys anaplan/data/Aggregator anaplan/utils/UIHelper dojo/_base/declare dijit/layout/BorderContainer dijit/layout/ContentPane dijit/layout/StackContainer dijit/tree/TreeStoreModel anaplan/common/SelectiveAccess anaplan/data/ChangeFactory anaplan/utils/IdChecker anaplan/utils/ErrorDialog anaplan/data/ModelContentCache anaplan/constants dojo/on dojo/data/ItemFileWriteStore dojo/string dojo/dom-class dojo/_base/lang dojo/_base/array anaplan/settings/ModelContentsTree/Header anaplan/settings/ModelContentsTree/Tree anaplan/Exceptions anaplan/data/RequestFactory dojo/i18n!anaplan/nls/modelContents dojo/i18n!anaplan/nls/common dojo/i18n!dijit/nls/loading".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C){return p([r],{gutters:!1,constructor:function(a){this._currentSelection=a.selectedEntityLongId?{entityLongId:a.selectedEntityLongId}:null;this._setInitialSelection=!1;this._showCellCount=!0;this._modelDefinitionSerialNumber=-1},addNewGeneralList:function(){this._addNewItem(w.hitch(this,function(a,c){this._addNewGeneralList(a,c)}))},addNewLineItemSubset:function(){this._addNewItem(w.hitch(this,function(a,c){this._addNewLineItemSubset(a,
c)}))},getCurrentSelection:function(){return this._currentSelection},onSelectionChange:function(){},postCreate:function(){try{this.inherited(arguments),this._header=new x({region:"top"}),this.addChild(this._header),this._stackContainer=new f({region:"center"}),this.addChild(this._stackContainer),this._loadingMessage=new n({content:'\x3cdiv class\x3d"loadingMessage"\x3e\x3cspan class\x3d"loadingMessageLabel"\x3e'+C.loadingState+"\x3c/span\x3e\x3c/div\x3e",region:"center"}),this._stackContainer.addChild(this._loadingMessage),
q.addObserver(this)}catch(a){throw new B.ClientException(this.declaredClass+".postCreate",a);}},reset:function(){this._currentSelection=null;this._setInitialSelection=!1;this._destroyTree();this._header.reset();this._testString=null;this._modelDefinitionSerialNumber=this._modelSerialNumber=-1;this._modelActiveState=null},resume:function(){this._suspended?(this._suspended=!1,this.update()):console.warn(this.id+" resume")},setModelId:function(){this.reset()},startup:function(){this.inherited(arguments);
this.update()},suspend:function(){this._suspended?console.warn("suspend "+this.id):this._suspended=!0},uninitialize:function(){q.deleteObserver(this);this.inherited(arguments)},update:function(){try{if(!this._suspended){this._header.update();var a=q.getModelInfo(),c=q.getModelSummary(window.modelId);if(!(null===a||null===c)){var b=q.getModelDefinitionSerialNumber(),d=c.activeState;b===this._modelDefinitionSerialNumber&&d===this._modelActiveState||(this._conditionalRebuild(),this._modelDefinitionSerialNumber=
b,this._modelActiveState=d)}}}catch(e){k.throwClientException(this,e)}},setSelectedById:function(a){this._tree.selectNodeWithId(a)},_addNewGeneralList:function(a,c){this._postInsert(a,c,h.HIERARCHY_ENTITY_TYPE_INDEX)},_addNewItem:function(a){try{var c=this._tree.getSelectedTreeNode();if(c){this._editedTreeNode=c;var b=u(c,"CommitEdit",w.hitch(this,function(b){a(c,b)})),d=u(c,"CancelEdit",w.hitch(this,function(){this._tree.set("path",this._previousPath);c.endEdit();c.labelNode.focus();this._editedTreeNode=
null})),e=u(c,"EndEdit",w.hitch(this,function(){b.remove();e.remove();d.remove()}));this.own(b,e,d);c.editWithValue("")}}catch(h){k.throwClientException(this,h)}},_addNewLineItemSubset:function(a,c){this._postInsert(a,c,h.LINE_ITEM_SUBSET_ENTITY_TYPE_INDEX)},_conditionalRebuild:function(){var a=this._getTestString();if(this._testString!=a){this._testString=a;this._destroyTree();var a=this._getOrderedParentChildArray(),b=this._getItems(a);this._store=new c({data:{identifier:"index",label:"name",items:b}});
this._tree=this._createModelContentsTree();this._stackContainer.addChild(this._tree);this._stackContainer.selectChild(this._tree);if(this._selectNewItemEntityTypeIndex){var d=null;this._selectNewItemEntityTypeIndex===h.HIERARCHY_ENTITY_TYPE_INDEX?d=h.MODEL_CONTENT_NEW_LIST_ENTITY_LONG_ID:this._selectNewItemEntityTypeIndex===h.LINE_ITEM_SUBSET_ENTITY_TYPE_INDEX&&(d=h.MODEL_CONTENT_NEW_LINE_ITEM_SUBSET_ENTITY_LONG_ID);if(d)for(var e=null,m=null,b=0;b<a.length;b++)if(e=m||a[b],m=a[b],m.child.entityLongId===
d){this._tree.selectNodeWithId(e.child.entityLongId);break}this._selectNewItemEntityTypeIndex=null}else if(this._currentSelection){d=this._currentSelection;for(b=0;b<a.length;b++)if(a[b].child.entityLongId==d.entityLongId){this._setInitialSelection||(this.onSelectionChange(d),this._setInitialSelection=!0);this._tree.selectNodeWithId(this._currentSelection.entityLongId);return}this._setDefaultSelection();console.warn(this.id+" _conditionalRebuild failed to find current selection "+d.label)}else this._setDefaultSelection()}},
_createModelContentsTree:function(){var a=new s({store:this._store,query:{name:"*"},mayHaveChildren:function(a){return 0<a.children.length}}),a=new A({model:a,tabindex:this.tabindex});m.add(a.domNode,"modelContentsTree");var c=u(a,"Click",w.hitch(this,"_onTreeSelect"));this.own(c);return a},_destroyTree:function(){this._tree&&(this._stackContainer.removeChild(this._tree),this._tree.model.destroy(),this._tree.destroy());this._tree=this._store=null},_getItems:function(a){var c=[],b={},d=0,e,h;for(e=
0;e<a.length;e++)h=a[e],b[h.child.entityLongId]={index:h.child.entityLongId,name:h.child.displayName,helpId:h.child.helpId,entityId:h.child.name||null,children:[]},d++;for(e=0;e<a.length;e++)h=a[e],h.parent?b[h.parent.entityLongId].children.push(b[h.child.entityLongId]):c.push(b[h.child.entityLongId]);return[{index:"root",name:"root",children:c,count:d}]},_getOrderedParentChildArray:function(){var a=[];try{a.push({child:{name:E.labelTime,displayName:E.labelTime,entityLongId:h.MODEL_CONTENT_TIMESCALE_ENTITY_LONG_ID,
helpId:"default.htm#cshid\x3dtime"},parent:null});a.push({child:{name:E.labelVersions,displayName:E.labelVersions,entityLongId:h.MODEL_CONTENT_VERSION_ENTITY_LONG_ID,helpId:"default.htm#cshid\x3d1136"},parent:null});a.push({child:{name:v.users,displayName:v.users,entityLongId:h.MODEL_CONTENT_USERS_ENTITY_LONG_ID,helpId:"default.htm#cshid\x3d1137"},parent:null});a.push({child:{name:v.contents,displayName:v.contents,entityLongId:h.MODEL_CONTENT_CONTENTS_ENTITY_LONG_ID,helpId:"default.htm#cshid\x3d1138"},
parent:null});a.push({child:{name:E.labelActions,displayName:E.labelActions,entityLongId:h.MODEL_CONTENT_ACTION_ENTITY_LONG_ID,helpId:"default.htm#cshid\x3d1139"},parent:null});a.push({child:{name:E.labelRemoteModels,displayName:E.labelRemoteModels,entityLongId:h.MODEL_CONTENT_REMOTE_MODEL_ENTITY_LONG_ID,helpId:g.remoteModels},parent:null});a.push({child:{name:E.labelModules,displayName:E.labelModules,entityLongId:h.MODEL_CONTENT_MODULE_ENTITY_LONG_ID,helpId:"default.htm#cshid\x3d1141"},parent:null});
a.push({child:{name:E.labelDashboards,displayName:E.labelDashboards,entityLongId:h.MODEL_CONTENT_DASHBOARD_ENTITY_LONG_ID,helpId:"default.htm#cshid\x3d1142"},parent:null});a.push({child:{name:v.history,displayName:v.history,entityLongId:h.MODEL_CONTENT_HISTORY_ENTITY_LONG_ID,helpId:"default.htm#cshid\x3d1143"},parent:null});a.push({child:{name:k.generateId(v.revisionTags),displayName:v.revisionTags,entityLongId:h.MODEL_CONTENT_REVISION_TAGS_ENTITY_LONG_ID,helpId:"default.htm#cshid\x3d1144"},parent:null});
a.push({child:{name:v.tags,displayName:v.tags,entityLongId:h.MODEL_CONTENT_TAGS_ENTITY_LONG_ID,helpId:g.searchTags},parent:null});var c={child:{name:v.listsAndRollUps,displayName:v.listsAndRollUps,entityLongId:h.MODEL_CONTENT_LISTS_AND_ROLLUPS_ENTITY_LONG_ID,helpId:"default.htm#cshid\x3d1145"},parent:null};a.push(c);var b={child:{name:E.labelGeneralLists,displayName:E.labelGeneralLists,entityLongId:h.MODEL_CONTENT_HIERARCHY_ENTITY_LONG_ID,helpId:"default.htm#cshid\x3d1145"},parent:c.child};a.push(b);
if(!q.getModelInfo())return a;for(var d=q.getHierarchiesLabelPage(),e=q.getHierarchyInfos(),m=d.count,f=d.labels[0],t=d.entityIds[0],s=d.entityLongIds[0],w,d=0;d<m;d++)w=e[d],w.isCustomHierarchy&&a.push({child:{name:t[d],displayName:f[d],entityLongId:s[d],helpId:"default.htm#cshid\x3d1145"},parent:b.child});l.canCreate(h.HIERARCHY_ENTITY_TYPE_INDEX)&&a.push({child:{name:v.newList,displayName:v.newList,entityLongId:h.MODEL_CONTENT_NEW_LIST_ENTITY_LONG_ID,helpId:"default.htm#cshid\x3d1145"},parent:b.child});
var n={child:{name:E.labelLineItemSubsets,displayName:E.labelLineItemSubsets,entityLongId:h.MODEL_CONTENT_LINE_ITEM_SUBSET_ENTITY_LONG_ID,helpId:"default.htm#cshid\x3d1146"},parent:c.child};a.push(n);for(var r=q.getLineItemSubsetCategoryInfos(),Q,p,u,z,x,y,A,C=r.length-1;0<=C;C--){Q=r[C];p=Q.lineItemSubsets;u=p.count;z=p.labels[0];x=p.entityIds[0];y=p.entityLongIds[0];for(A=0;A<u;A++)a.push({child:{name:x[A],displayName:z[A],entityLongId:y[A],helpId:"default.htm#cshid\x3d1146"},parent:n.child})}l.canCreate(h.LINE_ITEM_SUBSET_ENTITY_TYPE_INDEX)&&
a.push({child:{name:v.newLineItemSubset,displayName:v.newLineItemSubset,entityLongId:h.MODEL_CONTENT_NEW_LINE_ITEM_SUBSET_ENTITY_LONG_ID,helpId:"default.htm#cshid\x3d1146"},parent:n.child})}catch(B){k.throwClientException(this,B)}return a},_getTestString:function(){var a=[];if(!q.getModelInfo())return null;var c=q.getModelSummary(window.modelId);a.push(c.activeState);(c=q.getLineItemSubsetCategoryInfos())&&z.forEach(c,function(c){a=a.concat(c.lineItemSubsets.labels)});c=q.getHierarchiesLabelPage();
if(!c)return a.join();a=a.concat(c.labels[0]);return a.join()},_isDuplicateNameInLabelPage:function(a,c){for(var b=a.toLowerCase(),d=c.labels[0],e=d.length,h=0;h<e;h++)if(b===d[h].toLowerCase())return!0;return!1},_onTreeSelect:function(a,c){try{var b=w.hitch(this,function(){this._setCurrentSelection({entityLongId:this._store.getIdentity(a),label:this._store.getLabel(a),helpId:this._store.getValue(a,"helpId","default.htm#cshid\x3d1147"),entityId:this._store.getValue(a,"entityId"),treeNode:c},this._tree.get("path"))}),
d=w.hitch(this,function(){this._preventDirtyCheck=!0;this._tree.selectNodeWithId(this._currentSelection.entityLongId)});this._preventDirtyCheck||k.dirtyFormCheck(b,d);this._preventDirtyCheck=!1}catch(e){b={widgetId:this.id},a&&(b.item={},a.name&&0<a.name.length&&(b.item.name=a.name[0]),a.index&&0<a.index.length&&(b.item.index=a.index[0])),c&&(b.treeNode={},c.id&&(b.treeNode.node=c.toString(),b.treeNode.id=c.id)),k.showErrorReporter(new B.ClientException("ModelContentsTree: _onTreeSelect",e,b))}},
_postInsert:function(c,e,h){try{var m=t.trim(e),l=this._validateNewItemName(m,h);if(l){var f=u(d.getErrorDialog(),"Hide",w.hitch(this,function(){f.remove();c.focus()}));this.own(f);k.showErrorReporter(new B.KnownException(l),!0);c.setPending(!1)}else{var q=(new a).getModelChangeGenerator({entityTypeClass:"SYSTEM",entityTypeIndex:h}),g=[{modelId:modelId,modelChangeXml:q.getModelChangeXml("INSERT",{name:m,position:"End"})}],s=this,n=y.createRequest(workspaceId,[{workspaceId:workspaceId,cellChanges:[],
modelChanges:g,forceNewSubmissions:[{entityTypeIndex:h,entityId:m}]}],[],[]);k.showPleaseWaitDialog();b.post(n,!1,function(a,e){try{if(c.setPending(!1),k.hidePleaseWaitDialog(!1),!a.error){if(a.result&&a.result.errorInfo){var m=u(d.getErrorDialog(),"Hide",function(){m.remove();c.focus()}),l=a.result.errorInfo;if(l.isKnownError)k.showErrorReporter(new B.BaseException(l.errorMessage),!0);else{var f=new B.ServerException(l.errorMessage,null,{httpStatus:e.xhr.status,httpStatusText:e.xhr.statusText});
f.setModelRestored(!0);k.showErrorReporter(f)}console.warn(s.declaredClass+" _postInsert load handler has processed server exception and is attempting to trigger gather")}else s._editedTreeNode=null,s._selectNewItemEntityTypeIndex=h;b.gather()}}catch(q){console.error(s.declaredClass+"_postInsert load handler caught exception "+q)}},function(){try{k.hidePleaseWaitDialog(!1),c.setPending(!1),s._testString=null,s._modelDefinitionSerialNumber_modelSerialNumber=-1,b.gather()}catch(a){console.error(this.declaredClass+
"._postInsert errorHandler caught exception "+a)}})}}catch(p){k.throwClientException(this,p)}},_setCurrentSelection:function(a,c){this._editedTreeNode&&(this._editedTreeNode.endEdit(),this._editedTreeNode=null);if(a){var b=!1;if(this._currentSelection&&(b=this._currentSelection.treeNode&&this._currentSelection.treeNode.labelNode&&m.contains(this._currentSelection.treeNode.labelNode,"newItemLabel"),!b&&a.entityLongId===this._currentSelection.entityLongId))return;this._currentSelection=a;b||(this._previousPath=
this._currentPath||c);this._currentPath=c;this.onSelectionChange(a,c)}},_setDefaultSelection:function(){this._tree.set("path",["root",String(h.MODEL_CONTENT_TIMESCALE_ENTITY_LONG_ID)]);this._setCurrentSelection({entityLongId:h.MODEL_CONTENT_TIMESCALE_ENTITY_LONG_ID,label:E.labelTime,helpId:"default.htm#cshid\x3d1135",entityId:null},["root",String(h.MODEL_CONTENT_TIMESCALE_ENTITY_LONG_ID)]);this._setInitialSelection=!0},_validateNewItemName:function(a,c){try{var b=new e;if(!b.checkId(a))return b.getInvalidIdMessage();
if(c===h.HIERARCHY_ENTITY_TYPE_INDEX){if(this._isDuplicateNameInLabelPage(a,q.getHierarchiesLabelPage()))return t.substitute(v.errorDuplicateGeneralList,{name:a})}else if(c==h.LINE_ITEM_SUBSET_ENTITY_TYPE_INDEX){if(this._isDuplicateNameInLabelPage(a,q.getLineItemSubsetsLabelPage()))return t.substitute(v.errorDuplicateLineItemSubset,{name:a})}else if(q.getApplicationProperty(h.FEATURE_FLAGS.TIME_RANGES)&&c==h.TIME_RANGE_ENTITY_TYPE_INDEX&&this._isDuplicateNameInLabelPage(a,q.getTimeRangesLabelPage()))return t.substitute(v.errorDuplicateTimeRange,
{name:a})}catch(d){k.throwClientException(this,d)}return null}})})},"anaplan/settings/ActionsView":function(){define("anaplan/anapediaKeys anaplan/constants anaplan/data/Aggregator anaplan/data/ChangeFactory anaplan/Exceptions anaplan/gridlet/_editor/ActionEditor anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/_editor/ProcessEditor anaplan/gridlet/GridletFactory anaplan/gridlet/Selection anaplan/gridlet/ViewRequestGridModel anaplan/layout/_DashboardMixin anaplan/layout/ManagedContainer anaplan/settings/Actions/_DataSources anaplan/settings/Actions/_ExportDefinitions anaplan/settings/Actions/_ImportDefinitions anaplan/settings/Actions/_ProcessDefinitions anaplan/settings/Actions/ManageImportDataSourceDialog anaplan/settings/Actions/Toolbar anaplan/toolbar/_ButtonsMixin anaplan/utils/ActionHelper anaplan/utils/EntityLongIdHelper anaplan/utils/SelectionHelper anaplan/utils/SubmissionHandler anaplan/utils/UIHelper anaplan/view/Export anaplan/view/Import anaplan/view/Process anaplan/widgets/FullScreenDialog dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/common dojo/i18n!anaplan/nls/exportLabels dojo/i18n!anaplan/nls/imports dojo/i18n!anaplan/nls/process dojo/json dojo/on".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I,P,J,O){return D([q,z,d],{gutters:!1,liveSplitters:!1,constructor:function(a){var b=a.content[0];this._viewDefinition=a.viewDefinition;this._workspaceId=b.workspaceId;this._modelId=b.modelId;this._hideToolbar=b.hideToolbar||!1;this._gridlet=null;this._modelContent=a.modelContent;this._model=a.model||new e({workspaceId:this._workspaceId,modelId:this._modelId,viewDefinition:this._viewDefinition});this._importDefinitions=new c;
this._importDefinitions.initialize();this._exportDefinitions=new u;this._exportDefinitions.initialize();this._dataSources=new h;this._dataSources.initialize();this._processDefinitions=new t;this._processDefinitions.initialize();this._showTipsOnStartup=a.showTipsOnStartup;this._sourceParameters={}},startup:function(){var a=this;this._started&&console.warn("startup "+this.id);try{this.inherited(arguments);this._toolbar&&(O(this._toolbar,"OpenView",N.hitch(this,"_updateViewMenuItems")),O(this._toolbar,
"RunAction",N.hitch(this,"_doRunAction")),O(this._toolbar,"EditAction",N.hitch(this,"_doEditAction")),O(this._toolbar,"ManageImportDataSources",N.hitch(this,"_doManageImportDataSources")),O(this._toolbar,"BulkOperation",function(c,b){a._bulkOperation(c,b)}),O(this._toolbar,"Move",N.hitch(this,"_displayMoveDialog")),O(this._toolbar,"Delete",N.hitch(this,"_displayDeleteDialog")),O(this._toolbar,"Export",N.hitch(this,"_displayExportDialogForActionsView")),O(this._toolbar,"Refresh",N.hitch(this,"_doRefresh")),
O(this._toolbar,"Reorder",N.hitch(this,"_displayReOrderDialog")),O(this._toolbar,"NewDashboardClick",N.hitch(this,function(){this._displayNewDashboardDialog(b.dashboardElementType.BUTTON)})),O(this._toolbar,"DashboardClick",N.hitch(this,function(a,c){this._addButtonToDashboard(c)})),this._toolbar.searchButton.set("model",this._model),this._toolbar.searchButton.set("widget",this._gridlet));var c=O(this._gridlet,"SelectionChange",N.hitch(this,"_onSelectionChange")),d=O(this._gridlet,"Update",N.hitch(this,
"_onUpdate")),e=O(this._gridlet,"reset",N.hitch(this,"_reset"));this.own(c,d,e);this._getImports();this._gridlet.focus()}catch(h){console.error(h)}},postCreate:function(){this.inherited(arguments);this._hideToolbar||(this._toolbar=new w({model:this._model,gridlet:this._gridlet}),this.addChild(this._toolbar));var c=new l({editorFactory:new f}),b=(new a).initializeToDefaults();this._gridlet=c.createGridlet({region:"center",defaultColumnWidth:150,model:this._model,selection:b});this.addChild(this._gridlet)},
uninitialize:function(){this._importDefinitions&&this._importDefinitions.destroy();this._exportDefinitions&&this._exportDefinitions.destroy();this._dataSources&&this._dataSources.destroy();this._processDefinitions&&this._processDefinitions.destroy();this.inherited(arguments)},_displayActionEditor:function(a,c){var b=this._gridlet,d=b._selection,e=b._model,b=this._getGridController(),d=d.currentCell.getStartRowIndex(b.getContext()),h=this._model.getCell(d,0),d=n.Widget(h.cellValue),m=v.getSharedDialog();
m.set("title",c);m.set("refocus",!1);m.set("content",d.domNode);var l=this,b=O(d,"Cancel",function(){m.onCancel()});this.own(b);d=O(d,"Change",function(a){try{var c=new y({aggregatorObserver:e}),b=(new p).getCellChangeGenerator().getCellChange({modelId:modelId,originalText:J.stringify(h.cellValue),entityLongIds:h.entityLongIds,cellText:J.stringify(a)});c.gather([{workspaceId:workspaceId,cellChanges:[b],modelChanges:[]}],[],[]);m.onCancel()}catch(d){v.showErrorReporter(new r.ClientException(null,d,
{widgetId:l.id}))}});this.own(d);m.show()},_displayExportDialogForActionsView:function(){try{var a=v.getSharedDialog(),c=new E({modelId:this._modelId,viewDefinition:this._viewDefinition,pageInfo:this._model.getPageInfo(),hierarchyId:F.labelActions});a.set("title",H.titleExport);a.set("refocus",!1);a.set("content",c.domNode);this.own(O(c,"AfterExport",function(){a.hide()}),O(c,"Cancel",function(){a.onCancel()}));a.show()}catch(b){v.showErrorReporter(new r.ClientException(null,b,{widgetId:self.id}))}},
_displayExportDialog:function(a,c,b){try{var d,e=v.getSharedDialog(),h=this._exportDefinitions.getExportDefinitions(),m=null;K.forEach(h,function(c){c.entityLongId===a&&(m=c.exportDefinitionJson)});d=new E({action:b,exportDefinition:m,exportEntityLongId:a,exportLabel:c,modelId:modelId});e.set("title",H.titleExport);e.set("refocus",!1);e.set("content",d.domNode);var l=O(d,"Cancel",function(){e.onCancel()});this.own(l);var f=O(d,"AfterExport",function(){e.onCancel()});this.own(f);var q=O(d,"SaveExportDefinition",
function(){e.onCancel()});this.own(q);e.show()}catch(g){v.throwClientException(this,g)}},_displayImportDialog:function(a,c){try{var d=A.getEntityTypeIndex(a),e={workspaceId:workspaceId,modelId:modelId};if(d===b.IMPORT_ENTITY_TYPE_INDEX){var h=this._getImportDefinition(a);N.mixin(e,{importDefinitionJson:J.stringify(h),importEntityLongId:a,importEntityLabel:c});var m=this._sourceParameters["_"+h.sourceEntityLongId+"_"];m&&(e.params=m,e.mayPersistParams=!0)}else if(d===b.PROCESS_ENTITY_TYPE_INDEX){for(var l in this._sourceParameters)this._sourceParameters.hasOwnProperty(l)&&
(e.params=this._sourceParameters[l],e.mayPersistParams=!0);e.importType="SalesOpsDirectImporter"}var f=v.getSharedDialog(),q=new C(e);f.set("title",I.titleImport);f.set("refocus",!1);f.set("content",q.domNode);var t=O(q,"AfterImport",function(){f.hide()});this.own(t);var k=O(q,"Cancel",function(){f.onCancel()});this.own(k);d===b.PROCESS_ENTITY_TYPE_INDEX&&f.setHelpContent(g.directImport);f.show()}catch(s){v.throwClientException(this,s)}},_displayNewDashboardDialog:function(a){a===b.dashboardElementType.BUTTON&&
(a=this._getGridController())&&this._displayNewDashboardDialogWithViewInfos(a.getButtonInfosForDashboardElements())},_displayProcessDialog:function(a,c,b,d){try{var e={workspaceId:this._workspaceId,modelId:this._modelId,processEntityLongId:a,processDefinitionJson:c,processEntityLabel:b},h=v.getSharedDialog(),m=new G(e);d||(d="titleAction");h.set("title",P[d]);h.set("refocus",!1);h.set("content",m.domNode);h.set("preventhide",!0);var l=O(h,"Cancel",function(){m.cancelProcess()}),f=O(m,"ProcessCompletion",
function(){h.hide(null,!0).then(function(){k.gather()})}),q=O(m,"Cancel",function(){h.onCancel()});this.own(l,f,q);h.show()}catch(g){v.throwClientException(this,g)}},_displayProcessEditor:function(a,c){try{var d=this._gridlet,e=d._selection,h=d._model,m=this._getGridController(),l=e.currentCell.getStartRowIndex(m.getContext()),f=this._model.getCell(l,0),q=null,g=!1,t=-1;K.some(f.entityLongIds,function(a){if(A.getEntityTypeIndex(a)===b.PROCESS_ENTITY_TYPE_INDEX)return t=a,!0});var k=this._dataSources.getDataSources(),
w=[];K.forEach(k,function(a){a.dataSourceDefinition&&"SALESFORCE_API"===a.dataSourceDefinition.dataSourceType&&w.push(a.entityLongId)});var n=this._importDefinitions.getImportDefinitions(),u=[],z=[];K.forEach(n,function(a){a.importDefinition&&-1!==K.indexOf(w,A.entityLongIdIdentifierToEntityLongId(a.importDefinition.source))&&("HIERARCHY_DATA"===a.importDefinition.importType?u.push(a.entityLongId):"MODULE_DATA"===a.importDefinition.importType&&z.push(a.entityLongId))});var x=this._processDefinitions.getProcessDefinitions();
K.some(x,function(a){if(a.entityLongId===t)return q=a.processDefinitionJson,g=a.isEditable,!0});var C=new s.Widget({entityLongId:t,processDefinitionJson:q,readOnly:!g}),E=new L({roles:["process-editor"],title:c,refocus:!1,content:C.domNode}),B=this,J=O(E,"Hide",function(){setTimeout(function(){E.destroy();J.remove();d.focus()},100)});this.own(J);var P=O(C,"Cancel",function(){E.onCancel()});this.own(P);var I=O(C,"Change",function(a){try{var c=new y({aggregatorObserver:h}),d=(new p).getCellChangeGenerator().getCellChange({modelId:modelId,
originalText:q,entityLongIds:[t,b.SYSTEM_PROPERTY_PROCESS_DEFINITION],cellText:a});c.gather([{workspaceId:workspaceId,cellChanges:[d],modelChanges:[]}],[],[]);E.onCancel()}catch(e){v.showErrorReporter(new r.ClientException(null,e,{widgetId:B.id}))}});this.own(I);E.show()}catch(D){v.throwClientException(this,D)}},_doEditAction:function(){try{var a=this._getSelectedActions();if(a.count){var c=a.entityLongIds[0][0],d=a.labels[0][0],e=A.getEntityTypeIndex(c);if(e===b.IMPORT_ENTITY_TYPE_INDEX){var h=this._getImportDefinition(c);
this._showManageImportDataSources({workspaceId:workspaceId,modelId:modelId,mode:"EDIT",importType:h.importType,importDefinitionJson:J.stringify(h),importEntityLabel:d,importEntityLongId:c})}else if(e===b.EXPORT_ENTITY_TYPE_INDEX)this._displayExportDialog(c,d,"EDIT");else if(e===b.ACTION_ENTITY_TYPE_INDEX)this._displayActionEditor(c,d);else if(e===b.PROCESS_ENTITY_TYPE_INDEX)this._displayProcessEditor(c,d);else throw new r.UnsupportedOperationException(null,null,{operation:"Edit"});}}catch(m){v.showErrorReporter(new r.ClientException(null,
m,{widgetId:this.id}))}},_doManageImportDataSources:function(){this._showManageImportDataSources({workspaceId:workspaceId,modelId:modelId,mode:"MANAGE"})},_showManageImportDataSources:function(a){(new m(a)).show()},_doRunAction:function(){try{var a=this._getSelectedActions();if(a.count){var c=a.entityLongIds[0][0],d=a.labels[0][0],e=A.getEntityTypeIndex(c);if(e===b.ACTION_ENTITY_TYPE_INDEX)x.runActionWithConfirmation(c).then(function(){k.gather()},N.hitch(this,function(a){v.showErrorReporter(new r.ClientException(null,
a,{widgetId:this.id}))}));else if(e===b.EXPORT_ENTITY_TYPE_INDEX)this._displayExportDialog(c,d,"RUN");else if(e===b.IMPORT_ENTITY_TYPE_INDEX){var h=J.stringify({nodes:{Import:{type:"IMPORT",action:A.entityLongIdToEntityLongIdIdentifier(c),next:"_END_"},_END_:{type:"END",next:null}},start:"Import"});this._displayProcessDialog(null,h,d,"titleImport")}else if(e===b.PROCESS_ENTITY_TYPE_INDEX)this._displayProcessDialog(c,null,d,"titleProcess");else throw new r.UnsupportedOperationException(null,null,{operation:"Run"});
}}catch(m){v.showErrorReporter(new r.ClientException(null,m,{widgetId:this.id}))}},_getGridController:function(){return!this._gridlet?null:this._gridlet.getGridController()},_getImportDefinition:function(a){var c=this._importDefinitions.getImportDefinitions(),b=null;K.forEach(c,function(c){c.entityLongId===a&&(b=c)});return b.importDefinition},_enableToolbarButtons:function(a){var c,d,e,h,m,l,f,q=0,g=-1;m=-1;var t={count:0};a&&(!a.isWholeGridSelected()&&!a.isWholeColumnSelected())&&(t=this._getSelectedActions());
this._getGridController().getContext();var k=this._gridlet._model;c=0<t.count;d=0<t.count;e=1===t.count;h=1===t.count;l=0<t.count;t.count&&(g=A.getEntityTypeIndex(t.entityLongIds[0][0]),m=A.getEntityIndex(t.entityLongIds[0][0]));c=c&&(g===b.ACTION_ENTITY_TYPE_INDEX||g===b.EXPORT_ENTITY_TYPE_INDEX||g===b.IMPORT_ENTITY_TYPE_INDEX||g===b.PROCESS_ENTITY_TYPE_INDEX&&0!==m);for(d=d&&(g===b.PROCESS_ENTITY_TYPE_INDEX||g===b.ACTION_ENTITY_TYPE_INDEX||g===b.EXPORT_ENTITY_TYPE_INDEX||g===b.IMPORT_ENTITY_TYPE_INDEX);q<
t.count;q++)m=A.getEntityTypeIndex(t.entityLongIds[0][q]),e=e&&(m===b.EXPORT_ENTITY_TYPE_INDEX||m===b.IMPORT_ENTITY_TYPE_INDEX||m===b.ACTION_ENTITY_TYPE_INDEX||m===b.PROCESS_ENTITY_TYPE_INDEX),l=l&&this._canAddEntityToDashboard(m),c=c&&m===g,m===b.IMPORT_ENTITY_TYPE_INDEX?(f=this._getImportDefinition(t.entityLongIds[0][q]),c=c&&!this._isSalesforceImportDefinition(f)):m===b.ACTION_ENTITY_TYPE_INDEX?(f=k.getRowIndexOfItem([t.entityLongIds[0][q]],-1),f=this._model.getCell(f,0).cellValue,l=l&&this._canAddActionDefinitionToDashboard(f),
f.actionType===b.ACTION_TYPE_TASK_ELEMENT&&f.taskElement&&(h=!1)):m===b.EXPORT_ENTITY_TYPE_INDEX&&(f=k.getRowIndexOfItem([t.entityLongIds[0][q]],-1),f=this._model.getCell(f,0).cellValue,e=f!==b.exportLayoutType.AUDIT_LOG),d=d&&m===g,h=h&&(m===b.EXPORT_ENTITY_TYPE_INDEX||m===b.IMPORT_ENTITY_TYPE_INDEX||m===b.ACTION_ENTITY_TYPE_INDEX||m===b.PROCESS_ENTITY_TYPE_INDEX);this._toolbar.enableButtons(a,c,d,h,e,l)},_canAddEntityToDashboard:function(a){return-1===K.indexOf([b.ACTION_GROUPING_ENTITY_TYPE_INDEX,
b.EXPORT_ENTITY_TYPE_INDEX],a)},_canAddActionDefinitionToDashboard:function(a){return a.actionType===b.ACTION_TYPE_TASK_ELEMENT&&a.taskElement&&(a=J.parse(a.taskElement),a.operation&&(a.operation===b.taskElementOperation.RUN_CMPL_SCRIPT||a.operation===b.taskElementOperation.RUN_OPTIMIZER))?!1:!0},_getImports:function(){var a={actionId:"GET_IMPORTS",params:{modelId:modelId}},c=this;(new y({showPleaseWait:!1})).post([],[],[a]).then(function(a){try{if(a&&a.result){var b=a.result.systemActionResults;
b&&b.length&&(K.forEach(b[0].imports,function(a){c._sourceParameters[a.id]=a.params}),setTimeout(function(){k.gather()},250))}}catch(d){console.error(d)}})},_getSelectedActions:function(){var a=this._gridlet._selection;if(!a)return[];var c=this._getGridController();return B.getSelection(a,c.getContext())},_isSalesforceImportDefinition:function(a){a=A.entityLongIdIdentifierToEntityLongId(a.source);for(var c=this._dataSources.getDataSources(),b=0;b<c.length;b++){var d=c[b];if(d.entityLongId===a){if((a=
d.dataSourceDefinition)&&"SALESFORCE_API"===a.dataSourceType)return!0;break}}return!1},_bulkOperation:function(a,c){try{var d=this._getGridController();if(d){var e=-1,e=a===b.ACTION_TYPE_PROCESS?b.SYSTEM_AXIS_IDENTIFIER_PROCESS_ENTITY_LONG_ID:b.SYSTEM_AXIS_IDENTIFIER_ACTION_ENTITY_LONG_ID;d.beginBulkInsert(null,N.mixin(c,{relativeItem:null,relativeDomNode:null,systemAxisEntityLongIdIdentifier:A.entityLongIdToEntityLongIdIdentifier(e),systemAxisLabel:""}))}}catch(h){h instanceof r.UnsupportedOperationException?
v.showErrorReporter(h,!0):v.showErrorReporter(new r.ClientException(null,h,{widgetId:this.id}))}},_onSelectionChange:function(a){this._toolbar&&this._enableToolbarButtons(a)},_onUpdate:function(){this._gridlet&&!this._gridlet._selection&&this._gridlet._gridController.setBestSelection()},_reset:function(){this._toolbar&&this._disableButtons(this._toolbar)},_updateViewMenuItems:function(){this._dashboardsList&&this._updateDashboardsList()}})})},"anaplan/utils/FiscalYearHelper":function(){define("dojo/_base/lang dojo/_base/array dojo/data/ObjectStore dojo/i18n!dojo/cldr/nls/gregorian dojo/store/Memory anaplan/utils/JsHelper dojo/string".split(" "),
function(g,b,k,p,r,n,f){return{getData:function(g,l,a,e,d,q){"undefined"===typeof a&&(a=!1);g=this._getItems(g,l,e,d,q);var h="${fy}: ${sdate} ${smonth} ${syear} - ${edate} ${emonth} ${eyear}";a&&(h="${fy}: ${sdate} ${smonth} ${syear}");var k=[];b.forEach(g,function(a){k.push({value:a.fy,id:a.fy,label:f.substitute(h,a),period:f.substitute("${sdate} ${smonth} ${syear} - ${edate} ${emonth} ${eyear}",a),fourDigitYear:a.syear})});return k},_getItems:function(b,l,a,e,d){n.isNullOrUndefined(a)&&(a=5);n.isNullOrUndefined(e)&&
(e=10);var f=[];a=(n.isNullOrUndefined(d)?(new Date).getFullYear():d)-a;for(e=a+e;a<=e;a++){d=new Date(a,b-1,1,0,0,0,0);var h=new Date(a+1,b-1,0,0,0,0,0);d={fy:"FY"+(!0===l?String(d.getFullYear()).substring(2):String(h.getFullYear()).substring(2)),start:d,end:h,sdate:d.getDate(),smonth:p["months-format-abbr"][d.getMonth()],syear:d.getFullYear(),edate:h.getDate(),emonth:p["months-format-abbr"][h.getMonth()],eyear:h.getFullYear()};f.push(d)}return f}}})},"anaplan/widgets/TextBox":function(){define("dojo/_base/declare dijit/form/_FormValueWidget dijit/form/ValidationTextBox dijit/form/_TextBoxMixin dojo/dom-construct dojo/dom-class dojo/has dojo/on dojo/_base/window dojo/_base/lang dojo/_base/sniff".split(" "),
function(g,b,k,p,r,n,f,s,l,a){return g(k,{placeHolder:"",postCreate:function(){this.inherited(arguments);n.add(this.domNode,"anaplanTextBox")},_onBlur:function(){this.inherited(arguments);this._updatePlaceHolder()},_onFocus:function(e){!this.disabled&&!this.readOnly&&(this.selectOnClick&&"mouse"==e&&(this._selectOnClickHandle=s(this.domNode,"mouseup",a.hitch(function(){this._selectOnClickHandle.remove();var a;f("ie")?(a=l.doc.selection.createRange(),a=a.parentElement()==this.textbox&&0===a.text.length):
a=this.textbox.selectionStart==this.textbox.selectionEnd;a&&p.selectInputText(this.textbox)}))),this._updatePlaceHolder(),this._refreshState(),b.prototype._onFocus.call(this,e))},_setPlaceHolderAttr:function(a){this.placeHolder=a;this._phspan||(this._attachPoints.push("_phspan"),this._phspan=r.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"before"));this._phspan.innerHTML="";this._phspan.appendChild(document.createTextNode(a));this._updatePlaceHolder()},_setValueAttr:function(a,
d,l){var h;void 0!==a&&(h=this.filter(a),"string"!=typeof l&&(l=null!==h&&("number"!=typeof h||!isNaN(h))?this.filter(this.format(h,this.constraints)):""));if(null!==l&&void 0!==l&&("number"!==typeof l||!isNaN(l))&&this.textbox.value!=l)this.textbox.value=l;this._updatePlaceHolder();b.prototype._setValueAttr.call(this,h,d)},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value&&!this._focused?"":"none")},showPromptMessage:function(){this.set("message",
this.promptMessage)}})})},"anaplan/settings/HierarchyConfigureView/Form":function(){define("dojo/_base/declare dijit/_Contained dijit/_Container dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/form/_FormMixin dojo/_base/array dojo/_base/lang dojo/on dojo/string dojo/number anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/constants anaplan/Exceptions anaplan/utils/UIHelper dojo/i18n!anaplan/nls/hierarchyConfigureView dojo/text!anaplan/templates/HierarchyConfigureView.html anaplan/widgets/ConfirmationDialog anaplan/widgets/Dialog anaplan/gridlet/_editor/MultiSelectListEditor anaplan/view/ApplyChanges anaplan/data/LabelPageReadStore dijit/form/TextBox dijit/form/FilteringSelect dijit/form/CheckBox anaplan/widgets/Button anaplan/widgets/TextBoxSelector".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y){return g([p,r,n,b,k,f],{baseClass:"settingsForm",templateString:w,widgetsInTemplate:!0,lblTopLevelItem:m.labelTopLevelItem,lblParentHierarchy:m.labelParentHierarchy,lblCategory:m.labelCategory,lblSelectiveAccess:m.labelSelectiveAccess,lblProductionData:m.labelProductionData,lblManagedBy:m.labelManagedBy,lblWorkflow:m.labelWorkflow,lblNumberedList:m.labelNumberedList,lblDataTag:m.labelDataTag,lblApply:m.buttonApply,lblCancel:m.buttonCancel,
constructor:function(a){this._listEntityLongId=a.listEntityLongId;this._updateApplyButtonTimer=null;this._confirmationHandles=[];this._factoryParams=a||{}},handleNavigation:function(c,b){var d=this;try{if(this._isDirty()){var e=t.getSharedDialog(),h=this.isValid(),f=new B({messageText:h?m.messageApplyChanges:m.messageDiscardChanges,hideApplyButton:!h}),g=a(f,"DialogHide",l.hitch(this,function(){this._navigationAction?this._navigationAction():b&&b()}));this.own(g);var q=a(f,"Cancel",l.hitch(this,function(){t.setDirtyForm(null);
this._navigationAction=function(){b&&b();d._updateApplyButton()};e.hide()}));this.own(q);var k=a(f,"Discard",l.hitch(this,function(){t.setDirtyForm(null);this._navigationAction=function(){d._onCancel();c&&c()};e.hide()}));this.own(k);var s=a(f,"Apply",l.hitch(this,function(){this._navigationAction=function(){d._onApply(c,b)};e.hide()}));this.own(s);e.set("title",h?m.titleApplyChanges:m.titleDiscardChanges);e.set("refocus",!1);e.set("content",f.domNode);e.show()}else t.setDirtyForm(null),c&&c()}catch(w){t.throwClientException(this,
w)}},onApply:function(){},onValidStateChange:function(){this._updateApplyButton()},postCreate:function(){this.inherited(arguments)},reset:function(){this.update(this._rowLabelPage,this._columnLabelPage,this._dataPage,this._indexSelectorLabelPageMap,this._selectorLabelPages);this._updateApplyButton()},uninitialize:function(){this._removeConfirmationHandles();this._confirmationDialog&&this._confirmationDialog.destroy();this.inherited(arguments)},update:function(a,c,b,h,l){try{this._rowLabelPage=a;this._columnLabelPage=
c;this._dataPage=b;this._indexSelectorLabelPageMap=h;this._selectorLabelPages=l;var f,g,q,k;f=s.indexOf(a.entityLongIds[0],this._listEntityLongId);g=s.indexOf(c.entityLongIds[0],u.SYSTEM_PROPERTY_HIERARCHY_TOP_LEVEL);q=f*c.count+g;k=b.cellValues[q];this.topLevelItemTextBox.set("value",k);this.topLevelItemTextBox.set("disabled",!b.isEditable[q]);this.topLevelItemTextBox.__originalValue=k;g=s.indexOf(c.entityLongIds[0],u.SYSTEM_PROPERTY_HIERARCHY_PARENT_HIERARCHY);q=f*c.count+g;this.parentHierarchyFilteringSelect.set("store",
new y({labelPage:this._getSelectorLabelPage(b.formats[q],h,l)}));this.parentHierarchyFilteringSelect.set("displayedValue",b.cellText[q],!1);this.parentHierarchyFilteringSelect.__originalValue=0>b.cellValues[q]?"":b.cellValues[q];this.parentHierarchyFilteringSelect.set("disabled",!b.isEditable[q]);g=s.indexOf(c.entityLongIds[0],u.SYSTEM_PROPERTY_HIERARCHY_CATEGORY);q=f*c.count+g;this.categoryFilteringSelect.set("store",new y({labelPage:this._getSelectorLabelPage(b.formats[q],h,l)}));this.categoryFilteringSelect.set("displayedValue",
b.cellText[q],!1);this.categoryFilteringSelect.__originalValue=0>b.cellValues[q]?"":b.cellValues[q];this.categoryFilteringSelect.set("disabled",!b.isEditable[q]);g=s.indexOf(c.entityLongIds[0],u.SYSTEM_PROPERTY_TAGS);q=f*c.count+g;k=b.cellValues[q];this.dataTagTextBox.set("value",k);this.dataTagTextBox.__originalValue=k;this.dataTagTextBox.set("disabled",!b.isEditable[q]);g=s.indexOf(c.entityLongIds[0],u.SYSTEM_PROPERTY_HIERARCHY_SELECTIVE_ACCESS);q=f*c.count+g;k="true"===b.cellValues[q];this.selectiveAccessCheckBox.set("value",
k);this.selectiveAccessCheckBox.__originalValue=k;this.selectiveAccessCheckBox.set("disabled",!b.isEditable[q]);g=s.indexOf(c.entityLongIds[0],u.SYSTEM_PROPERTY_HIERARCHY_PRODUCTION_DATA);q=f*c.count+g;k="true"===b.cellValues[q];this.productionDataCheckBox.set("value",k);this.productionDataCheckBox.__originalValue=k;this.productionDataCheckBox.set("disabled",!b.isEditable[q]);g=s.indexOf(c.entityLongIds[0],u.SYSTEM_PROPERTY_HIERARCHY_MANAGED_BY);q=f*c.count+g;k=b.cellValues[q];this.managedByTextBox.set("value",
k);this.managedByTextBox.__originalValue=k;this.managedByTextBox.set("disabled",!0);g=s.indexOf(c.entityLongIds[0],u.SYSTEM_PROPERTY_HIERARCHY_HAS_WORKFLOW);q=f*c.count+g;k="true"===b.cellValues[q];this.workflowCheckBox.set("value",k);this.workflowCheckBox.__originalValue=k;this.workflowCheckBox.set("disabled",!b.isEditable[q]);g=s.indexOf(c.entityLongIds[0],u.SYSTEM_PROPERTY_HIERARCHY_NUMBERED_LIST);q=f*c.count+g;k="true"===b.cellValues[q];this.numberedListCheckBox.set("value",k);this.numberedListCheckBox.__originalValue=
k;this.numberedListCheckBox.set("disabled",!b.isEditable[q]);g=s.indexOf(c.entityLongIds[0],u.SYSTEM_PROPERTY_HIERARCHY_ITEM_COUNT);q=f*c.count+g;k=b.cellValues[q];t.setText(this.totalItemCount,e.substitute(m.hierarchyInfoItemCount,{itemCount:d.format(k)}));this._updateApplyButton()}catch(w){t.throwClientException(this,w)}},_getSelectorLabelPage:function(a,c,b){var d=null;a.hierarchyEntityLongId&&(d=b[c[a.hierarchyEntityLongId]]);return d},_isDirty:function(){try{if(this.topLevelItemTextBox.get("value")!==
this.topLevelItemTextBox.__originalValue||this.parentHierarchyFilteringSelect.get("value")!==this.parentHierarchyFilteringSelect.__originalValue||this.categoryFilteringSelect.get("value")!==this.categoryFilteringSelect.__originalValue||this.dataTagTextBox.get("value")!==this.dataTagTextBox.__originalValue)return!0;var a=this.selectiveAccessCheckBox.get("value");if(this.selectiveAccessCheckBox.__originalValue){if("off"===a||!1===a)return!0}else if("on"===a||!0===a)return!0;a=this.productionDataCheckBox.get("value");
if(this.productionDataCheckBox.__originalValue){if("off"===a||!1===a)return!0}else if("on"===a||!0===a)return!0;a=this.workflowCheckBox.get("value");if(this.workflowCheckBox.__originalValue){if("off"===a||!1===a)return!0}else if("on"===a||!0===a)return!0;a=this.numberedListCheckBox.get("value");if(this.numberedListCheckBox.__originalValue){if("off"===a||!1===a)return!0}else if("on"===a||!0===a)return!0}catch(c){t.throwClientException(this,c)}return!1},_onApply:function(a,c){try{var b={},d,e=this.categoryFilteringSelect.get("value");
""!==e&&(d=this.categoryFilteringSelect.store.fetchItemByIdentity({identity:e}))&&(e=this.categoryFilteringSelect.store.getLabel(d));var h=this.dataTagTextBox.get("value"),m=this.dataTagTextBox.__originalValue,l="";""!==this.categoryFilteringSelect.__originalValue&&(d=this.categoryFilteringSelect.store.fetchItemByIdentity({identity:this.categoryFilteringSelect.__originalValue}))&&(l=this.categoryFilteringSelect.store.getLabel(d)||"");var f=this.parentHierarchyFilteringSelect.get("value");""!==f&&
(d=this.parentHierarchyFilteringSelect.store.fetchItemByIdentity({identity:f}))&&(f=this.parentHierarchyFilteringSelect.store.getLabel(d));var q="";this.parentHierarchyFilteringSelect.__originalValue&&(d=this.parentHierarchyFilteringSelect.store.fetchItemByIdentity({identity:this.parentHierarchyFilteringSelect.__originalValue}))&&(q=this.parentHierarchyFilteringSelect.store.getLabel(d)||"");var g=this.workflowCheckBox.get("value"),k=this.selectiveAccessCheckBox.get("value"),s=this.numberedListCheckBox.get("value"),
w=this.productionDataCheckBox.get("value");b[u.SYSTEM_PROPERTY_HIERARCHY_CATEGORY]={newValue:e,originalValue:this.categoryFilteringSelect.__originalValue||"-1",originalDisplayText:l};b[u.SYSTEM_PROPERTY_TAGS]={newValue:h,originalValue:this.dataTagTextBox.__originalValue||"",originalDisplayText:m};b[u.SYSTEM_PROPERTY_HIERARCHY_HAS_WORKFLOW]={newValue:"on"===g||!0===g,originalValue:this.workflowCheckBox.__originalValue,originalDisplayText:this.workflowCheckBox.__originalValue};b[u.SYSTEM_PROPERTY_HIERARCHY_SELECTIVE_ACCESS]=
{newValue:"on"===k||!0===k,originalValue:this.selectiveAccessCheckBox.__originalValue,originalDisplayText:this.selectiveAccessCheckBox.__originalValue};b[u.SYSTEM_PROPERTY_HIERARCHY_NUMBERED_LIST]={newValue:"on"===s||!0===s,originalValue:this.numberedListCheckBox.__originalValue,originalDisplayText:this.numberedListCheckBox.__originalValue};b[u.SYSTEM_PROPERTY_HIERARCHY_PRODUCTION_DATA]={newValue:"on"===w||!0===w,originalValue:this.productionDataCheckBox.__originalValue,originalDisplayText:this.productionDataCheckBox.__originalValue};
b[u.SYSTEM_PROPERTY_HIERARCHY_PARENT_HIERARCHY]={newValue:f,originalValue:this.parentHierarchyFilteringSelect.__originalValue||"-1",originalDisplayText:q};b[u.SYSTEM_PROPERTY_HIERARCHY_TOP_LEVEL]={newValue:this.topLevelItemTextBox.get("value"),originalValue:this.topLevelItemTextBox.__originalValue,originalDisplayText:this.topLevelItemTextBox.__originalValue};this.onApply(b,a,c)}catch(n){t.throwClientException(this,n)}},_onApplyButtonClick:function(){this._onApply()},_onCancel:function(){this.reset()},
_onCancelButtonClick:function(){this._onCancel()},_onChange:function(){this._updateApplyButton()},_onKeyPress:function(){this._updateApplyButton()},_removeConfirmationHandles:function(){s.forEach(this._confirmationHandles,function(a){a.remove()});this._confirmationHandles=[]},_onDataTagButtonClick:function(){try{var b=l.mixin({},this._factoryParams);this._activeEditor=new A(l.mixin(b,{dialog:new x({roles:["multi-select-hierarchy"]})}));this._activeEditor.prepare({value:this.dataTagTextBox.get("value"),
format:{dataType:"MULTISELECT_TAG"}});this._activeEditorConnections=[];this._activeEditorConnections.push(a(this._activeEditor,"Change",l.hitch(this,"_onDataTagMultiSelectChange")));this._activeEditorConnections.push(a(this._activeEditor,"Cancel",l.hitch(this,"_endDataTagMultiSelectEditor")));this._activeEditor.show()}catch(d){t.showErrorReporter(new c.ClientException(this.declaredClass+": _onDataTagButtonClick",d,{widgetId:this.id}))}},_onDataTagMultiSelectChange:function(){this.dataTagTextBox.set("value",
this._activeEditor.getValue());this._endDataTagMultiSelectEditor();this._updateApplyButton()},_endDataTagMultiSelectEditor:function(){this._activeEditor.hide();this._activeEditor=null;this._activeEditorConnections=[]},_onDataTagTextChange:function(){this._updateApplyButton()},_onSelectiveAccessClick:function(){try{if(this.selectiveAccessCheckBox.get("checked")){this._confirmationDialog||(this._confirmationDialog=new z({refocus:!1}));this._removeConfirmationHandles();this._confirmationDialog.set("content",
m.messageConfirmSetSelectiveAccess);var b=a(this._confirmationDialog,"Cancel",l.hitch(this,function(){this.selectiveAccessCheckBox.set("checked",!1);this._updateApplyButton();this._removeConfirmationHandles()}));this._confirmationHandles.push(b);this._confirmationDialog.show()}}catch(d){t.showErrorReporter(new c.ClientException(this.declaredClass+": _onSelectiveAccessClick",d,{widgetId:this.id}))}},_onNumberedListClick:function(){try{if(this.numberedListCheckBox.get("checked")){this._confirmationDialog||
(this._confirmationDialog=new z({refocus:!1}));this._removeConfirmationHandles();this._confirmationDialog.set("content",m.messageConfirmSetNumberedList);var b=a(this._confirmationDialog,"Cancel",l.hitch(this,function(){this.numberedListCheckBox.set("checked",!1);this._updateApplyButton();this._removeConfirmationHandles()}));this._confirmationHandles.push(b);this._confirmationDialog.show()}}catch(d){t.showErrorReporter(new c.ClientException(this.declaredClass+": _onSelectiveAccessClick",d,{widgetId:this.id}))}},
_onProductionDataClick:function(){try{var a=this.productionDataCheckBox.get("checked"),b=a?m.messageConfirmSetProductionData:m.messageConfirmRemoveProductionData,d=a?m.titleConfirmSetProductionData:m.titleConfirmRemoveProductionData,l=a?m.buttonSet:m.buttonUnset,f=h.getHierarchyLabel(q,this._listEntityLongId),g=e.substitute(b,{productionListName:f});this._removeConfirmationHandles();var k=this,b={anapediaHelpKey:"default.htm#cshid\x3d1409",title:d,content:g,confirmText:l,messageIcon:"alertLarge",
onCancel:function(){k.productionDataCheckBox.set("checked",!a);k._updateApplyButton()}};App.interim.modals.showConfirmationModal(App.interim.getReduxDispatch(),b)}catch(s){t.showErrorReporter(new c.ClientException(this.declaredClass+": _onProductionDataClick",s,{widgetId:this.id}))}},_onWorkflowClick:function(){try{if(!this.workflowCheckBox.get("checked")){this._confirmationDialog||(this._confirmationDialog=new z({refocus:!1,title:m.titleConfirm}));this._removeConfirmationHandles();this._confirmationDialog.set("content",
m.messageConfirmRemoveHasWorkflow);var b=a(this._confirmationDialog,"Cancel",l.hitch(this,function(){this.workflowCheckBox.set("checked",!0);this._updateApplyButton();this._removeConfirmationHandles()}));this._confirmationHandles.push(b);this._confirmationDialog.show()}}catch(d){t.showErrorReporter(new c.ClientException(this.declaredClass+": _onWorkflowClick",d,{widgetId:this.id}))}},_updateApplyButton:function(){var a=this;try{this._updateApplyButtonTimer&&clearTimeout(this._updateApplyButtonTimer),
this._updateApplyButtonTimer=setTimeout(function(){try{if(a.domNode){var c=!0;a._isDirty()?(a.isValid()&&(c=!1),t.setDirtyForm(a)):t.setDirtyForm(null);a.applyButton.set("disabled",c)}}catch(b){console.error(a.declaredClass+": _updateApplyButton error")}},25)}catch(c){t.throwClientException(this,c)}}})})},"anaplan/keyboard/shortcutsDialog":function(){define("dojo/i18n!anaplan/nls/shortcuts anaplan/constants anaplan/data/ModelContentCache anaplan/keyboard/shortcutGroups anaplan/widgets/InfoDialog anaplan/keyboard/keyboardEvents anaplan/keyboard/renderedShortcuts anaplan/anapediaKeys anaplan/utils/UrlHelper dojo/dom-class dojo/dom-geometry dojo/window dojo/dom-style dojo/text!anaplan/templates/KeyboardShortcuts.html dojo/text!anaplan/templates/KeyboardShortcut.html dojo/text!anaplan/templates/KeyboardShortcutGroup.html".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c){function t(a){var c=[],b=[];a.split(/\$\{|\}/).forEach(function(a,d){0===d%2?b[b.length]=a:c[c.length]=a});return function(a){return c.reduce(function(c,d,e){var h=a[d];if(!h)throw Error("Missing template value for "+d);return c+h+b[e+1]},b[0])}}function m(a){return"ANAPLAN_UNDO"===a.eventName?k.hasEntitlement(b.ENTITLED_FEATURES.DATA_INPUT_UNDO):!0}function w(a){return a.filter(m).reduce(function(a,c){return a+u(c)},"")}function z(a){a=(a=a&&a.target.value)?
A(a,E):E;a=p.map(x.bind(void 0,a)).sort(B).map(y("html")).join("\n");document.getElementById("shortcuts-table-wrapper").innerHTML=a}function x(a,b,d){a=a.filter(function(a){return-1<b.shortcuts.indexOf(a.eventName)});if(0===a.length)return{html:"",score:0,index:d};var e=a.reduce(function(a,c){return a+c.score},0);return{html:c({name:g[b.name],rows:w(a)}),score:e,index:d}}function A(a,c){return c.reduce(function(c,b,d){var e;e=a;var h=b.descriptionHtml,m=0,l=[],f=0,q=0,g=h.toLowerCase();e=e.toLowerCase();
for(var k,t=0,s=h.length;t<s;t++)k=h[t],g[t]===e[m]?(k='\x3cspan class\x3d"marked"\x3e'+k+"\x3c/span\x3e",m+=1,q+=1+q):q=0,f+=q,l[l.length]=k;e=m===e.length?{rendered:l.join(""),score:f}:null;e&&(c[c.length]={score:e.score,index:d,descriptionHtml:e.rendered,eventName:b.eventName,id:b.id,shortcutHtml:b.shortcutHtml});return c},[]).sort(B)}function B(a,c){var b=c.score-a.score;return 0!==b?b:a.index-c.index}function y(a){return function(c){return c[a]}}function v(a){"click"!==a.type&&"ANAPLAN_SHOW_KEYBOARD_SHORTCUT_LIST"!==
a.type||(C.show(),setTimeout(function(){C.resize()},4),z())}var E=Object.keys(f).reduce(function(a,c){return a.concat(f[c])},[]);u=t(u);c=t(c);var C=new r({baseClass:"informationDialog keyboardShortcutsDialogOuter",content:h,resize:function(){var a=d.getBox(),c=e.getMarginBox(this.domNode),b=Math.floor(a.l+(a.w-c.w)/2),a=Math.floor(a.t+(a.h-c.h)/2);(b!==c.l||a!==c.t)&&q.set(this.domNode,{left:b+"px",top:a+"px"})}});C.domNode.addEventListener("keydown",function(a){if(a.metaKey||a.ctrlKey)a.stopPropagation(),
a.preventDefault()});r='\x3ca href\x3d"'+l.createAnapediaUrl(s.keyboardShortcuts)+'" target\x3d"_blank" class\x3d"anaplanDialogHelpButton"\x3eWhat\'s this?\x3c/a\x3e';C.set("title",g.title+" "+r);a.add(C.domNode,"qa-dialog-keyboard-shortcuts");window.addEventListener(n.ANAPLAN_SHOW_KEYBOARD_SHORTCUT_LIST,v);return{showHandler:v,shortcutHTML:f[n.ANAPLAN_SHOW_KEYBOARD_SHORTCUT_LIST].shortcutHtml}})},"anaplan/layout/Banner/_BannerUser":function(){define("anaplan/utils/logout anaplan/common/SelectiveAccess anaplan/constants anaplan/utils/topics anaplan/utils/UIHelper anaplan/widgets/DropDownButton anaplan/widgets/MenuItem dijit/DropDownMenu dijit/MenuSeparator dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/banner dojo/topic".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q){return a([n],{loadDropDown:function(a){var q=new s({style:"display:none;"});q.addChild(new f({label:d.menuItemProfile,onClick:e.hitch(this,"_onProfile")}));b.isAuthorized(k.userActions.CAN_VIEW_MODEL_MANAGEMENT)&&q.addChild(new f({label:d.menuItemModelManagement,onClick:e.hitch(this,"_onModelManagement")}));q.addChild(new l({}));q.addChild(new f({label:d.menuItemLogout,onClick:e.hitch(this,"_onLogout")}));q.startup();this.dropDown=q;a()},_onLogout:function(){g()},
_onModelManagement:function(){p.show(k.MODEL_MANAGEMENT,!1)},_onProfile:function(){p.redirect(k.URL_IDS.VIEWPROFILE_URL_ID)}})})},"anaplan/settings/Time2/Forms/Widgets/IncludeOptions":function(){define("dojo/dom-construct ./FiscalYearExtraMonthQuarterSelect anaplan/utils/TestAttributesHelper anaplan/utils/UIHelper anaplan/widgets/Tooltip dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/time dojo/string dojo/dom-class dojo/text!anaplan/templates/Settings/Time/Widgets/IncludeOptions.html dijit/form/CheckBox".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u){return a([f,n,s],{testableName:"includeOptions",templateString:u,i18n:d,constructor:function(a){this._optionfields=["quarterTotalsIncluded","halfYearTotalsIncluded","yearToDateIncluded","yearToGoIncluded","totalOfAllPeriodsIncluded"]},postCreate:function(){if(!1===this.showHalfYearTotals){var a=l.indexOf(this._optionfields,"halfYearTotalsIncluded");this._optionfields.splice(a,1);g.destroy(this.halfYearTotalsIncludedRow)}this.inherited(arguments);this.tooltip=
new r({connectId:[this.iconNode],innerHTML:this.i18n.labelQuarterlyTotalsInfoBoxLine1+this.i18n.labelQuarterlyTotalsInfoBoxLine2+this.i18n.labelQuarterlyTotalsInfoBoxLine3+this.i18n.labelQuarterlyTotalsInfoBoxLine4+this.i18n.labelQuarterlyTotalsInfoBoxFooter,position:["below","above"],title:""});l.forEach(this._optionfields,e.hitch(this,function(a){var c=this[a];c.set("checked",this.value[a]);c.set("disabled",!this.isEditable[a]);c.set("testableName",a);h.add(c.domNode,a)}));this.selectFiscalYearExtraMonthQuarter=
new b({id:this.id+"fiscalYearExtraMonthQuarter",name:"fiscalYearExtraMonthQuarter",disabled:!this.isEditable.fiscalYearExtraMonthQuarter},this.fiscalYearExtraMonthQuarter);h.add(this.selectFiscalYearExtraMonthQuarter.domNode,"fiscalYearExtraMonthQuarter");this.refreshQuarterlyTotalsInfoBoxText();this._attach();this._addSeleniumAttr()},startup:function(){this.inherited(arguments);this.selectFiscalYearExtraMonthQuarter.set("value",this.value.fiscalYearExtraMonthQuarter)},_addSeleniumAttr:function(){l.forEach(this._optionfields,
e.hitch(this,function(a){k.add(this[a],a)}));k.add(this.selectFiscalYearExtraMonthQuarter,"fiscalYearExtraMonthQuarter");k.add(this.quarterlyTotalsInfoBox,"quarterlyTotalsInfoBox")},_getValueAttr:function(){var a={fiscalYearExtraMonthQuarter:this.selectFiscalYearExtraMonthQuarter.get("value")};l.forEach(this._optionfields,e.hitch(this,function(b){a[b]=this[b].get("checked")}));return a},applyFormLogic:function(a){this.selectFiscalYearExtraMonthQuarter.toggle(this.showFiscalYearExtraMonthQuarter);
p.toggleNode(this.fiscalYearExtraMonthQuarterWrapper,this.showFiscalYearExtraMonthQuarter);this.showFiscalYearExtraMonthQuarter&&(this.selectFiscalYearExtraMonthQuarter.set("disabled",!a.quarterTotalsIncluded),p.toggleNode(this.quarterlyTotalsInfoBox,a.quarterTotalsIncluded))},_attach:function(){this.selectFiscalYearExtraMonthQuarter&&(this.own(this.selectFiscalYearExtraMonthQuarter.on("change",e.hitch(this,"refreshQuarterlyTotalsInfoBoxText"))),this.own(this.quarterTotalsIncluded.on("change",e.hitch(this,
function(){this.applyFormLogic(this.get("value"))}))))},refreshQuarterlyTotalsInfoBoxText:function(){var a=this.selectFiscalYearExtraMonthQuarter.get("value");this._setQuarterlyTotalsInfoBoxText(a)},_setQuarterlyTotalsInfoBoxText:function(a){var b=[this.quarterlyTotalsInfoBoxLine1,this.quarterlyTotalsInfoBoxLine2,this.quarterlyTotalsInfoBoxLine3,this.quarterlyTotalsInfoBoxLine4];a=Number(a)-1;for(var e=0,h=0,l=0;l<b.length;l++){var e=h+1,h=e+(l===a?3:2),f=b[l],e=q.substitute(d.labelQuarterlyTotalsInfoBoxLine,
{quarter:l+1,periodFrom:e,periodTo:h});p.setText(f,e)}}})})},"anaplan/widgets/SearchBarResults":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/dom-construct dojo/_base/array dojo/on dojo/_base/lang dojo/dom-class dojo/string".split(" "),function(g,b,k,p,r,n,f,s){return g([b],{baseClass:"anaplanSearchResults",currentSelection:null,resultCount:0,direction:"down",buildRendering:function(){this.domNode=k.create("div")},postCreate:function(){this.own(r(this.domNode,".resultItem:mousedown",
n.hitch(this,"_onClick")));this.own(r(this.domNode,".resultItem:mouseover",n.hitch(this,"_onHover")))},onExecute:function(){this._reset()},onCancel:function(){this._reset()},display:function(b){var a=document.createDocumentFragment();this.currentSelection=null;this.resultCount=0;var e=p.map(b,n.hitch(this,"_createGroupMarkup"));p.forEach(e,function(b,e){0!==e&&k.place(k.create("hr"),a,"last");k.place(b,a,"last")});0===b.length&&k.place(k.toDom('\x3cdiv class\x3d"noResults"\x3e\x3cspan\x3eNo Results\x3c/span\x3e\x3c/div\x3e'),
a,"only");k.place(a,this.domNode,"only");1===this.resultCount&&(this.currentSelection=this.domNode.querySelector("li.resultItem"))},select:function(){1===this.resultCount&&(this.currentSelection=this.domNode.querySelector("li.resultItem"));this.currentSelection&&this._makeSelection(this.currentSelection)},moveUp:function(){if(this.currentSelection&&this.currentSelection.previousElementSibling)this._selectItem(this.currentSelection.previousElementSibling);else if(this.currentSelection.parentNode.parentNode.previousElementSibling.previousElementSibling)this._selectItem(this.currentSelection.parentNode.parentNode.previousElementSibling.previousElementSibling.querySelector("ul").lastElementChild);
else return;this.direction="up"},moveDown:function(){if(null===this.currentSelection||1===this.resultCount)this._selectItem(this.domNode.querySelector("li.resultItem"));else if(this.currentSelection.nextElementSibling)this._selectItem(this.currentSelection.nextElementSibling);else if(this.currentSelection.parentNode.parentNode.nextElementSibling.nextElementSibling)this._selectItem(this.currentSelection.parentNode.parentNode.nextElementSibling.nextElementSibling.querySelector("ul").firstElementChild);
else return;this.direction="down"},_createGroupMarkup:function(b){var a=k.create("div");a.className="group";var e=k.toDom(this._safeSubstitue('\x3cdiv class\x3d"title"\x3e\x3ch4\x3e${parent}\x3c/h4\x3e\x3c/div\x3e',b)),d=k.create("ul");b=p.map(b.results,n.hitch(this,"_createItemMarkup"));b=k.toDom(b.join(""));k.place(b,d,"only");k.place(e,a,"first");k.place(d,a,"last");return a},_createItemMarkup:function(b){this.resultCount++;return this._safeSubstitue('\x3cli class\x3d"resultItem" data-id\x3d"${id}" data-label\x3d"${label}"\x3e${label}\x3c/li\x3e',
b)},_onClick:function(b){try{this._makeSelection(b.target)}catch(a){}},_makeSelection:function(b){this.emit("selection",{selection:{id:b.getAttribute("data-id"),label:b.getAttribute("data-label")}});this.onExecute()},_onHover:function(b){this._selectItem(b.target)},_selectItem:function(b){p.forEach(this.domNode.querySelectorAll("li.resultItem"),function(a){f.remove(a,"selected")});f.add(b,"selected");this._notInView(b)&&b.scrollIntoView("up"===this.direction);this.currentSelection=b},_notInView:function(b){for(var a=
b;!f.contains(a,"anaplanSearchResultsPopup");)a=a.parentNode;var e=a.scrollTop,d=b.offsetTop;return d-e+b.offsetHeight>a.offsetHeight||d<e},_reset:function(){this.currentSelection=null;this.resultCount=0},_safeSubstitue:function(b,a){return s.substitute(b,a,function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})})}})})},"anaplan/settings/HierarchyView":function(){define("anaplan/anapediaKeys anaplan/utils/FormatHelper anaplan/utils/UIHelper anaplan/data/Aggregator dojo/_base/declare anaplan/layout/ManagedContainer anaplan/toolbar/_ButtonsMixin anaplan/view/Export anaplan/widgets/ConfirmationDialog anaplan/widgets/SearchToolbarButton anaplan/data/ModelContentCache anaplan/widgets/Toolbar dijit/ToolbarSeparator anaplan/widgets/Button anaplan/widgets/Tooltip anaplan/view/ManageImportSources anaplan/widgets/HelpBox anaplan/data/RequestFactory anaplan/data/ModelContentHelper anaplan/data/ChangeFactory anaplan/utils/EntityLongIdHelper anaplan/constants anaplan/Exceptions dojo/_base/array dojo/_base/lang dojo/topic dojo/on dojo/i18n!anaplan/nls/exportLabels dojo/i18n!anaplan/nls/hierarchy dojo/i18n!anaplan/nls/hierarchyEditor dojo/i18n!anaplan/nls/imports dojo/i18n!anaplan/nls/toolbar dojo/i18n!anaplan/nls/view".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F){return r([n,f],{gutters:!1,constructor:function(a){this._workspaceId=a.workspaceId;this._modelId=a.modelId;this._viewDefinition=a.viewDefinition;this._modelContent=a.modelContent;this._isShowing=!1;this._tooltips=[];this._subscriptions=[];this._showTipsOnStartup=a.showTipsOnStartup;this._pageInfo=null;this._globalFormulaEditModule=a.globalFormulaEditModule||null},getSelectedItems:function(){return[]},hide:function(a){a===
A.TIPS&&(y.forEach(this._tooltips,function(a){a.destroy()}),this._tooltips=[]);this.inherited(arguments)},onHide:function(){this._isShowing=!1;this._handleSuspend()},onShow:function(){this._isShowing=!0;this._handleResume()},postCreate:function(){this.inherited(arguments);this.own(E.subscribe("anaplan/modelId",v.hitch(this,"_setModelId")),E.subscribe("anaplan/formula/startGlobalEdit",v.hitch(this,"_setGlobalFormulaEditModule")),E.subscribe("anaplan/formula/endGlobalEdit",v.hitch(this,"_setGlobalFormulaEditModule")));
this._createToolbar();this._createToolbarButtons();this._showTipsOnStartup&&this.show(A.TIPS)},resume:function(){this._isShowing&&this.inherited(arguments)},show:function(a){a===A.TIPS&&this._createTooltips();this.inherited(arguments)},suspend:function(){this._isShowing&&this.inherited(arguments)},uninitialize:function(){this._confirmationDialog&&this._confirmationDialog.destroy();y.forEach(this._tooltips,function(a){a.destroy()});this.inherited(arguments)},_confirm:function(a,c,b){try{var d=this;
this._confirmationDialog||(this._confirmationDialog=new l);this._confirmationDialog.set("title",c);this._confirmationDialog.set("content",a);var e=C(this._confirmationDialog,"execute",v.hitch(this,function(){e.remove();b()}));this.own(e);setTimeout(function(){d._confirmationDialog.show()},500)}catch(h){k.throwClientException(this,h)}},_createImportButton:function(){var a=new h({iconClass:"anaplanEditorIcon anaplanEditorIconImport",label:N.labelImport,"data-anaplan-element-name":"toolbar-button-import"}),
c=a.on("click",v.hitch(this,"_displayManageSourcesDialog"));this.own(c);return a},_createSearchButton:function(){return new a({iconClass:"anaplanEditorIcon anaplanEditorIconSearch",label:N.labelSearch,showLabel:!1,"data-anaplan-element-name":"toolbar-button-search"})},_createToolbar:function(){var a=new d({region:"top"});this._toolbar=a;this.addChild(a)},_createToolbarButtons:function(){var a=this._toolbar;this._importButton=this._createImportButton();a.addChild(this._importButton);this._exportButton=
this._createExportButton();a.addChild(this._exportButton);a.addChild(new q);this._insertButton=this._createInsertButton();a.addChild(this._insertButton);this._deleteButton=this._createDeleteButton();a.addChild(this._deleteButton);this._moveButton=this._createMoveButton();a.addChild(this._moveButton);y.forEach([this._insertButton,this._deleteButton,this._moveButton],function(a){a&&(a.show(),a.set("showLabel",!0),a.set("disabled",!0),a.set("title",""))});this._insertDeleteMoveSeparator=new q;a.addChild(this._insertDeleteMoveSeparator);
this._refreshButton=this._createRefreshButton();a.addChild(this._refreshButton);a.addChild(new q);this._searchButton=this._createSearchButton();a.addChild(this._searchButton)},_createTooltip:function(a,c){var d=null;try{var e=a.get("label"),h=K["tooltip"+c.split(" ").join("")];h||(h=F["tooltip"+c.split(" ").join("")]);if(!h)return null;var m=b.searchAndReplacePlaceholders(h),d=new u({label:m,connectId:[a.domNode],position:["below","above"],title:e})}catch(l){k.throwClientException(this,l)}return d},
_createTooltips:function(){try{this._tooltips.length?console.warn("HierarchyView expected to find no tooltips, found "+this._tooltips.length):(this._tooltips.push(this._createTooltip(this._importButton,"FileImport")),this._tooltips.push(this._createTooltip(this._exportButton,"FileExport")),this._tooltips.push(this._createTooltip(this._insertButton,"Insert")),this._tooltips.push(this._createTooltip(this._deleteButton,"Delete")),this._tooltips.push(this._createTooltip(this._moveButton,"Move")))}catch(a){k.throwClientException(this,
a)}},_displayExportDialog:function(){try{var a=x.entityLongIdIdentifierToEntityLongId(this._viewDefinition.staticContextIdentifiers[0]),c=w.getHierarchyId(e,a),b=k.getSharedDialog(),d=new s({modelId:this._modelId,viewDefinition:this._viewDefinition,pageInfo:this._pageInfo,hierarchyId:c});b.set("title",G.titleExport);b.set("refocus",!1);b.set("content",d.domNode);var h=C(d,"AfterExport",function(){b.hide()});this.own(h);var m=C(d,"Cancel",function(){b.onCancel()});this.own(m);b.show()}catch(l){k.throwClientException(this,
l)}},_displayManageSourcesDialog:function(){try{var a=this._viewDefinition.staticContextIdentifiers[0],b=k.getSharedDialog(),d=new c({workspaceId:this._workspaceId,modelId:this._modelId,mode:"SELECT",importType:A.importType.HIERARCHY_DATA,targetId:a});b.set("title","Select Source");b.set("refocus",!1);b.set("content",d.domNode);var e=d.on("close",function(){b.onCancel()});this.own(e);b.setHelpContent(g.manageImportSources);b.show()}catch(h){k.throwClientException(this,h)}},_executeMove:function(a,
c){try{var d=this.getSelectedItems();if("Before"===c||"After"===c)this._onItemsMoved(d,a,c);else if("End"===c){var e=this;(!a.hasChildren||a.children&&!a.children.length)&&1>=w.getSingleDimensionEntityTypeIndices(this._pageInfo.rowEntityTypeIndices,0).length?e._confirm(K.confirmationMessage.replace("%itemName%",b.escapeHTML(a.name)),K.confirmationTitle,function(){e._onItemsMoved(d,a,"Over")}):e._onItemsMoved(d,a,"Over")}else console.warn(this.declaredClass+"._executeMove: invalid moveToPosition ["+
c+"]")}catch(h){k.showErrorReporter(new B.ClientException(this.declaredClass+"._executeMove",h))}},_handleResume:function(){},_handleSuspend:function(){},_isApplicationHierarchy:function(a){return"Progress"===a},_isFormulaEditMode:function(){return null!=this._globalFormulaEditModule},_onItemsMoved:function(a,c,b){var d=new z,e=d.getCellChangeGenerator(),h=[],l=[],f=this._modelId,q=x.entityLongIdIdentifierToEntityLongId(this._viewDefinition.staticContextIdentifiers[0]),g=A.SYSTEM_PROPERTY_PARENT;
if("Before"===b||"After"===b)d=d.getModelChangeGenerator({entityTypeClass:"CUSTOM",entityTypeIndex:w.getSingleDimensionEntityTypeIndices(this._pageInfo.rowEntityTypeIndices,0)[0]}),l.push({modelId:f,moduleId:"",modelChangeXml:d.getModelChangeXml("MOVE",{position:b,relativeToEntityLongId:c.entityLongId,items:a})});y.forEach(a,function(a){if("Before"!==b&&"After"!==b||a.parentName!=c.parentName)h.push(e.getCellChange({modelId:f,originalText:String(a.parentEntityLongId),currentDisplayText:a.parentName,
entityLongIds:[q,g,a.entityLongId],cellText:"Before"===b||"After"===b?c.parentName:c.name}))},this);a=m.createRequest(this._workspaceId,[{workspaceId:this._workspaceId,cellChanges:h,modelChanges:l}],[],[]);p.gather(a);k.showPleaseWaitDialog(L.updatingHierarchy)},_setGlobalFormulaEditModule:function(a){this._globalFormulaEditModule=a},_setModelId:function(a){this._globalFormulaEditModule=null;this._modelId=a}})})},"anaplan/view/SavedViewSaveAs/_MainView":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dijit/_Contained dijit/_Container dijit/_TemplatedMixin dijit/_WidgetBase dijit/form/_FormMixin anaplan/data/ModelContentCache dojo/i18n!anaplan/nls/savedViewSaveAs dojo/i18n!dijit/nls/common dijit/_WidgetsInTemplateMixin dojo/keys dojo/_base/event dojo/text!anaplan/templates/SavedViewSaveAs.html dijit/form/CheckBox anaplan/widgets/Button anaplan/view/SavedViewSaveAs/_SaveAsTextBox".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u){return g("anaplan.view.SavedViewSaveAs._MainView",[f,n,d,p,r,s],{baseClass:"savedViewSaveAs",lblSave:e.buttonSave,lblCancel:e.buttonCancel,lblSaveAs:a.labelSaveAs,lblStorePage:a.labelStorePage,lblSaveAsDefault:a.labelSaveAsDefault,templateString:u,constructor:function(a){this._moduleLabel=a.moduleLabel;this._moduleEntityLongId=a.moduleEntityLongId},onCancel:function(){},onSave:function(){},show:function(){this.saveAsTextBox.focus();this.saveAsTextBox.focusNode.select()},
onValidStateChange:function(){this.saveButton.set("disabled",!this._isSaveAsTextBoxValidAndNonEmpty())},postCreate:function(){this.inherited(arguments);this.saveAsTextBox.set("constraints",{reservedViewNames:[this._moduleLabel].concat(l.getLineItemsLabelPage(this._moduleEntityLongId).labels[0])});this.saveAsTextBox.set("promptMessage",a.messagePrompt);this.saveAsTextBox.set("invalidMessage",a.messageInvalidDuplicateName);this.saveAsTextBox.set("value",this._moduleLabel);this.own(k(this.saveButton,
"Click",b.hitch(this,"_onSaveButtonClicked")));this.own(k(this.cancelButton,"Click",b.hitch(this,"_onCancelButtonClicked")));this.own(k(this.saveAsDefaultCheckBox,"Change",b.hitch(this,"_onSaveAsDefaultCheckBoxChange")))},_isSaveAsTextBoxValidAndNonEmpty:function(){return this.saveAsTextBox.isValid()},_onCancelButtonClicked:function(){this.onCancel()},_onKeyDown:function(a){switch(a.keyCode){case q.ENTER:this._isSaveAsTextBoxValidAndNonEmpty()&&(this.onSave(this.saveAsTextBox.get("value"),this.storePageCheckBox.get("checked"),
this.saveAsDefaultCheckBox.get("checked")),h.stop(a));break;case q.ESCAPE:this.onCancel(),h.stop(a)}},_onKeyPress:function(a){a.currentTarget===this.domNode&&a.stopPropagation()},_onSaveButtonClicked:function(){var a=this.saveAsTextBox.get("value"),b=this.storePageCheckBox.get("checked"),d=this.saveAsDefaultCheckBox.get("checked");this.onSave(a,b,d)},_onSaveAsDefaultCheckBoxChange:function(a){a?(this._previousSaveAsValue=this.saveAsTextBox.get("value"),this.saveAsTextBox.set("value",this._moduleLabel)):
this._previousSaveAsValue&&this.saveAsTextBox.set("value",this._previousSaveAsValue);this.saveAsTextBox.set("disabled",a)}})})},"anaplan/settings/ListsAndRollups":function(){define(["dojo/_base/declare","anaplan/layout/ManagedContainer","dijit/layout/ContentPane","dojo/i18n!anaplan/nls/listsAndRollups"],function(g,b,k,p){return g("anaplan.settings.ListsAndRollups",[b],{postCreate:function(){this.inherited(arguments);this.addChild(new k({content:p.messageHelp,"class":"listsAndRollups",region:"center"}))}})})},
"anaplan/keyboard/renderedShortcuts":function(){define(["dojo/i18n!anaplan/nls/shortcuts","anaplan/keyboard/shortcuts","anaplan/keyboard/helpers"],function(g,b,k){return Object.keys(b).reduce(function(p,r){var n=k.preferredShortcut(b[r].shortcuts);p[r]={descriptionHtml:g[r],eventName:r,id:k.shortcutId(r),shortcutHtml:k.shortcutHtml(n)};return p},{})})},"anaplan/settings/Shared/Toolbar":function(){define("anaplan/utils/TestAttributesHelper anaplan/utils/JsHelper dojo/_base/declare anaplan/widgets/Toolbar dojo/on dojo/_base/lang dijit/Menu anaplan/settings/Shared/DashboardMenuList anaplan/utils/EntityLongIdHelper anaplan/widgets/DropDownButton anaplan/widgets/SearchToolbarButton anaplan/widgets/Button anaplan/widgets/PopupMenuItem anaplan/constants dojo/i18n!anaplan/nls/toolbar".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u){return k("anaplan.settings.Shared.Toolbar",[p],{region:"top",_model:null,_gridlet:null,constructor:function(a){this._model=a.model;this._gridlet=a.gridlet},startup:function(){this.inherited(arguments)},hide:function(a){!1===(a===h.TIPS||a===h.BREAKBACK_MARKERS)&&this.inherited(arguments)},_createPublishToDashboardMenu:function(){var a=!1;if(this._gridlet&&this._gridlet._selection&&this._gridlet._selection.currentCell){var b=this._gridlet._selection.currentCell;
if((b.y.entityLongIds?l.getEntityTypeIndex(b.y.entityLongIds[0]):null)===h.EXPORT_ENTITY_TYPE_INDEX)a=!0}var d=!1;this._dashboardsList||(d=!0,this._dashboardsList=new s);b=new q({label:this.isDialog?u.labelPublishCopyTo:u.labelPublishToDashboard,popup:this._dashboardsList});b.startup();d&&this._dashboardsList.updateDashboardsList(a);a=r(this._dashboardsList,"NewDashboardClick",n.hitch(this,function(a){this.onNewDashboardClick(a)}));b.own(a);a=r(this._dashboardsList,"DashboardClick",n.hitch(this,function(a,
c){this.onDashboardClick(a,c)}));b.own(a);return this.menu=b},_createButton:function(a,e,h,l,f,q){a=new d({iconClass:a,label:e,showLabel:b.isBoolean(l)?l:!0,disabled:b.isBoolean(f)?f:!0});if(b.isFunction(h))a.on("click",h);q&&g.add(a,q);return a},_createExportButton:function(){return this._createButton("anaplanEditorIcon anaplanEditorIconExport",u.labelExport,n.hitch(this,"onExport"),!0,!0,"toolbar-button-export")},_createReOrderButton:function(){return this._createButton("anaplanEditorIcon anaplanEditorIconMove",
u.labelReOrder,n.hitch(this,"onReorder"),!0,!0,"toolbar-button-reorder")},_createRefreshButton:function(){return this._createButton("anaplanEditorIcon anaplanEditorIconRefresh",u.labelRefresh,n.hitch(this,"onRefresh"),!0,!0,"toolbar-button-refresh")},_createMoveButton:function(){return this._createButton("anaplanEditorIcon anaplanEditorIconMove",u.labelMove,n.hitch(this,"onMove"),!0,!0,"toolbar-button-move")},_createDeleteButton:function(){return this._createButton("anaplanEditorIcon anaplanEditorIconDeleteRow",
u.labelDelete,n.hitch(this,"onDelete"),!0,!0,"toolbar-button-delete")},_createSearchButton:function(){var a=new e({iconClass:"anaplanEditorIcon anaplanEditorIconSearch",label:u.labelSearch,showLabel:!1,model:this._model,widget:this._gridlet});g.add(a,"toolbar-button-search");return a},_createViewButton:function(){var c=this,b=new f({style:"display: none;"}),d=new a({label:u.menuView,dropDown:b});b.on("Open",function(){d.closeDropDown(!1);c.onOpenView()});this._menuItemPublishButtonToDashboard=this._createPublishToDashboardMenu();
b.addChild(this._menuItemPublishButtonToDashboard);this._menuItemPublishButtonToDashboard.startup();g.add(d,"toolbar-button-view");return d},disableButtons:function(){for(var a=this.getChildren().length,b=0;b<a;b++)this.getChildren()[b].set("disabled",!0)},onNewDashboardClick:function(){},onDashboardClick:function(){},onOpenView:function(){},onReorder:function(){},onBulkOperation:function(){},onRefresh:function(){},onMove:function(){},onDelete:function(){},onEditAction:function(){},onRunAction:function(){},
onManageImportDataSources:function(){},onExport:function(){}})})},"anaplan/view/CopyModule":function(){define("anaplan/utils/FormatHelper anaplan/Exceptions anaplan/api/service anaplan/data/LabelPageReadStore dojo/string anaplan/utils/TestAttributesHelper anaplan/utils/UIHelper anaplan/utils/JsHelper dijit/_Contained dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/dom-style dojo/_base/declare dojo/_base/lang anaplan/data/ModelContentCache dojo/text!anaplan/templates/View/CopyModule.html dojo/i18n!dijit/nls/common dojo/i18n!anaplan/nls/copyModule anaplan/widgets/TextBox dijit/form/CheckBox dijit/form/FilteringSelect dijit/form/RadioButton".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w){return h([e,a,d,l],{baseClass:"copyModule",nls:w,lblCancel:m.buttonCancel,lblOk:m.buttonOk,templateString:t,constructor:function(a){this._validateArgs(a);this._sourceModuleName=a.sourceModuleName;this._functionalAreaId=a.functionalAreaId;this._hasViews=a.hasViews},_validateArgs:function(a){if(!s.isObject(a)||!s.isString(a.sourceModuleName)||!s.isBoolean(a.hasViews))throw new b.ClientException("anaplan.view.CopyModule#construtor","Invalid args");},postCreate:function(){this.inherited(arguments);
var a=this._getNextUniqueName();this.moduleNameTextBox.set("value",a);this.moduleNameTextBox.on("keyup",u.hitch(this,"validate"));this._addTestAttributes();this.functionalAreaSelect.set("store",new p({labelPage:c.getFunctionalAreasLabelPage()}));(a=this.functionalAreaSelect.store._itemsByIdentity[this._functionalAreaId])&&this.functionalAreaSelect.set("displayedValue",a.entityId);this.includeDataCheckbox.set("checked",!0);this.allViewsRadio.set("disabled",!this._hasViews);this.defaultViewsRadio.set("disabled",
!this._hasViews);this.validate()},startup:function(){this.inherited(arguments);setTimeout(function(){this.moduleNameTextBox.focus();this.moduleNameTextBox.focusNode.select();this.moduleNameTextBox.showPromptMessage()}.bind(this),250)},_getValueAttr:function(){return{name:r.trim(this.moduleNameTextBox.value),includeAllViews:this.allViewsRadio.checked,includeData:this.includeDataCheckbox.checked,functionalAreaId:this.functionalAreaSelect.item?this.functionalAreaSelect.item.entityLongId:-1}},validate:function(){this.hideError();
var a=this.get("value"),c=null;60<a.name.length&&(c=w.maxLengthError);0===a.name.length&&(c=w.nameIsRequiredError);this._checkforDuplicateName(a.name)&&(c=w.duplicateNameError);!1===this.functionalAreaSelect.isValid()&&(c=w.invalidFunctionalArea);return c?(this.showError(c),!1):!0},showError:function(a){f.setHtml(this.validationMsgText,g.replaceNewLineCharacters(a));q.set(this.validationMsg,"visibility","")},hideError:function(){q.set(this.validationMsg,"visibility","hidden")},enable:function(){this.moduleNameTextBox.set("disabled",
!1);this.okButton.set("disabled",!1);this.includeDataCheckbox.set("disabled",!1)},disable:function(){this.moduleNameTextBox.set("disabled",!0);this.okButton.set("disabled",!0);this.includeDataCheckbox.set("disabled",!0)},_addTestAttributes:function(){n.add(this.moduleNameTextBox,"textboxModuleName");n.add(this.includeDataCheckbox,"checkboxIncludeData");n.add(this.okButton,"buttonOK");n.add(this.cancelButton,"buttonCancel")},_checkforDuplicateName:function(a){return k.modules.containsEntityId(a)||
k.lineItemSubsets.containsEntityId(a)||k.dashboards.containsEntityId(a)||k.lists.containsEntityId(a)},_getNextUniqueName:function(){var a=r.substitute(w.defaultModuleName,{moduleName:this._sourceModuleName});if(this._checkforDuplicateName(a))for(var c=!1,b=2;!1===c;){var d=a+" ("+b+")";this._checkforDuplicateName(d)?b++:(a=d,c=!0)}return a},onCancel:function(){},_onSubmit:function(){if(this.validate())this.onSubmit(this.get("value"))},onSubmit:function(){}})})},"anaplan/keyboard/shortcutGroups":function(){define(["anaplan/keyboard/keyboardEvents"],
function(g){return Object.freeze([{name:"EDIT",shortcuts:[g.ANAPLAN_COPY,g.ANAPLAN_PASTE,g.ANAPLAN_UNDO]},{name:"DATA",shortcuts:[g.ANAPLAN_DRILL_DOWN,g.ANAPLAN_DRILL_TO_TRANSACTION]},{name:"NAVIGATION",shortcuts:[g.ANAPLAN_TOGGLE_BLUEPRINT,g.ANAPLAN_TAB_FORWARD,g.ANAPLAN_TAB_BACK,g.ANAPLAN_SEARCH]}])})},"anaplan/view/ModelManagement/MainView":function(){define("anaplan/anapediaKeys anaplan/utils/FormatHelper anaplan/data/ModelContentCache anaplan/view/ModelManagement/ModelsTab anaplan/view/ModelManagement/StatusTab dojo/dom-class anaplan/constants anaplan/Exceptions anaplan/utils/WorkspaceHelper anaplan/widgets/HelpBox dijit/_FocusMixin dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/i18n!anaplan/nls/modelManagement dojo/i18n!dijit/nls/common dojo/keys dojo/text!anaplan/templates/ModelManagement/MainView.html dojo/topic dijit/layout/TabContainer dijit/layout/ContentPane anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B){return c([h,d,e,q,u],{baseClass:"modelManagementMainView",tabIndex:-1,templateString:A,modelsTab:null,statusTab:null,workspaceSummaryHelp:null,workspaceSummaryIcon:null,workspaceSummaryMessage:null,constructor:function(a){this._workspaceId=a.workspaceId;this._workspaceName=a.workspaceName;this._modelId=a.modelId;this._openOnStatusTab=a.openOnStatusTab;this._selectedModelSummary=this._selectedModelName=this._selectedModelId=null},getSelectedModelActiveStateInModelsTab:function(){return this._modelsTabWidget?
this._modelsTabWidget.getSelectedModelActiveState():null},getSelectedModelActiveStateInStatusTab:function(){return this._statusTabWidget?this._statusTabWidget.getSelectedModelActiveState():null},getSelectedModelIdInModelsTab:function(){return this._modelsTabWidget?this._modelsTabWidget.getSelectedModelId():null},getSelectedModelIdInStatusTab:function(){return this._statusTabWidget?this._statusTabWidget.getSelectedModelId():null},getSelectedModelNameInModelsTab:function(){return this._modelsTabWidget?
this._modelsTabWidget.getSelectedModelName():null},getSelectedModelNameInStatusTab:function(){return this._statusTabWidget?this._statusTabWidget.getSelectedModelName():null},getSelectedModelSummaryInModelsTab:function(){return this._modelsTabWidget?this._modelsTabWidget.getSelectedModelSummary():null},getSelectedModelSummaryInStatusTab:function(){return this._statusTabWidget?this._statusTabWidget.getSelectedModelSummary():null},onCancelTask:function(){},onClose:function(){},onCloseModel:function(){},
onCopyModel:function(){},onCopyAndArchiveModel:function(){},onCopyAndSanitizeModel:function(){},onDeleteModel:function(){},onExportModel:function(){},onHelpChange:function(){},onImportModel:function(){},onNewModel:function(){},onRenameModel:function(){},onSwitchModel:function(){},onTitleChange:function(){},onSetModelOnline:function(){},onSetModelOffline:function(){},onChangeModelModestatus:function(){},onCompareSync:function(){},postCreate:function(){try{this.inherited(arguments),this._openOnStatusTab?
(this._createStatusTab(),this.tabContainer.selectChild(this.statusTab)):(this._createModelsTab(),this.tabContainer.selectChild(this.modelsTab)),this.modelsTab.set("title",w.tabModels),this.statusTab.set("title",w.tabStatus),this.closeButton.set("label",z.itemClose),this.own(B.subscribe(this.tabContainer.id+"-selectChild",m.hitch(this,"_onTabSelect")),B.subscribe("anaplan/closeModelManagementDialog",m.hitch(this,"_onClose"))),this._updateWorkspaceSummary()}catch(a){throw new s.ClientException("MainView#postCreate",
a);}},resize:function(){this.inherited(arguments);this.tabContainer.resize()},setModelIdInModelsTab:function(a){try{this._modelId=a,this._modelsTabWidget&&this._modelsTabWidget.setModelId(a),this._updateWorkspaceSummary()}catch(c){throw new s.ClientException("MainView#setModelIdInModelsTab",c);}},setModelIdInStatusTab:function(a){try{this._statusTabWidget&&this._statusTabWidget.setModelId(a),this._updateWorkspaceSummary()}catch(c){throw new s.ClientException("MainView.setModelIdInStatusTab",c);}},
_createModelsTab:function(){try{if(!this._modelsTabWidget){var a=this._modelsTabWidget=new p({workspaceId:this._workspaceId,workspaceName:this._workspaceName,modelId:this._modelId});this.own(a.on("copyModel",m.hitch(this,"onCopyModel")),a.on("copyAndArchiveModel",m.hitch(this,"onCopyAndArchiveModel")),a.on("copyAndSanitizeModel",m.hitch(this,"onCopyAndSanitizeModel")),a.on("deleteModel",m.hitch(this,"onDeleteModel")),a.on("renameModel",m.hitch(this,"onRenameModel")),a.on("exportModel",m.hitch(this,
"onExportModel")),a.on("importModel",m.hitch(this,"onImportModel")),a.on("newModel",m.hitch(this,"onNewModel")),a.on("switchModel",m.hitch(this,"onSwitchModel")),a.on("setModelOnline",m.hitch(this,"onSetModelOnline")),a.on("setModelOffline",m.hitch(this,"onSetModelOffline")),a.on("changeModelModestatus",m.hitch(this,"onChangeModelModestatus")),a.on("compareSync",m.hitch(this,"onCompareSync")));this.modelsTab.set("content",a.domNode)}}catch(c){throw new s.ClientException("MainView#_createModelsTab",
c);}},_createStatusTab:function(){try{if(!this._statusTabWidget){var a=this._statusTabWidget=new r({workspaceId:this._workspaceId,workspaceName:this._workspaceName,modelId:this._modelId});this.own(a.on("cancelTask",m.hitch(this,"onCancelTask")),a.on("closeModel",m.hitch(this,"onCloseModel")));this.statusTab.set("content",a.domNode)}}catch(c){throw new s.ClientException("MainView#_createStatusTab",c);}},_onClose:function(){this.onClose()},_onCloseButtonClick:function(){this._onClose()},_onKeyDown:function(a){a.keyCode===
x.ESCAPE&&(this._onClose(),t.stop(a))},_onKeyPress:function(a){a.currentTarget===this.domNode&&a.stopPropagation()},_onShow:function(){try{this.onTitleChange(w.titleModelManagement+": "+this._workspaceName),this.onHelpChange(g.manageModels),this._modelsTabWidget?this._modelsTabWidget.scrollToSelection():this._statusTabWidget&&this._statusTabWidget.scrollToSelection()}catch(a){throw new s.ClientException("MainView#_onShow",a);}},_onTabSelect:function(a){a===this.modelsTab?this._createModelsTab():a===
this.statusTab&&this._createStatusTab()},_updateWorkspaceSummary:function(){var a=k.getWorkspaceInfo();if(a){var c=a.currentWorkspaceSize;if(c!=this._currentWorkspaceSize){var b=l.getWorkspacePercentageFull(a);n.toggle(this.workspaceSummaryIcon,"systemErrorIcon",b>f.WORKSPACE_PERCENTAGE_FULL_ERROR_THRESHOLD);n.toggle(this.workspaceSummaryIcon,"anaplanEditorIcon anaplanEditorIconInvalid",b>f.WORKSPACE_PERCENTAGE_FULL_WARNING_THRESHOLD&&b<=f.WORKSPACE_PERCENTAGE_FULL_ERROR_THRESHOLD);n.toggle(this.workspaceSummaryMessage,
"systemErrorMessage",b>f.WORKSPACE_PERCENTAGE_FULL_ERROR_THRESHOLD);n.toggle(this.workspaceSummaryMessage,"systemWarningMessage",b>f.WORKSPACE_PERCENTAGE_FULL_WARNING_THRESHOLD&&b<=f.WORKSPACE_PERCENTAGE_FULL_ERROR_THRESHOLD);a=l.getWorkspaceSizeMessage(a);this.workspaceSummaryMessage.innerHTML=a.join("\x26nbsp;\x26nbsp;");this._currentWorkspaceSize=c}}}})})},"anaplan/view/_editor/_Plugin":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/i18n!anaplan/nls/commands"],function(g,b,k){return g("anaplan.view._editor._Plugin",
[],{button:null,buttonClass:null,command:"",commandArg:null,editor:null,iconClass:null,queryCommand:null,showLabel:!1,useDefaultCommand:!0,constructor:function(g){g&&b.mixin(this,g)},destroy:function(){this._buttonHandle&&this._buttonHandle.remove()},setEditor:function(g){this.editor=g;this._initButton();this.button&&this.useDefaultCommand&&(this._buttonHandle=this.button.on("click",b.hitch(this.editor,"execCommand",this.command,this.commandArg)))},setToolbar:function(b){this.button&&b.addChild(this.button)},
update:function(){this.button&&this.button.set("disabled",!this._queryButtonEnabled())},_initButton:function(g){this.buttonClass&&(g=b.mixin({label:k[this.command],iconClass:this.iconClass,showLabel:this.showLabel,dropDown:this.dropDown,tabIndex:"-1",disabled:!this._queryButtonEnabled()},g||{}),this.button=new this.buttonClass(g))},_queryButtonEnabled:function(){return this.editor.get("editMode")}})})},"dijit/InlineEditBox":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/i18n dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/sniff dojo/when ./a11yclick ./focus ./_Widget ./_TemplatedMixin ./_WidgetsInTemplateMixin ./_Container ./form/Button ./form/_TextBoxMixin ./form/TextBox dojo/text!./templates/InlineEditBox.html dojo/i18n!./nls/common".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v){w=p("dijit._InlineEditor",[m,w,z],{templateString:v,contextRequire:g,postMixInProperties:function(){this.inherited(arguments);this.messages=l.getLocalization("dijit","common",this.lang);b.forEach(["buttonSave","buttonCancel"],function(a){this[a]||(this[a]=this.messages[a])},this)},buildRendering:function(){this.inherited(arguments);var a="string"==typeof this.editor?d.getObject(this.editor)||g(this.editor):this.editor,c=this.sourceStyle,
e="line-height:"+c.lineHeight+";",h=s.getComputedStyle(this.domNode);b.forEach(["Weight","Family","Size","Style"],function(a){h["font"+a]!=c["font"+a]&&(e+="font-"+a+":"+c["font"+a]+";")},this);b.forEach("marginTop marginBottom marginLeft marginRight position left top right bottom float clear display".split(" "),function(a){this.domNode.style[a]=c[a]},this);var m=this.inlineEditBox.width;"100%"==m?(e+="width:100%;",this.domNode.style.display="block"):e+="width:"+(m+(Number(m)==m?"px":""))+";";m=d.delegate(this.inlineEditBox.editorParams,
{style:e,dir:this.dir,lang:this.lang,textDir:this.textDir});this.editWidget=new a(m,this.editorPlaceholder);this.inlineEditBox.autoSave&&(this.saveButton.destroy(),this.cancelButton.destroy(),this.saveButton=this.cancelButton=null,f.destroy(this.buttonContainer))},postCreate:function(){this.inherited(arguments);var a=this.editWidget;this.inlineEditBox.autoSave?this.own(k.after(a,"onChange",d.hitch(this,"_onChange"),!0),q(a,"keydown",d.hitch(this,"_onKeyDown"))):"intermediateChanges"in a&&(a.set("intermediateChanges",
!0),this.own(k.after(a,"onChange",d.hitch(this,"_onIntermediateChange"),!0)),this.saveButton.set("disabled",!0))},startup:function(){this.editWidget.startup();this.inherited(arguments)},_onIntermediateChange:function(){this.saveButton.set("disabled",this.getValue()==this._resetValue||!this.enableSave())},destroy:function(){this.editWidget.destroy(!0);this.inherited(arguments)},getValue:function(){var a=this.editWidget;return String(a.get("displayedValue"in a||"_getDisplayedValueAttr"in a?"displayedValue":
"value"))},_onKeyDown:function(a){this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(!a.altKey&&!a.ctrlKey)&&(a.keyCode==e.ESCAPE?(a.stopPropagation(),a.preventDefault(),this.cancel(!0)):a.keyCode==e.ENTER&&"INPUT"==a.target.tagName&&(a.stopPropagation(),a.preventDefault(),this._onChange()))},_onBlur:function(){this.inherited(arguments);this.inlineEditBox.autoSave&&this.inlineEditBox.editing&&(this.getValue()==this._resetValue?this.cancel(!1):this.enableSave()&&this.save(!1))},_onChange:function(){this.inlineEditBox.autoSave&&
(this.inlineEditBox.editing&&this.enableSave())&&t.focus(this.inlineEditBox.displayNode)},enableSave:function(){return this.editWidget.isValid?this.editWidget.isValid():!0},focus:function(){this.editWidget.focus();this.editWidget.focusNode&&(t._onFocusNode(this.editWidget.focusNode),"INPUT"==this.editWidget.focusNode.tagName&&this.defer(function(){B.selectInputText(this.editWidget.focusNode)}))}});m=p("dijit.InlineEditBox"+(h("dojo-bidi")?"_NoBidi":""),m,{editing:!1,autoSave:!0,buttonSave:"",buttonCancel:"",
renderAsHtml:!1,editor:y,editorWrapper:w,editorParams:{},disabled:!1,onChange:function(){},onCancel:function(){},width:"100%",value:"",noValueIndicator:6>=h("ie")?"\x3cspan style\x3d'font-family: wingdings; text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e":"\x3cspan style\x3d'text-decoration: underline;'\x3e\x26#160;\x26#160;\x26#160;\x26#160;\x26#x270d;\x26#160;\x26#160;\x26#160;\x26#160;\x3c/span\x3e",constructor:function(){this.editorParams=
{}},postMixInProperties:function(){this.inherited(arguments);this.displayNode=this.srcNodeRef;this.own(q(this.displayNode,c,d.hitch(this,"_onClick")),q(this.displayNode,"mouseover, focus",d.hitch(this,"_onMouseOver")),q(this.displayNode,"mouseout, blur",d.hitch(this,"_onMouseOut")));this.displayNode.setAttribute("role","button");this.displayNode.getAttribute("tabIndex")||this.displayNode.setAttribute("tabIndex",0);!this.value&&!("value"in this.params)&&(this.value=d.trim(this.renderAsHtml?this.displayNode.innerHTML:
this.displayNode.innerText||this.displayNode.textContent||""));this.value||(this.displayNode.innerHTML=this.noValueIndicator);n.add(this.displayNode,"dijitInlineEditBoxDisplayMode")},setDisabled:function(c){a.deprecated("dijit.InlineEditBox.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",c)},_setDisabledAttr:function(a){this.domNode.setAttribute("aria-disabled",a?"true":"false");a?this.displayNode.removeAttribute("tabIndex"):this.displayNode.setAttribute("tabIndex",
0);n.toggle(this.displayNode,"dijitInlineEditBoxDisplayModeDisabled",a);this._set("disabled",a)},_onMouseOver:function(){this.disabled||n.add(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onMouseOut:function(){n.remove(this.displayNode,"dijitInlineEditBoxDisplayModeHover")},_onClick:function(a){this.disabled||(a&&(a.stopPropagation(),a.preventDefault()),this._onMouseOut(),this.defer("edit"))},edit:function(){if(!this.disabled&&!this.editing){this._set("editing",!0);this._savedTabIndex=
r.get(this.displayNode,"tabIndex")||"0";if(!this.wrapperWidget){var a=f.create("span",null,this.domNode,"before");this.wrapperWidget=new ("string"==typeof this.editorWrapper?d.getObject(this.editorWrapper):this.editorWrapper)({value:this.value,buttonSave:this.buttonSave,buttonCancel:this.buttonCancel,dir:this.dir,lang:this.lang,tabIndex:this._savedTabIndex,editor:this.editor,inlineEditBox:this,sourceStyle:s.getComputedStyle(this.displayNode),save:d.hitch(this,"save"),cancel:d.hitch(this,"cancel"),
textDir:this.textDir},a);this.wrapperWidget._started||this.wrapperWidget.startup();this._started||this.startup()}var c=this.wrapperWidget;n.add(this.displayNode,"dijitOffScreen");n.remove(c.domNode,"dijitOffScreen");s.set(c.domNode,{visibility:"visible"});r.set(this.displayNode,"tabIndex","-1");var b=c.editWidget,e=this;u(b.onLoadDeferred,d.hitch(c,function(){b.set("displayedValue"in b||"_setDisplayedValueAttr"in b?"displayedValue":"value",e.value);this.defer(function(){c.saveButton&&c.saveButton.set("disabled",
"intermediateChanges"in b);this.focus();this._resetValue=this.getValue()})}))}},_onBlur:function(){this.inherited(arguments)},destroy:function(){this.wrapperWidget&&!this.wrapperWidget._destroyed&&(this.wrapperWidget.destroy(),delete this.wrapperWidget);this.inherited(arguments)},_showText:function(a){var c=this.wrapperWidget;s.set(c.domNode,{visibility:"hidden"});n.add(c.domNode,"dijitOffScreen");n.remove(this.displayNode,"dijitOffScreen");r.set(this.displayNode,"tabIndex",this._savedTabIndex);a&&
t.focus(this.displayNode)},save:function(a){if(!this.disabled&&this.editing){this._set("editing",!1);var c=this.wrapperWidget.getValue();this.set("value",c);this._showText(a)}},setValue:function(c){a.deprecated("dijit.InlineEditBox.setValue() is deprecated.  Use set('value', ...) instead.","","2.0");return this.set("value",c)},_setValueAttr:function(a){a=d.trim(a);var c=this.renderAsHtml?a:a.replace(/&/gm,"\x26amp;").replace(/</gm,"\x26lt;").replace(/>/gm,"\x26gt;").replace(/"/gm,"\x26quot;").replace(/\n/g,
"\x3cbr\x3e");this.displayNode.innerHTML=c||this.noValueIndicator;this._set("value",a);this._started&&this.defer(function(){this.onChange(a)})},getValue:function(){a.deprecated("dijit.InlineEditBox.getValue() is deprecated.  Use get('value') instead.","","2.0");return this.get("value")},cancel:function(a){!this.disabled&&this.editing&&(this._set("editing",!1),this.defer("onCancel"),this._showText(a))}});h("dojo-bidi")&&(m=p("dijit.InlineEditBox",m,{_setValueAttr:function(){this.inherited(arguments);
this.applyTextDir(this.displayNode)}}));m._InlineEditor=w;return m})},"anaplan/view/Grid/_Views":function(){define("dojo/_base/declare anaplan/common/ViewSerialNumbers anaplan/data/Aggregator anaplan/data/ModelContentHelper anaplan/data/RequestFactory anaplan/utils/EntityLongIdHelper anaplan/constants dojo/_base/lang".split(" "),function(g,b,k,p,r,n,f,s){return g([],{constructor:function(l){this._moduleViewReference=l.moduleViewReference;this._registeredObserver=!1;this._serialNumbers=new b},destroy:function(){this._registeredObserver&&
k.deleteObserver(this)},error:function(b){this.onError(b)},initialize:function(){this._staticContextIdentifiers=[n.entityLongIdToEntityLongIdIdentifier(this._moduleViewReference.entityDefaultViewEntityLongId)];this._viewDefinition=s.mixin({type:"MODEL_DEFINITION",staticContextIdentifiers:this._staticContextIdentifiers},p.getAxesForViewDefinition([f.SYSTEM_AXIS_IDENTIFIER_MODULE_SUBSIDIARY_VIEW_IDENTIFIER],[f.SYSTEM_AXIS_IDENTIFIER_EMPTY_0_1_IDENTIFIER]));k.addObserver(this);this._registeredObserver=
!0},onError:function(){},onUpdate:function(){},update:function(l){var a=this._serialNumbers,e=new b(l[0].serialNumbers);this._serialNumbers=e;this._viewIndex=l[0].viewIndex;if(a.rowAxisSerialNumber!==e.rowAxisSerialNumber)this.onUpdate(l[0].rowLabelPages[0])},view:function(){return r.createRequest(workspaceId,[],[{workspaceId:workspaceId,modelId:modelId,viewDefinition:this._viewDefinition,dataPageRequests:[],rowLabelPageRequests:[{start:0,count:-1}],columnLabelPageRequests:[],cellSelectorLabelsRequired:!1,
pageSelectorLabelsRequired:!1,serialNumbers:this._serialNumbers,viewIndex:this._viewIndex||-1}],[])}})})},"anaplan/settings/LineItemSubsetDefinitions":function(){define("anaplan/utils/FormatHelper anaplan/data/Aggregator dojo/_base/declare anaplan/layout/ManagedContainer anaplan/toolbar/_ButtonsMixin anaplan/widgets/Toolbar dijit/ToolbarSeparator anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/ViewRequestGridModel anaplan/gridlet/Selection anaplan/utils/SelectionHelper anaplan/utils/UIHelper anaplan/view/Export anaplan/constants dojo/_base/array dojo/_base/lang dojo/topic dojo/on anaplan/widgets/Tooltip anaplan/gridlet/GridletFactory dojo/i18n!anaplan/nls/common dojo/i18n!anaplan/nls/exportLabels dojo/i18n!anaplan/nls/lineItemSubsetDefinitions dojo/i18n!anaplan/nls/view".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y){return k([p,r],{gutters:!1,numDataRows:0,constructor:function(a){this._workspaceId=a.workspaceId;this._modelId=a.modelId;this._viewDefinition=a.viewDefinition;this._isShowing=!1;this._tooltips=[];this._showTipsOnStartup=a.showTipsOnStartup;this._gridlet=null},hide:function(a){a===h.TIPS&&(u.forEach(this._tooltips,function(a){a.destroy()}),this._tooltips=[]);this.inherited(arguments)},onHide:function(){this._isShowing=!1;this._handleSuspend()},
onShow:function(){this._isShowing=!0;this._handleResume();this.getParent().getParent()&&!this._gridlet&&this._createGridlet()},postCreate:function(){this.inherited(arguments);var a=t.subscribe("anaplan/modelId",c.hitch(this,"_setModelId"));this.own(a);this._createToolbar();this._showTipsOnStartup&&this.show(h.TIPS)},resume:function(){this.inherited(arguments);this._handleResume()},show:function(a){a===h.TIPS&&this._createTooltips();this.inherited(arguments)},suspend:function(){this.inherited(arguments);
this._handleSuspend()},uninitialize:function(){u.forEach(this._tooltips,function(a){a.destroy()});this.inherited(arguments)},_createGridlet:function(){try{this._model=new l({workspaceId:workspaceId,modelId:modelId,viewDefinition:this._viewDefinition});this._gridlet=(new z({editorFactory:new s})).createGridlet({region:"center",defaultColumnWidth:150,model:this._model,selection:(new a).initializeToDefaults()});this.addChild(this._gridlet);var e=m(this._gridlet,"reset",c.hitch(this,"_reset")),h=m(this._gridlet,
"SelectionChange",c.hitch(this,"_onSelectionChange")),f=m(this._gridlet,"Update",c.hitch(this,"_onUpdate"));this.own(e,h,f);b.gather();setTimeout(c.hitch(this,function(){this._gridlet.domNode&&this._gridlet.focus()}),125)}catch(q){d.throwClientException(this,q)}},_createToolbar:function(){try{var a=new n({region:"top"});this._toolbar=a;this.addChild(a);this._insertButton=this._createInsertButton();a.addChild(this._insertButton);this._deleteButton=this._createDeleteButton();a.addChild(this._deleteButton);
this._reOrderButton=this._createReOrderButton();a.addChild(this._reOrderButton);u.forEach([this._insertButton,this._deleteButton,this._reOrderButton],function(a){a&&(a.show(),a.set("showLabel",!0),a.set("disabled",!0),a.set("title",""))});this._insertDeleteMoveSeparator=new f;a.addChild(this._insertDeleteMoveSeparator);this._exportButton=this._createExportButton();a.addChild(this._exportButton);a.addChild(new f);this._refreshButton=this._createRefreshButton();a.addChild(this._refreshButton);this._toolbar=
a}catch(c){d.throwClientException(this,c)}},_createTooltip:function(a,c){var b=null;try{var e=a.get("label"),h=B["tooltip"+c.split(" ").join("")];h||(h=y["tooltip"+c.split(" ").join("")]);if(!h)return null;var m=g.searchAndReplacePlaceholders(h),b=new w({label:m,connectId:[a.domNode],position:["below","above"],title:e})}catch(l){d.throwClientException(this,l)}return b},_createTooltips:function(){this._tooltips.length?console.warn("LineItemSubsetDefinitions expected to find no tooltips, found "+this._tooltips.length):
(this._tooltips.push(this._createTooltip(this._insertButton,"Insert")),this._tooltips.push(this._createTooltip(this._deleteButton,"Delete")),this._tooltips.push(this._createTooltip(this._reOrderButton,"ReOrder")),this._tooltips.push(this._createTooltip(this._refreshButton,"Refresh")))},_displayExportDialog:function(){try{var a=d.getSharedDialog(),c=new q({modelId:this._modelId,viewDefinition:this._viewDefinition,pageInfo:this._model.getPageInfo(),hierarchyId:x.labelLineItemSubsets});a.set("title",
A.titleExport);a.set("refocus",!1);a.set("content",c.domNode);this.own(m(c,"AfterExport",function(){a.hide()}),m(c,"Cancel",function(){a.onCancel()}));a.show()}catch(b){d.throwClientException(this,b)}},_getGridController:function(){return!this._gridlet?null:this._gridlet.getGridController()},_handleResume:function(){this._gridlet&&this._gridlet._gridController.resume()},_handleSuspend:function(){this.inherited(arguments);this._gridlet&&this._gridlet._gridController.suspend()},_enableButtons:function(a){var c=
!1;a&&(c=this._getGridController(),c=e.canReOrder(a,c.getContext()));this._reOrderButton&&this._reOrderButton.set("disabled",!c);this.inherited(arguments)},_onSelectionChange:function(a){this._enableButtons(a)},_onUpdate:function(){var a=this._getNumDataRows();(this._gridlet&&!this._gridlet._selection||0===this._numDataRows&&0<a||0<this._numDataRows&&0===a)&&this._gridlet._gridController.setBestSelection();this._numDataRows=a;this._onSelectionChange(this._gridlet._selection)},_reset:function(){this._disableButtons(this._toolbar)},
_setModelId:function(){},_getNumDataRows:function(){var a=0;this._gridlet&&(this._gridlet._sizer&&void 0!==typeof this._gridlet._sizer._dataRowCount)&&(a=this._gridlet._sizer._dataRowCount);return a}})})},"anaplan/forms/validators":function(){define(["dojo/_base/lang"],function(g){var b={emailAddress:function(){return"^(?:[a-z0-9!#$%\x26'*+/\x3d?^_`{|}~-]+(?:\\.[a-z0-9!#$%\x26'*+/\x3d?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])$"}};
g.setObject("anaplan.forms.validators",b);return b})},"anaplan/settings/Time2/Forms/WeeksGeneral":function(){define("./FormBase ./Widgets/CurrentPeriodFilteringSelect dijit/form/DateTextBox dijit/form/NumberTextBox dojo/_base/declare dojo/_base/sniff".split(" "),function(g,b,k,p,r){return r([g],{testableName:"formWeeksGeneral",_formfields:[{name:"startDate",nls:"labelStartDate",Ctor:k,triggerCurrentPeriod:!0,required:!0},{name:"weekCount",nls:"labelWeekCount",Ctor:p,options:{constraints:{min:1,max:1E3},
required:!0},triggerCurrentPeriod:!0},{name:"currentPeriod",nls:"labelCurrentPeriod",Ctor:b}]})})},"anaplan/settings/Time2/DataProvider":function(){define("anaplan/common/ViewSerialNumbers anaplan/constants anaplan/data/Aggregator anaplan/data/ViewRequestRequestGenerator anaplan/utils/FormatHelper anaplan/utils/JsHelper dijit/Destroyable dojo/_base/declare dojo/_base/lang dojo/Evented".split(" "),function(g,b,k,p,r,n,f,s,l,a){return s([a,f],{moduleId:null,hierarchyId:null,viewDefinition:null,_originalValue:null,
constructor:function(a){l.mixin(this,l.mixin({},a));this._serialNumbers=new g},initialize:function(){k.addObserver(this);k.gather()},refresh:function(){k.gather()},view:function(){return(new p(window.workspaceId)).getRequest({modelId:window.modelId,viewDefinition:this.viewDefinition,pageRequests:[{startRow:0,startColumn:0,rowCount:-1,columnCount:-1}],cellSelectorLabelsRequired:!0,pageSelectorLabelsRequired:!0,serialNumbers:this._serialNumbers,viewIndex:this._viewIndex||-1})},destroy:function(){k.deleteObserver(this);
this.inherited(arguments)},update:function(a){var b,l=a[0];b=this._serialNumbers;a=this._serialNumbers=new g(l.serialNumbers);this._viewIndex=l.viewIndex;a.rowAxisSerialNumber!==b.rowAxisSerialNumber&&(this._rowLabelPage=l.rowLabelPages[0]);a.dataSerialNumber!==b.dataSerialNumber&&(this._dataPage=l.dataPages[0],this._indexSelectorLabelPageMap=l.indexSelectorLabelPageMap,this._selectorLabelPages=l.selectorLabelPages);a=this._cleanData(this._dataPage,this._rowLabelPage,this._indexSelectorLabelPageMap,
this._selectorLabelPages);this.emit("update",a)},_cleanData:function(a,d,l,h){if(!a||!d||!l||!h)console.warn("anaplan.settings.Time _update one or more missing parameters "+[null===a,null===d,null===l,null===h].join());else{l={};var f={},c={},g={},m=a.cellText,k=a.cellValues,s=a.formats;a=a.isEditable;for(var n=d.entityLongIds[0],p=n.length,B={},y=0;y<p;y++)switch(n[y]){case b.SYSTEM_PROPERTY_TIME_CALENDAR_TYPE:f.timeCalendarType=m[y];B.timeCalendarType=parseInt(k[y],10);l.timeCalendarType=s[y];c.timeCalendarType=
a[y];break;case b.SYSTEM_PROPERTY_TIME_FISCAL_YEAR_START_MONTH:f.fiscalYearStartMonth=parseInt(k[y],10);c.fiscalYearStartMonth=a[y];break;case b.SYSTEM_PROPERTY_TIME_CURRENT_PERIOD:f.currentFiscalYear=k[y];c.currentFiscalYear=a[y];break;case b.SYSTEM_PROPERTY_TIME_PAST_PERIOD_COUNT:f.numberOfPastYears=parseInt(k[y],10);c.numberOfPastYears=a[y];break;case b.SYSTEM_PROPERTY_TIME_FUTURE_PERIOD_COUNT:f.numberOfFutureYears=parseInt(k[y],10);c.numberOfFutureYears=a[y];break;case b.SYSTEM_PROPERTY_TIME_QUARTERLY_WEEK_GROUPING:f.quarterlyWeekGrouping=
m[y];g.quarterlyWeekGrouping=null===f.quarterlyWeekGrouping;B.quarterlyWeekGrouping=parseInt(k[y],10);c.quarterlyWeekGrouping=a[y];l.quarterlyWeekGrouping=s[y];break;case b.SYSTEM_PROPERTY_TIME_WEEK_FORMAT:var v=parseInt(k[y],10);g.weekFormat=-1===v;f.weekFormat=m[y];B.weekFormat=v;c.weekFormat=a[y];l.weekFormat=s[y];break;case b.SYSTEM_PROPERTY_TIME_FISCAL_YEAR_EXTRA_WEEK_MONTH:v=parseInt(k[y],10);g.fiscalYearExtraWeekMonth=0===v;f.fiscalYearExtraWeekMonth=v;c.fiscalYearExtraWeekMonth=a[y];break;
case b.SYSTEM_PROPERTY_TIME_FISCAL_YEAR_EXTRA_MONTH_QUARTER:f.fiscalYearExtraMonthQuarter=parseInt(k[y],10);c.fiscalYearExtraMonthQuarter=a[y];break;case b.SYSTEM_PROPERTY_TIME_FISCAL_YEAR_END_TYPE:f.fiscalYearEndType=m[y];g.fiscalYearEndType=null===f.fiscalYearEndType;B.fiscalYearEndType=parseInt(k[y],10);c.fiscalYearEndType=a[y];l.fiscalYearEndType=s[y];break;case b.SYSTEM_PROPERTY_TIME_FISCAL_YEAR_END_MONTH:f.fiscalYearEndMonth=parseInt(k[y],10);g.fiscalYearEndMonth=0===f.fiscalYearEndMonth;c.fiscalYearEndMonth=
a[y];break;case b.SYSTEM_PROPERTY_TIME_FISCAL_YEAR_END_DAY_IN_WEEK:f.fiscalYearEndDayInWeek=parseInt(k[y],10);g.fiscalYearEndDayInWeek=0===f.fiscalYearEndDayInWeek;c.fiscalYearEndDayInWeek=a[y];break;case b.SYSTEM_PROPERTY_TIME_START_DATE:f.startDate=k[y]?r.parseDate(k[y]):k[y];f.startDate||(g.startDate=!0);c.startDate=a[y];break;case b.SYSTEM_PROPERTY_TIME_WEEK_COUNT:f.weekCount=parseInt(k[y],10);c.weekCount=a[y];break;case b.SYSTEM_PROPERTY_TIME_CURRENT_DETAIL_PERIOD:f.currentPeriod=k[y];c.currentPeriod=
a[y];break;case b.SYSTEM_PROPERTY_TIME_QUARTER_TOTALS_INCLUDED:f.quarterTotalsIncluded="true"===k[y].toString();c.quarterTotalsIncluded=a[y];break;case b.SYSTEM_PROPERTY_TIME_HALF_YEAR_TOTALS_INCLUDED:f.halfYearTotalsIncluded="true"===k[y].toString();c.halfYearTotalsIncluded=a[y];break;case b.SYSTEM_PROPERTY_TIME_YEAR_TO_DATE_INCLUDED:f.yearToDateIncluded="true"===k[y].toString();c.yearToDateIncluded=a[y];break;case b.SYSTEM_PROPERTY_TIME_YEAR_TO_GO_INCLUDED:f.yearToGoIncluded="true"===k[y].toString();
c.yearToGoIncluded=a[y];break;case b.SYSTEM_PROPERTY_TIME_TOTAL_OF_ALL_PERIODS_INCLUDED:f.totalOfAllPeriodsIncluded="true"===k[y].toString();c.totalOfAllPeriodsIncluded=a[y];break;case b.SYSTEM_PROPERTY_TAKE_FISCAL_YEAR_FROM_START:f.takeFiscalYearNameFromPeriodStart="true"===k[y].toString();c.takeFiscalYearNameFromPeriodStart=a[y];break;default:console.warn("Unknown time system property: "+n[y])}this._originalValue=f;return{noCurrentValue:g,rowLabelPagesCount:d.count,value:f,isEditable:c,items:{timeCalendarType:this._getValuesFromLabelPage(l,
h,B,"timeCalendarType"),quarterlyWeekGrouping:this._getValuesFromLabelPage(l,h,B,"quarterlyWeekGrouping"),weekFormat:this._getValuesFromLabelPage(l,h,B,"weekFormat"),fiscalYearEndType:this._getValuesFromLabelPage(l,h,B,"fiscalYearEndType")}}}},_getValuesFromLabelPage:function(a,b,f,h){a=this._getSelectorLabelPage(a[h],b);return this._getItems(a,f[h])},_getItems:function(a,b){for(var f={items:{},selected:null},h=0;h<a.count;h++){var l=a.entityLongIds[0][h],c=a.labels[0][h];f.items[l]=c;if(b===l||b===
c)f.selected=l}n.isNull(f.selected)&&(f.selected=a.entityLongIds[0][0]);return f},_getSelectorLabelPage:function(a,b){if(!a)return console.warn(this.declaredClass+"_getSelectorLabelPage expected to receive format and did not"),null;if(!a.hierarchyEntityLongId)return console.warn(this.declaredClass+"_getSelectorLabelPage expected to receive format with hierarchyEntityLongId and did not"),null;if(!this._indexSelectorLabelPageMap)return console.warn(this.declaredClass+"_getSelectorLabelPage expected to find selectorLabelPageMap and did not"),
null;var f=this._indexSelectorLabelPageMap[a.hierarchyEntityLongId];return void 0===f?(console.warn(this.declaredClass+"_getSelectorLabelPage expected to find selectorLabelPageIndex and did not"),null):!b?(console.warn(this.declaredClass+"_getSelectorLabelPage expected to find selectorLabelPages and did not"),null):b[f]},error:function(){return!1}})})},"anaplan/utils/FiscalYearForWeeksHelper":function(){define("dojo/_base/lang dojo/_base/array dojo/data/ObjectStore dojo/i18n!dojo/cldr/nls/gregorian dojo/store/Memory anaplan/utils/JsHelper dojo/string".split(" "),
function(g,b,k,p,r,n,f){return{_DAYS_OFFSET:{2:6,3:5,4:4,5:3,6:2,7:1,1:0},getData:function(g,l,a,e,d,q,h,k){"undefined"===typeof d&&(d=!1);g=this._getItems(g,l,a,e,q,h,k);var c="${fy}: ${sdate} ${smonth} ${syear} - ${edate} ${emonth} ${eyear}";d&&(c="${fy}: ${sdate} ${smonth} ${syear}");var t=[];b.forEach(g,function(a){t.push({value:a.fy,id:a.fy,label:f.substitute(c,a),period:f.substitute("${sdate} ${smonth} ${syear} - ${edate} ${emonth} ${eyear}",a),fourDigitYear:a.syear})});return t},_getLastDayInEnd:function(b,
f){var a=this._DAYS_OFFSET[b];return f.getDate()-(f.getDay()+a)%7},_getLastDayInStart:function(b,f,a){f=this._DAYS_OFFSET[f];a=a.getDate()-(a.getDay()+f)%7;"Last in Month"===b&&(a+=1);return a},_getEndDate:function(b,f,a){a=new Date(a);var e=this._DAYS_OFFSET[f];f=this._getLastDayInEnd(f,a);"Last in Month"===b?a.setDate(f):(b=this._firstDayInMonth(e,a.getMonth()+1,a.getFullYear()),b.getDate()<a.getDate()-f?a=b:a.setDate(f));return a},_getStartDate:function(b,f,a){a=new Date(a);var e=this._DAYS_OFFSET[f];
f=this._getLastDayInStart(b,f,a);"Last in Month"===b?a.setDate(f):(b=this._firstDayInMonth(e,a.getMonth()+1,a.getFullYear()),b.getDate()<a.getDate()-f?a=b:a.setDate(f),a.setDate(a.getDate()+1));return a},_getItems:function(b,f,a,e,d,g,h){"undefined"===typeof d&&(d=5);"undefined"===typeof g&&(g=10);var k=[];d=(n.isNullOrUndefined(h)?(new Date).getFullYear():h)-1-d;for(g=d+g;d<=g;d++){h=new Date(d,a,0,0,0,0,0);var c=new Date(d+1,a,0,0,0,0,0),t=new Date(c);h=this._getStartDate(f,e,h);c=this._getEndDate(f,
e,c);if(b)t=new Date(h),t.setDate((new Date(h)).getDate()+7);else{var m=this._getLastDayInEnd(e,t);t.setDate(m)}t="FY"+String(t.getFullYear()).substring(2);h={fy:t,start:h,end:c,sdate:h.getDate(),smonth:p["months-format-abbr"][h.getMonth()],syear:h.getFullYear(),edate:c.getDate(),emonth:p["months-format-abbr"][c.getMonth()],eyear:c.getFullYear()};k.push(h)}return k},_firstDayInMonth:function(b,f,a){return new Date(a,f,1+(0-(b-7)-(new Date(a,f,1)).getDay()+7)%7)}}})},"anaplan/settings/Time2/Forms/Widgets/CurrentFiscalYearSelect":function(){define("dojo/_base/array dijit/form/Select dojo/_base/declare dojo/data/ObjectStore dojo/i18n!dojo/cldr/nls/gregorian dojo/store/Memory dojo/string anaplan/utils/FiscalYearHelper".split(" "),
function(g,b,k,p,r,n,f,s){return k(b,{sortByLabel:!1,labelType:"text",required:!0,startup:function(){this.refreshValues(1,!1);this.inherited(arguments)},refreshValues:function(b,a){var e=this._getSelectedItem(),d=this.value;this.set("store",this._getData(b,a));e?(d=this._getItem("period",e.period))?this.set("value",d.id):this.set("value",e.id):d&&this.set("value",d)},_getSelectedItem:function(){var b=this.getValue();return this._getItem("id",b)},_getItem:function(b,a){var e={};e[b]=a;return this.store&&
(e=this.store.query(e),1===e.results[0].length)?e.results[0][0]:null},_getData:function(b,a){var e=s.getData(b,a),e=new n({data:e});return new p({objectStore:e})}})})},"anaplan/view/ModelManagement/CopyModelView":function(){define("anaplan/utils/UIHelper anaplan/utils/FormatHelper anaplan/Exceptions anaplan/view/ModelManagement/ModelView dojo/_base/declare dojo/_base/event dojo/dom-attr dojo/i18n!anaplan/nls/modelManagement dojo/i18n!dijit/nls/common dojo/keys dojo/string dojo/text!anaplan/templates/ModelManagement/CopyModelView.html anaplan/widgets/Button dijit/form/ValidationTextBox".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d){return r([p],{templateString:d,cancelButton:null,copyModelButton:null,onCopyModel:function(){},onValidStateChange:function(a){this.copyModelButton.set("disabled",!a)},postCreate:function(){try{this.inherited(arguments);g.setText(this.modelNameLabel,s.labelModelName);this.copyModelButton.set("label",l.buttonSave);this.cancelButton.set("label",l.buttonCancel);f.set(this.modelNameLabel,"for",this.modelNameTextBox.id);var a=this;this.modelNameTextBox.validator=function(b){b=
a._checkModelName(b);return null!=b&&0<b.length?(this.invalidMessage=b,!1):!0}}catch(b){throw new k.ClientException("CopyModelView#postCreate",b);}},setModel:function(a,b){this._modelId=a;this._modelName=b},_onCopyModel:function(){try{if(this.isValid()){var a=this.modelNameTextBox.get("value");this.onCopyModel(this._modelId,e.trim(a))}}catch(b){throw new k.ClientException("CopyModelView#_onCopyModel",b);}},_onCopyModelButtonClick:function(){this._onCopyModel()},_onKeyDown:function(b){var d=b.keyCode;
d===a.ESCAPE?(this._onCancel(),n.stop(b)):d===a.ENTER&&(this._onCopyModel(),n.stop(b))},_onShow:function(){try{var a=b.escapeHTML(this._modelName);this.onTitleChange(s.titleCopyModel.replace(/\$\{modelName\}/,a));this.onHelpChange(null);this.modelNameTextBox.focus()}catch(d){throw new k.ClientException("CopyModelView#_onShow",d);}}})})},"anaplan/settings/HierarchyTreeView/Tree":function(){define("anaplan/utils/UIHelper dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_Contained anaplan/widgets/Tree dijit/tree/TreeStoreModel anaplan/settings/HierarchyTreeView/Tree/DndSource dijit/focus dojo/keys dojo/on dojo/_base/array dojo/_base/lang dojo/_base/event dojo/i18n!dijit/nls/loading dojo/text!anaplan/templates/HierarchyTreeView/Tree.html".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c){return b([k,p,r],{templateString:c,baseClass:"hierarchyTreeViewTree",constructor:function(a){this._connections=[];this._currentSelection=[];this._staticContextIdentifiers=a.staticContextIdentifiers;this._updateSelectionInterval=null},focus:function(){this._tree&&l.focus(this._tree.domNode)},getSelectedNodes:function(){var a=[];this._tree&&(a=this._tree.dndController.selection);return a},reset:function(){try{this._updateSelectionInterval&&(clearInterval(this._updateSelectionInterval),
this._updateSelectionInterval=null),d.forEach(this._connections,function(a){a.remove()}),this._connections=[],this._currentSelection=[],this._tree&&(d.forEach(this._treeSubscriptions,function(a){a.remove()}),this._treeSubscriptions=[],this._tree.destroyRecursive(!1),this._tree=null),this.loading&&(this.loading.style.display="")}catch(a){g.throwClientException(this,a)}},setCurrentSelection:function(a){try{if(a){var c=a.currentCell.getRowEntityLongIds({values:{startRow:this._labelPage.start,rows:{count:this._labelPage.count,
entityLongIds:this._labelPage.entityLongIds}}}),b=this._getPathByEntityLongId(this._items[0],c[0]);if(b){this._tree.set("path",b);this._updateSelectionInterval&&clearInterval(this._updateSelectionInterval);var d=this;this._updateSelectionInterval=setInterval(function(){d._tree||(clearInterval(d._updateSelectionInterval),d._updateSelectionInterval=null);var a=d._tree.get("path");a&&a.length&&d._store.getIdentity(a[a.length-1])==b[b.length-1]&&(clearInterval(d._updateSelectionInterval),d._updateSelectionInterval=
null,d._updateCurrentSelection(),setTimeout(function(){dojo.window.scrollIntoView(d._tree.getSelectedTreeNode().rowNode)},500))},100)}}else this._tree.set("path",null)}catch(e){g.throwClientException(this,e)}},startup:function(){this._started&&console.warn("startup "+this.id);this.inherited(arguments);g.setText(this.loadingLabel,u.loadingState)},uninitialize:function(){this.reset();this.inherited(arguments)},updateTreeWithItemFileWriteStore:function(a,c,b,d,h){try{this.reset();this._store=a;this._labelPage=
b;this._items=d;var l=new f({store:a,query:{name:"*"},mayHaveChildren:function(a){return 0<a.children.length}});this._tree=new n({id:"hierarchyEditorTree"+h,model:l,showRoot:!1,dndController:s,betweenThreshold:5,pageInfo:c,persist:!0,getIconClass:function(){return"hierarchyTreeViewTreeNodeIcon"}});var k=e(this._tree.dndController,"HierarchyNodeDrop",q.hitch(this,"_onHierarchyNodeDrop")),r=e(this._tree.dndController,"MouseUp",q.hitch(this,"_onMouseUp")),p=e(this._tree,"KeyDown",q.hitch(this,"_onKeyDown")),
u=e(this._tree,"KeyPress",q.hitch(this,"_onKeyPress")),C=e(this._tree,"DblClick",q.hitch(this,"_onDblClick"));this._connections.push(k);this._connections.push(r);this._connections.push(p);this._connections.push(u);this._connections.push(C);this.own(k,r,p,u,C);this.domNode?(this.domNode.appendChild(this._tree.domNode),this._tree.startup(),this.loading.style.display="none"):this._tree.destroy()}catch(G){g.throwClientException(this,G)}},_getPathByEntityLongId:function(a,c,b){if(a&&a.entityLongId){b=
b?b.slice(0):[];b.push(String(a.entityLongId[0]));if(a.entityLongId&&a.entityLongId[0]==c)return b;a=a.children||[];for(var d=a.length,e;d--;)if(e=this._getPathByEntityLongId(a[d],c,b))return e}return null},_onHierarchyNodeDrop:function(a,b,c){try{var e=[];d.forEach(a,function(a){var b=dijit.getEnclosingWidget(a).item;e.push({name:b.name[0],entityId:b.entityId[0],parentName:a.parentName,parentEntityId:a.parentEntityId,entityLongId:b.entityLongId[0],parentEntityLongId:b.parentEntityLongId[0]})});var h=
b.item,f=b.getParent().item;this.onItemsMoved(e,{name:h.name[0],entityId:h.entityId[0],entityLongId:h.entityLongId[0],parentEntityId:"root"!==f.entityLongId[0]?f.entityId[0]:"",parentName:"root"!==f.entityLongId[0]?f.name[0]:""},c)}catch(l){g.throwClientException(this,l)}},_onKeyDown:function(b){if(this._currentSelection){var c=this._currentSelection;switch(b.keyCode){case a.F2:1===c.length&&(h.stop(b),this.onRename(c[0].item,c[0].treeNode))}}},_onKeyPress:function(){this._updateCurrentSelection()},
_onMouseUp:function(){this._updateCurrentSelection()},_onDblClick:function(a,b){this.onRename(a,b)},_updateCurrentSelection:function(){try{var a=this._currentSelection,b=[];if(this._tree){var c=this._tree.dndController.selection,d;for(d in c)if(c.hasOwnProperty(d)){var e=c[d],h=e.item;b.push({item:h,treeNode:e,name:h.name[0],entityLongId:h.entityLongId[0],parentEntityLongId:h.parentEntityLongId[0],dataRow:h.dataRowIndex[0],hasParent:"root"!==e.getParent().item.entityLongId[0]})}}this._currentSelection=
b;if(b.length!==a.length)this.onSelectionChange(b);else for(c=0;c<b.length;c++)if(b[c].entityLongId!=a[c].entityLongId){this.onSelectionChange(b);break}}catch(f){g.throwClientException(this,f)}},onItemsMoved:function(){},onRename:function(){},onSelectionChange:function(){}})})},"anaplan/settings/HierarchyTreeView/Form":function(){define("anaplan/utils/FormatHelper dojo/_base/declare dijit/layout/BorderContainer dijit/layout/ContentPane anaplan/settings/HierarchyTreeView/Form/Header anaplan/utils/LinkFormatter anaplan/constants anaplan/data/ModelContentCache dojo/i18n!anaplan/nls/hierarchyEditor anaplan/data/DataPageCache/_DataPage anaplan/utils/UIHelper".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e){return b([k],{design:"headline",gutters:!1,liveSplitters:!1,constructor:function(){this._currentSelection=[]},error:function(a){console.error(a);return!1},postCreate:function(){this.inherited(arguments);this.set("class","hierarchyTreeViewForm")},reset:function(){this._currentSelection=[];this._columnCount=this._fixedRowCount=-1;this._columnLabelPage=this._rowLabelPage=this._dataPage=null;this._clearForm();this._clearHeader()},startup:function(){this._started&&console.warn("startup "+
this.id);this.inherited(arguments);this._header=new r({region:"top"});this.addChild(this._header);this._content=new p({region:"center"});this.addChild(this._content)},uninitialize:function(){this.inherited(arguments)},updateFormWithSelection:function(a,b,h,f,c,l,m){try{this.reset(),this._currentSelection=a,this._dataPage=b,this._rowLabelPage=h,this._columnLabelPage=f,this._fixedRowCount=c,this._columnCount=l,this._isUniformType=m,this._updateHeader(),this._updateForm()}catch(g){e.throwClientException(this,
g)}},_clearForm:function(){this._content&&this._content.set("content","")},_clearHeader:function(){this._header&&this._header.setText("")},_updateForm:function(){try{var b=[],k=this._currentSelection,h=k.length,r=new n,c=f.textFormatType;if(1==h){var t=k[0].dataRow,m=this._columnCount,w=this._dataPage,p=w.columnCount,x=this._columnLabelPage.labels[0],A=new a({allCurrenciesLabelPage:s.getAllCurrenciesLabelPage(),page:w});b.push("\x3ctable\x3e\x3ctbody\x3e");for(k=0;k<m;k++){b.push("\x3ctr\x3e\x3ctd\x3e");
b.push(g.escapeHTML(x[k]));b.push(":\x3c/td\x3e\x3ctd\x3e");var h=t*p+k,B=A.getFormat(h);B&&B.textType===c.DRILLTHRU_URI?b.push(r.createLinkHtml(A.getCellValue(h))):B&&B.textType===c.EMAIL_ADDRESS?b.push(r.createMailToHtml(A.getCellValue(h))):b.push(A.getCellText(h));b.push("\x3c/td\x3e");b.push("\x3c/tr\x3e")}b.push("\x3c/tbody\x3e\x3c/table\x3e")}else if(1<h){b.push('\x3cdiv class\x3d"hierarchyField"\x3e');b.push('\x3clabel class\x3d"hierarchyFieldLabel"\x3e');b.push(l.selectedItems);b.push(":\x3c/label\x3e");
b.push('\x3cdiv class\x3d"hierarchyFieldControl"\x3e');r=[];for(c=0;c<h;c++)r.push(g.escapeHTML(k[c].name));b.push(r.join(", "));b.push("\x3c/div\x3e");b.push("\x3c/div\x3e")}this._isUniformType||(b.push('\x3cdiv class\x3d"warning"\x3e'),b.push(l.labelNonUniformSelectionWarning),b.push("\x3c/div\x3e"));this._content.domNode&&this._content.set("content",b.join(""))}catch(y){e.throwClientException(this,y)}},_updateHeader:function(){var a=this._currentSelection.length;0===a?this._header.setText(""):
1<a?this._header.setText(l.multipleSelection):(a=this._currentSelection[0],a=a.treeNode.tree.model.getLabel(a.item),this._header.setText(a))}})})},"anaplan/settings/Contents":function(){define("anaplan/api/service anaplan/constants anaplan/common/SelectiveAccess anaplan/data/Aggregator anaplan/data/RequestFactory anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/Exceptions anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/GridletFactory anaplan/gridlet/ViewRequestGridModel anaplan/layout/_ManagedMixin anaplan/toolbar/_ButtonsMixin anaplan/utils/EntityLongIdHelper anaplan/utils/SelectionHelper anaplan/utils/UIHelper anaplan/utils/FormatHelper anaplan/view/Export anaplan/widgets/Button anaplan/widgets/SearchToolbarButton anaplan/widgets/DropDownButton anaplan/widgets/Menu anaplan/widgets/MenuItem anaplan/widgets/Tooltip dijit/layout/BorderContainer anaplan/widgets/Toolbar dijit/ToolbarSeparator dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/contents dojo/i18n!anaplan/nls/exportLabels dojo/i18n!anaplan/nls/modelContents dojo/i18n!anaplan/nls/toolbar dojo/topic dojo/on dojo/aspect".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I,P,J){return L([v,q,d],{gutters:!1,liveSplitters:!1,constructor:function(a){var c=h.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_MODEL_ROLE_SHOW_CONTENT);this._viewDefinition={name:F.contents,type:"MODEL_DEFINITION",staticContextIdentifiers:[c],rows:b.SYSTEM_AXIS_IDENTIFIER_CONTENT_ALL_IDENTIFIER,columns:b.SYSTEM_AXIS_IDENTIFIER_FULL_ACCESS_WITH_CUSTOM_MODEL_ROLE_IDENTIFIER,pages:[],columnSizes:{defaultColumnWidth:150,
rowLabelWidth:0,customWidthsByStyle:[],customWidthsByLineItem:[],customRowLabelWidthsByDimension:[]}};this._tooltips=[];this._showTipsOnStartup=a.showTipsOnStartup;this.own(I.subscribe("anaplan/uierror",this.error.bind(this)))},show:function(a){a===b.TIPS&&this._createTooltips();this.inherited(arguments)},hide:function(a){a===b.TIPS&&this._destroyTooltips();this.inherited(arguments)},error:function(){this._updateToolbar()},update:function(){this._updateToolbar()},startup:function(b){this._started&&
console.warn("startup "+this.id);try{this.inherited(arguments);n.isObserver(this)||n.addObserver(this);this._toolbar=this._createToolbar();this.addChild(this._toolbar);var c=new a({editorFactory:new l}),d=new e({workspaceId:this._workspaceId,modelId:this._modelId,viewDefinition:this._viewDefinition}),h=c.createGridlet({region:"center",model:d});this.addChild(h);this._gridlet=h;this._model=d;p.gather();this._searchButton&&(this._searchButton.set("model",this._model),this._searchButton.set("widget",
this._gridlet));this._gridlet.focus();this._showTipsOnStartup&&this._createTooltips()}catch(f){console.error(f)}},uninitialize:function(){n.isObserver(this)&&n.deleteObserver(this);this._destroyTooltips();G.forEach(this._connections,dojo.disconnect);G.forEach(this.__subscriptions,dojo.unsubscribe);this.inherited(arguments)},_createOpenButton:function(){var a=new w({label:H.labelOpen,iconClass:"anaplanEditorIcon anaplanEditorIconOpen","data-anaplan-element-name":"toolbar-button-open"}),b=a.on("click",
K.hitch(this,"_doOpen"));this.own(b);return a},_createSearchButton:function(){return new z({iconClass:"anaplanEditorIcon anaplanEditorIconSearch",label:H.labelSearch,showLabel:!1,"data-anaplan-element-name":"toolbar-button-search"})},_createToolbar:function(){var a=new E({region:"top"});this._viewButton=this._createViewButton();a.addChild(this._viewButton);this._openButton=this._createOpenButton();a.addChild(this._openButton);a.addChild(new C);this._exportButton=this._createExportButton();a.addChild(this._exportButton);
a.addChild(new C);this._refreshButton=this._createRefreshButton();a.addChild(this._refreshButton);a.addChild(new C);this._searchButton=this._createSearchButton();a.addChild(this._searchButton);return a},_createViewButton:function(){this._viewMenu=new A;var a=new x({label:H.menuView,dropDown:this._viewMenu,"data-anaplan-element-name":"toolbar-button-view"});this._menuItemEnableAccessToHiddenContent=this._createEnableAccessToHiddenContentButton();this._viewMenu.addChild(this._menuItemEnableAccessToHiddenContent);
this._menuItemEnableAccessToHiddenContent.startup();this._viewMenu.startup();return a},_createEnableAccessToHiddenContentButton:function(){var a=new B({label:H.labelEnableAccessToHiddenContent,"data-anaplan-element-name":"toolbar-button-enableAccessToHiddenContent"}),b=a.on("click",K.hitch(this,"_toggleEnableAccessToHiddenContent"));this.own(b);return a},_displayExportDialog:function(){try{var a=c.getSharedDialog(),b=new m({modelId:window.modelId,viewDefinition:this._viewDefinition,pageInfo:this._model.getPageInfo(),
hierarchyId:F.contents});a.set("title",N.titleExport);a.set("refocus",!1);a.set("content",b.domNode);this.own(P(b,"AfterExport",function(){a.hide()}),P(b,"Cancel",function(){a.onCancel()}));a.show()}catch(d){c.showErrorReporter(new s.ClientException(null,d,{widgetId:this.id}))}},_updateToolbar:function(){this._updateEnableAccessToHiddenContentButton();var a=this._viewMenu.getChildren().reduce(function(a,b){return b.get("disabled")&&b.isFocusable()?a:!1},!0);this._viewButton.set("disabled",a)},_updateEnableAccessToHiddenContentButton:function(){var a=
g.model.getModelProperty(b.MODEL_PROPERTY_NAMES.ENABLE_ACCESS_TO_HIDDEN_CONTENT);this._menuItemEnableAccessToHiddenContent.set("iconClass","anaplan-checked-menu-item checked-"+(a?"yes":"no"));a=k.isModelPropertyReadOnlyForCurrentUser(b.ENABLE_ACCESS_TO_HIDDEN_CONTENT);this._menuItemEnableAccessToHiddenContent.set("disabled",a)},_toggleEnableAccessToHiddenContent:function(){var a=!g.model.getModelProperty(b.MODEL_PROPERTY_NAMES.ENABLE_ACCESS_TO_HIDDEN_CONTENT);this._menuItemEnableAccessToHiddenContent.set("iconClass",
"anaplan-checked-menu-item checked-"+(a?"yes":"no"));g.model.setModelProperty(b.MODEL_PROPERTY_NAMES.ENABLE_ACCESS_TO_HIDDEN_CONTENT,a);this._menuItemEnableAccessToHiddenContent.set("disabled",!0)},_destroyTooltips:function(){this._tooltips&&0<this._tooltips.length&&G.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=[]},_createTooltips:function(){this._destroyTooltips();this._tooltips.push(this._createTooltip(this._menuItemEnableAccessToHiddenContent,H.helpEnableAccessToHiddenContent,
!0))},_createTooltip:function(a,b,c){c=c?["after","before"]:["below","above"];var d=a.get("label");b=t.searchAndReplacePlaceholders(b);return new y({label:b,connectId:[a.domNode],position:c,title:d})},_disableButtons:function(){this._setDisabled(!0)},_doOpen:function(){try{var a=this._gridlet,d=u.getSelection(a._selection,a._gridController.getContext());if(d&&d.count){var e=G.filter(d.entityLongIds[0],function(a){a=h.getEntityTypeIndex(a);return-1<G.indexOf([b.DASHBOARD_ENTITY_TYPE_INDEX,b.MODULE_ENTITY_TYPE_INDEX],
a)});1!==e.length?c.showInfoDialog(D.messageInvalidSelection,{title:D.titleInvalidSelection}):I.publish("anaplan/views",e)}}catch(f){c.showErrorReporter(new s.ClientException("anaplan.settings.Contents: _doOpen",f,{widgetId:this.id}))}},_enableButtons:function(){this._setDisabled(!1)},_getGridController:function(){return!this._gridlet?null:this._gridlet.getGridController()},_onSelectionChange:function(a){this._enableButtons(a)},_reset:function(){this._toolbar&&this._disableButtons(this._toolbar)},
_setDisabled:function(a){this._toolbar&&G.forEach([this._viewButton,this._searchButton,this._refreshButton,this._openButton],function(b){b&&b.set("disabled",a)})}})})},"anaplan/settings/ImportDataSourcesView":function(){define("anaplan/anapediaKeys anaplan/utils/FormatHelper anaplan/utils/RedirectHelper anaplan/utils/UIHelper anaplan/data/Aggregator anaplan/data/Aggregator/TxidProvider anaplan/data/Aggregator/RequestSerialProvider dojo/_base/declare dojo/aspect dojo/query dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style anaplan/layout/ManagedContainer anaplan/layout/StackContainer anaplan/toolbar/_ButtonsMixin anaplan/widgets/Button dijit/Menu anaplan/widgets/Toolbar dijit/ToolbarSeparator anaplan/data/ModelContentHelper anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/GridletFactory anaplan/gridlet/Selection anaplan/gridlet/ViewRequestGridModel anaplan/settings/Actions/_ImportDefinitions anaplan/settings/Actions/_DataSources anaplan/utils/SelectionHelper anaplan/utils/UIHelper anaplan/view/ManageImportSources anaplan/widgets/MenuItem anaplan/widgets/DropDownButton anaplan/widgets/SearchToolbarButton anaplan/widgets/Tooltip anaplan/constants anaplan/Exceptions dojo/_base/array dojo/_base/lang dojo/io-query dojo/json dojo/on dojo/has dojo/topic dojo/io/iframe dojo/i18n!anaplan/nls/importDataSources dojo/i18n!anaplan/nls/manageImportSources dojo/i18n!anaplan/nls/toolbar dojo/i18n!anaplan/nls/view".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I,P,J,O,T,Q,ca,Z,X,V,da,S,$,M,aa,W){return s([c,m],{gutters:!1,_numDataRows:0,constructor:function(a){var b=a.content[0];this._workspaceId=b.workspaceId;this._modelId=b.modelId;this._viewDefinition=a.viewDefinition||this._getViewDefinition();this._showTipsOnStartup=a.showTipsOnStartup;this._isShowing=!1;this._tooltips=[];this._gridlet=null;this._dataSources=new L;this._dataSources.initialize();this._createNewSourceButton=
this._createNewSourceButtonForOthers;if(V("ie")||V("trident"))this._createNewSourceButton=this._createNewSourceButtonForIE},hide:function(a){a===J.TIPS&&(T.forEach(this._tooltips,function(a){a.destroy()}),this._tooltips=[]);this.inherited(arguments)},onHide:function(){this._isShowing=!1;this._handleSuspend()},onShow:function(){this._isShowing=!0;this._handleResume();this.getParent().getParent()&&!this._gridlet&&(this._createGridlet(),this._enableButtons(this._gridlet.selection))},postCreate:function(){this.inherited(arguments);
this._createToolbar()},resume:function(){this.inherited(arguments);this._handleResume()},show:function(a){a===J.TIPS&&this._createTooltips();this.inherited(arguments)},startup:function(){this.inherited(arguments);this._showTipsOnStartup&&this.show(J.TIPS)},suspend:function(){this.inherited(arguments);this._handleSuspend()},uninitialize:function(){T.forEach(this._tooltips,function(a){a.destroy()});this.inherited(arguments)},_createGridlet:function(){try{this._model=new C({viewDefinition:this._viewDefinition});
this._gridlet=(new v({editorFactory:new y})).createGridlet({region:"center",model:this._model,defaultColumnWidth:150,selection:(new E).initializeToDefaults()});this.addChild(this._gridlet);var a=X(this._gridlet,"SelectionChange",Q.hitch(this,"_onSelectionChange")),b=X(this._gridlet,"Update",Q.hitch(this,"_onUpdate")),c=X(this._gridlet,"reset",Q.hitch(this,"_reset"));this.own(a,b,c);r.gather();this._searchButton.set("model",this._model);this._searchButton.set("widget",this._gridlet);this._gridlet.focus()}catch(d){D.throwClientException(this,
d)}},_createSearchButton:function(){return new I({iconClass:"anaplanEditorIcon anaplanEditorIconSearch",label:$.tooltipSearch,showLabel:!1,"data-anaplan-element-name":"toolbar-button-search"})},_createNewSourceButtonForOthers:function(){return this._createNewSourceButtonInternal(function(b){b=a("td",b.domNode)[3];this._createFileUploadWidget(b)}.bind(this))},_createNewSourceButtonForIE:function(){return this._createNewSourceButtonInternal(function(a,b,c){b=l.before(b,"toggleDropDown",Q.hitch(this,
function(){this._createFileUploadWidget(c.domNode.parentElement,function(){this._additionalEventHandlersForIE(a,c)}.bind(this))}));this.own(b)}.bind(this))},_createNewSourceButtonInternal:function(a){var b=new z,c=new F({label:M.buttonUpload}),d=new F({label:M.buttonModel}),e=X(d,"click",Q.hitch(this,function(){this._displayNewModelSourceDialog()})),h=X(b,"open",Q.hitch(this,function(){this._resizeFileUploadWidget(c)})),f=new H({label:$.buttonNewSource,dropDown:b});a(c,f,b);this.own(e,h);b.addChild(c);
b.addChild(d);b.startup();return f},_createFileUploadWidget:function(a,b){if(!this._fileInput){this._fileUploadForm=q.create("form",{id:"formUpload",action:"servlet",method:"post",enctype:"multipart/form-data"},a);this._fileInput=q.create("input",{type:"file",name:"uploadedfile",className:"fileInput"},this._fileUploadForm);u.set(this._fileInput,{display:"none"});var c=X(this._fileInput,"change",Q.hitch(this,"_onFileChange"));this.own(c);b&&b()}},_additionalEventHandlersForIE:function(a,b){var c=X(this._fileInput,
"mouseenter",Q.hitch(this,function(){b.set("selected",a)})),d=X(this._fileInput,"mouseleave",Q.hitch(this,function(){b.set("selected",void 0)})),e=X(this._fileInput,"focus",Q.hitch(this,function(){this._fileInput.blur()}));this.own(c,d,e)},_resizeFileUploadWidget:function(a){if(!this._fileUploadForm)throw Error("Unable to find file upload dom node. It should have been created when menu is created");u.set(a.domNode,{position:"relative"});a=h.position(a.domNode);u.set(this._fileUploadForm,{position:"absolute",
left:"0px",top:"0px",width:a.w+"px",height:a.h+"px",opacity:0,cursor:"pointer"});u.set(this._fileInput,{width:a.w+"px",height:a.h+"px",display:"block"})},_onFileChange:function(a){try{if(""!==this._fileInput.value){var b={workspaceId:this._workspaceId,modelId:this._modelId,txid:n.getTxid(),sessionId:window.sessionId},c={modelId:this._modelId,workspaceId:this._workspaceId,requestSerialNumber:f.getNextRequestSerialNumber()},d=ca.objectToQuery(c);S.send({url:"upload?"+d,form:this._fileUploadForm,content:b,
handleAs:"json",error:function(b){p.showErrorReporter(new O.ClientException(this.declaredClass+"_onFileChange",b,{widgetId:this.id},a))}.bind(this),load:function(a){this._fileInput.value="";a.redirectUrl?k.handleRedirect(a):this._displayUploadedDialog(a)}.bind(this)})}}catch(e){p.showErrorReporter(new O.ClientException(this.declaredClass+"_onFileChange",e,{widgetId:this.id},a))}},_createEditButton:function(){var a=new w({label:$.buttonEditDataSource,iconClass:"anaplanEditorIcon anaplanEditorIconEdit",
"data-anaplan-element-name":"toolbar-button-edit"}),b=a.on("click",Q.hitch(this,"_doEditAction"));this.own(b);return a},_createToolbar:function(){try{var a=new x({region:"top"});this._toolbar=a;this.addChild(a);this._newSourceButton=this._createNewSourceButton();a.addChild(this._newSourceButton);this._editButton=this._createEditButton();a.addChild(this._editButton);this._myDeleteButton=this._createDeleteButton();a.addChild(this._myDeleteButton);this._reOrderButton=this._createReOrderButton();a.addChild(this._reOrderButton);
T.forEach([this._editButton,this._myDeleteButton,this._reOrderButton],function(a){a&&(a.show(),a.set("disabled",!0),a.set("showLabel",!0),a.set("title",""))});a.addChild(new A);this._refreshButton=this._createRefreshButton();a.addChild(this._refreshButton);a.addChild(new A);this._searchButton=this._createSearchButton();a.addChild(this._searchButton)}catch(b){D.throwClientException(this,b)}},_createTooltip:function(a,c){var d=null;try{var e=a.get("label"),h=$["tooltip"+c.split(" ").join("")];h||(h=
W["tooltip"+c.split(" ").join("")]);if(!h)return null;var f=b.searchAndReplacePlaceholders(h),d=new P({label:f,connectId:[a.domNode],position:["below","above"],title:e})}catch(m){D.throwClientException(this,m)}return d},_createTooltips:function(){this._tooltips.length?console.warn("anaplan.settings.ImportDataSourcesView expected to find no tooltips, found "+this._tooltips.length):(this._tooltips.push(this._createTooltip(this._editButton,"EditDataSource")),this._tooltips.push(this._createTooltip(this._reOrderButton,
"ReOrder")),this._tooltips.push(this._createTooltip(this._searchButton,"Search")))},_doNewSourceAction:function(){},_doEditAction:function(){try{var a=this._getSelectedActions();if(a.count){var b=a.entityLongIds[0][0],c=a.labels[0][0],d=this._getDataSourceDefinition(b),e={entityLongId:b,label:c,definitionJson:Z.stringify(d)};this._displayEditDialog(e)}}catch(h){p.showErrorReporter(new O.ClientException(null,h,{widgetId:this.id}))}},_getDataSourceDefinition:function(a){var b=this._dataSources.getDataSources(),
c=null;T.forEach(b,function(b){b.entityLongId===a&&(c=b)});return c.dataSourceDefinition},_displayNewModelSourceDialog:function(){this._displayEditDialog(null)},_displayEditDialog:function(a){try{this.inherited(arguments);var b=p.getSharedDialog();b.set("title",$.titleManageImportSources);b.set("refocus",!1);var c=new N({mode:"MANAGE",modelId:this._modelId,workspaceId:this._workspaceId,importDataSource:a,noSourceList:!0});b.set("content",c.domNode);X(c,"Close",function(){b.onCancel()});b.setHelpContent(g.manageImportSources);
b.show()}catch(d){p.throwClientException(this,d)}},_displayUploadedDialog:function(a){try{this.inherited(arguments);var b=p.getSharedDialog();b.set("title",$.titleManageImportSources);b.set("refocus",!1);var c=new N({mode:"MANAGE",modelId:this._modelId,workspaceId:this._workspaceId,noSourceList:!0});c.onUploadFinish(a)||(b.set("content",c.domNode),X(c,"Close",function(){b.onCancel()}),b.setHelpContent(g.manageImportSources),b.show())}catch(d){p.throwClientException(this,d)}},_enableButtons:function(a){this._searchButton.set("disabled",
!1);var b={count:0};a&&(!a.isWholeGridSelected()&&!a.isWholeColumnSelected())&&(b=this._getSelectedActions());var c=0<b.count,b=1===b.count;this._newSourceButton&&this._newSourceButton.set("disabled",!1);this._editButton&&this._editButton.set("disabled",!b);this._myDeleteButton&&this._myDeleteButton.set("disabled",!c);this.inherited(arguments)},_isSalesforceDataSourceDefinition:function(a){return a&&"SALESFORCE_API"===a.dataSourceType?!0:!1},_getSelectedActions:function(){var a=this._gridlet._selection;
if(!a)return[];var b=this._getGridController();return K.getSelection(a,b.getContext())},_getGridController:function(){return!this._gridlet?null:this._gridlet.getGridController()},_getViewDefinition:function(){var a={type:"MODEL_DEFINITION",staticContextIdentifiers:[]},b=B.getAxesForViewDefinition([J.SYSTEM_AXIS_IDENTIFIER_IMPORT_DATA_SOURCE_IDENTIFIER],[J.SYSTEM_AXIS_IDENTIFIER_IMPORT_DATA_SOURCE_DETAILS_PROPERTY_IDENTIFIER]);Q.mixin(a,b);return a},_handleResume:function(){var a=this._getGridController();
a&&a.resume()},_handleSuspend:function(){this.inherited(arguments);this._gridlet&&this._gridlet.getGridController().suspend()},_onSelectionChange:function(a){this._enableButtons(a)},_onUpdate:function(){var a=this._getNumDataRows();(this._gridlet&&!this._gridlet._selection||0===this._numDataRows&&0<a||0<this._numDataRows&&0===a)&&this._gridlet._gridController.setBestSelection();this._numDataRows=a;this._onSelectionChange(this._gridlet._selection)},_reset:function(){this._disableButtons(this._toolbar)},
_getNumDataRows:function(){var a=0;this._gridlet&&(this._gridlet._sizer&&"undefined"!==typeof this._gridlet._sizer._dataRowCount)&&(a=this._gridlet._sizer._dataRowCount);return a}})})},"anaplan/modellingloader":function(){define("anaplan/api/service anaplan/constants anaplan/common/SelectiveAccess anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/data/UserInfo anaplan/home/Slideout anaplan/home/TableOfContents anaplan/layout/Banner anaplan/layout/TabContainer anaplan/loaderutils anaplan/undo/getUndoManagerSingleton anaplan/utils/CookieHelper anaplan/utils/JsHelper anaplan/utils/SubmissionHandler anaplan/utils/topics anaplan/utils/UIHelper anaplan/utils/UrlHelper anaplan/utils/WorkspaceHelper anaplan/utils/SingleIpHelper dijit/layout/BorderContainer dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/i18n!anaplan/nls/tableOfContents dojo/on dojo/topic".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G){return B([],{constructor:function(a){this._takeAction=a.takeAction;this._selectedModelId=a.selectedModelId;d()},load:function(){var a=new v;try{e.loadReduxApp(),"modelManagement"===this._takeAction?this._loadModelManagement():this._loadHub(),e.loadReactUI(),a.resolve()}catch(b){a.reject(b)}return a.promise},_getModelSpecificSlideoutState:function(a){var c=q.loadCookie(b.SLIDEOUT_STATE_COOKIE)||{};return c.hasOwnProperty(a)?c[a]:{}},
_loadHub:function(){var d=new x({id:"border",gutters:!1},"border");d.addChild(new l({id:"banner",region:"top",style:"z-index:auto"},"banner"));var g=r.getLoggedInUserDefaultDashboard(p),q=-1<g&&null!==r.getDashboardLabel(p,g),u=k.isAuthorized(b.userActions.SETTINGS_ENABLED),v=u&&h.supportsSVG(),B=r.isWorkflowEnabled(p),I=y.mixin({showing:!q,showSize:300},this._getModelSpecificSlideoutState(this._selectedModelId)),P=new s,J=new f({id:"slideout",region:"leading",minSize:"200",maxSize:"400",title:E.titleTableOfContents,
splitter:!0,startExpanded:I.showing,style:"width:"+I.showSize+"px",onSlideoutStateChange:function(a){a.showing?(P.resume(),P.scrollToSelected()):P.suspend()}});!I||I.showing?P.update():P.suspend();J.set("content",P.domNode);d.addChild(J);var I={id:"content",region:"center"},O=p.getApplicationProperty("maxNonEmptyClosableDashboardTabs");0<O&&y.mixin(I,{maxNonEmptyClosableDashboardTabs:O});O=p.getApplicationProperty("maxNonEmptyClosableModuleTabs");0<O&&y.mixin(I,{maxNonEmptyClosableModuleTabs:O});
I=new a(I);d.addChild(I);d.startup();d.own(J.on("SlideoutStateChange",y.partial(this._saveModelSpecificSlideoutState,this._selectedModelId)));d.own(G.subscribe(I.id+"-selectChild",function(a){-1===a.contentEntityLongId?P.setSelectedById(null):P.setSelectedById(a.contentEntityLongId)}));d.own(G.subscribe("anaplan/"+I.id+"-nothingSelected",function(){P.setSelectedById(null)}));J=z.hasSingleIpCookie()&&p.getApplicationProperty(b.FEATURE_FLAGS.GLOBAL_NAV);n.update();w.assertWorkspaceSize(p.getWorkspaceInfo(),
J);(J=!e.tooltipsEnabled())?c.hide(b.TIPS):c.show(b.TIPS);e.quickSumEnabled()?c.show(b.QUICK_SUM):c.hide(b.QUICK_SUM);e.breakbackMarkersEnabled(this._selectedModelId)?c.show(b.BREAKBACK_MARKERS):c.hide(b.BREAKBACK_MARKERS);d.own(C(P,"selection",function(a){c.views(a)}));q&&c.views(g);g=null;u&&(g=I.addAsStaticTab(b.SETTINGS_TAB));v&&I.addAsStaticTab(b.MODELMAP_TAB);B&&(g=I.addAsStaticTab(b.WORKFLOW_TAB));q||null!==g&&I.selectChild(g);G.publish(!0===J?"anaplan/hide":"anaplan/show",b.TIPS);d.own(G.subscribe("anaplan/showDirtyTab",
function(a){t.showDirtyTabsMessage(a)}),G.subscribe("anaplan/setAutomaticRefreshInterval",y.hitch(this,"_setAutomaticRefreshInterval")),G.subscribe("anaplan/redirectToTiles",function(){t.redirectToTiles()}),G.subscribe("anaplan/redirect",function(a){t.dirtyFormCheck(function(){t.checkCanCloseDashboards(function(){var b=m.getUrl(a);b&&(window.location=b)},function(a){t.showDirtyTabsMessage(A.map(a,function(a){return a.get("title")}))})})}))},_loadModelManagement:function(){(new a({id:"content"})).startup();
c.show(b.MODEL_MANAGEMENT,!1)},_saveModelSpecificSlideoutState:function(a,c){if(!h.isNullOrUndefined(a)){var d=q.loadCookie(b.SLIDEOUT_STATE_COOKIE)||{};h.isNullOrUndefined(c)?delete d[a]:d[a]=c;q.createCookie(b.SLIDEOUT_STATE_COOKIE,d)}},_setAutomaticRefreshInterval:function(a){k.isAuthorized(b.userActions.CAN_SET_AUTOMATIC_REFRESH_INTERVAL)?(a=parseInt(a,10),!isFinite(a)||0>a?console.error("setAutomaticRefreshInterval: invalid argument"):g.model.setModelProperty(b.MODEL_PROPERTY_NAMES.AUTOMATIC_REFRESH_INTERVAL,
0<a?String(a):"")):console.error("Permission denied: are you SUPER user?")}})})},"anaplan/settings/ModelContentsTree/Header":function(){define("dojo/_base/declare dojo/_base/lang dijit/_Contained dijit/_TemplatedMixin dijit/_WidgetBase anaplan/utils/UIHelper dojo/has dojo/on anaplan/data/ModelContentHelper anaplan/data/ModelContentCache dojo/i18n!anaplan/nls/modelContents dojo/text!anaplan/templates/ModelContentsTree/Header.html dojo/sniff".split(" "),function(g,b,k,p,r,n,f,s,l,a,e,d){return g("anaplan.settings.ModelContentsTree.Header",
[r,p,k],{baseClass:"modelContentsHeadline",templateString:d,_showCellCount:!0,postCreate:function(){this.inherited(arguments);n.setText(this.headerTitle,e.headerModelContents);f("ios")||f("android")?this.own(s(this.modelSize,"click",b.hitch(this,"_toggleModelSize"))):this.own(s(this.modelSize,"dblclick",b.hitch(this,"_toggleModelSize")),s(this.modelSize,"selectstart",function(a){a.preventDefault()}))},reset:function(){n.setText(this.modelSize,"")},startup:function(){this.inherited(arguments);this.update()},
update:function(){var b=this._showCellCount?l.getFormattedCellCount(a):l.getFormattedByteCount(a);n.setText(this.modelSize,b)},_toggleModelSize:function(){this._showCellCount=!this._showCellCount;this.update()}})})},"anaplan/settings/LineItemSubsets":function(){define("anaplan/utils/FormatHelper dojo/_base/declare dijit/layout/TabContainer anaplan/constants anaplan/data/ModelContentCache dojo/_base/array dojo/_base/lang dojo/topic dojo/dom-class anaplan/widgets/Tooltip anaplan/settings/LineItemSubsetsView anaplan/settings/LineItemSubsetDefinitions anaplan/data/ModelContentHelper anaplan/utils/EntityLongIdHelper anaplan/utils/UIHelper dojo/i18n!anaplan/nls/lineItemSubsets".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c){return b([k],{constructor:function(a){var b=a.content[0];this._workspaceId=b.workspaceId;this._modelId=b.modelId;this._viewDefinition=b.viewDefinition;this._modelContent=a.modelContent;this._showTipsOnStartup=a.showTipsOnStartup;this._subscriptions=[];this._tooltips=[]},hide:function(a){a===p.TIPS&&(n.forEach(this._tooltips,function(a){a.destroy()}),this._tooltips=[]);n.forEach(this.getChildren(),function(b){b.hide(a)})},postCreate:function(){this.inherited(arguments);
this._createTabs();var a=s.subscribe("anaplan/modelId",f.hitch(this,"_setModelId"));this.own(a);l.add(this.domNode,"settings")},resume:function(){n.forEach(this.getChildren(),function(a){a.resume()})},show:function(a){a===p.TIPS&&this._createTooltips();n.forEach(this.getChildren(),function(b){b.show(a)})},startup:function(){this.inherited(arguments);this._showTipsOnStartup&&this._createTooltips()},suspend:function(){n.forEach(this.getChildren(),function(a){a.suspend()})},uninitialize:function(){n.forEach(this._tooltips,
function(a){a.destroy()});this.inherited(arguments)},_createTabs:function(){try{var a=[],b=r.getLineItemSubsetCategoriesLabelPage(),l=b.entityLongIds[0],g=n.indexOf(b.entityIds[0],"FINANCIAL");-1!==g&&a.push(h.entityLongIdToEntityLongIdIdentifier(l[g]));for(var k=[{id:this.id+"_DEFINITIONS",title:c.titleDefinitions,widgetClass:d,viewDefinition:this._viewDefinition},{id:this.id+"_FINANCIAL",title:c.titleFinancial,widgetClass:e,viewDefinition:f.mixin({type:"MODEL_DEFINITION",staticContextIdentifiers:a,
columnSizes:{customRowLabelWidthsByDimension:[],customWidthsByLineItem:[],customWidthsByStyle:[],defaultColumnWidth:150}},q.getAxesForViewDefinition([p.SYSTEM_AXIS_IDENTIFIER_MODULE_WITH_LINE_ITEM_IDENTIFIER],[p.SYSTEM_AXIS_IDENTIFIER_LINE_ITEM_SUBSET_IDENTIFIER]))}],s=k.length,B,y,a=0;a<s;a++)B=k[a],y=new B.widgetClass({workspaceId:this._workspaceId,modelId:this._modelId,id:B.id,title:B.title,viewDefinition:B.viewDefinition,modelContent:this._modelContent,showTipsOnStartup:this._showTipsOnStartup}),
this.addChild(y)}catch(v){u.throwClientException(this,v)}},_createTooltip:function(b,d){var e=b.get("label"),h=c["tooltip"+d.split(" ").join("")],h=g.searchAndReplacePlaceholders(h);return new a({label:h,connectId:[b.domNode],position:["below","above"],title:e})},_createTooltips:function(){if(this._tooltips.length)console.warn("LineItemSubsets expected to find no tooltips, found "+this._tooltips.length);else for(var a=this.tablist.getChildren(),b=a.length,c,d=0;d<b;d++)c=a[d],c=this._createTooltip(c,
c.get("label")),this._tooltips.push(c)},_setModelId:function(a){this._modelId=a}})})},"anaplan/settings/Time2/Forms/Widgets/FiscalYearMonthSelect":function(){define(["dijit/form/Select","dojo/_base/declare","dojo/data/ObjectStore","dojo/i18n!dojo/cldr/nls/gregorian","dojo/store/Memory"],function(g,b,k,p,r){return b(g,{sortByLabel:!1,labelType:"text",required:!0,startup:function(){this.refreshValues();this.inherited(arguments)},refreshValues:function(){var b=this.value,f=new k({objectStore:this._getData()});
this.set("store",f);b&&this.set("value",b)},_getData:function(){for(var b=[],f=0;12>f;f++)b.push({id:f+1,label:p["months-format-abbr"][f]});return new r({data:b})}})})},"anaplan/settings/LineItemSubsetsView":function(){define("anaplan/data/Aggregator anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/GridletFactory anaplan/gridlet/Selection anaplan/gridlet/ViewRequestGridModel anaplan/layout/ManagedContainer anaplan/utils/UIHelper dojo/_base/declare".split(" "),function(g,b,k,p,r,n,f,s){return s([n],
{gutters:!1,constructor:function(b){this._workspaceId=b.workspaceId;this._modelId=b.modelId;this._viewDefinition=b.viewDefinition;this._isShowing=!1},onHide:function(){this._isShowing=!1;this._handleSuspend()},onShow:function(){this._isShowing=!0;this._handleResume();this.getParent().getParent()&&!this._gridlet&&this._createGridlet()},resume:function(){this.inherited(arguments);this._handleResume()},suspend:function(){this.inherited(arguments);this._handleSuspend()},_createGridlet:function(){try{this._model=
new r({workspaceId:this._workspaceId,modelId:this._modelId,viewDefinition:this._viewDefinition}),this._gridlet=(new k({editorFactory:new b})).createGridlet({region:"center",defaultColumnWidth:150,model:this._model,selection:(new p).initializeToDefaults()}),this.addChild(this._gridlet),g.gather(),this._gridlet.focus()}catch(l){f.throwClientException(this,l)}},_handleResume:function(){this._gridlet&&this._gridlet._gridController.resume()},_handleSuspend:function(){this._gridlet&&this._gridlet._gridController.suspend()}})})},
"anaplan/widgets/ComparisonIndicator":function(){define("dojo/_base/array dojo/dom-style dojo/dom-attr dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_WidgetBase anaplan/constants anaplan/utils/UIHelper anaplan/utils/EntityLongIdHelper dojo/_base/declare dojo/i18n!anaplan/nls/compare dojo/text!anaplan/templates/ComparisonIndicator.html dijit/form/CheckBox".split(" "),function(g,b,k,p,r,n,f,s,l,a,e,d){return a([n,p,r],{baseClass:"comparisonIndicator",templateString:d,constructor:function(){this._comparisonMode=
this._comparisonIdentifier=null},onChange:function(){},postCreate:function(){this.inherited(arguments)},reset:function(){b.set(this.wrapper,"display","none");this._comparisonMode=this._comparisonIdentifier=null},setViewDefinition:function(a,d){k.set(this,"disabled",!1);if(!a.comparisonMode||a.comparisonMode==f.viewComparisonMode.NONE)this._setDisplayComparisonCheckBox(!1);else{if(a.comparisonMode!==this._comparisonMode){this._comparisonMode=a.comparisonMode;var n="";switch(this._comparisonMode){case f.viewComparisonMode.VALUE:n=
e.labelValue;break;case f.viewComparisonMode.DIFFERENCE:n=e.labelDiff;break;case f.viewComparisonMode.PERCENTAGE:n=e.labelPerc;break;case f.viewComparisonMode.PERCENTAGE_DIFFERENCE:n=e.labelPercDiff;break;case f.viewComparisonMode.NONE:n=e.labelNone}s.setText(this.comparisonMode,n)}a.comparisonBase==f.viewComparisonBase.SPECIFIC_BASE?(this._comparisonIdentifier=a.comparisonIdentifier,n=l.entityLongIdIdentifierToEntityLongId(a.comparisonIdentifier),n=g.indexOf(d.comparisonLabels.entityLongIds[0],n),
s.setText(this.comparisonEntity,-1!==n?d.comparisonLabels.labels[0][n]:e.labelHierarchyMemberDeleted)):s.setText(this.comparisonEntity,e[a.comparisonBase]||a.comparisonBase);this._setDisplayComparisonCheckBox(!0);b.set(this.wrapper,"display","")}},startup:function(){this._started&&console.warn("startup "+this.id);this.inherited(arguments);b.set(this.wrapper,"display","none")},_onDisplayComparisonCheckBoxChange:function(a){k.set(this,"disabled",!0);this.onChange(a)},_setDisplayComparisonCheckBox:function(a){this.displayComparisonCheckBox.set("checked",
a?"checked":"",!1)},_setDisabledAttr:function(a){k.set(this.displayComparisonCheckBox,"disabled",a)}})})},"anaplan/widgets/ColourPaletteMenuItem":function(){define(["dojo/_base/declare","dojo/dom-attr","anaplan/widgets/MenuItem","dojo/text!anaplan/templates/ColourPaletteMenuItem.html"],function(g,b,k,p){return g([k],{templateString:p,postCreate:function(){this.inherited(arguments);this.colourSwatchNode&&(this.paletteColours&&9===this.paletteColours.length)&&(this.colourSwatchNode1.style.backgroundColor=
this.paletteColours[0],this.colourSwatchNode2.style.backgroundColor=this.paletteColours[1],this.colourSwatchNode3.style.backgroundColor=this.paletteColours[2],this.colourSwatchNode4.style.backgroundColor=this.paletteColours[3],this.colourSwatchNode5.style.backgroundColor=this.paletteColours[4],this.colourSwatchNode6.style.backgroundColor=this.paletteColours[5],this.colourSwatchNode7.style.backgroundColor=this.paletteColours[6],this.colourSwatchNode8.style.backgroundColor=this.paletteColours[7],this.colourSwatchNode9.style.backgroundColor=
this.paletteColours[8])}})})},"anaplan/home/Workflow/EmailForm":function(){define("anaplan/constants anaplan/utils/UIHelper anaplan/widgets/Dialog2 dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/event dojo/i18n!anaplan/nls/workflow dojo/i18n!dijit/nls/common dojo/keys dojo/text!anaplan/templates/Workflow/EmailForm.html dijit/form/CheckBox anaplan/widgets/Button".split(" "),function(g,b,k,p,r,n,f,s,l,a,e,d,q){return s([r,p,n,k.ContentMixin],
{baseClass:"emailForm",tabIndex:-1,templateString:q,value:null,lblOk:e.buttonOk,lblCancel:e.buttonCancel,lblProgress:a[g.WORKFLOW_STATUS_IN_PROGRESS_ENTITY_LONG_ID],lblComplete:a[g.WORKFLOW_STATUS_COMPLETE_ENTITY_LONG_ID],lblNotStarted:a[g.WORKFLOW_STATUS_NOT_STARTED_ENTITY_LONG_ID],constructor:function(a){this._currentSelection=a.currentSelection},onCancel:function(){},onOk:function(){},_onShow:function(){this.okButton.focus()},postCreate:function(){this.inherited(arguments);var d=a.emailFormTitle,
d=d.replace("%s",this._currentSelection?this._currentSelection.label:this._currentSelection.entityLongId);b.setText(this.emailFormTitle,d)},_getValueAttr:function(){var a=[];!0===this.checkBoxComplete.get("checked")&&a.push(g.WORKFLOW_STATUS_COMPLETE_ENTITY_LONG_ID);!0===this.checkBoxInProgress.get("checked")&&a.push(g.WORKFLOW_STATUS_IN_PROGRESS_ENTITY_LONG_ID);!0===this.checkBoxNotStarted.get("checked")&&a.push(g.WORKFLOW_STATUS_NOT_STARTED_ENTITY_LONG_ID);return a},_onCancel:function(){this.onCancel()},
_onCancelButtonClick:function(){this._onCancel()},_onCheckBoxChange:function(){var a=this.checkBoxComplete.get("checked"),b=this.checkBoxInProgress.get("checked"),c=this.checkBoxNotStarted.get("checked");this.okButton.set("disabled",!a&&!b&&!c)},_onKeyDown:function(a){a.keyCode===d.ESCAPE&&(this._onCancel(),l.stop(a))},_onKeyPress:function(a){a.currentTarget===this.domNode&&a.stopPropagation()},_onOk:function(){this.onOk()},_onOkButtonClick:function(){this._onOk()},_setValueAttr:function(a){a&&a.length&&
(f.forEach([this.checkBoxNotStarted,this.checkBoxInProgress,this.checkBoxComplete],function(a){a.set("checked",!1)}),this.checkBoxComplete.set("checked",-1!=f.indexOf(a,g.WORKFLOW_STATUS_COMPLETE_ENTITY_LONG_ID)),this.checkBoxNotStarted.set("checked",-1!=f.indexOf(a,g.WORKFLOW_STATUS_NOT_STARTED_ENTITY_LONG_ID)),this.checkBoxInProgress.set("checked",-1!=f.indexOf(a,g.WORKFLOW_STATUS_IN_PROGRESS_ENTITY_LONG_ID)))}})})},"anaplan/view/ModelManagement/ModelManagementTaskProgress":function(){define("anaplan/utils/UIHelper anaplan/utils/FormatHelper anaplan/Exceptions anaplan/view/ModelManagement/ModelView dojo/_base/declare dojo/_base/event dojo/dom-attr dojo/i18n!anaplan/nls/modelManagement dojo/i18n!dijit/nls/common dojo/json dojo/keys dojo/string dojo/text!anaplan/templates/ModelManagement/ModelManagementTaskProgress.html anaplan/widgets/TaskProgressMonitor dijit/form/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q){return r([p],{templateString:q,cancelButton:null,taskProgressMonitor:null,_modelName:"",monitor:function(a,b,c){try{return g.setText(this.message,a),this.taskProgressMonitor.startProgressMonitor(c,b)}catch(d){throw new k.ClientException("ModelManagementTaskProgress#monitor",d);}},onComplete:function(){},onTitleChange:function(){},postCreate:function(){try{this.inherited(arguments),this.cancelButton.set("label",l.buttonCancel)}catch(a){throw new k.ClientException("ModelManagementTaskProgress#postCreate",
a);}},reset:function(){try{this.taskProgressMonitor.reset(),this._modelName=""}catch(a){throw new k.ClientException("ModelManagementTaskProgress#reset",a);}},_onCancel:function(){var a=this.taskProgressMonitor;a&&a.cancelTask()},_onKeyDown:function(a){a.keyCode===e.ESCAPE&&(this._onCancel(),n.stop(a))},_onShow:function(){try{var a=b.escapeHTML(this._modelName);this.onTitleChange(s.titleCopyAndSanitizeModel.replace(/\$\{modelName\}/,a));this.onHelpChange(null)}catch(d){throw new k.ClientException("ModelManagementTaskProgress#_onShow",
d);}},_setModelNameAttr:function(a){this._modelName=a}})})},"anaplan/settings/Actions/_ImportDefinitions":function(){define("anaplan/data/Aggregator dojo/_base/declare anaplan/data/ModelContentHelper anaplan/common/ViewSerialNumbers anaplan/data/RequestFactory dojo/_base/lang dojo/json anaplan/constants".split(" "),function(g,b,k,p,r,n,f,s){return b([],{constructor:function(){this._importDefinitions=[];this._registeredObserver=!1;this._viewDefinition=null;this._serialNumbers=new p},destroy:function(){this._registeredObserver&&
g.deleteObserver(this)},error:function(b){this.onError(b)},getImportDefinitions:function(){return this._importDefinitions},initialize:function(){g.addObserver(this);this._registeredObserver=!0},onError:function(){},onUpdate:function(){},update:function(b){b=b[0];var a=this._serialNumbers,e=this._serialNumbers=new p(b.serialNumbers);this._viewIndex=b.viewIndex;if(a.rowAxisSerialNumber!==e.rowAxisSerialNumber||a.dataSerialNumber!==e.dataSerialNumber){a.rowAxisSerialNumber!==e.rowAxisSerialNumber&&(this._rowLabelPage=
b.rowLabelPages[0]);a.dataSerialNumber!==e.dataSerialNumber&&(this._dataPage=b.dataPages[0]);b=[];for(var d=this._rowLabelPage,a=d.entityLongIds[0],e=d.labels[0],g=this._dataPage.cellValues,d=d.count,h=0;h<d;h++)b.push({entityLongId:a[h],label:e[h],importDefinition:f.parse(g[h])});this._importDefinitions=b;this.onUpdate()}},view:function(){var b={modelId:modelId,viewDefinition:this._getViewDefinition(),columnLabelPageRequests:[{start:0,count:-1}],dataPageRequests:[{startRow:0,startColumn:0,rowCount:-1,
columnCount:-1}],rowLabelPageRequests:[{start:0,count:-1}],cellSelectorLabelsRequired:!1,pageSelectorLabelsRequired:!1,serialNumbers:this._serialNumbers,viewIndex:this._viewIndex||-1};return r.createRequest(workspaceId,[],[b],[])},_getViewDefinition:function(){if(null==this._viewDefinition){var b={type:"MODEL_DEFINITION"},a=k.getAxesForViewDefinition([s.SYSTEM_AXIS_IDENTIFIER_IMPORT_ALL_IDENTIFIER],[s.SYSTEM_AXIS_IDENTIFIER_IMPORT_PROPERTY_IDENTIFIER]);n.mixin(b,a);this._viewDefinition=b}return this._viewDefinition}})})},
"anaplan/view/_editor/plugins/Help":function(){define(["dojo/_base/declare","anaplan/view/_editor/_Plugin","anaplan/widgets/Button","dojo/_base/lang","anaplan/utils/UrlHelper"],function(g,b,k,p,r){return g("anaplan.view._editor.plugins.Help",[b],{constructor:function(){this.command="help";this.buttonClass=k;this.iconClass="anaplanEditorIcon anaplanEditorIconHelp";this.useDefaultCommand=!1},destroy:function(){this._floatingWindow&&this._floatingWindow.destroy();this._buttonHandle&&this._buttonHandle.remove();
this.inherited(arguments)},update:function(b){this.commandArg=b;this.inherited(arguments)},_help:function(){var b=r.createAnapediaUrl("default.htm#cshid\x3d1549");window.open(b,"_blank")},_initButton:function(){this.inherited(arguments);this._buttonHandle=this.button.on("click",p.hitch(this,"_help"))},_queryButtonEnabled:function(){return!0}})})},"anaplan/view/ModelManagement/StatusTab":function(){define("anaplan/data/UserInfo anaplan/data/ModelContentCache anaplan/constants anaplan/Exceptions anaplan/common/SelectiveAccess dijit/_FocusMixin dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/i18n!anaplan/nls/modelManagement dojo/text!anaplan/templates/ModelManagement/StatusTab.html anaplan/widgets/MasterSelector anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h){return d([l,f,n,s,a],{baseClass:"modelManagementStatusTab",cancelTaskButton:null,closeModelButton:null,modelSelector:null,templateString:h,constructor:function(a){this._workspaceId=a.workspaceId;this._workspaceName=a.workspaceName;this._selectedModelId=this._modelId=a.modelId;this._selectedModelSummary=this._selectedModelName=null;this._scrollToSelectedModelRequired=!0},getSelectedModelActiveState:function(){return this._getSelectedModelActiveState()},getSelectedModelId:function(){return this._selectedModelId},
getSelectedModelName:function(){return this._selectedModelName},getSelectedModelSummary:function(){return this._selectedModelSummary},onCancelTask:function(){},onCloseModel:function(){},postCreate:function(){this.inherited(arguments);this.cancelTaskButton.set("label",q.buttonCancelTask);this.closeModelButton.set("label",q.buttonCloseModel);this._updateModelSelector()},scrollToSelection:function(){this.modelSelector.scrollToSelection()},setModelId:function(a){this._modelId=a;this._updateModelSelector()},
startup:function(){this.inherited(arguments);this._updateActionButtonState()},_disableAllButtons:function(){this.cancelTaskButton.set("disabled",!0);this.closeModelButton.set("disabled",!0)},_getSelectedModelActiveState:function(){var a=b.getModelSummary(this._selectedModelId);return a?a.activeState:null},_onCancelTask:function(){try{if(this._workspaceId&&this._selectedModelSummary&&this._selectedModelSummary.taskSummary)this.onCancelTask(this._selectedModelName,this._selectedModelSummary.taskSummary)}catch(a){throw new p.ClientException("StatusTab#_onCancelTask",
a);}},_onCancelTaskButtonClick:function(){this._onCancelTask()},_onCloseModel:function(){try{this._selectedModelId&&(this.closeModelButton.set("disabled",!0),this.onCloseModel(this._selectedModelId,this._selectedModelName))}catch(a){throw new p.ClientException("StatusTab#_onCloseModel",a);}},_onCloseModelButtonClick:function(){this._onCloseModel()},_onModelSelectionChange:function(a,c){try{this._selectedModelId=a,this._selectedModelName=c,this._selectedModelSummary=b.getModelSummary(a),this._updateActionButtonState()}catch(d){throw new p.ClientException("StatusTab#_onModelSelectionChange",
d);}},_updateActionButtonState:function(){try{var a=k.modelManagerState;this._selectedModelSummary?null!=this._selectedModelSummary.activeState?(this.cancelTaskButton.set("disabled",!(!this._selectedModelSummary.taskSummary||!this._selectedModelSummary.taskSummary.cancelledByUserGuid)||!(this._selectedModelSummary.taskSummary&&(r.canCancelAnyTask()||this._selectedModelSummary.taskSummary.userGuid==g.getLoggedInUserGuid()))),this.closeModelButton.set("disabled",this._selectedModelSummary.markedForUnload||
this._selectedModelSummary.modelManagerState===a.CLOSING||this._selectedModelSummary.modelManagerState===a.CLOSED)):this._disableAllButtons():this._disableAllButtons()}catch(b){throw new p.ClientException(this.declaredClass+"._updateActionButtonState",b);}},_updateModelSelector:function(){if(!this._destroyed)try{var a=k.modelManagerState,c=b.getWorkspaceInfo();if(c){var d=[];e.forEach(c.modelSummaries,function(b){(b.modelManagerState!==a.CLOSED&&b.modelManagerState!==a.CLOSING||b.taskSummary)&&d.push(b)});
this.modelSelector.set("modelSummaries",d);this._selectedModelId=this._selectedModelId||this._modelId||null;this._selectedModelName=b.getModelName(this._selectedModelId);this._selectedModelSummary=b.getModelSummary(this._selectedModelId);this.modelSelector.set("value",{value:this._selectedModelId},!this._scrollToSelectedModelRequired);this._scrollToSelectedModelRequired=!1;this._updateActionButtonState()}}catch(h){throw new p.ClientException("StatusTab#_updateModelSelector",h);}}})})},"anaplan/settings/HierarchyTreeView/Form/Header":function(){define(["dojo/_base/declare",
"dijit/_WidgetBase","dijit/_TemplatedMixin","anaplan/utils/UIHelper","dojo/text!anaplan/templates/HierarchyTreeView/Form/Header.html"],function(g,b,k,p,r){return g([b,k],{templateString:r,baseClass:"hierarchyTreeViewFormHeader",setText:function(b){p.setText(this._header,b)}})})},"anaplan/view/NewModule":function(){define("anaplan/utils/UIHelper dijit/_Contained dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/TextBox dojo/aspect dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/window dojo/dom-class dojo/dom-construct dojo/json dojo/number dojo/on dojo/string dojo/topic anaplan/data/ModelContentCache anaplan/constants anaplan/data/ChangeFactory anaplan/data/ModelContentHelper anaplan/dnd/Manager anaplan/Exceptions anaplan/formula/DataReference anaplan/utils/AxisHelper anaplan/utils/EntityLongIdHelper anaplan/utils/IdChecker anaplan/utils/SubmissionHandler anaplan/widgets/DimensionItem anaplan/widgets/PivotComponent dojo/text!anaplan/templates/NewModule.html dojo/i18n!anaplan/nls/newModule anaplan/view/NewModule/_DropArea anaplan/widgets/TextBox".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H){return l([p,k,r,b],{baseClass:"newModule",templateString:F,_dndManager:null,_sortPosition:0,_sortPositionForTime:0,constructor:function(a){this._model=a.model},onCancel:function(){},onShow:function(){this._onShow()},_onShow:function(){var a=this;setTimeout(function(){a.moduleNameTextBox.focus()},250)},onSubmit:function(){},postCreate:function(){try{this.inherited(arguments);this._dndManager=new y(d.body());this.dimensionsBox.set("dndManager",
this._dndManager);this._dimensionsDropZone=this._dndManager.createDropZone(this.dimensionsBox);g.setText(this.dimensionsHeading,H.labelDimensions);g.setText(this.moduleNameTextBoxLabel,H.labelModuleName);g.setText(this.cellCount,m.substitute(H.labelCellCount,{cellCount:c.format(0)}));this.moduleNameTextBox.set("promptMessage",H.labelModuleName);var b=this,e=new L;this.moduleNameTextBox.validator=function(a){a=m.trim(a);return!e.checkId(a)?(this.invalidMessage=e.getInvalidIdMessage(),!1):b._isDuplicateModuleName(a)?
(this.invalidMessage=H.duplicateModuleName,!1):!0};this._populateDimensions();this._createPivotComponent();this.own(f.after(this.domNode,"selectstart",function(b){var c=dijit.getEnclosingWidget(b.target);(!c||!(c instanceof n))&&a.stop(b)}))}catch(h){g.throwClientException(this,h)}},resize:function(a){this.inherited(arguments);this.dimensionsBox.resize(a);this._pivotComponent.resize(a)},startup:function(){try{this.inherited(arguments),this._pivotComponent.startup()}catch(a){g.throwClientException(this,
a)}},uninitialize:function(){try{this.moduleNameTextBox.set("message",""),this._pivotComponent&&this._pivotComponent.destroy(),this.inherited(arguments)}catch(a){g.throwClientException(this,a)}},_addDimensionDndItem:function(a,b,c,d){var e=null;try{var h=new D({entityLongId:b,iconClass:c,label:a,sortPosition:this._sortPosition++});d&&q.add(h.domNode,"dimensionSubset");e=this._dndManager.createDraggableItem(h);this._dimensionsDropZone.addDraggableItem(e)}catch(f){g.throwClientException(this,f)}return e},
_addGeneralListDndItems:function(){try{for(var a=z.getHierarchiesLabelPage(),b=a.entityLongIds[0],c=a.labels[0],d=z.getHierarchyInfos(),e=a.count,h,f,a=0;a<e;a++)h=b[a],f=h===x.BUILT_IN_HIERARCHY_USER_HIERARCHY_ENTITY_LONG_ID?"anaplanEditorIconUser":"anaplanEditorIconGeneralList",this._addDimensionDndItem(c[a],h,f),this._addGeneralListSubsetDndItems(d[a])}catch(m){g.throwClientException(this,m)}},_addGeneralListSubsetDndItems:function(a){try{var b=z.getHierarchySubsetsLabelPage(),c=b.entityLongIds[0],
d=b.labels[0],e=a.subsetEntityLongIds,h=e.length,f,m;for(a=0;a<h;a++)f=e[a],m=s.indexOf(c,f),-1!==m&&this._addDimensionDndItem(d[m],f,"anaplanEditorIconSubset",!0)}catch(l){g.throwClientException(this,l)}},_addTimeRangeDndItems:function(){try{for(var a=z.getTimeRangesLabelPage(),b=a.entityLongIds[0],c=a.labels[0],d=a.count,e,a=0;a<d;a++)e=b[a],this._addDimensionDndItem(c[a],e,"anaplanEditorIconTime",!0)}catch(h){g.throwClientException(this,h)}},_addLineItemSubsetDndItems:function(){try{for(var a=
z.getLineItemSubsetsLabelPage(),b=a.entityLongIds[0],c=a.labels[0],d=a.count,e,a=0;a<d;a++)e=b[a],this._addDimensionDndItem(c[a],e,"anaplanEditorIconLineItemSubset")}catch(h){g.throwClientException(this,h)}},_addVersionsDndItem:function(){try{this._addDimensionDndItem(H.labelVersions,x.SYSTEM_AXIS_IDENTIFIER_VERSION_ENTITY_LONG_ID,"anaplanEditorIconVersions")}catch(a){g.throwClientException(this,a)}},_setSortPositionOnTimeDimension:function(){for(var a=this._dndManager.getItems(),b=a.length,c,d,e=
0;e<b;e++)c=a[e],d=c.getWidget(),d=d.get("entityLongId"),d===x.SYSTEM_AXIS_IDENTIFIER_TIME_ENTITY_LONG_ID&&c.getWidget().set("sortPosition",this._sortPositionForTime)},_createPivotComponent:function(){try{this._pivotComponent=new N({dndManager:this._dndManager,pageInfo:null}),this._setSortPositionOnTimeDimension(),this.own(t(this._pivotComponent,"Change",e.hitch(this,"_onPivotComponentChange"))),this.own(t(this._pivotComponent,"Submit",e.hitch(this,function(a,b){this._moduleName=m.trim(this.moduleNameTextBox.get("value"));
this._submitNewModule(this._moduleName,a,b)}))),this.own(t(this._pivotComponent,"Cancel",e.hitch(this,function(){this.onCancel()}))),h.place(this._pivotComponent.domNode,this.mockTab)}catch(a){g.throwClientException(this,a)}},_disableDndItem:function(a,b,c){try{var d="";b&&(d=m.substitute(H.tooltipDisabledDimension,{dimensionLabel:b}));a.set("disabled",!0);a.set("title",d);c&&a.set("display",!1)}catch(e){g.throwClientException(this,e)}},_enableDndItem:function(a){try{a.set("disabled",!1),a.set("title",
""),a.set("display",!0)}catch(b){g.throwClientException(this,b)}},_getTopLevelMainHierarchyEntityLongIdForDimension:function(a){return B.getTopLevelMainHierarchyEntityLongId(z,a)},_isDuplicateModuleName:function(a){try{for(var b=z.getModulesLabelPage().labels[0],c=b.length,d=0;d<c;d++)if(b[d].toLowerCase()===a.toLowerCase())return!0}catch(e){g.throwClientException(this,e)}return!1},_isValid:function(a,b,c){try{var d=new L;if(""===a)return this._pivotComponent.setValidationMessage(H.emptyModuleName),
!1;if(!d.checkId(a))return this._pivotComponent.setValidationMessage(m.substitute(H.invalidModuleName,{errorMsg:d.getInvalidIdMessage()})),!1;if(this._isDuplicateModuleName(a))return this._pivotComponent.setValidationMessage(m.substitute(H.duplicateModuleName2,{moduleName:a})),!1;a={};var e=c.length,h,f;for(b=0;b<e;b++){h=c[b];if(!d.checkId(h))return this._pivotComponent.setValidationMessage(m.substitute(H.invalidLineItemName,{lineItemName:h})),!1;f=h.toLowerCase();if(a[f])return this._pivotComponent.setValidationMessage(m.substitute(H.duplicateLineItemName,
{lineItemName:h})),!1;a[f]=!0}this._pivotComponent.setValidationMessage(null)}catch(l){g.throwClientException(this,l)}return!0},_onModuleNameTextBoxKeyDown:function(){this.moduleNameTextBox.focus()},_hideHierarchyDimension:function(a,b,c){for(var d=!1,e=a.length,h,f=0;!d&&f<e;f++)h=a[f],-1!==s.indexOf(h.subsetEntityLongIds,b)&&-1!==s.indexOf(c,h.entityLongId)&&(d=!0);return d},_recordAssignedDimension:function(a,b,c,d,e){a=s.indexOf(b.entityLongIds[0],a);c=c[a].topLevelMainHierarchyEntityLongId;d.push(c);
e.push(b.labels[0][a]);return c},_onPivotComponentChange:function(a){try{var b=B.getAllDimensionIdentifiersForViewDefinition(a),c=G.entityLongIdIdentifiersToEntityLongIds(b),d=z.getHierarchiesLabelPage(),e=z.getHierarchySubsetsLabelPage(),h=z.getLineItemSubsetsLabelPage(),f=z.getTimeRangesLabelPage(),m=z.getHierarchyInfos(),l=z.getHierarchySubsetInfos(),k=z.getLineItemSubsetInfos(),q=z.getTimeRangeInfos(),n=c.length,t,w,r;a=null;for(var b=[],p=[],u=!1,A=!1,v=0;v<n;v++){t=c[v];w=G.getEntityTypeIndex(t);
switch(w){case x.HIERARCHY_ENTITY_TYPE_INDEX:a=this._recordAssignedDimension(t,d,m,b,p);break;case x.HIERARCHY_SUBSET_ENTITY_TYPE_INDEX:a=this._recordAssignedDimension(t,e,l,b,p);break;case x.LINE_ITEM_SUBSET_ENTITY_TYPE_INDEX:a=this._recordAssignedDimension(t,h,k,b,p);break;case x.TIME_RANGE_ENTITY_TYPE_INDEX:r=s.indexOf(f.entityLongIds[0],t);a=x.SYSTEM_AXIS_IDENTIFIER_TIME_ENTITY_LONG_ID;b.push(a);p.push(f.labels[0][r]);break;default:t==x.SYSTEM_AXIS_IDENTIFIER_TIME_ENTITY_LONG_ID&&0<q.length?(a=
x.SYSTEM_AXIS_IDENTIFIER_TIME_ENTITY_LONG_ID,b.push(a),p.push(!0),A=!0):a=null}a&&G.getEntityTypeIndex(a)===x.LINE_ITEM_SUBSET_ENTITY_TYPE_INDEX&&(u=p[p.length-1])}for(var y=this._dimensionsDropZone.getItems(),C=y.length,L,E,K,D,d=0;d<C;d++)L=y[d],E=L.getWidget(),K=E.get("entityLongId"),D=G.getEntityTypeIndex(K),u&&D===x.LINE_ITEM_SUBSET_ENTITY_TYPE_INDEX?this._disableDndItem(E,u):K===x.SYSTEM_AXIS_IDENTIFIER_TIME_ENTITY_LONG_ID?-1!==s.indexOf(b,K)?this._disableDndItem(E,!0):this._enableDndItem(E):
(a=this._getTopLevelMainHierarchyEntityLongIdForDimension(K),-1<a&&(r=s.indexOf(b,a),-1!==r?(e=!1,D===x.HIERARCHY_SUBSET_ENTITY_TYPE_INDEX&&(e=this._hideHierarchyDimension(m,K,c)),D===x.TIME_RANGE_ENTITY_TYPE_INDEX&&(e=A),this._disableDndItem(E,p[r],e)):this._enableDndItem(E)))}catch(F){g.throwClientException(this,F)}},_populateDimensions:function(){try{this._addVersionsDndItem(),this._addGeneralListDndItems(),this._addLineItemSubsetDndItems(),this._sortPositionForTime=this._sortPosition++,this._addTimeRangeDndItems()}catch(a){g.throwClientException(this,
a)}},_setRelativeToAttr:function(a){try{this._relativeTo=a,this._set("relativeTo",a)}catch(b){g.throwClientException(this,b)}},_submitNewModule:function(a,b,c){var d=this;try{if(this._isValid(a,b,c)){for(var h=new A,f=h.getModelChangeGenerator({entityTypeClass:"SYSTEM",entityTypeIndex:x.MODULE_ENTITY_TYPE_INDEX},!0),m=!1,l=!1,k=[],q=null,s=B.getAllDimensionIdentifiersForViewDefinition(b),n=0;n<s.length;n++){var t=s[n];if(C.isTimeSystemAxisIdentifier(t))m=!0;else if(C.isVersionSystemAxisIdentifier(t))l=
!0;else{var r=G.entityLongIdIdentifierToEntityLongId(t);if(G.getEntityTypeIndex(r)===x.TIME_RANGE_ENTITY_TYPE_INDEX)q=r;else{var p=B.getHierarchyEntityId(z,r);null!=p&&k.push(p)}}}var y={type:"MODEL_DATA",staticContextIdentifiers:[(new E).generateSinglePartIdentifier(a)],currentPageIdentifiers:[]};e.mixin(y,b);if(null!=q){var L=G.entityLongIdToEntityLongIdIdentifier(x.SYSTEM_AXIS_IDENTIFIER_TIME_ENTITY_LONG_ID),D=G.entityLongIdToEntityLongIdIdentifier(q);G.deepReplace(y,D,L)}var F={name:a,position:this._relativeTo?
"Before":null,relativeToLabel:this._relativeTo||null,appliesToEntityIds:k,timeScaleContainerElid:q,versionSelection:l?x.VersionSelection.ALL:x.VersionSelection.NOT_APPLICABLE,viewDefinition:u.stringify(y)};!m&&null==q&&(F.leafPeriodType=x.PeriodType.NOT_APPLICABLE);b=[];b.push("\x3cModelDefinition\x3e");b.push(f.getModelChangeXml("INSERT",F));var ga=c.length;if(0<ga){for(var ea=h.getModelChangeGenerator({entityTypeClass:"LINE_ITEM"},!0),h=[],f=0;f<ga;f++)h.push({name:c[f]});b.push(ea.getModelChangeXml("INSERT",
{moduleId:a,items:h}))}b.push("\x3c/ModelDefinition\x3e");var N=[{workspaceId:workspaceId,cellChanges:[],modelChanges:[{modelId:modelId,modelChangeXml:b.join("")}]}];(new K({aggregatorObserver:this._model})).gather(N).then(function(){var a,b=B.getModuleEntityLongId(z,d._moduleName);-1<b?w.publish("anaplan/views",b):a=H.noAccessToNewModule;d.onSubmit(a)})}}catch(ja){g.showErrorReporter(new v.ClientException("anaplan.view.NewModule#_submitNewModule",ja))}}})})},"anaplan/settings/Modules/ModulesView/Toolbar":function(){define("anaplan/data/ModelContentCache anaplan/settings/Shared/Toolbar anaplan/utils/FormatHelper anaplan/utils/UIHelper anaplan/widgets/Tooltip dijit/ToolbarSeparator dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/modules dojo/i18n!anaplan/nls/view".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e){return s([b],{constructor:function(){this._tooltips=[]},postCreate:function(){this.inherited(arguments);this._openButton=this._createButton("anaplanModuleIcon anaplanModuleIconGreenOpen",a.buttonOpenModule,l.hitch(this,"onOpen"));this.addChild(this._openButton);this.addChild(new n);this._insertModuleButton=this._createButton("anaplanModuleIcon anaplanModuleIconGreenAdd",a.labelInsertModule,l.hitch(this,"onInsert"));this.addChild(this._insertModuleButton);this._copyButton=
this._createButton("anaplanEditorIcon anaplanEditorIconBulkCopy",a.labelCopyModule,l.hitch(this,"onCopy"));this.addChild(this._copyButton);this._deleteButton=this._createDeleteButton();this.addChild(this._deleteButton);this._reOrderButton=this._createReOrderButton();this.addChild(this._reOrderButton);this.addChild(new n);this._exportButton=this._createExportButton();this.addChild(this._exportButton);this.addChild(new n);this._refreshButton=this._createRefreshButton();this.addChild(this._refreshButton);
this.addChild(new n);this._searchButton=this._createSearchButton();this.addChild(this._searchButton)},enableButtons:function(a,b,e,f,c){this._searchButton.set("disabled",!1);this._refreshButton.set("disabled",!1);this._exportButton.set("disabled",!1);this._openButton&&this._openButton.get("disabled")===a&&this._openButton.set("disabled",!a);this._reOrderButton&&this._reOrderButton.set("disabled",!b);this._deleteButton&&this._deleteButton.get("disabled")===e&&this._deleteButton.set("disabled",!e);
this._insertModuleButton&&this._insertModuleButton.get("disabled")===f&&this._insertModuleButton.set("disabled",!f);this._copyButton&&this._copyButton.get("disabled")===c&&this._copyButton.set("disabled",!c)},_createTooltip:function(b,f){var h=b.get("label"),g=a["tooltip"+f.split(" ").join("")];g||(g=e["tooltip"+f.split(" ").join("")]);if(!g)return null;g=k.searchAndReplacePlaceholders(g);return new r({label:g,connectId:[b.domNode],position:["below","above"],title:h})},_createTooltips:function(){try{this._tooltips.length?
console.warn(this.declaredClass+" expected to find no tooltips, found "+this._tooltips.length):(this._tooltips.push(this._createTooltip(this._openButton,"Open")),this._tooltips.push(this._createTooltip(this._insertModuleButton,"Insert")),this._tooltips.push(this._createTooltip(this._deleteButton,"Delete")),this._tooltips.push(this._createTooltip(this._reOrderButton,"ReOrder")),this._tooltips.push(this._createTooltip(this._refreshButton,"Refresh")),this._tooltips.push(this._createTooltip(this._copyButton,
"Copy")))}catch(a){p.throwClientException(this,a)}},uninitialize:function(){f.forEach(this._tooltips,function(a){a.destroy()});this.inherited(arguments)},hideTooltips:function(){f.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=[]},onOpen:function(){},onInsert:function(){},onCopy:function(){},onExport:function(){}})})},"anaplan/view/AskAQuestion":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/string dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin anaplan/constants anaplan/utils/UrlHelper dojo/text!anaplan/templates/AskAQuestion.html dojo/i18n!anaplan/nls/askAQuestion dijit/form/TextBox anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e){return g("anaplan.view.AskAQuestion",[n,r,f],{baseClass:"askAQuestion",templateString:a,constructor:function(){},onSubmit:function(){},postCreate:function(){this.inherited(arguments);this.searchTextBox.set("placeholder",e.placeholderSearch);this.searchButton.set("label",e.buttonSearch);this.own(k(this.domNode,"submit",b.hitch(this,function(a){var b=p.trim(this.searchTextBox.get("value"));a.preventDefault();b&&b.length&&window.open(l.getUrl(s.URL_IDS.COMMUNITY_SEARCH_URL_ID)+
encodeURI(b),"_blank");this.onSubmit()})))}})})},"anaplan/settings/TimeRanges/EditTimeRangesDialog":function(){define("dijit/Destroyable dojo/Evented anaplan/utils/UIHelper anaplan/settings/TimeRanges/TimeRangeEditor dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/time dojo/on dojo/i18n!anaplan/nls/timeRanges anaplan/widgets/Dialog2".split(" "),function(g,b,k,p,r,n,f,s,l,a){return r([b,g],{entityTypeClass:"SYSTEM",_dialog:null,constructor:function(b,d,f){this.inherited(arguments);var h=new p(b,
d,f,!1);this._dialog=new a({title:l.editTitle,"class":"anaplanBlueDialog qa-dialog-edit-time-range",resizeContentsToFitViewport:!0,content:h.domNode});this._handleHide=s(this._dialog,"Hide",this.hide.bind(this));this._handleCancel=s(h,"Cancel",this.destroy.bind(this));this._handleConfirm=s(h,"Confirm",this.confirm.bind(this));this.own([this._handleHide,this._handleCancel,this._handleConfirm])},setHelpContent:function(a,b){this._dialog.setHelpContent(a,b)},show:function(){this.inherited(arguments);
this._dialog.show()},hide:function(){this.inherited(arguments);this._dialog.destroyRecursive()},destroy:function(){this.inherited(arguments);this._dialog.destroyRecursive()},confirm:function(a){this.inherited(arguments);this.emit("confirm",a)}})})},"anaplan/react/_ReactContainerMixin":function(){define(["anaplan/utils/UIHelper","dojo/_base/array","dojo/_base/declare","dojo/aspect"],function(g,b,k,p){return k(null,{reactNode:null,reactComponentType:null,postCreate:function(){this._started||(this.inherited(arguments),
null===this.containerNode&&g.throwClientException(this,"Expected a containerNode to be defined"),this.reactNode=App.interim.createReactEntryPoint(this.containerNode),p.before(this,"destroyRecursive",this._beforeDestroy.bind(this),!0))},setComponentType:function(b){this.reactComponentType=b},renderReact:function(b){var k=this._getStore(),f=this.reactComponentType;if(null===this.reactComponentType)g.throwClientException(this,"Must supply ComponentType");else try{App.interim.renderReactNodeWithProvider(this.reactNode,
f,b,k)}catch(s){g.throwClientException(this,"Failed to render ReactContainer of type "+f.toString())}},getStoreState:function(){return App.interim.getReduxState()},_getStore:function(){return App.interim.getReduxStore()},_beforeDestroy:function(){App.interim.unmountReactNode(this.reactNode)}})})},"anaplan/settings/Time2/Forms/Widgets/TwelveWeekSelect":function(){define(["dijit/form/Select","dojo/_base/declare","dojo/data/ObjectStore","dojo/store/Memory"],function(g,b,k,p){return b(g,{sortByLabel:!1,
labelType:"text",required:!0,startup:function(){this.refreshValues();this.inherited(arguments)},refreshValues:function(){var b=this.value;this.set("store",this._getData());b&&this.set("value",b)},_getData:function(){for(var b=[],g=1;13>g;g++)b.push({id:g,label:String(g)});b=new p({data:b});return new k({objectStore:b})}})})},"anaplan/widgets/CheckedMenuItem":function(){define(["dojo/_base/declare","dijit/CheckedMenuItem","dojo/text!anaplan/templates/CheckedMenuItem.html"],function(g,b,k){return g(b,
{templateString:k})})},"anaplan/view/Information":function(){define("anaplan/utils/UIHelper dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/event dojo/keys dojo/text!anaplan/templates/Information.html dojo/i18n!dijit/nls/common anaplan/widgets/Button".split(" "),function(g,b,k,p,r,n,f,s,l){return r([k,b,p],{templateString:s,baseClass:"information",onOk:function(){},onHelpChange:function(){},_onShow:function(){this.onTitleChange(this.title);this.onHelpChange(null);
this.okButton.focus()},onTitleChange:function(){},postCreate:function(){this.inherited(arguments);this.okButton.set("label",l.buttonOk)},_onKeyDown:function(a){switch(a.keyCode){case f.ENTER:case f.ESCAPE:this.onOk(),n.stop(a)}},_onKeyPress:function(a){a.currentTarget===this.domNode&&a.stopPropagation()},_onOkButtonClick:function(){this.onOk()},_setMessageAttr:function(a){g.setText(this.informationMessage,a)},_setInnerHtmlAttr:function(a){this.informationMessage.innerHTML=a}})})},"anaplan/layout/ScrollingTabController":function(){define("anaplan/utils/topics dijit/layout/ScrollingTabController dijit/layout/TabController dijit/MenuItem dijit/registry dojo/_base/declare dojo/_base/lang dojo/_base/NodeList dojo/dnd/common dojo/dnd/Manager dojo/dnd/Source dojo/dom dojo/dom-class dojo/dom-geometry dojo/i18n!anaplan/nls/tabs dojo/topic dojo/touch".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t){k=n(k.TabButton,{closeMenu:function(){this._menuButton&&this._menuButton.closeDropDown()},postCreate:function(){var a=this.page,b=["dojoDndItem","qa-tab"];this.inherited(arguments);a.hasTabSeparator&&b.push("anaplanTabSeparator");a.closable||b.push("anaplanTabStatic");q.add(this.domNode,b);q.add(this.iconNode,["qa-tab__icon"]);q.add(this.closeNode,["qa-tab__close-icon"]);q.add(this.containerNode,["qa-tab__title"])},uninitialize:function(){this._menuButton&&
(this._menuButton.closeDropDown(),this._menuButton.dropDown=null,this._menuButton.destroyRecursive(),this._menuButton=null);this.inherited(arguments)}});var m=n(e,{getSelectedNodes:function(){var a=new s,b=l._empty,c=this.selection,e,h;for(e in c)!(e in b)&&c.hasOwnProperty(e)&&(h=d.byId(e))&&!q.contains(h,"anaplanTabStatic")&&a.push(h);return a},onMouseDown:function(a){document.body.classList.contains("ap-gn-dropdown-expanded")||this.inherited(arguments)},onMouseMove:function(b){var c,d;if(!(this.isDragging&&
"Disabled"===this.targetState)){e.superclass.onMouseMove.call(this,b);c=a.manager();if(!this.isDragging&&this.mouseDown&&this.isSource&&(Math.abs(b.pageX-this._lastX)>this.delay||Math.abs(b.pageY-this._lastY)>this.delay))d=this.getSelectedNodes(),d.length&&c.startDrag(this,d,this.copyState(l.getCopyKeyState(b),!0));if(this.isDragging){d=!1;if(this.current){if(!this.targetBox||this.targetAnchor!==this.current)this.targetBox=h.position(this.current,!0);d=this.horizontal?b.pageX-this.targetBox.x<this.targetBox.w/
2===h.isBodyLtr(this.current.ownerDocument):b.pageY-this.targetBox.y<this.targetBox.h/2}if(this.current!==this.targetAnchor||d!==this.before)this._markTargetAnchor(d),b=this.targetAnchor&&q.contains(this.targetAnchor,"anaplanTabStatic"),b=!b&&(!this.current||c.source!==this||!(this.current.id in this.selection)),c.canDrop(b)}}}});b=n("anaplan.layout.ScrollingTabController",b,{buttonWidget:k,onSelectChild:function(){var a;this._selectedTab&&(a=r.getEnclosingWidget(this._selectedTab))&&a.closeMenu();
this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this._dndSource=new m(this.containerNode,{accept:[],withHandles:!1,horizontal:!0,autoSync:!0,delay:8,singular:!0});this.own(c.subscribe("/dnd/start",f.hitch(this,"_onDndStart")),c.subscribe("/dnd/drop",f.hitch(this,"_onDndDrop")),c.subscribe("/dnd/cancel",f.hitch(this,"_onDndCancel"),c.subscribe("anaplan/"+this.id+"/dashboardStateChange",f.hitch(this,"_onDashboardStateChange"))));var a=r.byId(this.id+"_Menu");if(a){a.addChild(new p({label:u.labelCloseAll,
ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(a){g.closeModelSpecificContent()}}));var b=this,d=new p({label:u.undockTab,ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang,textDir:this.textDir,onClick:function(a){b._detachChild(this.getParent().currentTarget)}});a.addChild(d);a.on("open",function(){var a=!0,b=r.byNode(this.currentTarget).page.getTabContent();b?b.canDetach&&(a=b.canDetach()):a=!1;d.setDisabled(!a)})}},uninitialize:function(){this._dndSource.destroy();
this._dndSource=null;this.inherited(arguments)},_detachChild:function(a){(a=r.getEnclosingWidget(a))&&a.page&&c.publish(this.containerId+"-detachChild",a.page)},_onDashboardStateChange:function(a){this._menuBtn&&(a=a.length?"anaplanTabStripMenuIconDashboardStateChanged":"dijitTabStripMenuIcon",this._menuBtn.get("iconClass")!==a&&this._menuBtn.set("iconClass",a))},_onDndCancel:function(){this._draggingTabButtonNode&&this._detachChild(this._draggingTabButtonNode);this._draggingTabButtonNode=null},_onDndDrop:function(a){this._draggingTabButtonNode&&
a!==this._dndSource&&this._detachChild(this._draggingTabButtonNode);this._draggingTabButtonNode=null},_onDndStart:function(a,b){a===this._dndSource&&(this._draggingTabButtonNode=b[0])}});b.TabButton=k;return b})},"anaplan/home/TableOfContents":function(){define("anaplan/constants anaplan/utils/JsHelper anaplan/api/service anaplan/home/TableOfContents/stateProvider anaplan/home/TableOfContents/DataProvider anaplan/anapediaKeys anaplan/utils/UrlHelper anaplan/common/SelectiveAccess dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/layout/_LayoutWidget dojo/_base/declare dojo/_base/lang dojo/dom-geometry dojo/dom-style dojo/query dojo/i18n!anaplan/nls/tableOfContents dojo/i18n!dijit/nls/loading dojo/text!anaplan/templates/TableOfContents.html".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w){return d([e,l,a],{testAttrName:"tableOfContents",baseClass:"tableOfContents",helpId:n.tableOfContents,templateString:w,loadingMessageLabel:m.loadingState,labelShowHidden:t.labelShowHiddenContent,constructor:function(){},postCreate:function(){this.inherited(arguments);this._dataProvider=new r;this._dataProvider.on("update",q.hitch(this,"update"))},destroy:function(){this._dataProvider.destroy();this.inherited(arguments)},hide:function(){},onSelection:function(a){},
layout:function(){var a=c(".footer",this.tableOfContentsWrapper),a=0===a.length?{h:0}:h.getMarginBox(a[0]),a=q.mixin(this._contentBox,{h:this._contentBox.h-a.h});h.setMarginBox(this.tableOfContentsWrapper,a)},resume:function(){this._dataProvider.resume()},_setSelectedById:function(a){this.setSelectedById(a);var b=[],b=k.functionalAreas.containsEntityLongId(a),c=p.getShowAllState(),b=b&&!c?k.model.query({modules:{props:["entityLongId"],query:{showInContents:!0,functionalAreaId:a}},dashboards:{props:["entityLongId"],
query:{showInContents:!0,functionalAreaId:a}}}).map(function(a){return a.entityLongId}):[a];this.onSelection(b)},setSelectedById:function(a){if(a){var c=b.tryParseInt(a);b.isNumber(c)?(a=k.views.getItemById(c),c=a.exists?a.moduleEntityLongId:c,this._ensureFunctionalAreaIsOpen(c),setTimeout(this.scrollToSelected.bind(this),0),p.setSelectedState(c)):(console.warn("Failed to set selected item in table of contents to:",a),p.setSelectedState(null))}else p.setSelectedState(null);this.update()},scrollToSelected:function(){var a=
c("li.selected",this.treeNode);1===a.length&&setTimeout(function(){var b=this.tableOfContentsWrapper.getBoundingClientRect(),c=a[0].getBoundingClientRect(),d=this.tableOfContentsWrapper.scrollTop+b.height,e=this.tableOfContentsWrapper.scrollTop+c.top;0>c.top?this.tableOfContentsWrapper.scrollTop=e-b.height/8:e>d&&(this.tableOfContentsWrapper.scrollTop=e-b.height/8)}.bind(this),310)},_ensureFunctionalAreaIsOpen:function(a){a=k.model.query({modules:{query:{entityLongId:a}},dashboards:{query:{entityLongId:a}}});
1===a.length&&p.setItemState(a[0].functionalAreaId,!0)},show:function(a){},showHelp:function(){var a=f.createAnapediaUrl(this.helpId);window.open(a,"_blank")},suspend:function(){this._dataProvider.suspend()},update:function(){this._update();u.set(this.waitMessage,"display","none");u.set(this.tableOfContentsWrapper,"visibility","visible")},_onFunctionalAreaChanged:function(a,b){p.setItemState(b,a);this.update()},_onShowHidden:function(a){p.setShowAllState(a)},toggleAll:function(){var a=p.getCollapseAllState();
p.resetItemStates();this._dataProvider.getData().forEach(function(b){p.setItemState(b.value,a)});this.update()},_update:function(){var a=p.getState(),b=this._dataProvider.getData(),c=s.isAuthorized(g.userActions.CAN_ACCESS_HIDDEN_CONTENT)||this._dataProvider.getEnableAccessToHiddenContent(),a={id:"toc",panelStates:a.closed,selected:a.selectedId,data:b,showHiddenLabel:t.labelShowHiddenContent,showHidden:c?a.showAll:!1,onShowHiddenChange:this._onShowHidden.bind(this),onSelectItem:this._setSelectedById.bind(this),
onPanelSelect:this._setSelectedById.bind(this),onPanelToggle:this._onFunctionalAreaChanged.bind(this),noDataLabel:t.messageNoContent,isShowingHiddenOption:c};App.interim.tableOfContents.showTableOfContents(this.treeNode,a)}})})},"anaplan/settings/Time2/Forms/Widgets/CurrentFiscalYearForWeeksSelect":function(){define("dojo/_base/array dijit/form/Select dojo/_base/declare dojo/data/ObjectStore dojo/i18n!dojo/cldr/nls/gregorian dojo/store/Memory dojo/string dojo/_base/kernel anaplan/utils/FiscalYearForWeeksHelper".split(" "),
function(g,b,k,p,r,n,f,s,l){return k(b,{sortByLabel:!1,labelType:"text",required:!0,startup:function(){this._initValue=this.value;this.inherited(arguments)},refreshValues:function(a,b,d,f){var h=this._getSelectedItem();this.set("store",this._getData(a,b,d,f));h?(a=this._getItem("period",h.period))?this.set("value",a.id):this.set("value",h.id):this._initValue&&this.set("value",this._initValue)},_getSelectedItem:function(){var a=this.getValue();return this._getItem("id",a)},_getItem:function(a,b){var d=
{};d[a]=b;return this.store&&(d=this.store.query(d),1===d.results[0].length)?d.results[0][0]:null},_getData:function(a,b,d,f){a=l.getData(a,b,d,f);a=new n({data:a});return new p({objectStore:a})}})})},"anaplan/settings/Time2/Forms/Widgets/FiscalYearLabelAlignmentWeeks":function(){define(["dojo/_base/declare","./FiscalYearLabelAlignment","anaplan/widgets/Tooltip","dojo/i18n!anaplan/nls/time","dojo/text!anaplan/templates/Settings/Time/Widgets/FiscalYearLabelAlignmentWeeks.html"],function(g,b,k,p,r){return g([b],
{templateString:r,i18n:p,postCreate:function(){this.tooltip=new k({label:p.fiscalYearStartHelpLabel,connectId:[this.iconNode],position:["below","above"],title:""});this.inherited(arguments)},destroy:function(){this.tooltip.destroy();this.inherited(arguments)}})})},"anaplan/view/Compare":function(){define("anaplan/utils/UIHelper anaplan/data/Aggregator dijit/_Contained dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-geometry dojo/dom-style anaplan/data/ModelContentCache anaplan/gridlet/Themes anaplan/common/ViewDefinition anaplan/constants anaplan/data/ModelContentHelper anaplan/Exceptions anaplan/utils/AxisHelper anaplan/utils/EntityLongIdHelper anaplan/utils/SelectorFactory anaplan/widgets/Dialog2 dojo/text!anaplan/templates/Compare.html dojo/i18n!anaplan/nls/compare dojo/i18n!dijit/nls/common dojo/i18n!dijit/nls/loading anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v){return s([r,p,n,x.ContentMixin,k],{baseClass:"dijitContentPane dijitBorderContainer-dijitContentPane dijit dijitReset dijitLeft compare",widgetsInTemplate:!0,templateString:A,constructor:function(a){this._connections=[];this._comparisonEntity=null;this._pageInfo=a.pageInfo;this._gridController=a.gridController},onAfterCompare:function(){},onBeforeCompare:function(){},onCancel:function(){},onDialogShow:function(){this.inherited(arguments);
this._pageInfo&&this._populateDimensionSelector(this._pageInfo)},onError:function(){},postCreate:function(){this.inherited(arguments);g.setText(this.loadingLabel,v.loadingState);g.setText(this.comparisonBaseLegend,B.labelComparisonBase);g.setText(this.comparisonPreviousVersionLabel,B[u.viewComparisonBase.PREVIOUS_VERSION]);g.setText(this.comparisonSpecificBaseLabel,B[u.viewComparisonBase.SPECIFIC_BASE]);g.setText(this.comparisonModeLegend,B.labelComparisonMode);g.setText(this.comparisonValueLabel,
B.labelValue);g.setText(this.comparisonDiffLabel,B.labelDiff);g.setText(this.comparisonPercLabel,B.labelPerc);g.setText(this.comparisonPercDiffLabel,B.labelPercDiff);g.setText(this.useColourCodingLabel,B.labelUseColourCoding);this.okButton.set("label",y.buttonOk);this.cancelButton.set("label",y.buttonCancel);this._onComparisonPreviousVersionClick()},startup:function(){try{this.inherited(arguments),this.comparisonValue.checked=!0,this.comparisonPreviousVersion.checked=!0,this.useColourCoding.checked=
!0}catch(a){throw new t.ClientException("anaplan.view.Compare: startup",a,{widgetId:this.id});}},uninitialize:function(){this._resetTree()},_createOption:function(a,b){var c=document.createElement("option");c.text=b;c.value=a;try{this.dimensionSelector.add(c,null)}catch(d){this.dimensionSelector.add(c)}},_isValidDimension:function(a){return!a||m.isLineItemsSystemAxisIdentifier(a)||m.isEmptySystemAxisIdentifier(a)?!1:!0},_onDimensionSelectorChange:function(){try{this._resetTree();var a=this.dimensionSelector.options[this.dimensionSelector.selectedIndex].value,
b=this._pageInfo;c.axisSpecificationContains(b.rowAxisSpecification,a)||c.axisSpecificationContains(b.columnAxisSpecification,a)?this._gridController.getLabelPage(a,l.hitch(this,"_rebuildTreeWithRowCount"),void 0,w.entityLongIdsToEntityLongIdIdentifiers(b.staticContext.entityLongIds[0])):this._gridController.getSelectorLabelPage(a,l.hitch(this,"_rebuildTree"))}catch(d){console.error(d)}},_onCancel:function(a){this.onCancel()},_onCompare:function(){this.onBeforeCompare();for(var a,c,d,e=[this.comparisonPreviousVersion,
this.comparisonSpecificBase],f=0;f<e.length;f++)if(e[f].checked){a=e[f].value;break}e=[this.comparisonValue,this.comparisonDiff,this.comparisonPerc,this.comparisonPercDiff];for(f=0;f<e.length;f++)if(e[f].checked){d=e[f].value;break}a==u.viewComparisonBase.SPECIFIC_BASE&&(c=w.entityLongIdToEntityLongIdIdentifier(this._comparisonEntity.entityLongId));a={comparisonBase:a,comparisonIdentifier:c||"",comparisonMode:d,useComparisonColourCoding:this.useColourCoding.checked};c=new h(this._gridController.getViewDefinition());
c.getConditionalFormattingIsActive()&&c.setConditionalFormattingIsActive(!1);a=l.mixin(c,a);this._gridController.setViewDefinition(a);b.gather();this.onAfterCompare()},_onComparisonPreviousVersionClick:function(){this.okButton.set("disabled",!1);this.specificVersionSelectorPanel.style.visibility="hidden"},_onComparisonSpecificVersionClick:function(){this.okButton.set("disabled",!0);this.specificVersionSelectorPanel.style.visibility=""},_populateDimensionSelector:function(a){for(var b=c.getAllDimensionIdentifiersForPageInfo(a),
e=b.length,h=0;h<e;h++){var f=b[h];if(this._isValidDimension(f)){var m=null,m=c.axisSpecificationContains(a.rowAxisSpecification,f)||c.axisSpecificationContains(a.columnAxisSpecification,f)?f:c.getCurrentPageEntityLongId(a,h,0);this._createOption(m,c.getLabelForDimensionIdentifier(d,f))}}0<b.length&&this._onDimensionSelectorChange()},_rebuildTree:function(b){if(!this.domNode||0>=a.getMarginBox(this.domNode).w)console.warn("anaplan.view.Compare: cannot rebuild tree");else{var c=this,d=a.getContentBox(this.memberSelector);
this._tree=z.createSelector({widgetContainer:this.memberSelector,style:"width: "+d.w+"px; height: "+d.h+"px;",labelPage:b,onSelectionChange:function(a,b){c._comparisonEntity={entityLongId:a,label:b};c.okButton.set("disabled",!1)},themeId:q.getGridSelectorTheme()});this.loading.style.display="none"}},_rebuildTreeWithRowCount:function(a,b){this._rebuildTree(b)},_resetTree:function(){this._comparisonEntity=null;f.forEach(this._connections,function(a){a.remove()});this._tree&&this._tree.destroy();this.loading.style.display=
"";e.set(this.memberSelector,"overflow","hidden")}})})},"anaplan/settings/View":function(){define("anaplan/api/service anaplan/anapediaKeys anaplan/constants anaplan/data/Aggregator anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/Exceptions anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/_editor/RemoteModelEditor anaplan/gridlet/GridletFactory anaplan/gridlet/Selection anaplan/gridlet/Themes anaplan/gridlet/ViewRequestGridModel anaplan/layout/ManagedContainer anaplan/toolbar/_ButtonsMixin anaplan/utils/ChangeValidator anaplan/utils/EntityLongIdHelper anaplan/utils/SelectionHelper anaplan/utils/SubmissionHandler anaplan/utils/UIHelper anaplan/validators/GeneralListsValidator anaplan/validators/RemoteModelsValidator anaplan/validators/VersionsValidator anaplan/view/BulkCopy anaplan/view/Export anaplan/view/ManageImportSources anaplan/widgets/Button anaplan/widgets/DropDownButton anaplan/widgets/MenuItem anaplan/widgets/ColourPaletteMenuItem anaplan/widgets/SearchToolbarButton dijit/Menu dijit/MenuSeparator dijit/PopupMenuItem dijit/Toolbar dijit/ToolbarSeparator dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-class dojo/i18n!anaplan/nls/bulkCopy dojo/i18n!anaplan/nls/common dojo/i18n!anaplan/nls/exportLabels dojo/i18n!anaplan/nls/manageImportSources dojo/i18n!anaplan/nls/modules dojo/i18n!anaplan/nls/remoteModelEditor dojo/i18n!anaplan/nls/toolbar dojo/json dojo/on dojo/topic".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I,P,J,O,T,Q,ca,Z,X,V,da,S,$,M,aa,W,Y){return O([h,u],{gutters:!1,liveSplitters:!1,_numDataRows:0,constructor:function(a){var b=a.content[0];this._workspaceId=b.workspaceId;this._modelId=b.modelId;this._viewDefinition=b.viewDefinition;this._hideToolbar=b.hideToolbar||!1;this._gridlet=null;this._modelContent=a.modelContent;this._model=a.model||new q({workspaceId:this._workspaceId,modelId:this._modelId,viewDefinition:this._viewDefinition});
this._showTipsOnStartup=a.showTipsOnStartup;this._globalFormulaEditModule=a.globalFormulaEditModule},postCreate:function(){this.inherited(arguments);this.own(Y.subscribe("anaplan/formula/startGlobalEdit",T.hitch(this,"_setGlobalFormulaEditModule")),Y.subscribe("anaplan/formula/endGlobalEdit",T.hitch(this,"_setGlobalFormulaEditModule")))},resume:function(){this.inherited(arguments)},startup:function(){this._started&&console.warn("startup "+this.id);try{this.inherited(arguments);this._hideToolbar||
(this._toolbar=this._createToolbar(),this.addChild(this._toolbar));var b=null;if(n.axisSpecificationContains(this._viewDefinition.columnAxisSpecification,k.SYSTEM_AXIS_IDENTIFIER_HIERARCHY_PROPERTY_IDENTIFIER)||this._viewDefinition.columns==k.SYSTEM_AXIS_IDENTIFIER_HIERARCHY_PROPERTY_IDENTIFIER)b=new c({validators:[new x]});if(n.axisSpecificationContains(this._viewDefinition.columnAxisSpecification,k.SYSTEM_AXIS_IDENTIFIER_VERSION_PROPERTY_IDENTIFIER)||this._viewDefinition.columns==k.SYSTEM_AXIS_IDENTIFIER_VERSION_PROPERTY_IDENTIFIER)b=
new c({validators:[new B]});if(n.axisSpecificationContains(this._viewDefinition.columnAxisSpecification,k.SYSTEM_AXIS_IDENTIFIER_REMOTE_MODEL_PROPERTY_IDENTIFIER)||this._viewDefinition.columns===k.SYSTEM_AXIS_IDENTIFIER_REMOTE_MODEL_PROPERTY_IDENTIFIER)b=new c({validators:[new A]});this._gridlet=(new a({editorFactory:new s})).createGridlet({region:"center",defaultColumnWidth:150,model:this._model,changeValidator:b,readOnly:this._modelContent.entityLongId===k.MODEL_CONTENT_REMOTE_MODEL_ENTITY_LONG_ID});
this._selectionEstablished=!1;this.addChild(this._gridlet);var d=W(this._gridlet,"SelectionChange",T.hitch(this,"_onSelectionChange")),e=W(this._gridlet,"Update",T.hitch(this,"_onUpdate")),h=W(this._gridlet,"reset",T.hitch(this,"_reset"));this.own(d,e,h);p.gather();this._searchButton&&(this._searchButton.set("model",this._model),this._searchButton.set("widget",this._gridlet));this._gridlet.focus()}catch(f){console.error(f)}},uninitialize:function(){this.inherited(arguments)},_createBulkCopyButton:function(){var a=
new C({iconClass:"anaplanEditorIcon anaplanEditorIconBulkCopy",label:M.labelBulkCopy,showLabel:!0,"data-anaplan-element-name":"toolbar-button-bulk-copy"}),b=a.on("click",T.hitch(this,function(){this._displayBulkCopyDialog()}));this.own(b);return a},_createImportButton:function(){var a=new C({iconClass:"anaplanEditorIcon anaplanEditorIconImport",label:M.labelImport,showLabel:"true","data-anaplan-element-name":"toolbar-button-import"}),b=a.on("click",T.hitch(this,function(){this._displayManageSourcesDialog()}));
this.own(b);return a},_createOpenDashboardButton:function(){var a=new C({label:M.labelOpen,iconClass:"anaplanEditorIcon anaplanEditorIconOpen","data-anaplan-element-name":"toolbar-button-open"}),b=a.on("click",T.hitch(this,"_doOpenDashboard"));this.own(b);return a},_createOpenHierarchyButton:function(){var a=new C({label:S.buttonOpenModule,iconClass:"anaplanModuleIcon anaplanModuleIconGreenOpen","data-anaplan-element-name":"toolbar-button-open"}),b=a.on("click",T.hitch(this,"_doOpenHierarchy"));this.own(b);
return a},_createEditRemoteModelDefinitionButton:function(){var a=new C({label:M.labelEditRemoteModelDefinition,iconClass:"anaplanEditorIcon anaplanEditorIconEdit","data-anaplan-element-name":"toolbar-button-edit-remote-model-definition"});this.own(W(a,"click",T.hitch(this,"_doEditRemoteModelDefinition")));return a},_createRemoveRemoteModelDefinitionButton:function(){var a=new C({label:M.labelRemoveRemoteModelDefinition,iconClass:"anaplanEditorIcon anaplanEditorIconDeleteRow","data-anaplan-element-name":"toolbar-button-remove-remote-model-definition"});
this.own(W(a,"click",T.hitch(this,"_doRemoveRemoteModelDefinition")));return a},_createSearchButton:function(){return new D({iconClass:"anaplanEditorIcon anaplanEditorIconSearch",label:M.labelSearch,showLabel:!1,"data-anaplan-element-name":"toolbar-button-search"})},disableGlobalGridStyleFlyOutMenu:function(){this._gridStylesMenu&&this._gridStylesMenu.set("disabled",!0)},enableGlobalGredStyleFlyOutMenu:function(){this._gridStylesMenu&&this._gridStylesMenu.set("disabled",!1)},_changeTheme:function(a){for(var b=
this._gridStylesMenu.getChildren(),c=b.length,d=null;c--;)d=b[c],d.set("iconClass",d.themeId===a?"checked-yes":"checked-no")},_createStyleCheckedMenuItem:function(a,b){var c=this,e=null,h=a.toLowerCase(),e=new L({iconClass:"anaplan-checked-menu-item checked-"+(b?"yes":"no"),label:M["labelThemeName"+h],themeId:h}),h=W(e,"Click",function(){var a=T.hitch(c,c._changeTheme);c.disableGlobalGridStyleFlyOutMenu();d.setDefaultTheme(e.themeId,c.enableGlobalGredStyleFlyOutMenu,c);a(e.themeId)});this.own(h);
return e},_createDashboardTouchFriendlySpacingMenuItem:function(){var a=g.model.getModelProperty(k.MODEL_PROPERTY_NAMES.DASHBOARD_TOUCH_FRIENDLY_SPACING),a=new L({iconClass:"anaplan-checked-menu-item checked-"+(a?"yes":"no"),label:M.labelDashboardTouchFriendlySpacing,propertyValue:!0}),b=W(a,"click",function(){var a="anaplan-checked-menu-item checked-yes"===this._dashboardTouchFriendlySpacingMenuItem.get("iconClass")?!1:!0;g.model.setModelProperty(k.MODEL_PROPERTY_NAMES.DASHBOARD_TOUCH_FRIENDLY_SPACING,
a).then(function(a){g.model.getModelProperty(k.MODEL_PROPERTY_NAMES.DASHBOARD_TOUCH_FRIENDLY_SPACING);this._dashboardTouchFriendlySpacingMenuItem.set("iconClass","anaplan-checked-menu-item checked-"+(a?"yes":"no"))}.bind(this))}.bind(this));this.own(b);return a},_createGridStylesMenu:function(){for(var a=!1,b=new N({style:"display: none;"}),c=d.getThemeNames(!0),e="",h=c.length,f=d.getDefaultThemeIdFromModelProperties(!0),m=0;m<h;m++)e=c[m],a=e===f,b.addChild(this._createStyleCheckedMenuItem(e,a));
return b},_createViewDropDownButton:function(){var a=new N({style:"display: none;"});this._gridStylesMenu=this._createGridStylesMenu();a.addChild(new H({label:M.labelGlobalDefaultGridStyle,popup:this._gridStylesMenu}));var b=this._createChartColoursMenu();b&&a.addChild(b);this._dashboardTouchFriendlySpacingMenuItem=this._createDashboardTouchFriendlySpacingMenuItem();a.addChild(this._dashboardTouchFriendlySpacingMenuItem);return new G({label:M.menuView,dropDown:a,"data-anaplan-element-name":"toolbar-button-view"})},
_createChartColoursMenu:function(){return new H({label:M.labelChartTheme,popup:this._createChartColoursSubMenu()})},_createChartColoursSubMenu:function(){var a=this,b=new N({style:"display: none;",onOpen:function(){b.destroyDescendants();var c=g.model.lastModelActiveState,d=App.interim.getReduxState().chartColours,c=c!==k.ACTIVE_STATE_UNLOCKED&&c!==k.ACTIVE_STATE_MAINTENANCE;J.forEach(a._createPaletteMenuItems(d.colourPalettes,d.themePaletteId,c),function(a){b.addChild(a)});b.addChild(new F);b.addChild(new L({disabled:c,
label:M.labelEditCustomPalette,onClick:function(){App.interim.getReduxDispatch()(App.interim.chartColours.openEditCustomColourPaletteModal())}}))}});return b},_createPaletteMenuItems:function(a,b,c){var d=[],e=this;J.forEach(a,function(a){var h=new K({iconClass:"anaplan-checked-menu-item "+(a.id===b?"checked-yes":"checked-no"),label:a.label,paletteId:a.id,paletteColours:a.colours,disabled:c});e.own(W(h,"click",T.hitch(e,function(){App.interim.getReduxDispatch()(App.interim.chartColours.setThemePaletteFromDojo(a.id))})));
d.push(h)});return d},_createToolbar:function(){var a=this._modelContent.entityLongId,b=new I({region:"top"});ca.add(b.domNode,"qa-toolbar");var c=k.MODEL_CONTENT_HIERARCHY_ENTITY_LONG_ID===a,d=k.MODEL_CONTENT_REMOTE_MODEL_ENTITY_LONG_ID===a;k.MODEL_CONTENT_DASHBOARD_ENTITY_LONG_ID===a?(this._viewDropDownButton=this._createViewDropDownButton(),b.addChild(this._viewDropDownButton),b.addChild(new P),this._openButton=this._createOpenDashboardButton(),b.addChild(this._openButton),b.addChild(new P)):c?
(this._openHierarchyButton=this._createOpenHierarchyButton(),b.addChild(this._openHierarchyButton),b.addChild(new P)):d&&(this._editRemoteModelDefinitionButton=this._createEditRemoteModelDefinitionButton(),b.addChild(this._editRemoteModelDefinitionButton),this._removeRemoteModelDefinitionButton=this._createRemoveRemoteModelDefinitionButton(),b.addChild(this._removeRemoteModelDefinitionButton),b.addChild(new P));this._modelContent.entityTypeIndex!==k.ACTION_ENTITY_TYPE_INDEX&&!d&&(this._insertButton=
this._createInsertButton(),b.addChild(this._insertButton),this._deleteButton=this._createDeleteButton(),b.addChild(this._deleteButton),this._reOrderButton=this._createReOrderButton(),b.addChild(this._reOrderButton),this._insertDeleteMoveSeparator=new P,b.addChild(this._insertDeleteMoveSeparator),J.forEach([this._insertButton,this._deleteButton,this._moveButton,this._reOrderButton],function(a){a&&(a.show(),a.set("disabled",!0),a.set("showLabel",!0))}));k.MODEL_CONTENT_VERSION_ENTITY_LONG_ID===a?(this._bulkCopyButton=
this._createBulkCopyButton(),b.addChild(this._bulkCopyButton),this._bulkCopySeparator=new P,b.addChild(this._bulkCopySeparator),this._importButton=this._createImportButton(),b.addChild(this._importButton)):b.addChild(new P);this._exportButton=this._createExportButton();b.addChild(this._exportButton);this._importExportSeparator=new P;b.addChild(this._importExportSeparator);this._refreshButton=this._createRefreshButton();b.addChild(this._refreshButton);b.addChild(new P);this._searchButton=this._createSearchButton();
b.addChild(this._searchButton);return b},_displayBulkCopyDialog:function(){try{var a=z.getSharedDialog(),c=new y({workspaceId:this._workspaceId,modelId:this._modelId});a.set("title",Z.titleBulkCopy);a.set("refocus",!1);a.set("content",c.domNode);var d=W(c,"Cancel",function(){a.onCancel()});this.own(d);var e=W(c,"AfterCopy",function(){a.hide()});this.own(e);a.setHelpContent(b.bulkCopy);a.show()}catch(h){z.throwClientException(this,h)}},_displayExportDialog:function(){try{var a=z.getSharedDialog(),
b=new v({modelId:this._modelId,viewDefinition:this._viewDefinition,pageInfo:this._model.getPageInfo(),hierarchyId:this._modelContent.label});a.set("title",V.titleExport);a.set("refocus",!1);a.set("content",b.domNode);var c=W(b,"AfterExport",function(){a.hide()});this.own(c);var d=W(b,"Cancel",function(){a.onCancel()});this.own(d);a.show()}catch(e){z.showErrorReporter(new f.ClientException(null,e,{widgetId:this.id}))}},_displayManageSourcesDialog:function(){try{var a=z.getSharedDialog();a.set("title",
da.titleSelectSource);a.set("refocus",!1);var c=new E({workspaceId:this._workspaceId,modelId:this._modelId,importType:k.importType.VERSIONS,targetId:t.entityLongIdToEntityLongIdIdentifier(this._modelContent.entityLongId)});a.set("content",c.domNode);var d=W(c,"Close",function(){a.onCancel()});this.own(d);a.setHelpContent(b.manageImportSources);a.show()}catch(e){z.throwClientException(this,e)}},_doEditRemoteModelDefinition:function(){try{var a=this._getSingleSelectedRowIndexForEntityTypeIndices([k.REMOTE_MODEL_ENTITY_TYPE_INDEX,
k.UNMAPPED_REMOTE_MODEL_ENTITY_TYPE_INDEX]);if(!(0>a)){var c=this._getRemoteModelDefinitionCell(a),d=aa.parse(c.cellValue),e=this._model.getRow(a),h=new l(T.mixin(d,{escapedRemoteModelLabel:e.label[0],remoteModelEntityLongId:e.entityLongIds[0]})),m=z.getSharedDialog();m.reset();m.set("title",$.titleEditor);m.set("refocus",!1);m.set("content",h.domNode);m.setHelpContent(b.remoteModels);this.own(W(h,"Cancel",function(){m.onCancel()}),W(h,"Change",T.hitch(this,function(b){m.onCancel();this._doRemoteDefinitionUpdate(a,
aa.stringify(b))})));m.show()}}catch(g){z.showErrorReporter(new f.ClientException(null,g,{widgetId:this.id}))}},_doRemoveRemoteModelDefinition:function(){try{var a=this._getSingleSelectedRowIndexForEntityTypeIndices([k.REMOTE_MODEL_ENTITY_TYPE_INDEX]);0>a||this._doRemoteDefinitionUpdate(a,"")}catch(b){z.showErrorReporter(new f.ClientException(null,b,{widgetId:this.id}))}},_doRemoteDefinitionUpdate:function(a,b){this._editRemoteModelDefinitionButton&&this._editRemoteModelDefinitionButton.set("disabled",
!0);this._removeRemoteModelDefinitionButton&&this._removeRemoteModelDefinitionButton.set("disabled",!0);var c=new e({});c.initializeToDefaults();var d=c.currentCell;d.x.setEntityLongIds([k.SYSTEM_PROPERTY_REMOTE_MODEL_DEFINITION]);var h=this._model.getRow(a);d.y.setEntityLongIds(h.entityLongIds);d=this._getGridController().endCellEdit({currentCell:d,value:b});this._gridlet._applyValuesUpdate(d,c);var f=Q.after(this._gridlet,"onUpdate",T.hitch(this,function(){if(this._gridlet._selection){var a=(new e({})).initializeToDefaults();
this._gridlet.setCurrentSelection(a)}f.remove()}))},_getSingleSelectedRowIndexForEntityTypeIndices:function(a){var b=this._gridlet;if(!b)return-1;b=b._selection;if(!b)return-1;var c=this._getSelectionObjectForGridletSelection(b);if(!c.count)return-1;c=c.entityLongIds[0];if(1<c.length)return-1;c=t.getEntityTypeIndex(c[0]);if(-1===J.indexOf(a,c))return-1;a=b.currentCell;b=this._getGridController();return a.getStartRowIndex(b.getContext())},_doOpenHierarchy:function(){try{var a=this._gridlet;if(a){for(var b=
m.getSelection(a._selection,a._gridController.getContext()),a=[],c=b.count,d=0;d<c;d++)a.push({entityId:b.entityIds[0][d],entityLongId:b.entityLongIds[0][d],label:b.labels[0][d],helpId:"lists-and-roll-ups"});a.length&&(1<a.length&&console.warn("Settings cant open more than one at a time"),Y.publish("anaplan/settings/selectnode",a[0].entityLongId))}}catch(e){z.throwClientException(this,e)}},_doOpenDashboard:function(){try{for(var a=this._gridlet,b=m.getSelection(a._selection,a._gridController.getContext()),
c=b.count,a=[],d=0;d<c;d++)a.push(b.entityLongIds[0][d]);0<a.length&&Y.publish("anaplan/views",a)}catch(e){z.showErrorReporter(new f.ClientException(this.declaredClass+"_doOpenDashboard",e,{widgetId:this.id}))}},_enableButtons:function(a){if(this._toolbar){var b=!1,c=!1,d=!1,e=0;a&&(c=this._gridlet._gridController,b=m.getSelection(a,c.getContext()),d=a.isWholeColumnSelected(),c=m.canReOrder(a,c.getContext()),e=b.count,b=!(this._model?!this._model.getRowCount()&&!this._model.getColumnCount():1)&&!d);
this._openButton&&this._openButton.get("disabled")==b&&this._openButton.set("disabled",!b);this._bulkCopyButton&&this._bulkCopyButton.get("disabled")==b&&this._bulkCopyButton.set("disabled",!b);this._openHierarchyButton&&this._openHierarchyButton.set("disabled",1!==e||d);this._importButton&&this._importButton.set("disabled",!1);this._exportButton&&this._exportButton.set("disabled",!1);this._searchButton&&this._searchButton.set("disabled",!1);this._viewDropDownButton&&this._viewDropDownButton.set("disabled",
!1);this._reOrderButton&&this._reOrderButton.set("disabled",!c);this._editRemoteModelDefinitionButton&&this._removeRemoteModelDefinitionButton&&(d=this._getSingleSelectedRowIndexForEntityTypeIndices([k.REMOTE_MODEL_ENTITY_TYPE_INDEX,k.UNMAPPED_REMOTE_MODEL_ENTITY_TYPE_INDEX]),d=-1<d?this._getRemoteModelDefinitionCell(d):null,d=null!==d?d.isEditable:!1,this._editRemoteModelDefinitionButton.set("disabled",!d),c=this._getSingleSelectedRowIndexForEntityTypeIndices([k.REMOTE_MODEL_ENTITY_TYPE_INDEX]),
this._removeRemoteModelDefinitionButton.set("disabled",!d||-1===c));this.inherited(arguments)}},_getGridController:function(){return!this._gridlet?null:this._gridlet.getGridController()},_getRemoteModelDefinitionCell:function(a){var b=null;try{if(-1<a){var c=(new e({})).initializeToDefaults().currentCell;c.x.setEntityLongIds([k.SYSTEM_PROPERTY_REMOTE_MODEL_DEFINITION]);var d=this._getGridController(),h=c.getStartColumnIndex(d.getContext()),b=this._model.getCell(a,h)}}catch(f){console.warn(this.id,
"_getRemoteModelDefinitionIsEditable defaulting to return false",f)}finally{return b}},_getSelectionObjectForGridletSelection:function(a){if(!a)return null;var b=this._getGridController();return!b?null:m.getSelection(a,b.getContext())},_isFormulaEditMode:function(){return null!==this._globalFormulaEditModule},_onSelectionChange:function(a){this._enableButtons(a);if(this._selectionEstablished&&this._isFormulaEditMode()){var b=this._getGridController();m.publishExpression(a,b.getContext(),this._globalFormulaEditModule)}this._selectionEstablished=
!0},_onUpdate:function(){var a=this._getNumDataRows();(this._gridlet&&!this._gridlet._selection||0===this._numDataRows&&0<a||0<this._numDataRows&&0===a)&&this._gridlet._gridController.setBestSelection();this._numDataRows=a},_reset:function(){this._toolbar&&this._disableButtons(this._toolbar)},_setGlobalFormulaEditModule:function(a){this._globalFormulaEditModule=a},_getNumDataRows:function(){var a=0;this._gridlet&&(this._gridlet._sizer&&void 0!==typeof this._gridlet._sizer._dataRowCount)&&(a=this._gridlet._sizer._dataRowCount);
return a}})})},"anaplan/home/Workflow/StatusConfirmationForm":function(){define("anaplan/utils/UIHelper anaplan/widgets/Dialog2 dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/event dojo/i18n!anaplan/nls/workflow dojo/i18n!dijit/nls/common dojo/keys dojo/text!anaplan/templates/Workflow/WorkflowStatusConfirmationForm.html dijit/form/CheckBox anaplan/widgets/Button".split(" "),function(g,b,k,p,r,n,f,s,l,a,e){return n("anaplan.home.Workflow.StatusConfirmationForm",
[p,k,r,b.ContentMixin],{baseClass:"workflowStatusConfirmationForm",tabIndex:-1,templateString:e,workflowItemEntityLongId:null,workflowStatusEntityLongId:null,newStatusText:null,resetDescendents:!1,lblOk:l.buttonOk,lblCancel:l.buttonCancel,lblReset:s.workflowStatusConfirmationResetDescendentsLabel,constructor:function(){},onCancel:function(){},onOk:function(){},_onShow:function(){this.okButton.focus()},postCreate:function(){this.inherited(arguments);var a=s.workflowStatusConfirmationLabel,a=a.replace("%s",
this.newStatusText);g.setText(this.confirmationFormTitle,a)},_onKeyDown:function(b){b.keyCode===a.ESCAPE&&(this._onCancel(),f.stop(b))},_onKeyPress:function(a){a.currentTarget===this.domNode&&a.stopPropagation()},_onOk:function(){this.resetDescendents=this.checkBoxResetDescendents.get("checked");this.onOk()},_onOkButtonClick:function(){this._onOk()},_onCancel:function(){this.onCancel()},_onCancelButtonClick:function(){this._onCancel()}})})},"anaplan/home/TableOfContents/stateProvider":function(){define(["anaplan/constants",
"anaplan/utils/getLocalStorage"],function(g,b){function k(){var b=r.getItem(g.TOC_LOCAL_STATE_KEY);return b?JSON.parse(b):{}}function p(b){if(!window.modelId||!b)console.warn("Saving persisted local state failed",b,window.modelId);else{var f=k();f[window.modelId]=b;r.setItem(g.TOC_LOCAL_STATE_KEY,JSON.stringify(f))}}var r=b();return{getState:function(){var b=k();if(!b.hasOwnProperty(window.modelId))return{closed:{},showAll:!1};b=b[window.modelId];return!b.closed?{closed:b,showAll:!1}:b},getItemState:function(b){return this.getState()[b]},
setItemState:function(b,f){var g=this.getState();g.closed[b]=f;p(g)},resetItemStates:function(){var b=this.getState();b.closed={};p(b)},getCollapseAllState:function(){var b=this.getState().closed;return b&&0<Object.keys(b).length?0.5<=Object.keys(b).filter(function(f){return!1===b[f]}).length/Object.keys(b).length:!1},setShowAllState:function(b){var f=this.getState();f.showAll=b;p(f)},getShowAllState:function(){return this.getState().showAll},setSelectedState:function(b){var f=this.getState();f.selectedId=
b;p(f)},getSelectedState:function(){return this.getState().selectedId}}})},"anaplan/settings/Dashboards/PersonalViews":function(){define("anaplan/api/service anaplan/constants anaplan/layout/ManagedContainer anaplan/react/_ReactContainerMixin anaplan/common/SelectiveAccess anaplan/data/ModelContentCache dojo/_base/declare dojo/_base/lang anaplan/utils/UIHelper anaplan/Exceptions dojo/topic dojo/i18n!anaplan/nls/tableOfContents dojo/dom-style".split(" "),function(g,b,k,p,r,n,f,s,l,a,e,d,q){return f([k,
p],{gutters:!1,liveSplitters:!1,containerId:"personalViewsContainer",scrollbarWidth:null,tableContainer:null,isTabActive:!1,constructor:function(a){n.addObserver(this)},destroy:function(){this.inherited(arguments);n.deleteObserver(this)},postCreate:function(){this._started||(this.inherited(arguments),this.setComponentType(App.components.PersonalViewsContainerAdapter),this.scrollbarWidth=this.getStoreState().browser.browserInfo.scrollbarWidth||16,this._renderContainer())},startup:function(){this.inherited(arguments)},
resize:function(a){this.inherited(arguments);this._updateTableHeight()},update:function(){this.isTabActive&&App.interim.personalViews.triggerUpdate(window.App.interim.getReduxDispatch(),this._getDashboardsFromMcc(),this._arePersonalViewsEnabled(),r.isModelLocked())},onShow:function(){this.isTabActive=!0;App.interim.personalViews.triggerLoad(window.App.interim.getReduxDispatch(),this._getDashboardsFromMcc(),this._arePersonalViewsEnabled(),r.isModelLocked(),window.modelId);this._updateTableHeight()},
onHide:function(){this.isTabActive=!1},_handleDashboardClick:function(a){e.publish("anaplan/dashboard",a,{result:{},task:{},gatherRequired:!0})},_togglePersonalViews:function(a){a=!a;App.interim.personalViews.triggerDidToggle(window.App.interim.getReduxDispatch(),a,r.isModelLocked());g.model.setModelProperty(b.MODEL_PROPERTY_NAMES.PERSONAL_SAVED_DASHBOARDS,a,!1)},_renderContainer:function(){this.renderReact({onTogglePersonalViews:this._togglePersonalViews.bind(this),onDashboardClick:this._handleDashboardClick,
onPostUpdate:this._updateTableHeight.bind(this)})},_getDashboardsFromMcc:function(){return g.model.query({functionalAreas:{merge:[{entityLongId:-1,entityId:d.labelOtherContents}],children:{dashboards:{query:{functionalAreaId:"parent.entityLongId"},rename:{entityLongId:"id",entityId:"name"},props:["name","id"]}},rename:{entityId:"name",entityLongId:"id"},props:["name","id"]}})},_arePersonalViewsEnabled:function(){return!0===g.model.getModelProperty(b.MODEL_PROPERTY_NAMES.PERSONAL_SAVED_DASHBOARDS)},
_updateTableHeight:function(){var a=this.containerNode.querySelector(".table-container");if(null!==a){var b=72;this.containerNode.clientWidth!==this.containerNode.scrollWidth&&(b+=this.scrollbarWidth);q.set(a,"maxHeight",this.containerNode.offsetHeight-b+"px")}}})})},"anaplan/settings/Time2/Forms/Widgets/YearsSpinner":function(){define(["dojo/_base/declare","dijit/form/NumberSpinner"],function(g,b){return g(b,{testableName:"yearsspinner",intermediateChanges:!0})})},"anaplan/settings/TimeRanges/InsertTimeRangesDialog":function(){define("dijit/Destroyable dojo/Evented anaplan/utils/UIHelper anaplan/settings/TimeRanges/TimeRangeEditor dojo/_base/declare dojo/_base/lang dojo/on dojo/i18n!anaplan/nls/timeRanges anaplan/widgets/Dialog2".split(" "),
function(g,b,k,p,r,n,f,s,l){return r([b,g],{entityTypeClass:"SYSTEM",_dialog:null,timeout:250,constructor:function(a,b,d){this.inherited(arguments);var g=new p(a,b,d,!0);this._dialog=new l({title:s.titleInsertDialog,"class":"anaplanBlueDialog qa-dialog-insert-time-range",resizeContentsToFitViewport:!0,content:g.domNode});this._handleHide=f(this._dialog,"Hide",function(){this.destroy()}.bind(this));this._handleCancel=f(g,"Cancel",function(){this.destroy()}.bind(this));this._handleConfirm=f(g,"Confirm",
function(a){this.emit("confirm",a)}.bind(this))},show:function(){this._dialog.show()},hide:function(){this._dialog.hide()},setHelpContent:function(a,b){this._dialog.setHelpContent(a,b)},destroy:function(){this._handleHide.remove();this._handleCancel.remove();this._handleConfirm.remove();var a=this._dialog,b=setInterval(function(){"none"===a.domNode.style.display&&(clearInterval(b),a.set("content",null),a.destroy())},this.timeout);this.hide();this.inherited(arguments)}})})},"anaplan/settings/Time2/Form":function(){define("anaplan/constants dojo/topic dojo/Evented dojo/dom-construct ./CurrentPeriodDataProvider ./TimeDataTransform ./Forms/FourWeekPeriods ./Forms/MonthsQuartersYears ./Forms/Weeks445 ./Forms/WeeksGeneral ./Forms/Widgets/SelectWithData anaplan/Exceptions anaplan/utils/UIHelper anaplan/utils/JsHelper anaplan/utils/TestAttributesHelper dijit/_Contained dijit/_Container dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/_FormMixin dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/time dojo/i18n!dijit/nls/common dojo/text!anaplan/templates/Settings/Time/Form.html dojo/_base/sniff".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E){return A([w,m,z,c,t,x,k],{testableRoot:!0,testableName:"time",baseClass:"timeSettings",templateString:E,region:"center",_formConstructors:{"Calendar Months/Quarters/Years":s,"Weeks: 4-4-5, 4-5-4 or 5-4-4":l,"Weeks: General":a,"Weeks: 13 4-week Periods":f},i18n:y,lblButtonCancel:v.buttonCancel,constructor:function(){this._forms={}},postCreate:function(){this.inherited(arguments);this._addSeleniumAttr();this._attach()},isValid:function(){return this._curForm.isValid()},
updateForm:function(a){this._startingCalendarType=a.value.timeCalendarType;this._data=a;this.ddlTimeCalendar?this.reset():this._createTimeCalendarTypeSelectControl(a.items.timeCalendarType,a.isEditable.timeCalendarType);this.loadForm(a.value.timeCalendarType)},loadForm:function(a){this._loadedCalendarType=a;if(!this._data)throw Error("Data should always be set to use this Form");this._curForm&&(this._curForm.hide(),this._removeAllCurrentFormHandles());this._curForm=this._getFormWidget(a);this._curForm._started||
(this._curForm.loadForm(this._data),this._curForm.applyFormLogic(this.get("value")),this._onCurrentPeriodTriggerFieldChange());this._currentPeriodRequired=this._curForm.on("currentperiodrequired",B.hitch(this,"_onCurrentPeriodTriggerFieldChange"));this._curForm._started||this._curForm.startup();this._handleFormValueChange=this._curForm.on("formvaluechange",B.hitch(this,"refreshState"));this._getFullValues().timeCalendarType=this._startingCalendarType;this._curForm._originalChecksum=h.checksum(this._data.value);
this._curForm.show()},_getFullValues:function(){var a=this.get("value");return B.mixin(B.clone(this._data.value),a)},isDirty:function(){var a=this._getFullValues();return h.checksum(a)!==this._curForm._originalChecksum},refreshState:function(){var a=this._getFullValues();this.emit("valueChange",a);this.isValid()?(a=h.checksum(a)!==this._curForm._originalChecksum,this._setApplyState(!a)):this._setApplyState(!0)},disableButtons:function(){this._setApplyState(!0)},_setApplyState:function(a){this.btnApply.set("disabled",
a);this.btnCancel.set("disabled",a)},_onCurrentPeriodTriggerFieldChange:function(){var a=this._getFullValues(),a=n.buildCurrentPeriodParams(a);this._getCurrentPeriods(a)},_getCurrentPeriods:function(a){var c=h.checksum(a);this._lastParamsChecksum!==c&&(this._mostRecentChecksum=c,this._mostRecentParams=a,r.inProgress||r.getData(a).then(B.hitch(this,function(a){this._mostRecentChecksum===c?this._destroyed||(this._lastParamsChecksum=c,this._curForm.updateCurrentPeriods(a),this.emit("dataloaded")):this._getCurrentPeriods(this._mostRecentParams)}),
B.hitch(this,function(a){b.publish("anaplan/systemmessage",a,null,-1,g.SYSTEM_MESSAGE_ERROR)})))},_getFormWidget:function(a){if(h.isUndefined(this._forms[a])){var b=p.create("tbody");p.place(b,this.timeCalendarTypeRow,"after");this._forms[a]=new this._formConstructors[a]({},b);this.own(this._forms[a])}return this._forms[a]},_attach:function(){var a=this.btnCancel.on("click",B.hitch(this,"_onCancel")),b=this.btnApply.on("click",B.hitch(this,"_onApply"));this.own(a,b)},_onTimeCalendarTypeSelectChange:function(){try{var a=
this.ddlTimeCalendar.get("value");this._curForm&&this._loadedCalendarType!==a&&(this.loadForm(a),this.refreshState())}catch(b){q.showErrorReporter(new d.ClientException("_onTimeCalendarTypeSelectChange",b))}},_onCancel:function(){this.reset()},reset:function(){try{this._removeAllforms();this._lastParamsChecksum=null;var a=h.getKeyByValue(this._data.items.timeCalendarType.items,this._startingCalendarType);this.ddlTimeCalendar.set("value",a);var b=this.ddlTimeCalendar.get("value");this.ddlTimeCalendar.set("disabled",
!this._data.isEditable.timeCalendarType);this.loadForm(b)}catch(c){q.showErrorReporter(new d.ClientException("reset",c))}},_removeAllCurrentFormHandles:function(){this._currentPeriodRequired.remove();this._handleFormValueChange.remove();this._handleFormValueChange=this._currentPeriodRequired=null},_removeAllforms:function(){this._removeAllCurrentFormHandles();this._curForm=null;for(var a in this._forms)h.has(this._forms,a)&&this._forms[a].destroy();this._forms={}},_onApply:function(){var a=B.mixin(B.clone(this._data.value),
this.get("value"));this._setApplyState(!0);this.emit("apply",a)},_createTimeCalendarTypeSelectControl:function(a,b){this.ddlTimeCalendar=new e({data:B.clone(a),name:"timeCalendarType",disabled:!b,useLabelAsValue:!0,testableName:"timeCalendarType"},this.timeCalendarType);this.ddlTimeCalendar.startup();u.add(this.ddlTimeCalendar,"timeCalendarType");var c=this.ddlTimeCalendar.on("change",B.hitch(this,"_onTimeCalendarTypeSelectChange"));this.own(c)},_getValueAttr:function(){var a=this.inherited(arguments);
this._curForm&&B.mixin(a,this._curForm.get("value"));return a},_addSeleniumAttr:function(){this.btnCancel.testableName="btnCancel";this.btnApply.testableName="btnApply";u.add(this.btnCancel,"buttonCancel");u.add(this.btnApply,"buttonApply")}})})},"anaplan/modelmap/IsolatableGraph":function(){define("dojo/Evented dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/string anaplan/modelmap/yfilesGraph anaplan/modelmap/display/IsolationMode".split(" "),function(g,b,k,p,r,n,f){return b([k,g],{fullMapGraph:null,
isolateModeGraph:null,isolateMode:null,currentGraph:null,postCreate:function(){this.inherited(arguments);this.isolateMode=new f;this.fullMapGraph=new n({baseClass:"canvasArea"});this.fullMapGraph.on("viewitem",p.hitch(this,function(b){this.emit("viewitem",b)}));this.isolateModeGraph=new n({baseClass:"canvasArea",hidden:!0});this.isolateModeGraph.on("viewitem",p.hitch(this,function(b){this.emit("viewitem",b)}));this.isolateModeGraph.domNode.style.display="none";this.domNode.appendChild(this.fullMapGraph.domNode);
this.domNode.appendChild(this.isolateModeGraph.domNode);this.currentGraph=this.fullMapGraph;this.isolateMode.on("enable_button",p.hitch(this,function(){this.emit("enable_button")}));this.isolateMode.on("disable_button",p.hitch(this,function(){this.emit("disable_button")}))},startup:function(){this.inherited(arguments);this.fullMapGraph.startup();this.isolateModeGraph.startup()},destroy:function(){this.inherited(arguments);this.isolateMode.remove();this.fullMapGraph.dispose();this.isolateModeGraph.dispose()},
load:function(b,f){if(!0===this.fullMapGraph.isready)this._load(b,f);else var a=this.fullMapGraph.on("ready",p.hitch(this,function(){this._load(b,f);a.remove()}))},_load:function(b,f){this.fullMapGraph.groups=f;this.isolateModeGraph.groups=f;this.fullMapGraph.load(b);this.fullMapGraph.draw(!1);this.isolateMode.isIsolateMode()?(this.isolateMode.update(b),this.isolateModeGraph.load(this.isolateMode.getSelectedNodes())):this.isolateMode.listen(b,this.fullMapGraph.domNode)},redraw:function(){this.isolateMode.isIsolateMode()?
this._showIsolatedMap():this._showFullMap()},draw:function(b){this.currentGraph.draw(b)},switchMode:function(){this.isolateMode.isIsolateMode()?this._showFullMap():this._showIsolatedMap()},select:function(b){this.isolateMode.isIsolateMode()&&(!this.isolateMode.isSelectedNode(b.name)&&!this.currentGraph.isFunctionalAreaInCurrentSelection(b.name))&&(this.switchMode(),this.emit("exit_isolate_mode"));this._selectAndMove(b)},isSelectedNode:function(b){return this.isolateMode.isSelectedNode(b)},isIsolateMode:function(){return this.isolateMode.isIsolateMode()},
clearSelection:function(){this.isolateMode.clearSelection();this.isolateMode.isIsolateMode()&&this.switchMode()},groupNodes:function(b){this.currentGraph.groupNodes(b)},restoreData:function(){this.currentGraph.restoreData()},zoomIn:function(){this.currentGraph.zoomIn()},zoomOut:function(){this.currentGraph.zoomOut()},zoomOriginal:function(){this.currentGraph.zoomOriginal()},changeLayout:function(b){this.currentGraph.changeLayout(b)},fitContent:function(){this.currentGraph.fitContent()},switchOrientation:function(){this.currentGraph.switchOrientation()},
collapseAllGroups:function(){this.currentGraph.collapseAllGroups()},expandAllGroups:function(){this.currentGraph.expandAllGroups()},_showFullMap:function(){var b=this.isolateModeGraph.getZoom(),f=this.isolateMode.getLastSelection();this.fullMapGraph.domNode.style.display="block";this.isolateModeGraph.domNode.style.display="none";this.isolateMode.exitIsolateMode();this.currentGraph=this.fullMapGraph;null!==f?this.fullMapGraph.moveTo(f.name,b):this.fullMapGraph.fitContent()},_showIsolatedMap:function(){var b=
this.isolateMode.getSelectedNodes();this.isolateMode.enterIsolateMode();this.currentGraph=this.isolateModeGraph;this.currentGraph.load(b);this.currentGraph.draw(!1);this.fullMapGraph.domNode.style.display="none";this.isolateModeGraph.domNode.style.display="block"},_selectAndMove:function(b){if(/^module_\d+$/.test(b.id)){var f=r.substitute('.modelmap-node[data-id\x3d"${id}"]',b),f=document.querySelector(f);this.isolateMode.select(f,b.id);this.currentGraph.moveTo(b.name)}else this.currentGraph.moveToGroup(b.name)}})})},
"anaplan/view/BulkCopy/_MainView":function(){define("anaplan/common/ViewSerialNumbers anaplan/constants anaplan/data/Aggregator anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/data/ViewRequestRequestGenerator anaplan/Exceptions anaplan/utils/EntityLongIdHelper anaplan/utils/SelectorFactory anaplan/utils/UIHelper dijit/_Contained dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/FilteringSelect dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/data/ItemFileReadStore dojo/Deferred dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n!anaplan/nls/bulkCopy dojo/i18n!anaplan/nls/common dojo/i18n!dijit/nls/common dojo/i18n!dijit/nls/loading dojo/keys dojo/on dojo/text!anaplan/templates/BulkCopy.html anaplan/widgets/Button dijit/a11yclick".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N){return t([q,d,h,e],{baseClass:"bulkCopy",templateString:N,constructor:function(a){this._workspaceId=a.workspaceId;this._modelId=a.modelId;this._selectedTargetLabel=this._selectedSourceLabel=this._selectedTargetEntityLongId=this._selectedSourceEntityLongId=this._targetTree=this._sourceTree=null},getCanClose:function(){return null!==this._sourceTree&&null!==this._targetTree},onCancel:function(){},onOk:function(){},postCreate:function(){this.inherited(arguments);
a.setText(this.dimensionSelectorLabel,E.labelDimensionSelector);a.setText(this.sourceMemberTreeLabel,E.labelSourceMembers);a.setText(this.targetMemberTreeLabel,E.labelTargetMembers);a.setText(this.sourceLoadingLabel,L.loadingState);a.setText(this.targetLoadingLabel,L.loadingState);this.cancelButton.set("label",G.buttonCancel);this.okButton.set("label",G.buttonOk);this._dimensionSelector=this._createDimensionSelector();B.place(this._dimensionSelector.domNode,this.dimensionSelectorNode);this.own(D(this._dimensionSelector,
"Change",w.hitch(this,"_onDimensionSelect")));A.set(this.dimensionSelectorLabel,"for",this._dimensionSelector.id)},startup:function(){this._started&&console.warn("startup "+this.id);this.inherited(arguments);this._dimensionSelector.startup();this._onDimensionSelect(b.MODEL_CONTENT_VERSION_ENTITY_LONG_ID)},uninitialize:function(){this._resetTrees();this._dimensionSelector&&(this._dimensionSelector.destroy(),this._dimensionSelector=null);this.inherited(arguments)},_buildTrees:function(b){try{var c=
this,d=new x,e=b.rowLabelPages[0];this._labelPage=e;var h=null;e.count&&(h=e.entityLongIds[0][0]);var f=y.getContentBox(this.sourceMemberTreeNode),m=y.getContentBox(this.targetMemberTreeNode);setTimeout(function(){c._sourceTree=l.createSelector({widgetContainer:c.sourceMemberTreeNode,labelPage:e,selectedEntityLongId:h,style:"width: "+f.w+"px; height: "+f.h+"px;",onSelectionChange:function(a,b){c._selectedSourceEntityLongId=a;c._selectedSourceLabel=b;c._updateControlsState()}});var a=function(){A.set(c.sourceMemberTreeLabel,
"for",c._sourceTree.id);c.sourceLoading.style.display="none";d.resolve()};if(c._sourceTree.onLoad)var b=D(c._sourceTree,"Load",w.hitch(c,function(){b.remove();a()}));else a()},25);d.then(function(){c._targetTree=l.createSelector({widgetContainer:c.targetMemberTreeNode,labelPage:e,selectedEntityLongId:h,style:"width: "+m.w+"px; height: "+m.h+"px;",onSelectionChange:function(a,b){c._selectedTargetEntityLongId=a;c._selectedTargetLabel=b;c._updateControlsState()}});var a=function(){A.set(c.targetMemberTreeLabel,
"for",c._targetTree.id);c.targetLoading.style.display="none";c._treesLoaded=!0;c._updateControlsState()};if(c._targetTree.onLoad)var b=D(c._targetTree,"Load",w.hitch(c,function(){b.remove();a()}));else a()})}catch(g){a.throwClientException(this,g)}},_createDimensionSelector:function(){var c=null;try{var d=p.getHierarchiesLabelPage(),e=p.getHierarchySubsetsLabelPage(),h=[],f=b.MODEL_CONTENT_VERSION_ENTITY_LONG_ID;h.push({entityLongId:f,label:C.labelVersions});h.push({entityLongId:b.MODEL_CONTENT_TIMESCALE_ENTITY_LONG_ID,
label:C.labelTime});for(var m=d.entityLongIds[0],g=d.labels[0],l=g.length,d=0;d<l;d++)h.push({entityLongId:m[d],label:g[d]});for(var k=e.entityLongIds[0],q=e.labels[0],s=q.length,e=0;e<s;e++)h.push({entityLongId:k[e],label:q[e]});h.sort(function(a,b){return a.label<b.label?-1:a.label>b.label?1:0});c=new u({store:new z({data:{identifier:"entityLongId",label:"label",items:h}}),searchAttr:"label",value:f})}catch(t){a.throwClientException(this,t)}return c},_createTrees:function(b){try{var c=this;this._resetTrees();
k.post(this._getViewRequest(b),!1,function(b){try{if(b.result){var d=b.result.viewRequestResults;1!==d.length&&console.warn("anaplan.view.BulkCopy expected single view request result but found "+d.length);c._buildTrees(d[0])}}catch(e){a.showErrorReporter(new f.ClientException("anaplan.view.BulkCopy: _createTrees",e,{widgetId:c.id}))}},function(a){c._onError(a)})}catch(d){a.throwClientException(this,d)}},_getViewDefinition:function(c){var d=null;try{var e=s.getEntityTypeIndex(c);if(e===b.HIERARCHY_ENTITY_TYPE_INDEX||
e===b.HIERARCHY_SUBSET_ENTITY_TYPE_INDEX)var h=s.entityLongIdToEntityLongIdIdentifier(c),d=w.mixin({type:"MODEL_DEFINITION",staticContextIdentifiers:[h]},r.getAxesForViewDefinition([b.SYSTEM_AXIS_IDENTIFIER_ENTITY_IDENTIFIER],[b.SYSTEM_AXIS_IDENTIFIER_PROPERTY_IDENTIFIER]));else if(c===b.MODEL_CONTENT_TIMESCALE_ENTITY_LONG_ID)d=w.mixin({type:"MODEL_DEFINITION"},r.getAxesForViewDefinition([b.SYSTEM_AXIS_IDENTIFIER_TIME_IDENTIFIER],[b.SYSTEM_AXIS_IDENTIFIER_EMPTY_1_0_IDENTIFIER]));else if(c===b.MODEL_CONTENT_VERSION_ENTITY_LONG_ID)d=
w.mixin({type:"MODEL_DEFINITION"},r.getAxesForViewDefinition([b.SYSTEM_AXIS_IDENTIFIER_VERSION_ALL_IDENTIFIER],[b.SYSTEM_AXIS_IDENTIFIER_VERSION_PROPERTY_IDENTIFIER]));else throw new f.ClientException("Unhandled dimension type: "+c,null,{widgetId:this.id});}catch(m){a.throwClientException(this,m)}return d},_getViewRequest:function(b){var c=null;try{c=(new n(this._workspaceId)).getRequest({modelId:this._modelId,viewDefinition:this._getViewDefinition(b),pageRequests:[{startRow:0,startColumn:0,rowCount:-1,
columnCount:-1}],cellSelectorLabelsRequired:!1,pageSelectorLabelsRequired:!1,serialNumbers:new g,viewIndex:-1})}catch(d){a.throwClientException(this,d)}return c},_isAggregate:function(b){var d=!1;try{if(this._labelPage&&b){var e=this._labelPage,h=c.indexOf(e.entityLongIds[0],b);-1!==h&&(d=e.isAggregate[0][h])}}catch(f){a.throwClientException(this,f)}return d},_onCancel:function(){this.onCancel()},_onCancelButtonClick:function(){this._onCancel()},_onDimensionSelect:function(a){v.set(this.sourceMemberTreeNode,
"overflow","hidden");v.set(this.targetMemberTreeNode,"overflow","hidden");this._createTrees(a);this._updateControlsState()},_onError:function(b){a.showErrorReporter(b,b instanceof f.ServerException)},_onKeyDown:function(a){switch(a.keyCode){case K.ENTER:this.okButton.get("disabled")||(this._onOk(),m.stop(a));break;case K.ESCAPE:this._onCancel(),m.stop(a)}},_onOk:function(){this.onOk({label:this._selectedSourceLabel,entityLongId:this._selectedSourceEntityLongId},{label:this._selectedTargetLabel,entityLongId:this._selectedTargetEntityLongId})},
_onOkButtonClick:function(){this._onOk()},_resetTrees:function(){this._treesLoaded=!1;this.sourceLoading.style.display="";this.targetLoading.style.display="";this._sourceTree&&(this._sourceTree.destroy(),this._sourceTree=null);this._targetTree&&(this._targetTree.destroy(),this._targetTree=null);this._updateControlsState()},_updateControlsState:function(){try{if(this.cancelButton.set("disabled",!this._treesLoaded),this._dimensionSelector.set("disabled",!this._treesLoaded),this._treesLoaded){var b=
this._selectedSourceEntityLongId,c=this._selectedTargetEntityLongId;if(!b&&!c)this.okButton.set("disabled",!0);else if(this._isAggregate(b)||this._isAggregate(c))this.okButton.set("disabled",!0);else{var d=s.getEntityTypeIndex(b),e=s.getEntityTypeIndex(c);this.okButton.set("disabled",b===c||d!==e)}}else this.okButton.set("disabled",!0)}catch(h){a.throwClientException(this,h)}}})})},"anaplan/settings/Time2/Forms/Widgets/CurrentPeriodFilteringSelect":function(){define(["anaplan/constants","dijit/form/FilteringSelect",
"dojo/_base/declare","dojo/topic"],function(g,b,k,p){return k(b,{required:!1,startup:function(){this._isDisabledByProps=this.get("disabled");this.setDisabledState();this.inherited(arguments)},setDisabledState:function(){this.set("disabled",this._isDisabledByProps||0===this.store.data.length)},setData:function(b){this.closeDropDown();var k=this.getDisplayedValue();this.store.setData(b);k?(b=this.store.query({name:k}),1===b.length?this.set("value",b[0].id):(this.set("value",this.get("value")),p.publish("anaplan/systemmessage",
"Current Period previous value of "+k+" is no longer valid",null,-1,g.SYSTEM_MESSAGE_WARNING))):(b=this.store.query({id:this._lastValue}),1===b.length&&this.set("value",b[0].id));this.setDisabledState()},_getValueAttr:function(){var b=this.inherited(arguments);return""===b?null:b},_setValueAttr:function(b){this.inherited(arguments);this._lastValue=b}})})},"anaplan/settings/Time2/Forms/Widgets/FiscalYearLabelAlignment":function(){define("dojo/_base/lang anaplan/utils/JsHelper anaplan/utils/TestAttributesHelper dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/RadioButton dojo/_base/declare dojo/i18n!anaplan/nls/time dojo/text!anaplan/templates/Settings/Time/Widgets/FiscalYearLabelAlignment.html".split(" "),
function(g,b,k,p,r,n,f,s,l,a){return s([r,p,n],{templateString:a,i18n:l,constructor:function(){this._created=!1},_setValueAttr:function(a){this._started&&(this._set("checked",a),this.radioEnd.set("checked",!a),this.radioStart.set("checked",a))},_getValueAttr:function(){return this.radioStart.get("value")},postCreate:function(){this.inherited(arguments);this.radioEnd=new f({name:this.id,value:!1,checked:!this.value,testableName:"takeFiscalYearFromEnd"},this.takeFiscalYearFromEnd);this.radioStart=new f({name:this.id,
value:!0,checked:this.value,testableName:"takeFiscalYearFromStart"},this.takeFiscalYearFromStart);this._created=!0;b.isBoolean(this._loadingVal)&&this.set("value",this._loadingVal);this._addSeleniumAttr();this._attach()},_attach:function(){this.radioEnd.on("change",g.hitch(this,function(){this.emit("change")}))},_setDisabledAttr:function(a){this.inherited(arguments);this.radioEnd&&(this.radioEnd.set("disabled",a),this.radioStart.set("disabled",a))},_addSeleniumAttr:function(){k.add(this.radioStart,
"takeFiscalYearFromEnd");k.add(this.radioEnd,"takeFiscalYearFromStart")}})})},"anaplan/widgets/TextBoxSelector":function(){define(["dojo/_base/declare","dijit/form/ValidationTextBox","./TextBoxSelectorMixin"],function(g,b,k){return g("anaplan.widgets.TextBoxSelector",[b,k],{})})},"anaplan/layout/ManagedTab":function(){define("anaplan/Exceptions anaplan/layout/_ManagedMixin anaplan/tabs/TabFactory anaplan/utils/UIHelper anaplan/common/SelectiveAccess dijit/_TemplatedMixin dijit/layout/_LayoutWidget dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/Deferred dojo/i18n!dijit/nls/loading dojo/i18n!anaplan/nls/tabs dojo/sniff dojo/text!anaplan/templates/ManagedTab.html dojo/topic dojo/window dojo/on dojo/_base/array dojo/promise/all".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B){return s("anaplan.layout.ManagedTab",[f,n,b],{baseClass:"managedTab",templateString:m,menu:null,constructor:function(a){try{this._helpId=a.helpId,this._isClosing=!1}catch(b){p.throwClientException(this,b)}},destroyDescendants:function(){this.inherited(arguments);d.set(this.loadingMessage,"display","")},focus:function(){try{var a=this.getTabContent();a&&a.focus&&a.focus()}catch(b){throw new g.ClientException("anaplan.layout.ManagedTab.focus",
b);}},hasMoreThanOneChild:function(){return this.hasChildren()&&0<this.getChildren().length},getTabContent:function(){var a=this.getChildren();return 0<a.length?a[0]:null},getHelpId:function(){try{for(var a=this.getChildren(),b=a.length,c,d=0;d<b;d++)if((c=a[d])&&c.getHelpId)return c.getHelpId()}catch(e){p.throwClientException(this,e)}return this._helpId},hide:function(a){try{this._isClosing||this.inherited(arguments)}catch(b){p.throwClientException(this,b)}},layout:function(){try{var a=this.getTabContent();
a&&a.resize&&a.resize(this._contentBox)}catch(b){p.throwClientException(this,b)}},postCreate:function(){try{this.inherited(arguments);p.setText(this.loadingMessageLabel,u.loadingState);var a=w.subscribe("anaplan/tabs/"+this.id+"/clientDashboardDefinitionStateChange",l.hitch(this,"_onClientDashboardDefinitionStateChange")),b=w.subscribe("anaplan/tabs/"+this.id+"/serverDashboardDefinitionStateChange",l.hitch(this,"_onServerDashboardDefinitionStateChange"));this.own(a,b)}catch(c){p.throwClientException(this,
c)}},resize:function(a,b){if(q("ios")&&"undefined"!==typeof window.ontouchstart)switch(document.activeElement.tagName.toLowerCase()){case "input":case "textarea":return}this._isClosing||this.inherited(arguments)},close:function(a){var b=[];this._isClosing=!0;A.forEach(this.getChildren(),function(a){a.isCloseableMayPrompt&&b.push(a.isCloseableMayPrompt())});return B(b).then(l.hitch(this,function(b){if(A.some(b,function(a){return!a}))return this._isClosing=!1;a.removeChild(this);this.destroyRecursive();
return!0}),l.hitch(this,function(a){this._isClosing=!1}))},scheduleLoad:function(a,b,c,d){try{d?this._load(a,b,c):setTimeout(l.hitch(this,function(){this._load(a,b,c)}),25)}catch(e){p.throwClientException(this,e)}},show:function(a){try{this._isClosing||this.inherited(arguments)}catch(b){p.throwClientException(this,b)}},destroy:function(){this.inherited(arguments)},_load:function(a,b,c){d.set(this.loadingMessage,"display","none");k.loadTab(a,this,b);c&&c()},_onClientDashboardDefinitionStateChange:function(b){a.toggle(this.controlButton?
this.controlButton.domNode:this.getParent().domNode,"clientDashboardDefinitionChanged",b);w.publish("anaplan/"+this.getParent().id+"/dashboardStateChange",b)},_onServerDashboardDefinitionStateChange:function(b){a.toggle(this.controlButton?this.controlButton.domNode:this.getParent().domNode,"serverDashboardDefinitionIsDirty",b);w.publish("anaplan/"+this.getParent().id+"/dashboardStateChange",b)}})})},"anaplan/settings/TimeAndTimeRanges":function(){define("anaplan/utils/FormatHelper anaplan/data/ModelContentHelper anaplan/utils/EntityLongIdHelper anaplan/utils/UIHelper anaplan/settings/Time2 dijit dijit/layout/TabContainer dijit/layout/TabController dojo/_base/declare anaplan/settings/TimeRanges/TimeRange dojo/_base/array dojo/_base/lang anaplan/constants dojo/i18n!anaplan/nls/timeRanges".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h){var u=l("anaplan.TimeRanges.TabControllerEx",s,{onButtonClick:function(a){var b=function(){n.byId(this.containerId).selectChild(a)}.bind(this),d=function(){}.bind(this);p.dirtyFormCheck(b,d)}});return l(f,{constructor:function(a){this._workspaceId=a.content[0].workspaceId;this._modelId=a.content[0].modelId;this._modelContent=a.modelContent;this._showTipsOnStartup=a.showTipsOnStartup;this._viewDefinition=a.content[0].viewDefinition;this.declaredClass="Time_Ranges_Tab_Container";
this._args=a;this.controllerWidget=u},postCreate:function(){this.inherited(arguments);this._createTabs()},suspend:function(){e.forEach(this.getChildren(),function(a){a.suspend()})},resume:function(){e.forEach(this.getChildren(),function(a){a.resume()})},startup:function(){this.inherited(arguments)},uninitialize:function(){this.inherited(arguments)},_createTabs:function(){for(var c=[{id:this.id+"_CALENDAR",title:h.tabModelCalendar,widgetClass:r,viewDefinition:d.mixin({type:"MODEL_DEFINITION"},b.getAxesForViewDefinition([q.SYSTEM_AXIS_IDENTIFIER_HIERARCHY_IDENTIFIER],
[q.SYSTEM_AXIS_IDENTIFIER_HIERARCHY_PROPERTY_IDENTIFIER]))},{id:this.id+"_TIME_RANGES",title:h.tabTimeRanges,widgetClass:a,viewAs:"grid",viewDefinition:d.mixin({name:h.tabTimeRanges,type:"MODEL_DEFINITION",columnSizes:{customRowLabelWidthsByDimension:[],customWidthsByLineItem:[{identifier:k.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_TIME_RANGE_FIRST_PERIOD),width:100},{identifier:k.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_TIME_RANGE_PERIOD_COUNT),width:113},{identifier:k.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_TIME_RANGE_YEAR_TO_DATE_INCLUDED),
width:100},{identifier:k.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_TIME_RANGE_YEAR_TO_GO_INCLUDED),width:100},{identifier:k.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_TIME_RANGE_QUARTER_TOTALS_INCLUDED),width:100},{identifier:k.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_TIME_RANGE_HALF_YEAR_TOTALS_INCLUDED),width:100},{identifier:k.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_TIME_RANGE_TOTAL_OF_ALL_PERIODS_INCLUDED),width:113}],customWidthsByStyle:[],
defaultColumnWidth:150}},b.getAxesForViewDefinition([q.SYSTEM_AXIS_IDENTIFIER_TIME_RANGE_IDENTIFIER],[q.SYSTEM_AXIS_IDENTIFIER_TIME_RANGE_PROPERTY_IDENTIFIER]))}],e,f=0;f<c.length;f++)e=c[f],e=new e.widgetClass({workspaceId:this._workspaceId,modelId:this._modelId,id:e.id,title:e.title,viewDefinition:e.viewDefinition,modelContent:this._modelContent,showTipsOnStartup:this._showTipsOnStartup,globalFormulaEditModule:this._globalFormulaEditModule,content:this._args.content}),this.addChild(e)}})})},"anaplan/settings/HierarchyTreeView":function(){define("anaplan/anapediaKeys anaplan/common/ViewSerialNumbers anaplan/constants anaplan/data/Aggregator anaplan/data/ChangeFactory anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/data/RequestFactory anaplan/data/ViewRequestRequestGenerator anaplan/Exceptions anaplan/formula/DataReference anaplan/settings/HierarchyTreeView/Form anaplan/settings/HierarchyTreeView/Tree anaplan/settings/HierarchyView anaplan/utils/EntityLongIdHelper anaplan/utils/ErrorDialog anaplan/utils/FormatHelper anaplan/utils/IdChecker anaplan/utils/JsHelper anaplan/utils/LabelPageHelper anaplan/utils/UIHelper anaplan/view/BulkDelete anaplan/view/FastInsert anaplan/view/MoveHierarchyItem anaplan/widgets/FullScreenDialog dijit/focus dijit/layout/ContentPane dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/data/ItemFileWriteStore dojo/i18n!anaplan/nls/hierarchy dojo/i18n!anaplan/nls/hierarchyEditor dojo/on dojo/string dojo/topic".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I,P){return L([h],{liveSplitters:!0,constructor:function(a){this._treeLimitExceeded=a.treeLimitExceeded||!1;this._serialNumbers=new b;this._viewIndex=-1;this._pageInfo=this._dataPage=this._columnLabelPage=this._rowLabelPage=null;this._rowCount=this._columnCount=this._fixedRowCount=-1;this._currentSelection=[]},error:function(){this.reset();return!1},getPageInfo:function(){return this._pageInfo},getSelectedItems:function(){var a=
[];if(this._tree){var b=this._tree.getSelectedNodes(),c;for(c in b)if(b.hasOwnProperty(c)){var d=b[c],e=d.item,d=d.getParent().item;a.push({name:e.name[0],entityId:e.entityId[0],entityLongIds:e.entityLongId[0],isAggregate:e.isAggregate[0],parentName:"root"!==d.entityLongId[0]?d.name[0]:"",parentEntityId:"root"!==d.entityLongId[0]?d.entityId[0]:"",parentEntityLongId:"root"!==d.entityLongId[0]?d.entityLongId[0]:-1,isItemEditable:e.isItemEditable[0],canInsertSibling:e.canInsertSibling[0],canDelete:e.canDelete[0]})}}return a},
getSelectedNodes:function(){var a=[];this._tree&&(a=this._tree.getSelectedNodes());return a},getViewDefinition:function(){return this._viewDefinition?f.useAxisSpecification(this._viewDefinition)?K.mixin(K.clone(this._viewDefinition),f.getAxisSpecification([k.SYSTEM_AXIS_IDENTIFIER_EMPTY_0_0_IDENTIFIER])):K.mixin(K.clone(this._viewDefinition),{columns:k.SYSTEM_AXIS_IDENTIFIER_EMPTY_0_0_IDENTIFIER}):this._viewDefinition},getViewIndex:function(){return-1},onTreeLimitExceeded:function(){},onShow:function(){this.inherited(arguments);
this.getParent().getParent()&&!this._tree&&this._createTreeView()},onTreeKeyDown:function(){},postCreate:function(){this.inherited(arguments);this.set("class","hierarchyTreeView")},reset:function(){this._serialNumbers=new b;this._viewIndex=-1;this._pageInfo=this._dataPage=this._columnLabelPage=this._rowLabelPage=null;this._rowCount=this._columnCount=this._fixedRowCount=-1;this._currentSelection=[];this._tree&&this._tree.reset();this._form&&this._form.reset()},startup:function(){try{this.inherited(arguments),
this._tree||this._createTreeView()}catch(a){x.throwClientException(this,a)}},uninitialize:function(){try{this._isObserver&&(p.deleteObserver(this),this._isObserver=!1),this._insertDialog&&(this._insertDialog.destroy(),this._insertDialog=null),this._tree&&this._tree.destroy(),this._form&&this._form.destroy(),this.inherited(arguments)}catch(a){x.throwClientException(this,a)}},update:function(a){var c,d;try{if(this._suspended||!this._isShowing)this.reset();else{x.hidePleaseWaitDialog();var e=a[0];this._values=
e;this._viewIndex=e.viewIndex;this._fixedRowCount=e.fixedRowCount;this._columnCount=e.columnCount;this._rowCount=e.rowCount;d=this._serialNumbers;c=this._serialNumbers=new b(e.serialNumbers);c.pageInfoSerialNumber!==d.pageInfoSerialNumber&&(this._pageInfo=e.pageInfo);if(d.rowAxisSerialNumber!==c.rowAxisSerialNumber||d.columnAxisSerialNumber!==c.columnAxisSerialNumber){d.rowAxisSerialNumber!==c.rowAxisSerialNumber&&(1!==e.rowLabelPages.length&&console.warn(e.rowLabelPages.length+" row label pages; expected 1"),
this._rowLabelPage=e.rowLabelPages[0]);d.columnAxisSerialNumber!==c.columnAxisSerialNumber&&(1!==e.columnLabelPages.length&&console.warn(e.columnLabelPages.length+" column label pages; expected 1"),this._columnLabelPage=e.columnLabelPages[0]);d.dataSerialNumber!==c.dataSerialNumber&&(1!==e.dataPages.length&&console.warn("1: "+e.dataPages.length+" data pages; expected 1"),this._dataPage=e.dataPages[0]);if(this._suspended||!this._isShowing)return;this._rebuild()}else if(d.dataSerialNumber!==c.dataSerialNumber){1!==
e.dataPages.length&&console.warn("2: anaplan.settings.HierarchyTreeView; "+e.dataPages.length+" data pages; expected 1");this._dataPage=e.dataPages[0];if(this._suspended||!this._isShowing)return;this._refresh()}this._updateButtonState()}}catch(h){x.throwClientException(this,h)}},updateForm:function(){try{this._form&&this._form.updateFormWithSelection(this._currentSelection,this._dataPage,this._rowLabelPage,this._columnLabelPage,this._fixedRowCount,this._columnCount,!0)}catch(a){x.throwClientException(this,
a)}},view:function(){var a=null;try{a=(new l(this._workspaceId)).getRequest({modelId:this._modelId,viewDefinition:this._viewDefinition,pageRequests:[{startRow:0,startColumn:0,rowCount:x.getTreeLimit(),columnCount:-1}],cellSelectorLabelsRequired:!1,pageSelectorLabelsRequired:!1,serialNumbers:this._serialNumbers,viewIndex:this._viewIndex||-1})}catch(b){x.throwClientException(this,b)}return a},_createTreeView:function(){try{this._tree=new q({region:"left",splitter:!0,staticContextIdentifiers:this._viewDefinition.staticContextIdentifiers});
this._form=new d({region:"center"});this.addChild(this._tree);this.addChild(this._form);var a=H(this._tree,"selectionChange",K.hitch(this,"_onSelectionChange")),b=H(this._tree,"itemsMoved",K.hitch(this,"_onItemsMoved")),c=H(this._tree,"keyDown",K.hitch(this,"_onTreeKeyDown")),e=H(this._tree,"rename",K.hitch(this,"_onRename"));this.own(a,b,c,e);p.addObserver(this);this._isObserver=!0;this._searchButton.set("widget",this._tree);this._searchButton.set("model",this);var h=P.subscribe("anaplan/"+this._tree.id+
"/suspend",K.hitch(this,"_handleSuspend")),f=P.subscribe("anaplan/"+this._tree.id+"/resume",K.hitch(this,"_handleResume"));this.own(h,f)}catch(m){x.throwClientException(this,m)}},_displayInsertDialog:function(){try{var b=this.getSelectedNodes(),c=[],d;for(d in b)b.hasOwnProperty(d)&&c.push(b[d]);var e=c.length;if(!(1<e)){var h=this.getSelectedItems(),m=this._viewDefinition;this._insertDialog&&(this._insertDialog.destroy(),this._insertDialog=null);d=b=null;1===e&&(b=c[0],d=h[0]);var g=f.getHierarchyEntityLongIdForViewDefinition(n,
m),l=u.entityLongIdToEntityLongIdIdentifier(g),k=f.getHierarchyEntityId(n,g),q=f.getHierarchyLabel(n,g),c=null;this._pageInfo&&this._pageInfo.rowEntityTypeIndices&&(c=f.getSingleDimensionEntityTypeIndices(this._pageInfo.rowEntityTypeIndices,0));this._insertDialog=new B({viewDefinition:m,systemAxisEntityLongIdIdentifier:l,systemAxisLabel:q});this._insertDialog.show({relativeDomNode:b?b.domNode:null,relativeItem:{label:d?d.name:null,isAggregate:d?d.isAggregate:null,entityLongId:d?d.entityLongIds:null,
isItemEditable:d?d.isItemEditable:!1,canInsertSibling:d?d.canInsertSibling:!1,canDelete:d?d.canDelete:!1},hierarchyId:k,systemAxisEntityLongIdIdentifier:l,systemAxisLabel:q,entityTypeIndices:c})}}catch(s){x.showErrorReporter(new a.ClientException(this.declaredClass+": _displayInsertDialog",s))}},_displayMoveDialog:function(){try{var a=x.getSharedDialog(),b=this.getSelectedItems();if(0!==b.length){var c=new y({viewDefinition:this._viewDefinition,itemsToMove:b}),d=H(c,"Move",function(){a.hide()});this.own(d);
var e=H(c,"Cancel",function(){a.onCancel()});this.own(e);var h;h=1<b.length?N.titleMultipleMove.replace("%item%",b[0].name).replace("%num%",b.length-1):N.titleMove.replace("%item%",b[0].name);h=t.escapeHTML(h);a.set("title",h);a.set("refocus",!1);a.set("content",c.domNode);a.show()}}catch(f){x.throwClientException(this,f)}},_displayDeleteDialog:function(){try{if(this._pageInfo&&this._viewDefinition){var a=K.clone(this._viewDefinition);a.columnAxisSpecification?a.columnAxisSpecification=f.getAxisSpecification([k.SYSTEM_AXIS_IDENTIFIER_EMPTY_0_0_ENTITY_LONG_ID]):
a.columns=k.SYSTEM_AXIS_IDENTIFIER_EMPTY_0_0_ENTITY_LONG_ID;var b=f.getHierarchyEntityLongIdForViewDefinition(n,a),c=new A({dimensionIdentifier:u.entityLongIdToEntityLongIdIdentifier(b),listSize:this._rowLabelPage.count,listLabel:f.getHierarchyLabel(n,b),selectedItems:this.getSelectedItems(),viewDefinition:a}),d=new v({roles:["delete"],anapediaKey:g.deleteDialog,title:I.substitute(N.titleBulkDelete,{listName:t.escapeHTML(this._modelContent.label)}),refocus:!1,content:c}),e=H(d,"Hide",function(){setTimeout(function(){d.destroy();
e.remove()},100)}),h=H(c,"Delete",function(){d.hide()});this.own(h);var m=H(c,"Cancel",function(){d.onCancel()});this.own(m);var l=d.show();if(l)l.then(function(){c.onShow()});else c.onShow()}}catch(q){x.throwClientException(this,q)}},_doRefresh:function(){try{this.reset(),p.gather()}catch(a){x.throwClientException(this,a)}},_editTreeNode:function(a,b){try{if(a&&b&&!b.isPending()&&a.isEditable[0]){this._editedTreeNode=b;var c=H(b,"CommitEdit",K.hitch(this,function(c){this._renameEntity(c,a,b);this._updateButtonState()})),
d=H(b,"CancelEdit",K.hitch(this,function(){b.endEdit();E.focus(b.labelNode);this._updateButtonState()})),e=H(b,"EndEdit",K.hitch(this,function(){c.remove();e.remove();d.remove();this._editedTreeNode=null;this._updateButtonState()}));this.own(c,e,d);b.edit();this._updateButtonState()}}catch(h){x.throwClientException(this,h)}},_getHierarchyEntityLongIdIdentifier:function(){var a=f.getHierarchyEntityLongIdForViewDefinition(n,this._viewDefinition);return u.entityLongIdToEntityLongIdIdentifier(a)},_getItems:function(a){var b=
null;try{for(var c=[],d={},e=a.length,h=0;h<e;h++){var f=a[h];d[f.entityLongId]={index:h,name:f.name,entityId:f.entityId,children:[],entityLongId:f.entityLongId,parentEntityLongId:f.parentEntityLongId,isAggregate:f.isAggregate,isEditable:f.isEditable,dataRowIndex:f.itemIndex,isItemEditable:f.isItemEditable,canInsertSibling:f.canInsertSibling,canDelete:f.canDelete}}for(h=0;h<e;h++){var m=a[h],g=d[m.entityLongId];-1!=m.parentEntityLongId?d[m.parentEntityLongId].children.push(g):c.push(g)}b=[{entityLongId:"root",
name:"root",children:c}]}catch(l){x.throwClientException(this,l)}return b},_handleResume:function(){try{this.inherited(arguments),this._rowLabelPage?this._rebuild():p.gather()}catch(a){x.throwClientException(this,a)}},_handleSuspend:function(){this.inherited(arguments);this._setCurrentSelection([]);this._tree&&this._tree.reset();this._form&&this._form.reset()},_isBaseType:function(a){var b=!1;try{if(0<a.length){var c=f.getSingleDimensionEntityTypeIndices(this._pageInfo.rowEntityTypeIndices,0);u.getEntityTypeIndex(a[0].entityLongId)===
c[0]&&(b=!0)}}catch(d){x.throwClientException(this,d)}return b},_isEmptyHierarchy:function(){var a=!1;try{if(this._values){var b=this._values.rowCount;0===b?a=!0:1===b&&this._rowLabelPage&&u.getEntityIndex(this._rowLabelPage.entityLongIds[0][0])===k.TOP_LEVEL_ITEM_ENTITY_INDEX&&(a=!0)}}catch(c){x.throwClientException(this,c)}return a},_isSelectionUniformType:function(a){var b=!0;try{var c=a.length;if(1<c)for(var c=c-1,d=a[c],e,h=u.getEntityTypeIndex(d.entityLongId);c--;){d=a[c];e=u.getEntityTypeIndex(d.entityLongId);
if(e!==h){b=!1;break}h=e}}catch(f){x.throwClientException(this,f)}return b},_onItemsMoved:function(a,b,c){try{var d=new r,e=d.getCellChangeGenerator(),h=[],m=[],g=this._modelId,l=u.entityLongIdIdentifierToEntityLongId(this._viewDefinition.staticContextIdentifiers[0]),q=k.SYSTEM_PROPERTY_PARENT;if("Before"===c||"After"===c){var t=f.getSingleDimensionEntityTypeIndices(this._pageInfo.rowEntityTypeIndices,0),n=d.getModelChangeGenerator({entityTypeClass:"CUSTOM",entityTypeIndex:t[0]});m.push({modelId:g,
moduleId:"",modelChangeXml:n.getModelChangeXml("MOVE",{position:c,relativeToEntityLongId:b.entityLongId,items:a})})}G.forEach(a,function(a){if("Before"!==c&&"After"!==c||a.parentEntityId!=b.parentEntityId)h.push(e.getCellChange({modelId:g,originalText:String(a.parentEntityLongId),currentDisplayText:a.parentEntityId,entityLongIds:[l,q,a.entityLongId],cellText:"Before"===c||"After"===c?b.parentEntityId:b.entityId}))},this);var w=s.createRequest(this._workspaceId,[{workspaceId:this._workspaceId,cellChanges:h,
modelChanges:m}],[],[]);p.gather(w);x.showPleaseWaitDialog(N.updatingHierarchy)}catch(A){x.throwClientException(this,A)}},_onRename:function(a,b){this._editTreeNode(a,b)},_onSelectionChange:function(b){try{var c=this._isSelectionUniformType(b);this._setCurrentSelection(b,c);this._updateButtonState();this._isFormulaEditMode()&&1===b.length&&this._publishEntityId(b[0].item.entityId[0])}catch(d){x.showErrorReporter(new a.ClientException(this.declaredClass+": _onSelectionChange",d,{widgetId:this.id}))}},
_onTreeLimitExceeded:function(){this._treeLimitExceeded=!0;this.onTreeLimitExceeded()},_onTreeKeyDown:function(a){this.onTreeKeyDown(a)},_publishEntityId:function(a){if(a){var b=this._modelContent.label,c=(new e).generateTwoPartIdentifier(b,a);setTimeout(function(){P.publish("anaplan/formula/insertExpression",c)},50)}},_rebuild:function(){try{if(this._removeAllChildren(),this._rowCount>x.getTreeLimit())this._treeLimitExceededMessage||(this._treeLimitExceededMessage=new C({content:F.flatListMessage,
region:"center"})),this.addChild(this._treeLimitExceededMessage),this._onTreeLimitExceeded();else{this._treeLimitExceeded=!1;this.addChild(this._tree);this.addChild(this._form);this.addChild(this._toolbar);var a=this._rowLabelPage,b=z.getOrderedParentChildArray(a),c=this._getItems(b);this._store=new D({data:{identifier:"entityLongId",label:"name",items:c}});this._tree.updateTreeWithItemFileWriteStore(this._store,this._pageInfo,a,c,this._getHierarchyEntityLongIdIdentifier());this._onSelectionChange([])}}catch(d){x.throwClientException(this,
d)}},_refresh:function(){for(var a=z.getOrderedParentChildArray(this._rowLabelPage),b=a.length,c,d=0;d<b;d++)c=a[d],this._setValue(c.entityLongId,"name",c.name);this._tree&&this._tree.focus()},_removeAllChildren:function(){this._tree&&this._tree.getParent()&&this.removeChild(this._tree);this._form&&this._form.getParent()&&this.removeChild(this._form);this._treeLimitExceededMessage&&this._treeLimitExceededMessage.domNode.parentNode&&this.removeChild(this._treeLimitExceededMessage);this._toolbar&&this._toolbar.domNode.parentNode&&
this.removeChild(this._toolbar)},_renameEntity:function(b,d,e){try{var h=this,f=new m,g=I.trim(b);if(f.checkId(g)){var l=e.tree.model.getLabel(d),k=d.entityLongId[0],q=u.getEntityTypeIndex(k),t=(new r).getModelChangeGenerator({entityTypeClass:"CUSTOM",entityTypeIndex:q}),n=[{workspaceId:this._workspaceId,cellChanges:[],modelChanges:[{modelId:this._modelId,modelChangeXml:t.getModelChangeXml("UPDATE",{currentName:l,newName:g,entityLongId:k})}]}],w=s.createRequest(this._workspaceId,n,[],[]);x.showPleaseWaitDialog();
p.post(w,!1,function(b,d){try{if(e.setPending(!1),x.hidePleaseWaitDialog(!1),!b.error)if(b.result&&b.result.errorInfo){var f=H(c.getErrorDialog(),"Hide",function(){f.remove();e.focus()}),m=b.result.errorInfo;if(m.isKnownError)x.showErrorReporter(new a.BaseException(m.errorMessage),!0);else{var g=new a.ServerException(m.errorMessage,null,{httpStatus:d.xhr.status,httpStatusText:d.xhr.statusText});g.setModelRestored(!0);x.showErrorReporter(g)}}else h._editedTreeNode=null,p.gather()}catch(l){console.error("renameEntity errorHandler caught exception "+
l)}},function(){try{x.hidePleaseWaitDialog(!1),e.setPending(!1),setTimeout(function(){console.warn("_renameEntity errorHandler has processed error and is attempting to trigger gather");h.reset();p.gather()},600)}catch(a){console.error("renameEntity errorHandler caught exception "+a)}})}else x.showErrorReporter(new a.InvalidIdException(f.getInvalidIdMessage()),!0,!1,function(){e.focus()}),e.setPending(!1)}catch(A){x.throwClientException(this,A)}},_setCurrentSelection:function(a,b){this._editedTreeNode&&
(this._editedTreeNode.endEdit(),this._editedTreeNode=null);this._currentSelection=a;this._form&&this._form.updateFormWithSelection(a,this._dataPage,this._rowLabelPage,this._columnLabelPage,this._fixedRowCount,this._columnCount,b)},_setModelId:function(){this.inherited(arguments);this.reset()},_setValue:function(a,b,c){var d=this._store;d.fetchItemByIdentity({identity:a,onItem:function(a){d.setValue(a,b,c);d.save()}})},_updateButtonState:function(){if(w.isNullOrUndefined(this._editedTreeNode)){this._importButton.set("disabled",
!1);this._exportButton.set("disabled",!1);this._deleteButton.set("disabled",!1);this._refreshButton.set("disabled",!1);var a=this._currentSelection;this._insertButton.set("disabled",a&&1<a.length);this._moveButton.set("disabled",!a||0===a.length||!this._isSelectionUniformType(a)||!this._isBaseType(a))}else this._importButton.set("disabled",!0),this._exportButton.set("disabled",!0),this._insertButton.set("disabled",!0),this._deleteButton.set("disabled",!0),this._moveButton.set("disabled",!0),this._refreshButton.set("disabled",
!0)}})})},"anaplan/settings/TimeRanges/TimeRangeEditor":function(){define("anaplan/data/ModelContentCache dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/event anaplan/widgets/Dialog2 dojo/text!anaplan/templates/SimpleTimeRangeCreateEditor.html dojo/i18n!dijit/nls/common dojo/i18n!anaplan/nls/timeRanges anaplan/constants anaplan/utils/FiscalYearHelper anaplan/utils/FiscalYearForWeeksHelper anaplan/utils/confirmationDialogHelper anaplan/utils/IdChecker anaplan/widgets/Button dijit/form/NumberSpinner dijit/form/Form dijit/form/ValidationTextBox".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u){function c(a){a.domNode.parentElement.style="display:none;";a.domNode.parentElement.hidden=!0}function t(a){a.style="display:none;";a.hidden=!0}function m(a){a.domNode.parentElement.style="display:;";a.domNode.parentElement.hidden=!1}return r("anaplan.view.TimeRangeEditor",[b,k,p,f.ContentMixin],{baseClass:"applyChanges actionEditorDialog actionInsertDialog",tabIndex:-1,templateString:s,widgetsInTemplate:!0,_blacklistedNames:"Model Timescale;ModelTimescale;Model Calendar;ModelCalendar;Model Timespan;ModelTimespan;Model Time Range;ModelTimeRange;Time Range;TimeRange;Time;Calendar;Time Scale;TimeScale;Time Span;TimeSpan;Period;Periods;All;All Periods;AllPeriods;Superset;Date;Dates;Day;Days;Week;Weeks;Month;Months;Quarter;Quarters;Half-year;Half-years;Year;Years".split(";"),
onConfirm:function(){},onCancel:function(){},onDiscard:function(){},onDialogShow:function(){this.timeRangeName.focus()},constructor:function(a,b,c,d){this._data=a;this._relativeItem=b;this._relativeDomNode=c;this._isInsert=d},postCreate:function(){this.inherited(arguments);this.applyButton.set("label",a.saveButton);this.cancelButton.set("label",l.buttonCancel);this._relativeItem&&this._isInsert?this.relativeToItemName.innerHTML=this._relativeItem.label:t(this.relativeToItemName.parentElement);var b=
g.getTimescaleInfo().calendarTypeEntityIndex;switch(b){case e.CALENDAR_TYPE_WEEKS_GENERAL_ENTITY_INDEX:t(this.checkBoxContainer);break;case e.CALENDAR_TYPE_THIRTEEN_FOUR_WEEK_PERIODS_ENTITY_INDEX:c(this.checkBoxHalfYear)}options=this._getStartYearOptions(b);this.startPeriod.addOption(options);m(this.startPeriod);b=[this.checkBoxQuarter,this.checkBoxHalfYear,this.checkBoxYTD,this.checkBoxYTG,this.checkBoxTotalOfAll];this._isInsert?this._matchModelCalendar():(this._matchSelectedTimeRange(b),this._relativeItem.fourDigitYear=
this.startPeriod.params.options.find(this._getSelectedStartPeriod).fourDigitYear);this.timeRangesForm.on("submit",function(a){a.preventDefault();if(this._isValid())if(!this._isInsert&&this._isDestructiveEdit())this._destructiveEditConfirmation();else this.onConfirm(this._getData())}.bind(this));var b=this._relativeItem?this._relativeItem.label.toLowerCase():null,d=this._relativeItem?g.getTimeRangesInfo().timeRangesLabelPage.labels[0]:[];this.timeRangeName.validator=this._getTimeRangeNameValidator(d,
b,this._isInsert,a,this._blacklistedNames);this.periodCount.validator=this._getTimeRangePeriodCountValidator(this.startPeriod.params.options)},_getStartYearOptions:function(a){var b=this._data.value,c=[],h=36;switch(a){case e.CALENDAR_TYPE_MONTHS_ENTITY_INDEX:!b.takeFiscalYearNameFromPeriodStart&&1!==b.fiscalYearStartMonth&&(h=37);c=d.getData(b.fiscalYearStartMonth,b.takeFiscalYearNameFromPeriodStart,!0,h,97,2017);break;case e.CALENDAR_TYPE_WEEKS_FOUR_FOUR_FIVE_ENTITY_INDEX:case e.CALENDAR_TYPE_THIRTEEN_FOUR_WEEK_PERIODS_ENTITY_INDEX:b.takeFiscalYearNameFromPeriodStart&&
(h=35);c=q.getData(b.takeFiscalYearNameFromPeriodStart,b.fiscalYearEndType,b.fiscalYearEndMonth,b.fiscalYearEndDayInWeek,!0,h,97,2017);break;case e.CALENDAR_TYPE_WEEKS_GENERAL_ENTITY_INDEX:break;default:console.warn("anaplan/view/ColumnSettings#_createTimeColumnWidthInputs: unhandled calendar type entity index: "+a)}return c},_matchSelectedTimeRange:function(a){var b=this._relativeItem.values[0].split(":")[0];this.timeRangeName.set("value",this._relativeItem.label);this.startPeriod.set("value",b);
this.periodCount.set("value",this._relativeItem.values[1]);for(b=0;b<a.length;b++)"true"===this._relativeItem.values[b+2]&&a[b].set("value",!0)},_matchModelCalendar:function(){this.startPeriod.set("value",this._data.value.currentFiscalYear);this.checkBoxHalfYear.set("checked",this._data.value.halfYearTotalsIncluded);this.checkBoxQuarter.set("checked",this._data.value.quarterTotalsIncluded);this.checkBoxTotalOfAll.set("checked",this._data.value.totalOfAllPeriodsIncluded);this.checkBoxYTG.set("checked",
this._data.value.yearToGoIncluded);this.checkBoxYTD.set("checked",this._data.value.yearToDateIncluded)},_isDestructiveEdit:function(){var a=this._getData();return this._isPeriodCountChangeDestructive(a)||this._isStartYearChangeDestructive(a)||this._isAggregationChangeDestructive(a)},_isPeriodCountChangeDestructive:function(a){return parseInt(this._relativeItem.values[1],10)>a.periodCount},_isStartYearChangeDestructive:function(a){var b=parseInt(this._relativeItem.values[1],10),c=a.periodCount,d=this._relativeItem.fourDigitYear;
a=a.fourDigitYear;return d<a?!0:d>a?b===c?!0:d-a>c-b:!1},_isAggregationChangeDestructive:function(a){a=[a.quarterTotalsIncluded,a.halfYearTotalsIncluded,a.yearToDateIncluded,a.yearToGoIncluded,a.totalOfAllPeriodsIncluded];for(var b=this._relativeItem.values.slice(2),c=0;c<b.length;c++)if("true"===b[c]&&!a[c])return!0;return!1},_destructiveEditConfirmation:function(){h.showDialog(a.titleConfirmDestructiveEdit,a.destructiveEditMessage,function(a){if(!0===a)this.onConfirm(this._getData())}.bind(this))},
_isValid:function(){return"Error"!==this.timeRangesForm.get("state")&&this.timeRangesForm.validate()},_getData:function(){return{name:this.timeRangeName.get("value").trim(),periodCount:this.periodCount.get("value"),firstPeriod:this.startPeriod.get("value"),halfYearTotalsIncluded:this.checkBoxHalfYear.get("checked"),quarterTotalsIncluded:this.checkBoxQuarter.get("checked"),totalOfAllPeriodsIncluded:this.checkBoxTotalOfAll.get("checked"),yearToGoIncluded:this.checkBoxYTG.get("checked"),yearToDateIncluded:this.checkBoxYTD.get("checked"),
position:this._isInsert&&this._relativeItem&&this.positionSelect.value,relativeToLabel:this._isInsert&&this._relativeItem&&this._relativeItem.label,entityLongId:this._relativeItem&&this._relativeItem.entityLongId,fourDigitYear:this.startPeriod.params.options.find(this._getSelectedStartPeriod).fourDigitYear}},_onCancel:function(){this.onCancel()},_onCancelButtonClick:function(){this._onCancel()},_onChangeOfPosition:function(){this.relativeToItemName.innerHTML="Start"===this.positionSelect.value||"End"===
this.positionSelect.value?"":this._relativeItem.label},_getTimeRangePeriodCountValidator:function(b){return function(c){var d=b[b.length-1].fourDigitYear,e=b.find(this._getSelectedStartPeriod).fourDigitYear,d=1+d-e;this.set("invalidMessage",a.periodCountInformation+d);return c<=d&&0<c}.bind(this)},_getSelectedStartPeriod:function(a){return a.selected},_getTimeRangeNameValidator:function(a,b,c,d,e){return function(h){h=h.toLowerCase().trim();var f=new u;if(!f.checkId(h))return this.set("invalidMessage",
f.getInvalidIdMessage()),!1;for(var f=a.length,m=0;m<f;m++)if(h===a[m].toLowerCase()&&(c||h!==b))return this.set("invalidMessage",d.duplicateTimeRangeName),!1;f=e.length;for(m=0;m<f;m++)if(h===e[m].toLowerCase())return this.set("invalidMessage",d.forbiddenName),!1;return!0}}})})},"anaplan/settings/Time2/TimeDataTransform":function(){define(["anaplan/constants","anaplan/utils/JsHelper","dojo/date/locale","anaplan/data/ChangeFactory"],function(g,b,k,p){return{buildCellChanges:function(g,n){var f=[],
s=(new p).getCellChangeGenerator(),l;for(l in g)if(b.has(g,l)){var a=this._getEntityLongId(l),e=g[l],d=n.value[l],q="",h=!1;b.isDate(e)?(h=d?e.getTime()!==d.getTime():!0,e=k.format(e,{selector:"date",datePattern:"yyyy-MM-dd"}),d&&(d=k.format(d,{selector:"date",datePattern:"yyyy-MM-dd"}))):h=e!==d;h&&n.items[l]&&(d=(q=d)?parseInt(b.getKeyByValue(n.items[l].items,q),10):n.items[l].selected);var u=n.noCurrentValue[l]&&!0===n.noCurrentValue[l];a&&h&&f.push(s.getCellChange({modelId:window.modelId,originalText:d,
entityLongIds:[a],cellText:e,currentDisplayText:q,noCurrentValue:u}))}return f},buildCurrentPeriodParams:function(g){var n={},f;for(f in g)if(b.has(g,f)){var s=this._getEntityLongId(f),l=g[f];"startDate"===f&&(l=k.format(l,{selector:"date",datePattern:"yyyy-MM-dd"}));s&&(n[s]=l)}return n},_getEntityLongId:function(b){var k={timeCalendarType:g.SYSTEM_PROPERTY_TIME_CALENDAR_TYPE,fiscalYearStartMonth:g.SYSTEM_PROPERTY_TIME_FISCAL_YEAR_START_MONTH,currentFiscalYear:g.SYSTEM_PROPERTY_TIME_CURRENT_PERIOD,
numberOfPastYears:g.SYSTEM_PROPERTY_TIME_PAST_PERIOD_COUNT,numberOfFutureYears:g.SYSTEM_PROPERTY_TIME_FUTURE_PERIOD_COUNT,weekCount:g.SYSTEM_PROPERTY_TIME_WEEK_COUNT,startDate:g.SYSTEM_PROPERTY_TIME_START_DATE,weekFormat:g.SYSTEM_PROPERTY_TIME_WEEK_FORMAT,quarterlyWeekGrouping:g.SYSTEM_PROPERTY_TIME_QUARTERLY_WEEK_GROUPING,fiscalYearExtraWeekMonth:g.SYSTEM_PROPERTY_TIME_FISCAL_YEAR_EXTRA_WEEK_MONTH,fiscalYearExtraMonthQuarter:g.SYSTEM_PROPERTY_TIME_FISCAL_YEAR_EXTRA_MONTH_QUARTER,fiscalYearEndMonth:g.SYSTEM_PROPERTY_TIME_FISCAL_YEAR_END_MONTH,
fiscalYearEndDayInWeek:g.SYSTEM_PROPERTY_TIME_FISCAL_YEAR_END_DAY_IN_WEEK,fiscalYearEndType:g.SYSTEM_PROPERTY_TIME_FISCAL_YEAR_END_TYPE,currentPeriod:g.SYSTEM_PROPERTY_TIME_CURRENT_DETAIL_PERIOD,quarterTotalsIncluded:g.SYSTEM_PROPERTY_TIME_QUARTER_TOTALS_INCLUDED,halfYearTotalsIncluded:g.SYSTEM_PROPERTY_TIME_HALF_YEAR_TOTALS_INCLUDED,yearToDateIncluded:g.SYSTEM_PROPERTY_TIME_YEAR_TO_DATE_INCLUDED,yearToGoIncluded:g.SYSTEM_PROPERTY_TIME_YEAR_TO_GO_INCLUDED,totalOfAllPeriodsIncluded:g.SYSTEM_PROPERTY_TIME_TOTAL_OF_ALL_PERIODS_INCLUDED,
takeFiscalYearNameFromPeriodStart:g.SYSTEM_PROPERTY_TAKE_FISCAL_YEAR_FROM_START};return void 0!==k[b]?k[b]:null}}})},"anaplan/settings/Time2/Forms/FormBase":function(){define("dijit/form/CheckBox ./Widgets/FiscalYearEndType ./Widgets/IncludeOptions anaplan/utils/JsHelper anaplan/utils/TestAttributesHelper anaplan/widgets/_DomVisibleMixin dijit/_Contained dijit/_Container dijit/_WidgetBase dijit/form/_FormMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/dom-style dojo/i18n!anaplan/nls/time dojo/_base/sniff".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t){return d([l,n,f,s,a],{i18n:t,_formfields:[],constructor:function(){this._oldVal={};this.fields={};this.rows={}},postCreate:function(){this.inherited(arguments)},startup:function(){this.fields.includeOptions&&this.emit("currentperiodrequired");this.inherited(arguments)},_getValueAttr:function(){var a={},b={includeOptions:!0,fiscalYearEndType:!0},c;for(c in this.fields)b[c]?q.mixin(a,this.fields[c].get("value")):a[c]=this.fields[c].get("value");return a},
_attach:function(){e.forEach(this._formfields,q.hitch(this,function(a){if(a.triggerCurrentPeriod){var b=this.fields[a.name];this.own(b.on("change",q.hitch(this,function(){this.emit("currentperiodrequired",b,a.name)})))}}));this.own(this.watch("value",q.hitch(this,"_onFormValueChange")))},_onFormValueChange:function(){this.emit("formvaluechange")},applyFormLogic:function(a){this._oldVal=a},updateCurrentPeriods:function(a){a&&this.fields.currentPeriod&&this.fields.currentPeriod.setData(a)},loadForm:function(a){e.forEach(this._formfields,
q.hitch(this,function(b){switch(b.name){case "fiscalYearEndType":this._createRowWithFiscalYearIs(b,a);break;case "include":this._createRowWithIncludes(b,a);break;default:this._createRowWithLabel(b,a)}}));this._addSeleniumAttr();this._attach();this._isDirty=!1},_addSeleniumAttr:function(){for(var a in this.fields)p.has(this.fields,a)&&(this.fields[a].domNode?r.add(this.fields[a],a):console.warn("%s should exists when adding test attributes",a))},_createRowWithFiscalYearIs:function(a,c){var d=h.create("tr"),
e=h.create("td"),f=h.create("label",{innerHTML:t.labelEndOfFiscalYear});h.place(f,e);h.place(e,d);e=h.create("td");h.place(e,d);h.place(d,this.domNode);d=h.create("ul");h.place(d,e);d=new b({value:{fiscalYearEndType:c.value.fiscalYearEndType,fiscalYearEndDayInWeek:c.value.fiscalYearEndDayInWeek,fiscalYearEndMonth:c.value.fiscalYearEndMonth},items:{fiscalYearEndType:c.items.fiscalYearEndType}},d);u.add(d.domNode,a.name);this.fields.fiscalYearEndType=d},_createRowWithIncludes:function(a,b){var c=h.create("tr");
this.rows[a.name]=c;var d=h.create("td"),e=h.create("label",{innerHTML:t.labelIncludeOptions});h.place(e,d);h.place(d,c);d=h.create("td");h.place(d,c);h.place(c,this.domNode);c=h.create("ul");h.place(c,d);c=new k({showFiscalYearExtraMonthQuarter:a.options.showFiscalYearExtraMonthQuarter,showHalfYearTotals:a.options.showHalfYearTotals,value:{quarterTotalsIncluded:b.value.quarterTotalsIncluded,halfYearTotalsIncluded:b.value.halfYearTotalsIncluded,yearToDateIncluded:b.value.yearToDateIncluded,yearToGoIncluded:b.value.yearToGoIncluded,
totalOfAllPeriodsIncluded:b.value.totalOfAllPeriodsIncluded,fiscalYearExtraMonthQuarter:b.value.fiscalYearExtraMonthQuarter},isEditable:{quarterTotalsIncluded:b.isEditable.quarterTotalsIncluded,halfYearTotalsIncluded:b.isEditable.halfYearTotalsIncluded,yearToDateIncluded:b.isEditable.yearToDateIncluded,yearToGoIncluded:b.isEditable.yearToGoIncluded,totalOfAllPeriodsIncluded:b.isEditable.totalOfAllPeriodsIncluded,fiscalYearExtraMonthQuarter:b.isEditable.fiscalYearExtraMonthQuarter}},c);this.fields.includeOptions=
c},_createCheckboxRow:function(a,b){var c=h.create("tr"),d=h.create("td"),e=this.id+"_"+a.name,f=h.create("td");if(a.leftnls){var l=h.create("label",{"for":e,innerHTML:t[a.leftnls]});h.place(l,f)}h.place(f,c);f=h.create("input");h.place(f,d);this.fields[a.name]=this._createWidget(e,f,a,b,g);this.rows[a.name]=c;this.fields[a.name].set("checked",b.value[a.name]);e=h.create("label",{"for":e,innerHTML:t[a.nls]});h.place(e,d);h.place(d,c);h.place(c,this.domNode);this.fields[a.name].startup()},_createWidget:function(a,
b,c,d,e){c.options=c.options||{};c.options.id=a;c.options.name=c.name;c.options.value=d.value[c.name];c.options.disabled=!d.isEditable[c.name];c.options.data=d.items[c.name];c.options.testableName=c.name;a=new e(c.options,b);u.add(a.domNode,c.name);this.own(a);return a},_createRowWithLabel:function(a,b){var c=h.create("tr"),d=h.create("td"),e=h.create("td"),f=this.id+"_"+a.name,g=h.create("label",{"for":f,innerHTML:t[a.nls]});h.place(g,e);h.place(e,c);e=h.create("input");h.place(e,d);this.fields[a.name]=
this._createWidget(f,e,a,b,a.Ctor);this.rows[a.name]=c;h.place(d,c);h.place(c,this.domNode);this.fields[a.name].startup()},visibleRows:function(){var a=0,b;for(b in this.rows)"none"!==c.get(this.rows[b],"display")&&a++;return a}})})},"anaplan/modelmap/yfiles/widgets/GraphView":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dojo/dom-geometry"],function(g,b,k){return g([b],{graphControl:null,_marginBox:null,_getGraphControlAttr:function(){return this.graphControl},_setGraphControlAttr:function(b){this._set("graphControl",
b);this.domNode.appendChild(b.div);this._marginBox&&this._resizeCore(this._marginBox)},resize:function(b){this._marginBox=b;this.get("graphControl")&&b&&this._resizeCore(b)},_resizeCore:function(b){var g=this.graphControl;k.setMarginBox(g.div,b);g.fireSizeChanged()}})})},"anaplan/forms/TagSearchFields":function(){define("anaplan/utils/FormatHelper anaplan/data/Aggregator anaplan/constants anaplan/data/ModelContentCache anaplan/data/RequestFactory anaplan/Exceptions anaplan/utils/UIHelper anaplan/widgets/Tooltip anaplan/utils/SubmissionHandler dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-geometry dojo/dom-style dojo/i18n!anaplan/nls/gridlet dojo/i18n!dijit/nls/common dojo/keys dojo/topic dojo/store/Memory dojo/text!anaplan/templates/_TagSearchFields.html dijit/form/ValidationTextBox dijit/form/FilteringSelect anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B){return h([e,a,d],{baseClass:"formDetails tagSearchFields",tabindex:-1,widgetsInTemplate:!0,templateString:B,constructor:function(a){this._rowsSelection=a.rowsSelection},onError:function(){},onComplete:function(){},postCreate:function(){this.okButton.set("label",m.labelFind);this.cancelButton.set("label",w.buttonCancel);f.setText(this.labelSearchText,m.labelSearchText);f.setText(this.labelSearchTag,m.labelSearchTag);f.setText(this.labelSearchTextDescription,
m.labelSearchTagDescription);this._setFormStateSearch();this._populateTags();1===this._rowsSelection.count&&this.filteringSelectTags.set("value",this._rowsSelection.entityIds[0][0]);this.okButton.set("disabled",!0)},resize:function(a){try{a&&(0<a.h&&0<a.w)&&c.setMarginBox(this.domNode,a)}catch(b){var d={widgetId:this.id};a&&(d.size=a);this.onError(new n.ClientException("TagSearchFields: resize",b,d))}},startup:function(){this._started&&console.warn("startup "+this.id);this.inherited(arguments)},uninitialize:function(){q.forEach(this._connections,
function(a){a.remove()});this.inherited(arguments)},_doSearch:function(){var a=this,b=this.inputSearchText.get("value"),c=this.filteringSelectTags.get("value");this._findTag(b,c,function(b){a.onComplete(b)})},_findTag:function(a,b,c){a={actionId:"SEARCH_TAG",params:{searchString:a,tagName:b,modelId:window.modelId}};b=u.hitch(this,function(a){a&&(a.result&&a.result.systemActionResults)&&(a=a.result.systemActionResults[0],(!a||!a.dashboardDefinition)&&(!a.dashboardDefinition&&a.infoMessages)&&f.showInfoDialog(a.infoMessages,
{title:m.titleTagSearchResults}),c(a))});(new l).post(null,null,[a]).then(b,function(){return!1})},onCancel:function(){if(this.getParent()&&this.getParent().onCancel)this.getParent().onCancel()},_onSearchTextBlur:function(a){this._validateInput()},_onSearchTextChange:function(a){this._validateInput()},_onSelectInputBlur:function(a){this._validateInput()},_onSelectInputChange:function(a){this._validateInput()},_populateTags:function(){var a=[],b=p.getTagsLabelPage();b&&(a=a.concat(this._toPairs(b)));
a=new A({data:{identifier:"value",label:"name",items:a}});this.filteringSelectTags.set("store",a)},_toPairs:function(a){var b=[];a=a.labels[0];var c=a.length,d;for(d=0;d<c;d++)b.push({name:a[d],value:a[d]});return b},_validateInput:function(){try{!this.inputSearchText.isValid()||!this.filteringSelectTags.isValid()?this.okButton.set("disabled",!0):this.okButton.set("disabled",!1)}catch(a){if(this.getParent()&&this.getParent().onCancel)this.getParent().onCancel();f.showErrorReporter(new n.ClientException("anaplan.forms.TagSearchFields: _validateInput",
a,{widgetId:this.id},event))}},_setFormStateSearch:function(){this.inputSearchText.set("disabled",!1);this.filteringSelectTags.set("disabled",!1)}})})},"anaplan/settings/SettingsFactory":function(){define("anaplan/constants anaplan/settings/Actions anaplan/settings/Contents anaplan/settings/Currencies anaplan/settings/Hierarchy anaplan/settings/History anaplan/settings/LineItemSubsets anaplan/settings/ListsAndRollups anaplan/settings/Modules anaplan/settings/RevisionTags anaplan/settings/Time2 anaplan/settings/Dashboards anaplan/settings/UsersAndRoles anaplan/settings/View anaplan/settings/Tags anaplan/utils/EntityLongIdHelper dojo/_base/declare dojo/_base/lang anaplan/settings/TimeAndTimeRanges anaplan/data/ModelContentCache".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z){return t("anaplan.settings.SettingsFactory",[],{constructor:function(a){this.inherited(arguments)},loadSetting:function(t,A,B){B=m.mixin(B||{},{modelContent:t,region:"center"});t.entityLongId==g.MODEL_CONTENT_USERS_ENTITY_LONG_ID?A.addChild(new q(B)):c.getEntityTypeIndex(t.entityLongId)==g.HIERARCHY_ENTITY_TYPE_INDEX?(delete B.id,A.addChild(new r(B))):t.entityLongId==g.MODEL_CONTENT_TIMESCALE_ENTITY_LONG_ID?z.getApplicationProperty(g.FEATURE_FLAGS.TIME_RANGES)?
A.addChild(new w(B)):A.addChild(new e(B)):t.entityLongId==g.MODEL_CONTENT_CURRENCIES_ENTITY_LONG_ID?A.addChild(new p(B)):t.entityLongId==g.MODEL_CONTENT_LISTS_AND_ROLLUPS_ENTITY_LONG_ID?A.addChild(new s(B)):t.entityLongId==g.MODEL_CONTENT_LINE_ITEM_SUBSET_ENTITY_LONG_ID?(delete B.id,A.addChild(new f(B))):t.entityLongId==g.MODEL_CONTENT_MODULE_ENTITY_LONG_ID?A.addChild(new l(B)):t.entityLongId==g.MODEL_CONTENT_HISTORY_ENTITY_LONG_ID?A.addChild(new n(B)):t.entityLongId==g.MODEL_CONTENT_ACTION_ENTITY_LONG_ID?
A.addChild(new b(B)):t.entityLongId==g.MODEL_CONTENT_CONTENTS_ENTITY_LONG_ID?A.addChild(new k(B)):t.entityLongId===g.MODEL_CONTENT_REVISION_TAGS_ENTITY_LONG_ID?A.addChild(new a(B)):t.entityLongId===g.MODEL_CONTENT_DASHBOARD_ENTITY_LONG_ID?A.addChild(new d(B)):t.entityLongId===g.MODEL_CONTENT_TAGS_ENTITY_LONG_ID?A.addChild(new u(B)):A.addChild(new h(B))}})})},"anaplan/utils/logout":function(){define("anaplan/utils/UIHelper anaplan/data/Aggregator anaplan/data/RequestFactory anaplan/utils/UrlHelper anaplan/Exceptions dojo/_base/lang".split(" "),
function(g,b,k,p,r,n){var f=function(){try{g.dirtyFormCheck(function(){var f=k.createRequest(workspaceId,[],[],[{actionId:"LOGOUT",params:{}}],[]);b.post(f,!1,function(a){a.error||(a.result?(a=a.result,a.systemActionResults?(a=a.systemActionResults,1!=a.length?console.warn("anaplan.util logout onLoad handler expected to find 1 system action result"):(a=a[0].logoutRedirectUrl,a=p.getSingleIPUrl(a),window.location=a)):console.warn("anaplan.util logout onLoad handler expected to find systemActionResults and did not")):
console.warn("anaplan.layout.Banner _onLogout onLoad handler expected to find result and did not"))},function(){})},function(){})}catch(f){g.showErrorReporter(new r.ClientException("util: logout",f,{}))}};n.setObject("anaplan.utils.logout",f);return f})},"anaplan/settings/Time2/Forms/Widgets/ThirteenWeekSelect":function(){define(["dijit/form/Select","dojo/_base/declare","dojo/data/ObjectStore","dojo/store/Memory"],function(g,b,k,p){return b(g,{sortByLabel:!1,labelType:"text",required:!0,startup:function(){this.refreshValues();
this.inherited(arguments)},refreshValues:function(){var b=this.value;this.set("store",this._getData());b&&this.set("value",b)},_getData:function(){for(var b=[],g=1;14>g;g++)b.push({id:g,label:String(g)});b=new p({data:b});return new k({objectStore:b})}})})},"anaplan/quicksum/QuickSumContainer":function(){define(["dijit/layout/ContentPane","dojo/_base/declare","dojo/dom-construct"],function(g,b,k){return b("anaplan.quicksum.QuickSumContainer",g,{baseClass:"ap-quicksum-container",constructor:function(b){this._quickSumModel=
(b||{}).quickSumModel||null},postCreate:function(){this.inherited(arguments);this._quickSumNode=k.create("div",{"class":"aui",style:"height: 30px"});this.set("content",this._quickSumNode)},startup:function(){this._started||(this.inherited(arguments),this.render())},destroy:function(){this._quickSumModel&&(this._quickSumModel.unmount(this._quickSumNode),this._quickSumModel=null);this.inherited(arguments)},render:function(){this._quickSumModel&&this._quickSumModel.render(this._quickSumNode,this._contentBox?
this._contentBox.w:null)},resize:function(){this.inherited(arguments);setTimeout(function(){this.render()}.bind(this),500)}})})},"anaplan/settings/Time2/Forms/Widgets/FiscalYearEndType":function(){define("./FiscalYearDayInWeekSelect ./FiscalYearMonthSelect anaplan/utils/TestAttributesHelper dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/RadioButton dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/time dojo/text!anaplan/templates/Settings/Time/Widgets/FiscalYearEndType.html".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e){return s([r,p,n],{testableName:"fiscalYearEndType",templateString:e,i18n:a,startup:function(){this.inherited(arguments);this.applyFormLogic()},postCreate:function(){this.inherited(arguments);if(!this.value.fiscalYearEndType||-1===this.value.fiscalYearEndType)this.value.fiscalYearEndType=this.items.fiscalYearEndType.items[this.items.fiscalYearEndType.selected];if(!this.value.fiscalYearEndMonth||0===this.value.fiscalYearEndMonth)this.value.fiscalYearEndMonth=12;if(!this.value.fiscalYearEndDayInWeek||
0===this.value.fiscalYearEndDayInWeek)this.value.fiscalYearEndDayInWeek=7;this.radioFiscalYearEndTypeLast=new f({name:"fiscalYearEndType",checked:"Last in Month"===this.value.fiscalYearEndType,value:"Last in Month",testableName:"fiscalYearEndTypeLast"},this.radio1);this.radioFiscalYearEndTypeNearest=new f({name:"fiscalYearEndType",checked:"Nearest End of Month"===this.value.fiscalYearEndType,value:"Nearest End of Month",testableName:"fiscalYearTypeEnd"},this.radio2);this.selectFiscalYearEndNearestMonth=
new b({name:"fiscalYearEndMonth",value:this.value.fiscalYearEndMonth,testableName:"fiscalYearStartMonth"},this.fiscalYearStartMonth);this.selectFiscalYearEndLastMonth=new b({name:"fiscalYearEndMonth",value:this.value.fiscalYearEndMonth,testableName:"endMonth"},this.fiscalYearEndMonth);this.selectFiscalYearEndNearestDay=new g({name:"fiscalYearEndDayInWeek",value:this.value.fiscalYearEndDayInWeek,testableName:"startDayInWeek"},this.fiscalYearStartDayInWeek);this.selectFiscalYearEndDayInWeek=new g({name:"fiscalYearEndDayInWeek",
value:this.value.fiscalYearEndDayInWeek,testableName:"endDayInWeek"},this.fiscalYearEndDayInWeek);this._attach();this._addSeleniumAttr()},_addSeleniumAttr:function(){k.add(this.radioFiscalYearEndTypeLast,"fiscalYearEndTypeLast");k.add(this.radioFiscalYearEndTypeNearest,"fiscalYearEndTypeNearest");k.add(this.selectFiscalYearEndNearestMonth,"fiscalYearEndNearestMonth");k.add(this.selectFiscalYearEndLastMonth,"fiscalYearEndLastMonth");k.add(this.selectFiscalYearEndNearestDay,"fiscalYearEndNearestDay");
k.add(this.selectFiscalYearEndDayInWeek,"fiscalYearEndLastDay")},applyFormLogic:function(){this._valueChanged();var a=this.radioFiscalYearEndTypeLast.get("checked");this.selectFiscalYearEndDayInWeek.set("disabled",!a);this.selectFiscalYearEndLastMonth.set("disabled",!a);this.selectFiscalYearEndNearestDay.set("disabled",a);this.selectFiscalYearEndNearestMonth.set("disabled",a)},_attach:function(){this.radioFiscalYearEndTypeLast.on("change",l.hitch(this,"applyFormLogic"));this.selectFiscalYearEndNearestMonth.on("change",
l.hitch(this,"_valueChanged"));this.selectFiscalYearEndLastMonth.on("change",l.hitch(this,"_valueChanged"));this.selectFiscalYearEndNearestDay.on("change",l.hitch(this,"_valueChanged"));this.selectFiscalYearEndDayInWeek.on("change",l.hitch(this,"_valueChanged"))},_valueChanged:function(){this.emit("valuechange")},_getValueAttr:function(){return this.radioFiscalYearEndTypeLast.get("checked")?{fiscalYearEndType:this.radioFiscalYearEndTypeLast.get("value"),fiscalYearEndDayInWeek:this.selectFiscalYearEndDayInWeek.get("value"),
fiscalYearEndMonth:this.selectFiscalYearEndLastMonth.get("value")}:{fiscalYearEndType:this.radioFiscalYearEndTypeNearest.get("value"),fiscalYearEndDayInWeek:this.selectFiscalYearEndNearestDay.get("value"),fiscalYearEndMonth:this.selectFiscalYearEndNearestMonth.get("value")}}})})},"anaplan/gridlet/_editor/ProcessEditor":function(){define("anaplan/utils/UIHelper anaplan/data/ModelContentCache anaplan/constants anaplan/data/ModelContentHelper anaplan/gridlet/_editor/PopupEditor anaplan/utils/EntityLongIdHelper anaplan/widgets/SubsetSelector anaplan/common/SelectiveAccess dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/aspect dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-geometry dojo/json dojo/i18n!anaplan/nls/processEditor dojo/text!anaplan/templates/ProcessEditor.html dijit/form/CheckBox anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w){var z=q([a,l,e],{baseClass:"processEditor",name:"",tabIndex:-1,templateString:w,constructor:function(a){this._entityLongId=a.entityLongId||-1;this._processDefinitionJson=a.processDefinitionJson;this._processDefinition=t.parse(a.processDefinitionJson);this._readOnly=a.readOnly},focus:function(){},isValid:function(){return!0},onCancel:function(){},onChange:function(){},postCreate:function(){var a,c,d;this.inherited(arguments);var e=this;d=c=a=0;this._subsetSelector=
new f({listSize:0,treeLabel:"Available Actions",listLabel:"listLabel",deselectLabel:"Remove",selectionListLabel:"Selected Actions",selectedItems:this.getSelectedItems(this._processDefinition),viewDefinition:this._getViewDefinition(),readOnly:this._readOnly,filter:function(h){var f=null,g;if(h.entityLongId!=e._entityLongId)if(f=h,g=n.getEntityTypeIndex(h.entityLongId),g==k.ACTION_GROUPING_ENTITY_TYPE_INDEX)h.entityLongId==k.ACTION_GROUPING_PROCESSES_ENTITY_LONG_ID&&(f=null),h.entityLongId==k.ACTION_GROUPING_EXPORTS_ENTITY_LONG_ID&&
0==d&&(f=null),h.entityLongId==k.ACTION_GROUPING_IMPORTS_ENTITY_LONG_ID&&0==c&&(f=null),h.entityLongId==k.ACTION_GROUPING_OTHER_ENTITY_LONG_ID&&0==a&&(f=null);else if(g==k.EXPORT_ENTITY_TYPE_INDEX)f.parentEntityLongId=k.ACTION_GROUPING_EXPORTS_ENTITY_LONG_ID,++d;else if(g==k.IMPORT_ENTITY_TYPE_INDEX)f.parentEntityLongId=k.ACTION_GROUPING_IMPORTS_ENTITY_LONG_ID,++c;else if(g==k.ACTION_ENTITY_TYPE_INDEX){h=b.getActionInfo(h.entityLongId);if(null!=h&&null!=h.actionDefinitionJsonString&&(h=t.parse(h.actionDefinitionJsonString),
h.actionType===k.ACTION_TYPE_TASK_ELEMENT))if(h.taskElement){if(taskElement=t.parse(h.taskElement),!taskElement.operation||!("OPTIMIZER"===taskElement.operation||taskElement.operation===k.taskElementOperation.RUN_CMPL_SCRIPT))f=null}else f=null;f&&(f.parentEntityLongId=k.ACTION_GROUPING_OTHER_ENTITY_LONG_ID,++a)}else f=null;return f},selectionFilter:function(a){return n.getEntityTypeIndex(a.entityLongId)!=k.ACTION_GROUPING_ENTITY_TYPE_INDEX},actions:{arrowIndicator:!0,moveUpButton:!0,moveDownButton:!0}});
u.place(this._subsetSelector.domNode,this.selectionDiv);s.isAuthorized(k.userActions.CAN_DISPLAY_FULL_USER_DETAILS)?(g.setText(this.lblUseDetailedResults,m.displayFullResults),this.chkUseDetailedResults.set("checked",this._processDefinition.useDetailedResults)):u.destroy(this.pnlUseDetailedResults);this.okButton.set("label","OK");this._readOnly?(this.okButton.set("disabled",!0),this.cancelButton.set("label","Close")):this.cancelButton.set("label","Cancel")},getSelectedItems:function(a){var b=[],c;
if(!a)return b;for(c=a.start;c&&"_END_"!==c;){c=a.nodes[c];if(!c)break;c.action&&b.push(n.entityLongIdIdentifierToEntityLongId(c.action));c=c.next}return b},getValue:function(){var a=[],b,c,d,e,h,f;this._subsetSelector&&(a=this._subsetSelector.getSelectedItems());b={nodes:{_END_:{type:"END",next:null}},start:"_END_"};c=null;for(d=0;d<a.length;++d){e=a[d].entityLongId;h=n.getEntityTypeIndex(e);f={};if(h==k.EXPORT_ENTITY_TYPE_INDEX)f.type="EXPORT";else if(h==k.IMPORT_ENTITY_TYPE_INDEX)f.type="IMPORT";
else if(h==k.ACTION_ENTITY_TYPE_INDEX)f.type="ACTION";else{h!=k.PROCESS_ENTITY_TYPE_INDEX&&console.warn("Can't do anything with "+e);continue}f.action=n.entityLongIdToEntityLongIdIdentifier(e);f.next="_END_";e=""+d;c?c.next=e:b.start=e;c=b.nodes[e]=f}b.useDetailedResults=this.chkUseDetailedResults?this.chkUseDetailedResults.get("checked"):this._processDefinition.useDetailedResults;return t.stringify(b)},resize:function(a){var b,d,e,h,f;a&&c.setMarginBox(this.domNode,a);this.inherited(arguments);b=
c.getMarginSize(this.domNode);d=c.getMarginBox(this.instructions);e=c.getMarginBox(this.treeLabel);h=c.getMarginBox(this.selectionListLabel);f=c.getMarginBox(this.buttons);c.setMarginBox(this.selectionDiv,{h:b.h-d.h-f.h-Math.max(e.h,h.h)-14});this._subsetSelector&&(b=c.getContentBox(this.selectionDiv),this._subsetSelector.resize({w:b.w,h:b.h}))},startup:function(){this.inherited(arguments);this._subsetSelector&&this._subsetSelector.startup()},_getViewDefinition:function(){var a,b;null==this._viewDefinition&&
(a={type:"MODEL_DEFINITION"},b=p.getAxesForViewDefinition([k.SYSTEM_AXIS_IDENTIFIER_ACTION_WITH_HEADING_IDENTIFIER],[k.SYSTEM_AXIS_IDENTIFIER_ACTION_PROPERTY_IDENTIFIER]),h.mixin(a,b),this._viewDefinition=a);return this._viewDefinition},_onOkButtonClick:function(){var a=this.getValue();if(a!=this._processDefinitionJson)this.onChange(a);else this.onCancel()},_onCancelButtonClick:function(){this.onCancel()}});r=q("anaplan.gridlet._editor.ProcessEditor",r,{getValue:function(){return this._value},prepare:function(a){var b=
this.inherited(arguments),c=h.mixin({},this._params,a);if(!c.model)return b.reject("anaplan.gridlet._editor.ProcessEditor#prepare - no model provided"),b;if(!c.underlyingValue)return b.reject("anaplan.gridlet._editor.ProcessEditor#prepare - no underlying value"),b;if(!this._dialog)return b.reject("anaplan.gridlet._editor.ProcessEditor#prepare - no dialog provided"),b;console.warn(this.id+" TODO: display action label in editor");this._dialog.set("title",c.label||"");this.widget=new z(c.underlyingValue);
this.own(d.after(this.widget,"change",h.hitch(this,"_onChange")),d.after(this.widget,"cancel",h.hitch(this,"onCancel")));this._dialog.set("content",this.widget.domNode);b.resolve();return b},_onChange:function(a){this._value=a;this.onChange(a)}});r.Widget=z;return r})},"anaplan/settings/Actions/ManageImportDataSourceDialog":function(){define("anaplan/anapediaKeys dojo/_base/declare dojo/on anaplan/view/ManageImportSources dojo/i18n!anaplan/nls/imports anaplan/widgets/HelpBox anaplan/utils/UIHelper anaplan/utils/FormatHelper".split(" "),
function(g,b,k,p,r,n,f,s){return b([],{_dialog:null,constructor:function(b){var a=this;this.inherited(arguments);this._dialog=f.getSharedDialog();this._dialog.set("title",r.titleManageImportSources);this._dialog.set("refocus",!1);var e=new p(b);this._dialog.set("content",e.domNode);k(e,"Close",function(){a._dialog.onCancel()});this._dialog.setHelpContent(g.manageImportSources)},show:function(){this._dialog.show()}})})},"anaplan/view/ManageImportSources/_BottomButton":function(){define("anaplan/utils/RedirectHelper anaplan/utils/UIHelper anaplan/utils/FormatHelper anaplan/data/Aggregator/TxidProvider anaplan/data/Aggregator/RequestSerialProvider dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_Contained anaplan/widgets/HelpBox anaplan/Exceptions dojo/io-query dojo/_base/lang dojo/_base/array dojo/json dojo/on dojo/has dojo/dom-attr dojo/dom-construct dojo/io/iframe dojo/i18n!anaplan/nls/imports dojo/i18n!anaplan/nls/manageImportSources dojo/i18n!dijit/nls/common dojo/text!anaplan/templates/ManageImportSources/BottomButton.html anaplan/widgets/Button dojo/_base/sniff anaplan/widgets/MasterSelector anaplan/widgets/SimpleTextarea anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v){return n([f,s,l,a],{templateString:v,baseClass:"bottom_button",lblClose:y.itemClose,windowToAttach:!1,constructor:function(a){this.inherited(arguments);this.windowToAttach=a.windowToAttach},_onClose:function(a){this.windowToAttach._onCancel();this.windowToAttach._onCloseButtonMouseDown(a)}})})},"anaplan/view/ModelManagement/ImportModelView":function(){define("anaplan/anapediaKeys anaplan/utils/UIHelper anaplan/data/ModelContentCache anaplan/Exceptions anaplan/view/ModelManagement/ModelView dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/data/ItemFileReadStore dojo/dom-attr dojo/i18n!anaplan/nls/modelManagement dojo/i18n!dijit/nls/common dojo/keys dojo/string dojo/text!anaplan/templates/ModelManagement/ImportModelView.html dijit/form/ValidationTextBox dijit/form/FilteringSelect anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c){return f([r],{templateString:c,importModelButton:null,modelSourceLabel:null,modelSourceSelect:null,onImportModel:function(){},onValidStateChange:function(a){this.importModelButton.set("disabled",!a)},postCreate:function(){try{this.inherited(arguments);b.setText(this.modelNameLabel,d.labelModelName);b.setText(this.modelSourceLabel,d.labelModelSource);this.importModelButton.set("label",q.buttonOk);this.cancelButton.set("label",q.buttonCancel);e.set(this.modelNameLabel,
"for",this.modelNameTextBox.id);e.set(this.modelSourceLabel,"for",this.modelSourceSelect.id);var a=this;this.modelNameTextBox.validator=function(b){b=a._checkModelName(b);return null!=b&&0<b.length?(this.invalidMessage=b,!1):!0}}catch(c){throw new p.ClientException("ImportModelView#postCreate",c);}},startup:function(){try{var b=k.getWorkspaceInfo(),c=b?l.clone(b.modelSources):[];c||(c=[]);var d=new a({data:{identifier:"identifier",label:"label",items:c}});this.modelSourceSelect.set("store",d);0<c.length&&
this.modelSourceSelect.set("value",c[0].identifier);this.inherited(arguments)}catch(e){throw new p.ClientException("ImportModelView#startup",e);}},_onImportModel:function(){try{if(this.isValid()){var a=this.modelNameTextBox.get("value"),b=this.modelSourceSelect.get("value"),c=null,d=k.getWorkspaceInfo();n.some(d.modelSources,function(a){return a.identifier==b?(c=a,!0):!1});this.onImportModel(u.trim(a),c)}}catch(e){throw new p.ClientException("ImportModelView#_onImportModel",e);}},_onImportModelButtonClick:function(){this._onImportModel()},
_onKeyDown:function(a){var b=a.keyCode;b===h.ESCAPE?(this._onCancel(),s.stop(a)):b===h.ENTER&&(this._onImportModel(),s.stop(a))},_onShow:function(){try{this.onTitleChange(d.titleImportModel),this.onHelpChange(g.manageModels),this.modelNameTextBox.focus()}catch(a){throw new p.ClientException("ImportModelView#_onShow",a);}}})})},"anaplan/tabs/Settings":function(){define("anaplan/anapediaKeys anaplan/constants anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/Exceptions anaplan/layout/ManagedContainer anaplan/settings/SettingsFactory anaplan/settings/SettingsSidebar anaplan/tabs/Settings/Header anaplan/utils/EntityLongIdHelper anaplan/utils/UIHelper anaplan/utils/UrlHelper anaplan/utils/SingleIpHelper dijit/layout/ContentPane dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/i18n!anaplan/nls/common dojo/on dojo/topic".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z){return u("anaplan.tabs.Settings",[n],{design:"sidebar",gutters:!(q.hasSingleIpCookie()&&k.getApplicationProperty(b.FEATURE_FLAGS.GLOBAL_NAV)),liveSplitters:!1,constructor:function(a){this._selectedEntityLongId=a.entityLongId;this._show={};this._showTipsOnStartup=a.showTipsOnStartup;this._globalFormulaEditModule=a.globalFormulaEditModule||null;this._helpId=a.helpId},getHelpId:function(){return this._helpId||g[b.SETTINGS_TAB]},hide:function(a){a===b.TIPS&&
delete this._show[a];this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(z.subscribe("anaplan/modelId",c.hitch(this,"_clearGlobalFormulaEditModule")),z.subscribe("anaplan/formula/startGlobalEdit",c.hitch(this,"_setGlobalFormulaEditModule")),z.subscribe("anaplan/formula/endGlobalEdit",c.hitch(this,"_setGlobalFormulaEditModule")));t.add(this.domNode,"anaplanTabsSettings");this.addChild(new h({region:"center"}))},resume:function(){this._getCenter()?this.inherited(arguments):
this._suspended?(this._suspended=!1,this._settingsSidebar&&this._settingsSidebar.resume()):console.warn(this.id+" resume")},setModelId:function(){this._clearCenter();this._clearHeader();this.inherited(arguments)},show:function(a){a===b.TIPS&&(this._show[a]=!0);this.inherited(arguments)},startup:function(){if(this._started)console.warn("startup "+this.id);else try{this.inherited(arguments),this._showTipsOnStartup&&this.show(b.TIPS),this._settingsFactory=new f({}),this._header=new l({region:"top"}),
this.addChild(this._header),this._settingsSidebar=new s({region:"left",style:"width: 280px;",splitter:!0,selectedEntityLongId:this._selectedEntityLongId}),this.own(w(this._settingsSidebar,"SelectionChange",c.hitch(this,"_onSelectionChange"))),this.addChild(this._settingsSidebar)}catch(a){console.error(a)}},uninitialize:function(){this.inherited(arguments)},_clearCenter:function(){var a=this._getCenter();a&&(this.removeChild(a),a.destroyRecursive());this._helpId=null},_clearGlobalFormulaEditModule:function(){this._globalFormulaEditModule=
null},_clearHeader:function(){this._header.setHeader("")},_getCenter:function(){for(var a=this.getChildren().length-1;0<=a;a--){var b=this.getChildren()[a];if("center"===b.region)return b}},_getViewDefinition:function(d){if(!d.entityLongId)return null;var e=d.entityLongId,h=a.entityLongIdToEntityLongIdIdentifier(e),f=a.getEntityTypeIndex(e);if(f==b.HIERARCHY_ENTITY_TYPE_INDEX)return{id:d.entityId,content:[{workspaceId:workspaceId,modelId:modelId,viewAs:"grid",pageLabelsRequired:!1,viewDefinition:c.mixin({type:"MODEL_DEFINITION",
staticContextIdentifiers:[h],columnSizes:{customRowLabelWidthsByDimension:[],customWidthsByLineItem:[{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_READ_ACCESS_USERS),width:250},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_WRITE_ACCESS_USERS),width:250}],customWidthsByStyle:[],defaultColumnWidth:150}},p.getAxesForViewDefinition([b.SYSTEM_AXIS_IDENTIFIER_ENTITY_IDENTIFIER],[b.SYSTEM_AXIS_IDENTIFIER_PROPERTY_IDENTIFIER]))}]};if(f==b.TABLE_ENTITY_TYPE_INDEX)return{id:d.entityId,
content:[{workspaceId:workspaceId,modelId:modelId,viewAs:"grid",pageLabelsRequired:!1,viewDefinition:c.mixin({type:"MODEL_DEFINITION",staticContextIdentifiers:[h]},p.getAxesForViewDefinition([b.SYSTEM_AXIS_IDENTIFIER_ROW_IDENTIFIER],[b.SYSTEM_AXIS_IDENTIFIER_COLUMN_IDENTIFIER]))}]};if(f==b.LINE_ITEM_SUBSET_CATEGORY_ENTITY_TYPE_INDEX||f==b.LINE_ITEM_SUBSET_ENTITY_TYPE_INDEX)return{id:d.entityId,content:[{workspaceId:workspaceId,modelId:modelId,viewAs:"grid",pageLabelsRequired:!1,hideToolbar:!0,viewDefinition:c.mixin({type:"MODEL_DEFINITION",
staticContextIdentifiers:[h],columnSizes:{customRowLabelWidthsByDimension:[],customWidthsByLineItem:[],customWidthsByStyle:[],defaultColumnWidth:150}},p.getAxesForViewDefinition([b.SYSTEM_AXIS_IDENTIFIER_MODULE_WITH_LINE_ITEM_IDENTIFIER],[b.SYSTEM_AXIS_IDENTIFIER_LINE_ITEM_SUBSET_IDENTIFIER]))}]};if(e==b.MODEL_CONTENT_VERSION_ENTITY_LONG_ID)return this._getVersionsViewDefinition(d.entityId);if(e==b.MODEL_CONTENT_HIERARCHY_ENTITY_LONG_ID)return this._getHierarchiesViewDefinition(d.entityId);if(e==
b.MODEL_CONTENT_LINE_ITEM_SUBSET_ENTITY_LONG_ID)return this._getLineItemSubsetsViewDefinition(d.entityId);if(e===b.MODEL_CONTENT_REVISION_TAGS_ENTITY_LONG_ID)return{};if(e===b.MODEL_CONTENT_REMOTE_MODEL_ENTITY_LONG_ID)return this._getRemoteModelsViewDefinition(d.entityId);e=this._getRowSystemAxisIdentifier(d);h=this._getColumnSystemAxisIdentifier(d);f=this._getViewName(d);return{id:d.entityId,content:[{workspaceId:workspaceId,modelId:modelId,viewAs:"grid",pageLabelsRequired:!1,viewDefinition:c.mixin({type:"MODEL_DEFINITION",
columnSizes:{customRowLabelWidthsByDimension:[],customWidthsByLineItem:[],customWidthsByStyle:[],defaultColumnWidth:150}},p.getAxesForViewDefinition([e],[h]),null!==f?{name:f}:{})}]}},_getViewName:function(a){var c={};c[b.MODEL_CONTENT_MODULE_ENTITY_LONG_ID]=m.labelModules;c[b.MODEL_CONTENT_DASHBOARD_ENTITY_LONG_ID]=m.labelDashboards;c[b.MODEL_CONTENT_ACTION_ENTITY_LONG_ID]=m.labelActions;return void 0!==c[a.entityLongId]?c[a.entityLongId]:null},_getRemoteModelsViewDefinition:function(d){return{id:d,
content:[{workspaceId:window.workspaceId,modelId:window.modelId,viewAs:"grid",pageLabelsRequired:!1,viewDefinition:c.mixin({name:m.labelRemoteModels,type:"MODEL_DEFINITION",columnSizes:{customRowLabelWidthsByDimension:[],customWidthsByLineItem:[{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_REMOTE_MODEL_DEFINITION),width:400}],customWidthsByStyle:[],defaultColumnWidth:75,rowLabelWidth:400}},p.getAxesForViewDefinition([b.SYSTEM_AXIS_IDENTIFIER_REMOTE_MODEL_IDENTIFIER],[b.SYSTEM_AXIS_IDENTIFIER_REMOTE_MODEL_PROPERTY_IDENTIFIER]))}]}},
_getVersionsViewDefinition:function(d){return{id:d,content:[{workspaceId:workspaceId,modelId:modelId,viewAs:"grid",pageLabelsRequired:!1,viewDefinition:c.mixin({name:m.labelVersions,type:"MODEL_DEFINITION",columnSizes:{customRowLabelWidthsByDimension:[],customWidthsByLineItem:[{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_VERSION_IS_CURRENT),width:75},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_VERSION_IS_ACTUAL),width:75},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_VERSION_SWITCHOVER),
width:100},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_FORMULA),width:400},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_VERSION_EDIT_FROM),width:100},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_VERSION_EDIT_TO),width:100}],customWidthsByStyle:[],defaultColumnWidth:150}},p.getAxesForViewDefinition([b.SYSTEM_AXIS_IDENTIFIER_VERSION_ALL_IDENTIFIER],[b.SYSTEM_AXIS_IDENTIFIER_VERSION_PROPERTY_IDENTIFIER]))}]}},_getHierarchiesViewDefinition:function(d){return{id:d,
content:[{workspaceId:workspaceId,modelId:modelId,viewAs:"grid",pageLabelsRequired:!1,viewDefinition:c.mixin({name:m.labelGeneralLists,type:"MODEL_DEFINITION",columnSizes:{customRowLabelWidthsByDimension:[],customWidthsByLineItem:[{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_HIERARCHY_TOP_LEVEL),width:100},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_HIERARCHY_SELECTIVE_ACCESS),width:100},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_HIERARCHY_PRODUCTION_DATA),
width:100},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_HIERARCHY_MANAGED_BY),width:110},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_HIERARCHY_PARENT_HIERARCHY),width:100},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_HIERARCHY_IS_ORGANISATION),width:95},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_HIERARCHY_CATEGORY),width:100},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_HIERARCHY_HAS_WORKFLOW),
width:85},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_HIERARCHY_PROPERTIES),width:250},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_HIERARCHY_SUBSETS),width:250},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_HIERARCHY_NUMBERED_LIST),width:70}],customWidthsByStyle:[],defaultColumnWidth:150}},p.getAxesForViewDefinition([b.SYSTEM_AXIS_IDENTIFIER_HIERARCHY_IDENTIFIER],[b.SYSTEM_AXIS_IDENTIFIER_HIERARCHY_PROPERTY_IDENTIFIER]))}]}},
_getLineItemSubsetsViewDefinition:function(d){return{id:d,content:[{workspaceId:workspaceId,modelId:modelId,viewAs:"grid",pageLabelsRequired:!1,viewDefinition:c.mixin({name:m.labelLineItemSubsets,type:"MODEL_DEFINITION",columnSizes:{customRowLabelWidthsByDimension:[],customWidthsByLineItem:[{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_LINE_ITEM_SUBSET_MODULES),width:350},{identifier:a.entityLongIdToEntityLongIdIdentifier(b.SYSTEM_PROPERTY_LINE_ITEM_SUBSET_CATEGORY),width:100}],
customWidthsByStyle:[],defaultColumnWidth:150}},p.getAxesForViewDefinition([b.SYSTEM_AXIS_IDENTIFIER_LINE_ITEM_SUBSET_IDENTIFIER],[b.SYSTEM_AXIS_IDENTIFIER_LINE_ITEM_SUBSET_PROPERTY_IDENTIFIER]))}]}},_getRowSystemAxisIdentifier:function(a){var c={};c[b.MODEL_CONTENT_TIMESCALE_ENTITY_LONG_ID]=b.SYSTEM_AXIS_IDENTIFIER_TIMESCALE_PROPERTY_IDENTIFIER;c[b.MODEL_CONTENT_MODULE_ENTITY_LONG_ID]=b.SYSTEM_AXIS_IDENTIFIER_MODULE_ALL_IDENTIFIER;c[b.MODEL_CONTENT_TABLE_ENTITY_LONG_ID]=b.SYSTEM_AXIS_IDENTIFIER_TABLE_IDENTIFIER;
c[b.MODEL_CONTENT_DASHBOARD_ENTITY_LONG_ID]=b.SYSTEM_AXIS_IDENTIFIER_DASHBOARD_IDENTIFIER;c[b.MODEL_CONTENT_ACTION_ENTITY_LONG_ID]=b.SYSTEM_AXIS_IDENTIFIER_ACTION_WITH_HEADING_IDENTIFIER;return void 0!==c[a.entityLongId]?c[a.entityLongId]:null},_getColumnSystemAxisIdentifier:function(a){var c={};c[b.MODEL_CONTENT_TIMESCALE_ENTITY_LONG_ID]=b.SYSTEM_AXIS_IDENTIFIER_EMPTY_1_0_IDENTIFIER;c[b.MODEL_CONTENT_MODULE_ENTITY_LONG_ID]=b.SYSTEM_AXIS_IDENTIFIER_MODULE_PROPERTY_IDENTIFIER;c[b.MODEL_CONTENT_TABLE_ENTITY_LONG_ID]=
b.SYSTEM_AXIS_IDENTIFIER_TABLE_PROPERTY_IDENTIFIER;c[b.MODEL_CONTENT_DASHBOARD_ENTITY_LONG_ID]=b.SYSTEM_AXIS_IDENTIFIER_DASHBOARD_PROPERTY_IDENTIFIER;c[b.MODEL_CONTENT_ACTION_ENTITY_LONG_ID]=b.SYSTEM_AXIS_IDENTIFIER_ACTION_PROPERTY_IDENTIFIER;return void 0!==c[a.entityLongId]?c[a.entityLongId]:null},_onSelectionChange:function(a,h){try{clearTimeout(this._onSelectionChangeTimeout);var f=a.entityLongId,g=null;switch(f){case b.MODEL_CONTENT_NEW_LIST_ENTITY_LONG_ID:this._settingsSidebar.getModelContents().addNewGeneralList();
break;case b.MODEL_CONTENT_NEW_LINE_ITEM_SUBSET_ENTITY_LONG_ID:this._settingsSidebar.getModelContents().addNewLineItemSubset();break;case b.MODEL_CONTENT_CURRENCIES_ENTITY_LONG_ID:case b.MODEL_CONTENT_IMPORTS_ENTITY_LONG_ID:case b.MODEL_CONTENT_PREFERENCES_ENTITY_LONG_ID:case b.MODEL_CONTENT_USERS_ENTITY_LONG_ID:case b.MODEL_CONTENT_LISTS_AND_ROLLUPS_ENTITY_LONG_ID:case b.MODEL_CONTENT_HISTORY_ENTITY_LONG_ID:case b.MODEL_CONTENT_EXPORTS_ENTITY_LONG_ID:case b.MODEL_CONTENT_CONTENTS_ENTITY_LONG_ID:g=
{workspaceId:workspaceId,modelId:modelId,helpId:a.helpId||null};break;default:g=this._getViewDefinition(a)}if(g){this._clearCenter();this._clearHeader();this._selectedPath=h;this._selectedEntityLongId=f;this._helpId=d.createAnapediaKey(a.helpId);this._header.setHeader(a.label);var m=this;this._onSelectionChangeTimeout=setTimeout(function(){m._settingsFactory.loadSetting(a,m,c.mixin(g,{showTipsOnStartup:m._show[b.TIPS]||!1,globalFormulaEditModule:m._globalFormulaEditModule}))},150)}}catch(l){e.showErrorReporter(new r.ClientException("Settings: _onSelectionChange",
l,{widgetId:this.id}))}},_setGlobalFormulaEditModule:function(a){this._globalFormulaEditModule=a}})})},"anaplan/settings/SettingsSidebar":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/on dojo/topic dojo/dom-style anaplan/layout/ManagedContainer anaplan/settings/ModelContentsTree anaplan/Exceptions".split(" "),function(g,b,k,p,r,n,f,s,l){return g("anaplan.settings.SettingsSidebar",[f],{constructor:function(a){var b=this;this._selectedEntityLongId=a.selectedEntityLongId||
null;a=r.subscribe("anaplan/settings/selectnode",function(a){void 0!==a?b.setSelectedById(a):console.warn("Failed to load selection for settings tree and view")});this.own(a)},getModelContents:function(){return this._modelContents},onSelectionChange:function(){},setSelectedById:function(a){this._modelContents.setSelectedById(a)},postCreate:function(){try{this.inherited(arguments);this._modelContents=new s({region:"center",selectedEntityLongId:this._selectedEntityLongId});var a=p(this._modelContents,
"SelectionChange",k.hitch(this,"onSelectionChange"));this.own(a);this.addChild(this._modelContents);n.set(this.domNode,{padding:0,margin:0})}catch(b){throw new l.ClientException(this.declaredClass+".postCreate",b);}}})})},"anaplan/modelmap/data/DataProvider":function(){define("dojo/Evented anaplan/data/Aggregator dojo/_base/declare dojo/_base/lang anaplan/utils/JsHelper anaplan/data/ViewRequestRequestGenerator anaplan/common/ViewSerialNumbers anaplan/data/ModelContentHelper".split(" "),function(g,
b,k,p,r,n,f,s){var l="#5F91C0 #E06C65 #84CA85 #FFD800 #A575D2 #FFA252 #C7C7C7 #B57E50 #FEBBD1 #F7DEEE #F6DB84 #C3E6C5 #4ABDE8 #9CD5D0 #FDD847 #FEB46B #8E9BCB #FBEFCE #37C0CC #BD9D62 #C1D7ED #EBC8A5 #FE911B #D9D0E6 #80DDF7 #FED6B2 #F2E265 #AFB7D2 #EFA5A4 #A3B9C1 #CEF4EB #66DA6C #71DEE8 #9CD5D0".split(" ");return k([g],{_subs:[],_viewDefinition:null,constructor:function(){this._serialNumbers=new f;this._observeAggregator();this._viewDefinition={type:"MODEL_DEFINITION",staticContextIdentifiers:[]};var a=
s.getAxesForViewDefinition(["_SYSTEM_AXIS_IDENTIFIER.MODULE_ALL"],["_SYSTEM_AXIS_IDENTIFIER.MODULE_PROPERTY"]);p.mixin(this._viewDefinition,a);this._colorCache={};this._functionalAreaMap={};this._colors=l.slice()},view:function(){return(new n(workspaceId)).getRequest({modelId:modelId,viewDefinition:this._viewDefinition,pageRequests:[{startRow:0,startColumn:0,rowCount:-1,columnCount:-1}],cellSelectorLabelsRequired:!1,pageSelectorLabelsRequired:!1,serialNumbers:this._serialNumbers,viewIndex:-1})},update:function(a){var b=
this._dataChecksum,d=this._clean(a);this._dataChecksum=r.checksum(d);d={data:d,groups:{}};if(this._dataChecksum!==b){for(b=0;b<d.data.length;b++){var f=d.data[b];void 0===d.groups[f.parent]&&(d.groups[f.parent]={},d.groups[f.parent].colour=this._getGroupColor(f.parent));f.colour=d.groups[f.parent].colour}this.emit("datachanged",d);this._serialNumbers=a[0].serialNumbers}},_parseAndSplitString:function(a){var b=0<a.indexOf("\x3e\x3c")?(new Date).getTime():"\x3e\x3c";if(0<a.length){for(var d=a.replace(/''''/g,
"'"+b+"'"),d=d.replace(/''/g,b),f=[],h=!1,g=!1,c="",l=0;l<d.length;l++){var m=d.charAt(l);!0===h?"'"===m?(h=!1,f.push(c),c=""):c+=m:!0===g?","===m?(g=!1,f.push(c),c="",l++):(c+=m,l===a.length-1&&f.push(c)):"'"===m?h=!0:","===m?" '"===d.charAt(l+1)+d.charAt(l+2)?(h=!0,l+=2):(l++,g=!0):(g=!0,c+=m)}return f.map(function(a){return a.replace(RegExp(b,"g"),"'")})}return[]},_clean:function(a){var b={},d=a[0].dataPages[0].cellValues.length/a[0].columnLabelPages[0].entityIds[0].length,f=a[0].columnLabelPages[0].entityIds[0],
h=a[0].dataPages[0].cellValues,g=a[0].dataPages[0].cellText,c=0;this._functionalAreaMap={};for(var l=0;l<d;l++){var m={ID:a[0].rowLabelPages[0].entityLongIds[0][l],APPLIES_TO:h[c+f.indexOf("APPLIES_TO")],FUNCTIONAL_AREA:g[c+f.indexOf("FUNCTIONAL_AREA")],LEAF_PERIOD_TYPE:g[c+f.indexOf("LEAF_PERIOD_TYPE")],VERSION_SELECTION:g[c+f.indexOf("VERSION_SELECTION")],BREAKBACK:g[c+f.indexOf("BREAKBACK")],CELL_COUNT:h[c+f.indexOf("CELL_COUNT")],REFERENCED_BY:h[c+f.indexOf("REFERENCED_BY")],MODULE_LINE_ITEMS:h[c+
f.indexOf("MODULE_LINE_ITEMS")],TIME_RANGE:g[c+f.indexOf("TIME_RANGE")]},c=c+f.length;b[a[0].rowLabelPages[0].entityIds[0][l]]=m;m=c+f.indexOf("FUNCTIONAL_AREA");this._functionalAreaMap[g[m]]=h[m]}a=[];var c=0,k;for(k in b)b.hasOwnProperty(k)&&(d=b[k],f=0===d.APPLIES_TO.length?[]:d.APPLIES_TO.replace(/'/g,"").split(", "),h=0===d.LEAF_PERIOD_TYPE.length?[]:d.LEAF_PERIOD_TYPE.replace(/'/g,"").split(", "),g=0===d.VERSION_SELECTION.length?["Not Applicable"]:d.VERSION_SELECTION.replace(/'/g,"").split(", "),
l=this._parseAndSplitString(d.REFERENCED_BY),m=0===d.MODULE_LINE_ITEMS.length?[]:d.MODULE_LINE_ITEMS.replace(/'/g,"").split(", "),d={parent:0===d.FUNCTIONAL_AREA.length?"Other Contents":d.FUNCTIONAL_AREA,name:k,relationships:l,version:g[0],leafs:h,items:f,lineitems:m,cellcount:d.CELL_COUNT,cellcountm:"("+parseFloat(d.CELL_COUNT/1E6).toFixed(3)+" m)",breakback:d.BREAKBACK,periodtype:d.LEAF_PERIOD_TYPE,entityLongId:d.ID,id:"module_"+c,backgroundColor:"#FFFFFF",timerange:d.TIME_RANGE?d.TIME_RANGE:""},
d.checksum=r.checksum(d),a.push(d),c++);return a},_groups:{},_getGroupColor:function(a){a=this._functionalAreaMap[a];if(void 0!==this._colorCache[a])return this._colorCache[a];this._colorCache[a]=0<this._colors.length?this._colors.shift():this._randomColor(200);return this._colorCache[a]},_randomColor:function(a){var b=function(a){a=(0|Math.random()*(255-a)+a).toString(16);return 1===a.length?"0"+a:a};return"#"+b(a)+b(a)+b(a)},_observeAggregator:function(){b.addObserver(this)},error:function(a){},
dispose:function(){b.deleteObserver(this)}})})},"anaplan/settings/TimeRanges/TimeRange":function(){define("anaplan/anapediaKeys anaplan/common/SelectiveAccess anaplan/constants anaplan/data/Aggregator anaplan/data/ChangeFactory anaplan/data/ModelContentCache anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/GridletFactory anaplan/gridlet/Selection anaplan/gridlet/ViewRequestGridModel anaplan/layout/ManagedContainer anaplan/settings/Time2/DataProvider anaplan/settings/TimeRanges/EditTimeRangesDialog anaplan/settings/TimeRanges/InsertTimeRangesDialog anaplan/toolbar/_ButtonsMixin anaplan/utils/FormatHelper anaplan/utils/JsHelper anaplan/utils/SelectionHelper anaplan/utils/SubmissionHandler anaplan/utils/UIHelper anaplan/view/Export anaplan/widgets/Button anaplan/widgets/SearchToolbarButton anaplan/widgets/Toolbar anaplan/widgets/Tooltip dijit/ToolbarSeparator dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/common dojo/i18n!anaplan/nls/exportLabels dojo/i18n!anaplan/nls/timeRangeDefinitions dojo/i18n!anaplan/nls/toolbar dojo/i18n!anaplan/nls/view dojo/on".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I){return G([e,u],{gutters:!1,numDataRows:0,constructor:function(a){this._workspaceId=a.workspaceId;this._modelId=a.modelId;this._viewDefinition=a.viewDefinition;this._isShowing=!1;this._tooltips=[];this._gridlet=null;this._dataprovider=new d(a.content[0])},startup:function(){this.inherited(arguments);this._dataprovider.on("update",this._onDataReceived.bind(this));this._dataprovider.initialize()},_onDataReceived:function(a){this._newColumnIdentifier=
this._getColumnIdentifier(a.value.timeCalendarType);this._isShowing&&!this.isSuspended()&&(this._sourceData=L.clone(a),this._insertButton.set("disabled",!0),this._recreateGridletIfColumnsAreOutdated())},_recreateGridletIfColumnsAreOutdated:function(){this._viewDefinition.columns!==this._newColumnIdentifier&&(this._viewDefinition.columns=this._newColumnIdentifier,this._gridlet&&(this._gridlet.destroyRecursive(),this._createGridlet()))},hide:function(a){a===k.TIPS&&(C.forEach(this._tooltips,function(a){a.destroy()}),
this._tooltips=[]);this.inherited(arguments)},onHide:function(){this._handleSuspend()},onShow:function(){this._handleResume();this.getParent().getParent()&&!this._gridlet?this._createGridlet():this._recreateGridletIfColumnsAreOutdated();this._dataprovider.refresh()},postCreate:function(){this.inherited(arguments);this._createToolbar()},resume:function(){this.inherited(arguments);this._handleResume();this._dataprovider.refresh()},show:function(a){a===k.TIPS&&this._generateTooltips();this.inherited(arguments)},
suspend:function(){this.inherited(arguments);this._handleSuspend()},uninitialize:function(){C.forEach(this._tooltips,function(a){a.destroy()});this._isShowing=!1;this.inherited(arguments);this._dataprovider.destroy()},_createGridlet:function(){try{this._model=new a({workspaceId:workspaceId,modelId:modelId,viewDefinition:this._viewDefinition});this._gridlet=(new s({editorFactory:new f})).createGridlet({region:"center",defaultColumnWidth:150,model:this._model,enableMultiple:!1,enableRange:!1,enableDeselect:!1,
selection:(new l).initializeToDefaults()});this.addChild(this._gridlet);var b=I(this._gridlet,"reset",this._reset.bind(this)),c=I(this._gridlet,"SelectionChange",this._onSelectionChange.bind(this)),d=I(this._gridlet,"Update",this._onUpdate.bind(this));this.own(b,c,d);p.gather();this._searchButton.set("model",this._model);this._searchButton.set("widget",this._gridlet);this._gridlet.domNode&&this._gridlet.focus()}catch(e){z.throwClientException(this,e)}},_createInsertButton:function(){var a=new A({iconClass:"anaplanEditorIcon anaplanEditorIconInsert",
label:N.labelInsert,showLabel:!1,style:"display: none;","data-anaplan-element-name":"toolbar-button-insert",id:"buttonNewTR"});this.own(a.on("click",L.hitch(this,"_displayInsertDialog")));return a},_createEditButton:function(){var a=new A({iconClass:"anaplanEditorIcon anaplanEditorIconEdit",label:N.labelEdit,showLabel:!0,style:"display: none;","data-anaplan-element-name":"toolbar-button-edit"});this.own(a.on("click",this._prepareAndShowEditDialog.bind(this)));return a},_createSearchButton:function(){return new B({iconClass:"anaplanEditorIcon anaplanEditorIconSearch",
label:F.labelSearch,showLabel:!1,"data-anaplan-element-name":"toolbar-button-search"})},_createToolbar:function(){try{var a=new y({region:"top"});this._toolbar=a;this.addChild(a);this._insertButton=new A({iconClass:"anaplanEditorIcon anaplanEditorIconInsert",label:F.labelInsertTimeRange,showLabel:!1,style:"display: none;","data-anaplan-element-name":"toolbar-button-insert",disabled:!0,id:"buttonNewTR"});this._insertButton.on("click",this._showInsertDialog.bind(this));a.addChild(this._insertButton);
this._editButton=this._createEditButton();a.addChild(this._editButton);this._deleteButton=this._createDeleteButton();a.addChild(this._deleteButton);this._reOrderButton=this._createReOrderButton();a.addChild(this._reOrderButton);C.forEach([this._insertButton,this._editButton,this._deleteButton,this._reOrderButton],function(a){a&&(a.show(),a.set("showLabel",!0),a.set("disabled",!0),a.set("title",""))});this._insertDeleteMoveSeparator=new E;a.addChild(this._insertDeleteMoveSeparator);this._exportButton=
this._createExportButton();a.addChild(this._exportButton);a.addChild(new E);this._refreshButton=this._createRefreshButton();a.addChild(this._refreshButton);this._refreshSeparator=new E;a.addChild(this._refreshSeparator);this._searchButton=this._createSearchButton();a.addChild(this._searchButton);this._toolbar=a}catch(b){z.throwClientException(this,b)}},_displayExportDialog:function(){try{var a=z.getSharedDialog(),b=new x({modelId:this._modelId,viewDefinition:this._viewDefinition,pageInfo:this._model.getPageInfo(),
hierarchyId:K.labelTimeRange});a.set("title",D.titleExport);a.set("refocus",!1);a.set("content",b.domNode);this.own(I(b,"AfterExport",function(){a.hide()}),I(b,"Cancel",function(){a.onCancel()}));a.show()}catch(c){z.throwClientException(this,c)}},_showInsertDialog:function(){var a=this._gridlet._gridController._gridView,b=a._selection,c=this._gridlet._gridController.getContext(),d=null,e=null;m.isOperationOnColumns(b,c)?(d=m.getColumnsSelection(b,c),e=a.getSelectedColumnLabelDomNode()):(d=m.getRowsSelection(b,
c),e=a.getSelectedRowLabelDomNode());var b=this._getRelativeItem(d,m.getNestingIndexForCurrentCell(b,c)),f=new h(this._sourceData,b,e);f.on("confirm",function(b){(new w({aggregatorObserver:this._model})).gather(this._getSubmissions(b)).then(function(){f.hide();this._scrollToNewTimeRange(b,a,!0)}.bind(this),function(a){if(!a.isKnownError)throw Error("Unable to communicate to the server.");})}.bind(this));f.setHelpContent(g.timeRanges_new);f.show()},_prepareAndShowEditDialog:function(){this._showEditDialog(this._prepareEnvironmentForEdit())},
_scrollToNewTimeRange:function(a,b,c){var d=(new l).initializeToDefaults(),e=0,f=b._selection.currentCell.y.index;switch(a.position){case "After":e=f+1;break;case "Before":e=f;break;case "End":e=b.model.getRowCount();break;default:e=0}c||(e=f);d.currentCell.y.index=e;d.ranges[0].topLeft.y.index=e;b.setCurrentSelection(d);b.focus()},_getRelativeItem:function(a,b){return a.count?{isItemEditable:a.isItemEditable[b][0],canInsertSibling:a.canInsertSibling[b][0],entityLongId:a.entityLongIds[b][0],isAggregate:a.isAggregate[b][0],
label:a.originalLabels[b][0]}:null},_getSubmissions:function(a){a=(new r).getModelChangeGenerator({entityTypeClass:"SYSTEM",entityTypeIndex:k.TIME_RANGE_ENTITY_TYPE_INDEX}).getModelChangeXml("INSERT",a);return[{workspaceId:this._workspaceId,cellChanges:[],modelChanges:[{modelId:this._modelId,modelChangeXml:a}]}]},_prepareEnvironmentForEdit:function(){var a=this._gridlet._gridController._gridView,b=a._selection,c=this._gridlet._gridController.getContext(),d=null,e=null;m.isOperationOnColumns(b,c)?
(d=m.getColumnsSelection(b,c),e=a.getSelectedColumnLabelDomNode()):(d=m.getRowsSelection(b,c),e=a.getSelectedRowLabelDomNode());var f=b.currentCell.y.index,h=c.model.getRowsPerPage(),g=Math.floor(f/h),f=f-h*g,h=c.values.dataColumnCount,b=this._getRelativeItem(d,m.getNestingIndexForCurrentCell(b,c));b.values=this._gridlet.model._readCache._cells._pages[g]._page.cellValues.slice(f*h,(1+f)*h);return{item:b,dom:e,grid:a}},_showEditDialog:function(a){var b=new q(this._sourceData,a.item,a.dom);b.on("confirm",
function(c){var d=this._getSubmissions(c);if(c.name!==a.item.label){c.currentName=a.item.label;var e=(new r).getModelChangeGenerator({entityTypeClass:"SYSTEM",entityTypeIndex:k.TIME_RANGE_ENTITY_TYPE_INDEX}).getModelChangeXml("UPDATE",c);d[0].modelChanges.unshift({modelId:this._modelId,modelChangeXml:e})}(new w({aggregatorObserver:this._model})).gather(d).then(function(){b.hide();this._scrollToNewTimeRange(c,a.grid,!1)}.bind(this),function(a){if(!a.isKnownError)throw Error("Unable to communicate to the server.");
})}.bind(this));b.setHelpContent(g.timeRanges_edit);b.show()},_createTooltip:function(a,b){var d=null;try{var e=a.get("label"),f=N["tooltip"+b.split(" ").join("")];f||(f=H["tooltip"+b.split(" ").join("")]);if(!f)return null;var h=c.searchAndReplacePlaceholders(f),d=new v({label:h,connectId:[a.domNode],position:["below","above"],title:e})}catch(g){z.throwClientException(this,g)}return d},_generateTooltips:function(){this._tooltips.length?console.warn("TimeRange expected to find no tooltips, found "+
this._tooltips.length):(this._tooltips.push(this._createTooltip(this._editButton,"Edit")),this._tooltips.push(this._createTooltip(this._insertButton,"Insert")),this._tooltips.push(this._createTooltip(this._deleteButton,"Delete")),this._tooltips.push(this._createTooltip(this._reOrderButton,"ReOrder")),this._tooltips.push(this._createTooltip(this._refreshButton,"Refresh")),this._tooltips.push(this._createTooltip(this._searchButton,"Search")))},_getGridController:function(){return!this._gridlet?null:
this._gridlet.getGridController()},_handleResume:function(){this._isShowing=!0;this._gridlet&&this._gridlet._gridController.resume()},_handleSuspend:function(){this.inherited(arguments);this._gridlet&&this._gridlet._gridController.suspend();this._isShowing=!1},_onSelectionChange:function(a){this.inherited(arguments);this._enableButtons(a)},_enableButtons:function(a){var b=this._getNumDataRows(),c;if(this._editButton&&this._editButton.domNode||this._editMenuItem&&this._editMenuItem.domNode)c=this._canEdit(a),
this._editButton&&this._editButton.get("disabled")===c&&this._editButton.set("disabled",!c),this._editMenuItem&&this._editMenuItem.get("disabled")===c&&this._editMenuItem.set("disabled",!c);if(this._searchButton&&this._searchButton.domNode||this._searchMenuItem&&this._searchMenuItem.domNode)b=0<b,this._searchButton&&this._searchButton.get("disabled")===b&&this._searchButton.set("disabled",!b),this._searchMenuItem&&this._searchMenuItem.get("disabled")===b&&this._searchMenuItem.set("disabled",!b);this.inherited(arguments)},
_onUpdate:function(){var a=this._getNumDataRows();(this._gridlet&&!this._gridlet._selection||0===this._numDataRows&&0<a||0<this._numDataRows&&0===a)&&this._gridlet._gridController.setBestSelection();this._numDataRows=a;this._onSelectionChange(this._gridlet._selection)},_reset:function(){this._disableButtons(this._toolbar)},_getNumDataRows:function(){var a=0;this._gridlet&&(this._gridlet._sizer&&void 0!==typeof this._gridlet._sizer._dataRowCount)&&(a=this._gridlet._sizer._dataRowCount);return a},_canEdit:function(a){return!b.isModelStructureReadOnlyForCurrentUser()&&
!!a&&!a.isWholeGridSelected()&&!a.isWholeColumnSelected()&&0<this._getSelected().count},_canInsert:function(a){a=n.getTimescaleInfo();if(t.isNullOrUndefined(a))return!1;a=a.calendarTypeEntityIndex===k.CALENDAR_TYPE_WEEKS_GENERAL_ENTITY_INDEX;return!b.isModelStructureReadOnlyForCurrentUser()&&!a},_canDelete:function(a){return!b.isModelStructureReadOnlyForCurrentUser()&&!!a&&!a.isWholeGridSelected()&&!a.isWholeColumnSelected()&&0<this._getSelected().count},_canReOrder:function(a){return!b.isModelStructureReadOnlyForCurrentUser()&&
this.inherited(arguments)},_getSelected:function(){var a=this._gridlet._selection;if(!a)return[];var b=this._getGridController();return m.getSelection(a,b.getContext())},_getColumnIdentifier:function(a){switch(a){case "Weeks: General":return k.SYSTEM_AXIS_IDENTIFIER_TIME_RANGE_WEEKS_GENERAL_PROPERTY_IDENTIFIER;case "Weeks: 13 4-week Periods":return k.SYSTEM_AXIS_IDENTIFIER_TIME_RANGE_WEEKS_13_4_PROPERTY_IDENTIFIER}return k.SYSTEM_AXIS_IDENTIFIER_TIME_RANGE_PROPERTY_IDENTIFIER}})})},"anaplan/modelmap/ModelMap":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/dom-geometry dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin anaplan/modelmap/data/DataProvider dojo/topic dojo/_base/lang anaplan/modelmap/data/ModelMapStore anaplan/modelmap/IsolatableGraph anaplan/modelmap/IsolateModeDropDown dojo/text!anaplan/templates/ModelMap/ModelMap.html anaplan/widgets/SearchBarFull".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d){return g([b,p,r],{templateString:d,graphContainer:null,isolateModeButtonGroup:null,isolateModeDropDown:null,graph:null,updatedSinceLastDraw:!1,constructor:function(){this.dataManager=new n;this.store=new l;this.dataManager.on("datachanged",s.hitch(this,"_onDataChanged"))},_onGraphItemSelected:function(a){s.isObject(a)&&a.entityLongId&&f.publish("modelmap/viewmodule",a.entityLongId,a.name)},_onDataChanged:function(a){null!==this.graph&&(this.graph.load(a.data,a.groups),
this.suspended||this.graph.draw(!0));this.store.setData(a.data);this.updatedSinceLastDraw=!0},postCreate:function(){this.inherited(arguments);this.graph=new a(null,this.graphContainer);this.graph.on("viewitem",s.hitch(this,"_onGraphItemSelected"));this.graph.startup();this.isolateModeDropDown=new e({graph:this.graph},this.isolateModeButtonGroup);this.isolateModeDropDown.startup();this.searchBar.set("store",this.store);this.searchBar.on("selection",s.hitch(this,"_onSearchSelection"))},resize:function(a){a&&
k.setMarginBox(this.domNode,a)},redraw:function(){this.updatedSinceLastDraw&&(this.graph.redraw(),this.updatedSinceLastDraw=!1)},resume:function(){this.suspended=!1;this.redraw()},suspend:function(){this.suspended=!0;this.updatedSinceLastDraw=!1},draw:function(){this.graph.draw()},destroy:function(){this.inherited(arguments);this.dataManager.dispose();this.graph.destroy();this.isolateModeDropDown.destroy()},_onGroupedChange:function(a){this.graph.groupNodes(a);this.graph.restoreData();this.graph.draw()},
_onLayoutChange:function(a){this.graph.changeLayout(a)},_onZoomInClick:function(){this.graph.zoomIn()},_onZoomOutClick:function(){this.graph.zoomOut()},_onZoomResetClick:function(){this.graph.zoomOriginal()},_onFitToWindowClick:function(){this.graph.fitContent()},_onOrientationClick:function(){this.graph.switchOrientation();this.graph.draw()},_onCollapseClick:function(){this.graph.collapseAllGroups()},_onHelpClick:function(){this.showHelp()},_onExpandClick:function(){this.graph.expandAllGroups()},
_onSearchSelection:function(a){a.selection&&this.graph.select({name:a.selection.label,id:a.selection.id})}})})},"anaplan/settings/Time2/SaveHandler":function(){define("dojo/_base/lang ./ConfirmationDialog ./SubmissionHandler ./TimeDataTransform anaplan/data/RequestFactory anaplan/data/Aggregator dijit/Destroyable dojo/_base/declare dojo/Deferred dojo/Evented".split(" "),function(g,b,k,p,r,n,f,s,l,a){return new (s([a,f],{saveValues:function(a,d,f){var h=new l;if(f){var k=new b;k.on("confirm",g.hitch(this,
function(){k.destroy();setTimeout(g.hitch(this,function(){this._applyChanges(a,d,h)}),100)}));k.on("cancel",g.hitch(this,function(){k.destroy();h.resolve(!0)}));k.show()}else this._applyChanges(a,d,h);return h.promise},_applyChanges:function(a,b,f){var h=g.hitch(this,function(){this.emit("finished");f.resolve(!1)}),l=g.hitch(this,function(a){this.emit("finished");f.reject(a)});this.emit("pending");k.submit(a,b).then(h,l)}}))})},"anaplan/widgets/ManageViewsDialog/_MainView":function(){define("anaplan/data/Aggregator anaplan/data/ModelContentCache dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/focus anaplan/utils/UIHelper anaplan/utils/IdChecker anaplan/utils/SubmissionHandler anaplan/Exceptions anaplan/data/ModelContentHelper anaplan/data/ChangeFactory anaplan/data/RequestFactory dojo/_base/declare dojo/_base/array dojo/i18n!anaplan/nls/manageViewsDialog dojo/i18n!dijit/nls/common dojo/text!anaplan/templates/ManageViewsDialog.html anaplan/widgets/Button anaplan/widgets/MasterSelector".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m){return h([k,p,r],{baseClass:"manageViewsDialog",templateString:m,widgetsInTemplate:!0,constructor:function(a){this._viewDefinition=a.viewDefinition;this._grid=a.grid;this._selection={entityLongId:null,label:null}},getSelection:function(){return this._selection},onClose:function(){},onDelete:function(){},onResetDefaultView:function(){},performAction:function(b,c){var d=this;try{this.set("disabled",!0);var e=b();g.post(e,!1,function(a,b){a.result&&(d.customViewSelector.set("labelPage",
d._getFilteredViewsLabelPage(a.result.modelInfo.viewsInfo)),d._onSelectionChange(null,null));d.set("disabled",!1);g.gather();c&&c(a,b);d._closeOnLoad&&(d._closeOnLoad=!1,d.onClose())},function(a,b){d._onError(a,b)})}catch(f){throw new a.ClientException("ManageViewsDialog: performAction",f,{widgetId:this.id});}},postCreate:function(){this.inherited(arguments);this.openButton.set("label",c.buttonOpen);this.moveUpButton.set("label",c.buttonMoveUp);this.moveDownButton.set("label",c.buttonMoveDown);this.renameButton.set("label",
c.buttonRename);this.deleteButton.set("label",c.buttonDelete);this.closeButton.set("label",t.itemClose);this.resetDefaultViewButton.set("label",c.buttonResetDefaultView);this.customViewSelector.set("labelPage",this._getFilteredViewsLabelPage())},_getFilteredViewsLabelPage:function(a){var c={count:0,entityIds:[[]],entityLongIds:[[]],isEditable:[[]],labels:[[]]};a||(a=b.getViewsInfo());var d=a.viewsLabelPage;a=a.moduleEntityLongIds;for(var f=e.getModuleEntityLongIdForViewDefinitionOrReference(b,this._viewDefinition),
h=0;h<d.count;h++)a[h]==f&&(c.count++,c.entityIds[0].push(d.entityIds[0][h]),c.entityLongIds[0].push(d.entityLongIds[0][h]),c.isEditable[0].push(d.isEditable[0][h]),c.labels[0].push(d.labels[0][h]));return c},_onKeyDown:function(b){try{var c=dojo.keys;switch(b.keyCode){case c.ESCAPE:this._onClose(),dojo.stopEvent(b)}}catch(d){f.showErrorReporter(new a.ClientException("anaplan.widgets.ManageViewsDialog: _onKeyDown",d,{widgetId:this.id}))}},_onKeyPress:function(a){a.currentTarget===this.domNode&&a.stopPropagation()},
_onClose:function(){try{var b=this.customViewSelector;if(b.isEditMode())b.commitEdit(),this._closeOnLoad=!0;else this.onClose()}catch(c){f.showErrorReporter(new a.ClientException("anaplan.widgets.ManageViewsDialog: _onClose",c,{widgetId:this.id}))}},_onCustomViewSelectorCancel:function(){n.focus(this.domNode)},_onDelete:function(){try{if(null===this._selection.entityLongId)console.warn("ManageViewsDialog._onDelete: no selection");else this.onDelete()}catch(b){f.showErrorReporter(new a.ClientException("anaplan.widgets.ManageViewsDialog: _onDelete",
b,{widgetId:this.id}))}},_onError:function(b){this.set("disabled",!1);var c=b instanceof a.KnownException;f.showErrorReporter(b,c,c)},_onMoveDown:function(){var c=this;try{var h=this.customViewSelector.getNextItem();if(null==h)console.warn("ManageViewsDialog._onMoveDown: can't move down any further");else{var g=b.getViewsLabelPage(),l=u.indexOf(g.entityLongIds[0],h.id),m=g.entityIds[0][l];this.performAction(function(){var a=e.getModuleEntityIdForViewDefinitionOrReference(b,c._viewDefinition),f=(new d).getModelChangeGenerator({entityTypeClass:"SAVED_VIEW"}),
a=[{modelId:modelId,moduleId:a,modelChangeXml:f.getModelChangeXml("MOVE",{name:c._selection.label,position:"AFTER",relativeToLabel:m,moduleId:a})}];return q.createRequest(workspaceId,[{workspaceId:workspaceId,cellChanges:[],modelChanges:a}],[],[])})}}catch(k){f.showErrorReporter(new a.ClientException("anaplan.widgets.ManageViewsDialog: _onMoveDown",k,{widgetId:this.id}))}},_onMoveUp:function(){var c=this;try{var h=this.customViewSelector.getPreviousItem();if(null==h)console.warn("ManageViewsDialog._onMoveUp: can't move up any further");
else{var g=b.getViewsLabelPage(),l=u.indexOf(g.entityLongIds[0],h.id),m=g.entityIds[0][l];this.performAction(function(){var a=e.getModuleEntityIdForViewDefinitionOrReference(b,c._viewDefinition),f=(new d).getModelChangeGenerator({entityTypeClass:"SAVED_VIEW"}),a=[{modelId:modelId,moduleId:a,modelChangeXml:f.getModelChangeXml("MOVE",{name:c._selection.label,position:"BEFORE",relativeToLabel:m,moduleId:a})}];return q.createRequest(workspaceId,[{workspaceId:workspaceId,cellChanges:[],modelChanges:a}],
[],[])})}}catch(k){f.showErrorReporter(new a.ClientException("anaplan.widgets.ManageViewsDialog: _onMoveUp",k,{widgetId:this.id}))}},_onOpen:function(){if(null==this._selection.entityLongId)console.warn("ManageViewsDialog._onDelete: no selection");else try{this._grid.openSubView(this._selection.entityLongId),this.onClose()}catch(b){f.showErrorReporter(new a.ClientException("anaplan.widgets.ManageViewsDialog: _onOpen",b,{widgetId:this.id}))}},_onRename:function(){try{this.customViewSelector.editSelectedItem(null,
function(a){var b=new s;return!b.checkId(dojo.string.trim(a),!1)?(this.invalidMessage=b.getInvalidIdMessage(),!1):!0})}catch(b){f.showErrorReporter(new a.ClientException("anaplan.widgets.ManageViewsDialog: _onRename",b,{widgetId:this.id}))}},_onResetDefaultView:function(b){try{this.onResetDefaultView()}catch(c){f.showErrorReporter(new a.ClientException("anaplan.widgets.ManageViewsDialog: _onResetDefaultView",c,{widgetId:this.id},b))}},_onSelectionChange:function(a,b){this._selection.entityLongId=
a;this._selection.label=b;this._setButtonsDisabled(null==a||null==b)},_onViewSelectorRenameView:function(c,h,m){try{this.set("disabled",!0);var k=e.getModuleEntityIdForViewDefinitionOrReference(b,this._viewDefinition),q=(new d).getModelChangeGenerator({entityTypeClass:"SAVED_VIEW"}),s=[{modelId:modelId,moduleId:k,modelChangeXml:q.getModelChangeXml("UPDATE",{entityLongId:this._selection.entityLongId,currentName:h,newName:m})}];c=[{workspaceId:workspaceId,cellChanges:[],modelChanges:s}];var n=this;
(new l).post(c).then(function(a){a.result&&(n.customViewSelector.set("labelPage",n._getFilteredViewsLabelPage(a.result.modelInfo.viewsInfo)),n._onSelectionChange(null,null));n.set("disabled",!1);g.gather();n._closeOnLoad&&(n._closeOnLoad=!1,n.onClose())},function(b){if(b.result&&b.result.errorInfo){var c=b.result.errorInfo;c.isKnownError?(n._onError(new a.KnownException(c.errorMessage)),n.customViewSelector.set("labelPage",n._getFilteredViewsLabelPage(b.result.modelInfo.viewsInfo)),n._onSelectionChange(null,
null)):n._onError(new a.ServerException(c.errorMessage))}})}catch(t){f.showErrorReporter(new a.ClientException("anaplan.widgets.ManageViewsDialog: _onViewSelectorRenameView",t,{widgetId:this.id}))}},_setButtonsDisabled:function(a){a||null==this._selection.entityLongId?(this.openButton.set("disabled",!0),this.moveUpButton.set("disabled",!0),this.moveDownButton.set("disabled",!0),this.renameButton.set("disabled",!0),this.deleteButton.set("disabled",!0)):(this.openButton.set("disabled",!1),this.moveUpButton.set("disabled",
null==this.customViewSelector.getPreviousItem()),this.moveDownButton.set("disabled",null==this.customViewSelector.getNextItem()),this.renameButton.set("disabled",!1),this.deleteButton.set("disabled",!1),this.resetDefaultViewButton.set("disabled",!1))},_setDisabledAttr:function(a){this._setButtonsDisabled(a);this.closeButton.set("disabled",a)}})})},"anaplan/view/ModelManagement/CopyAndSanitizeModelView":function(){define("anaplan/utils/UIHelper anaplan/utils/EncryptionHelper anaplan/utils/FormatHelper anaplan/Exceptions anaplan/view/ModelManagement/ModelView dojo/_base/declare dojo/_base/event dojo/dom-attr dojo/i18n!anaplan/nls/modelManagement dojo/i18n!dijit/nls/common dojo/json dojo/keys dojo/string dojo/text!anaplan/templates/ModelManagement/CopyAndSanitizeModelView.html anaplan/widgets/Button dijit/form/ValidationTextBox".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h){return n([r],{templateString:h,cancelButton:null,copyAndSanitizeModelButton:null,onCopyAndSanitizeModel:function(){},onValidStateChange:function(a){try{this.copyAndSanitizeModelButton.set("disabled",!a)}catch(b){throw new p.ClientException("CopyAndSanitizeModelView#onValidStateChange",b);}},postCreate:function(){try{this.inherited(arguments);g.setText(this.modelNameLabel,l.labelSanitizedModelName);g.setText(this.passphraseLabel,l.labelPassphrase);this.generateButton.set("label",
l.buttonGenerate);this.copyAndSanitizeModelButton.set("label",l.buttonCopyAndSanitizeModel);this.cancelButton.set("label",a.buttonCancel);s.set(this.modelNameLabel,"for",this.modelNameTextBox.id);var b=this;this.modelNameTextBox.validator=function(a){a=b._checkModelName(a);if(null!==a&&0<a.length)return g.setHtml(b.infoLabel,a),!1;g.setHtml(b.infoLabel,"\x26nbsp;");return!0};this.passphraseTextBox.validator=function(a){a=a.length;if(!(15<=a&&60>=a))return g.setHtml(b.infoLabel,l.errorPassphraseLength),
!1;g.setHtml(b.infoLabel,"\x26nbsp;");return!0}}catch(c){throw new p.ClientException("CopyAndSanitizeModelView#postCreate",c);}},setModel:function(a,b){try{this._modelId=a;this._modelName=b;for(var d=1;10>d;++d){var e=l[1===d?"templateSanitizedModelName":"templateSanitizedAgainModelName"],e=e.replace(/\$\{modelName\}/,b),e=e.replace(/\$\{copy\}/,d);if(null===this._checkModelName(e)){this.modelNameTextBox.set("value",e);break}}}catch(f){throw new p.ClientException("CopyAndSanitizeModelView#setModel",
f);}},_onCopyAndSanitizeModel:function(){try{if(this.isValid()){var a=this.modelNameTextBox.get("value"),b=this.passphraseTextBox.get("value");this.onCopyAndSanitizeModel(this._modelId,this._modelName,q.trim(a),b)}}catch(d){throw new p.ClientException("CopyAndSanitizeModelView#_onCopyAndSanitizeModel",d);}},_onCopyAndSanitizeModelButtonClick:function(a){this._onCopyAndSanitizeModel()},_onGenerateButtonClick:function(){try{this.passphraseTextBox.set("value",b.generateSymmetricKey(96))}catch(a){throw new p.ClientException("CopyAndSanitizeModelView#_onGenerateButtonClick",
a);}},_onKeyDown:function(a){var b=a.keyCode;b===d.ESCAPE?(this._onCancel(),f.stop(a)):b===d.ENTER&&(this._onCopyAndSanitizeModel(),f.stop(a))},_onShow:function(){try{var a=k.escapeHTML(this._modelName);this.onTitleChange(l.titleCopyAndSanitizeModel.replace(/\$\{modelName\}/,a));this.onHelpChange(null);g.setHtml(this.infoLabel,"\x26nbsp;");this.modelNameTextBox.focus()}catch(b){throw new p.ClientException("CopyAndSanitizeModelView#_onShow",b);}}})})},"anaplan/settings/HierarchyPropertiesAndSubsetsView":function(){define("anaplan/utils/FormatHelper anaplan/data/Aggregator anaplan/constants anaplan/Exceptions anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/GridletFactory anaplan/gridlet/ViewRequestGridModel anaplan/layout/_DashboardMixin anaplan/layout/ManagedContainer anaplan/toolbar/_ButtonsMixin anaplan/utils/SelectionHelper anaplan/utils/UIHelper anaplan/view/Export anaplan/widgets/DropDownButton anaplan/widgets/Toolbar anaplan/widgets/Tooltip dijit/Menu dijit/ToolbarSeparator dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/common dojo/i18n!anaplan/nls/exportLabels dojo/i18n!anaplan/nls/gridlet dojo/i18n!anaplan/nls/hierarchyEditor dojo/i18n!anaplan/nls/toolbar dojo/i18n!anaplan/nls/view dojo/on dojo/topic".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L){return z("anaplan.settings.HierarchyPropertiesAndSubsetsView",[l,a,s],{gutters:!1,_numDataRows:0,constructor:function(a){(this._viewDefinition=a.viewDefinition)?(this._isPropertiesView=this._viewDefinition.rows===k.SYSTEM_AXIS_IDENTIFIER_CUSTOM_PROPERTY_IDENTIFIER,this._isSubsetsView=this._viewDefinition.rows===k.SYSTEM_AXIS_IDENTIFIER_SUBSET_IDENTIFIER):this._isSubsetsView=this._isPropertiesView=!1;this._modelContent=a.modelContent;
this._isShowing=!1;this._tooltips=[];this._showTipsOnStartup=a.showTipsOnStartup;this._globalFormulaEditModule=a.globalFormulaEditModule||null},hide:function(a){a===k.TIPS&&(w.forEach(this._tooltips,function(a){a.destroy()}),this._tooltips=[]);this.inherited(arguments)},onHide:function(){this._isShowing=!1;this._handleSuspend()},onShow:function(){this._isShowing=!0;this._handleResume();this.getParent().getParent()&&!this._gridlet&&this._createGridlet()},postCreate:function(){this.inherited(arguments);
this.own(L.subscribe("anaplan/modelId",x.hitch(this,"_setModelId")),L.subscribe("anaplan/formula/startGlobalEdit",x.hitch(this,"_setGlobalFormulaEditModule")),L.subscribe("anaplan/formula/endGlobalEdit",x.hitch(this,"_setGlobalFormulaEditModule")));this._createToolbar();this._showTipsOnStartup&&this.show(k.TIPS)},resume:function(){this._isShowing&&this._handleResume()},show:function(a){a===k.TIPS&&this._createTooltips();this.inherited(arguments)},suspend:function(){this._isShowing&&this._handleSuspend()},
uninitialize:function(){w.forEach(this._tooltips,function(a){a.destroy()});this.inherited(arguments)},_addSelectedPropertiesOrSubsetsToDashboard:function(a){try{this._gridlet&&(this._gridlet._selection?this._getGridController().getPropertyOrSubsetCellViewInfosForDashboardElements().then(x.hitch(this,function(b){this._addViewsToDashboard(a,b)}),function(a){d.showErrorReporter(new p.ClientException(this.declaredClass+"._addSelectedPropertiesOrSubsetsToDashboard: error generating view infos for properties or subsets",
a))}):this._isPropertiesView?d.showInfoDialog(y.messagePublishPropertiesToDashboardNoSelection,{title:y.titlePublishPropertiesToDashboard}):this._isSubsetsView&&d.showInfoDialog(y.messagePublishSubsetsToDashboardNoSelection,{title:y.titlePublishSubsetsToDashboard}))}catch(b){throw new p.ClientException(this.declaredClass+"._addSelectedPropertiesOrSubsetsToDashboard",b);}},_createGridlet:function(){try{this._model=new f({workspaceId:workspaceId,modelId:modelId,viewDefinition:this._viewDefinition}),
this._gridlet=(new n({editorFactory:new r})).createGridlet({region:"center",defaultColumnWidth:150,model:this._model}),this.addChild(this._gridlet),this.own(G(this._gridlet,"SelectionChange",x.hitch(this,"_onSelectionChange"))),this.own(G(this._gridlet,"Update",x.hitch(this,"_onUpdate"))),this.own(G(this._gridlet,"reset",x.hitch(this,"_reset"))),b.gather()}catch(a){d.throwClientException(this,a)}},_createToolbar:function(){try{var a=new u({region:"top"});this.addChild(a);this._viewButton=this._createViewButton();
a.addChild(this._viewButton);this._exportButton=this._createExportButton();a.addChild(this._exportButton);a.addChild(new m);this._insertButton=this._createInsertButton();a.addChild(this._insertButton);this._deleteButton=this._createDeleteButton();a.addChild(this._deleteButton);this._reOrderButton=this._createReOrderButton();a.addChild(this._reOrderButton);w.forEach([this._insertButton,this._deleteButton,this._reOrderButton],function(a){a&&(a.show(),a.set("showLabel",!0),a.set("disabled",!0),a.set("title",
""))});this._insertDeleteMoveSeparator=new m;a.addChild(this._insertDeleteMoveSeparator);this._refreshButton=this._createRefreshButton();a.addChild(this._refreshButton);this._toolbar=a}catch(b){d.throwClientException(this,b)}},_createTooltip:function(a,b){var e=null;try{var f=a.get("label"),h=v["tooltip"+b.split(" ").join("")];h||(h=C["tooltip"+b.split(" ").join("")]);if(!h)return null;var l=g.searchAndReplacePlaceholders(h),e=new c({label:l,connectId:[a.domNode],position:["below","above"],title:f})}catch(m){d.throwClientException(this,
m)}return e},_createTooltips:function(){this._tooltips.length?console.warn("HierarchyPropertiesAndSubsetsView expected to find no tooltips, found "+this._tooltips.length):(this._tooltips.push(this._createTooltip(this._insertButton,"Insert")),this._tooltips.push(this._createTooltip(this._deleteButton,"Delete")),this._tooltips.push(this._createTooltip(this._reOrderButton,"ReOrder")))},_createViewButton:function(){var a=null;try{var b=new t({style:"display: none;"}),c=G(b,"open",x.hitch(this,"_updateViewMenuItems"));
this.own(c);this._viewMenu=a=new h({label:E.menuView,dropDown:b,"data-anaplan-element-name":"toolbar-button-view"});this._isPropertiesView?this._menuItemPublishPropertiesOrSubsetsToDashboard=this._createPublishPropertiesToDashboardMenu():this._isSubsetsView&&(this._menuItemPublishPropertiesOrSubsetsToDashboard=this._createPublishSubsetsToDashboardMenu());this._menuItemPublishPropertiesOrSubsetsToDashboard&&(b.addChild(this._menuItemPublishPropertiesOrSubsetsToDashboard),this._menuItemPublishPropertiesOrSubsetsToDashboard.startup());
this._isSubsetsView&&(this._menuItemPublishPageSelectorsToDashboard=this._createPublishPageSelectorsToDashboardMenu(E.labelPublishSubsetsToDashboardAsPageSelectors),b.addChild(this._menuItemPublishPageSelectorsToDashboard),this._menuItemPublishPageSelectorsToDashboard.startup())}catch(e){d.throwClientException(this,e)}return a},_displayExportDialog:function(){try{var a=d.getSharedDialog(),b=this._modelContent.label+" - "+(this._isPropertiesView?A.labelProperties:A.labelSubsets),c=new q({modelId:modelId,
viewDefinition:x.mixin(x.clone(this._viewDefinition),{name:b}),pageInfo:this._model.getPageInfo(),hierarchyId:b});a.set("title",B.titleExport);a.set("refocus",!1);a.set("content",c.domNode);this.own(G(c,"AfterExport",function(){a.hide()}),G(c,"Cancel",function(){a.onCancel()}));a.show()}catch(e){d.showErrorReporter(new p.ClientException(null,e,{widgetId:this.id}))}},_displayNewDashboardDialog:function(a){try{if(this._gridlet)if(a===k.dashboardElementType.GRID){var b=this._gridlet._model.getViewDefinition(),
c=this._gridlet._model.getPageInfo();this._displayNewDashboardDialogWithViewInfos([{dashboardElementType:k.dashboardElementType.GRID,viewDefinition:b,pageInfo:c}])}else a===k.dashboardElementType.CELL?this._getGridController().getPropertyOrSubsetCellViewInfosForDashboardElements().then(x.hitch(this,function(a){this._displayNewDashboardDialogWithViewInfos(a)}),function(a){d.showErrorReporter(new p.ClientException(this.declaredClass_+"._displayNewDashboardDialog: error generating view infos for properties or subsets",
a))}):a===k.dashboardElementType.PAGE_SELECTOR&&this._displayNewDashboardDialogWithViewInfos(this._getGridController().getPageSelectorViewInfosForDashboardElements())}catch(e){d.throwClientException(this,e)}},_enableButtons:function(a){w.forEach([this._viewButton],function(a){a&&a.set("disabled",!1)});var b=!1;a&&(b=this._getGridController(),b=e.canReOrder(a,b.getContext()));this._reOrderButton&&this._reOrderButton.set("disabled",!b);this.inherited(arguments)},_getGridController:function(){return!this._gridlet?
null:this._gridlet.getGridController()},_handleResume:function(){this._gridlet&&this._gridlet._gridController.resume()},_handleSuspend:function(){this._gridlet&&this._gridlet._gridController.suspend()},_isApplicationHierarchy:function(a){return"Progress"===a},_isFormulaEditMode:function(){return null!=this._globalFormulaEditModule},_onSelectionChange:function(a){if(this._isFormulaEditMode()){var b=this._getGridController();e.publishExpression(a,b.getContext(),this._globalFormulaEditModule)}this._enableButtons(a)},
_onUpdate:function(){var a=this._getNumDataRows();(this._gridlet&&!this._gridlet._selection||0===this._numDataRows&&0<a||0<this._numDataRows&&0===a)&&this._gridlet._gridController.setBestSelection();this._numDataRows=a},_reset:function(){this._disableButtons(this._toolbar)},_setGlobalFormulaEditModule:function(a){this._globalFormulaEditModule=a},_setModelId:function(){},_updateViewMenuItems:function(){this._viewMenu.closeDropDown(!1);this._dashboardsList&&this._updateDashboardsList()},_getNumDataRows:function(){var a=
0;this._gridlet&&(this._gridlet._sizer&&void 0!==typeof this._gridlet._sizer._dataRowCount)&&(a=this._gridlet._sizer._dataRowCount);return a}})})},"anaplan/settings/UsersAndRoles/Users/_Model":function(){define(["anaplan/data/Aggregator","anaplan/gridlet/ViewRequestGridModel","dojo/_base/declare"],function(g,b,k){return k(b,{resume:function(){g.isObserver(this)?this.inherited(arguments):(g.addObserver(this),this.inherited(arguments),g.gather())},suspend:function(){g.isObserver(this)&&g.deleteObserver(this);
this.inherited(arguments)}})})},"anaplan/widgets/ViewIndicator":function(){define("dojo/_base/declare dijit/_WidgetBase anaplan/widgets/_WidgetMixin dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/i18n!anaplan/nls/grid dojo/text!anaplan/templates/ViewIndicator.html anaplan/widgets/Button".split(" "),function(g,b,k,p,r,n,f){return g([b,p,r,k],{baseClass:"viewIndicator",templateString:f,constructor:function(){},onCloseViewButtonClick:function(){},postCreate:function(){this.inherited(arguments);
this.closeViewButton.set("label",n.buttonCloseSubView)},reset:function(){this._hideCloseViewButton()},showCloseButton:function(){this._showCloseViewButton()},updateViewName:function(b){this.setText(this.viewLabel,b)},_hideCloseViewButton:function(){this.closeViewButton.hide()},_onCloseViewButtonClick:function(b){this.onCloseViewButtonClick(b)},_showCloseViewButton:function(){this.closeViewButton.show()}})})},"anaplan/settings/Time2/Forms/Weeks445":function(){define("dojo/_base/lang ./FormBase ./Widgets/CurrentFiscalYearForWeeksSelect ./Widgets/CurrentPeriodFilteringSelect ./Widgets/TwelveWeekSelect ./Widgets/FiscalYearLabelAlignmentWeeks ./Widgets/SelectWithData ./Widgets/YearsSpinner dojo/_base/declare dojo/i18n!dojo/cldr/nls/gregorian dojo/_base/sniff".split(" "),
function(g,b,k,p,r,n,f,s,l,a){return l([b],{testableName:"formWeeks445",_formfields:[{name:"quarterlyWeekGrouping",nls:"labelQuarterlyWeekGrouping",Ctor:f,triggerCurrentPeriod:!0,options:{useLabelAsValue:!0}},{name:"fiscalYearEndType",triggerCurrentPeriod:!0},{name:"takeFiscalYearNameFromPeriodStart",nls:"labelTakeFiscalYearNameFromPeriodStart",Ctor:n},{name:"currentFiscalYear",nls:"labelCurrentFiscalYear",Ctor:k},{name:"numberOfPastYears",nls:"labelNumberOfPastYears",Ctor:s,options:{constraints:{min:0,
max:20,fractional:!1},required:!0},triggerCurrentPeriod:!0},{name:"numberOfFutureYears",nls:"labelNumberOfFutureYears",Ctor:s,options:{constraints:{min:0,max:50,fractional:!1},required:!0},triggerCurrentPeriod:!0},{name:"fiscalYearExtraWeekMonth",nls:"labelFiscalYearExtraWeekMonth",Ctor:r,triggerCurrentPeriod:!0},{name:"weekFormat",nls:"labelWeekFormat",Ctor:f,triggerCurrentPeriod:!0,options:{useLabelAsValue:!0}},{name:"currentPeriod",nls:"labelCurrentPeriod",Ctor:p},{name:"include",options:{showFiscalYearExtraMonthQuarter:!1}}],
_attach:function(){this.inherited(arguments);this.fields.fiscalYearEndType.on("valuechange",g.hitch(this,function(){this.applyFormLogic(this.get("value"))}));this.fields.takeFiscalYearNameFromPeriodStart.on("change",g.hitch(this,function(){this.applyFormLogic(this.get("value"))}))},applyFormLogic:function(a){var b=a.fiscalYearEndDayInWeek!==this._oldVal.fiscalYearEndDayInWeek,f=a.fiscalYearEndType!==this._oldVal.fiscalYearEndType,h=a.takeFiscalYearNameFromPeriodStart!==this._oldVal.takeFiscalYearNameFromPeriodStart;
(a.fiscalYearEndMonth!==this._oldVal.fiscalYearEndMonth||h||b||f)&&this.fields.currentFiscalYear.refreshValues(a.takeFiscalYearNameFromPeriodStart,a.fiscalYearEndType,a.fiscalYearEndMonth,a.fiscalYearEndDayInWeek);this.fields.includeOptions.applyFormLogic(a,!1);this.inherited(arguments)}})})},"anaplan/settings/Actions/_ProcessDefinitions":function(){define("anaplan/data/Aggregator dojo/_base/declare anaplan/common/ViewSerialNumbers anaplan/data/RequestFactory dojo/_base/lang anaplan/constants anaplan/data/ModelContentHelper".split(" "),
function(g,b,k,p,r,n,f){return b([],{constructor:function(){this._processDefinitions=[];this._registeredObserver=!1;this._viewDefinition=null;this._serialNumbers=new k},destroy:function(){this._registeredObserver&&g.deleteObserver(this)},error:function(b){this.onError(b)},getProcessDefinitions:function(){return this._processDefinitions},initialize:function(){g.addObserver(this);this._registeredObserver=!0},onError:function(){},onUpdate:function(){},update:function(b){var f=b[0];b=this._serialNumbers;
var a=this._serialNumbers=new k(f.serialNumbers);this._viewIndex=f.viewIndex;b.rowAxisSerialNumber!==a.rowAxisSerialNumber&&(this._rowLabelPage=f.rowLabelPages[0]);if(b.dataSerialNumber!==a.dataSerialNumber){b=[];for(var e=this._rowLabelPage,d=f.dataPages[0],f=e.entityLongIds[0],a=e.labels[0],g=d.cellValues,d=d.isEditable,e=e.count,h=0;h<e;h++)b.push({entityLongId:f[h],label:a[h],isEditable:d[h],processDefinitionJson:g[h]});this._processDefinitions=b;this.onUpdate()}},view:function(){var b={modelId:modelId,
viewDefinition:this._getViewDefinition(),columnLabelPageRequests:[{start:0,count:-1}],dataPageRequests:[{startRow:0,startColumn:0,rowCount:-1,columnCount:-1}],rowLabelPageRequests:[{start:0,count:-1}],cellSelectorLabelsRequired:!1,pageSelectorLabelsRequired:!1,serialNumbers:this._serialNumbers,viewIndex:this._viewIndex||-1};return p.createRequest(workspaceId,[],[b],[])},_getViewDefinition:function(){if(null==this._viewDefinition){var b={type:"MODEL_DEFINITION"},g=f.getAxesForViewDefinition([n.SYSTEM_AXIS_IDENTIFIER_PROCESS_IDENTIFIER],
[n.SYSTEM_AXIS_IDENTIFIER_PROCESS_PROPERTY_IDENTIFIER]);r.mixin(b,g);this._viewDefinition=b}return this._viewDefinition}})})},"anaplan/home/Workflow/InlineEditor":function(){define("dojo/_base/declare dojo/keys dojo/_base/event dojo/text!anaplan/templates/Workflow/InlineEditBox.html dijit/InlineEditBox anaplan/widgets/Button".split(" "),function(g,b,k,p){return g("anaplan.home.Workflow.InlineEditor",[dijit._InlineEditor],{templateString:p,_onKeyPress:function(g){this.inherited(arguments);!g.altKey&&
!g.ctrlKey&&g.charOrCode===b.ESCAPE&&(k.stop(g),this.cancel(!0))}})})},"anaplan/settings/HierarchyConfigureView":function(){define("anaplan/utils/UIHelper anaplan/data/Aggregator dojo/_base/declare anaplan/utils/UIHelper anaplan/layout/ManagedContainer anaplan/common/ViewSerialNumbers anaplan/data/RequestFactory anaplan/settings/HierarchyConfigureView/Form anaplan/data/ViewRequestRequestGenerator anaplan/data/ChangeFactory dojo/on dojo/_base/array dojo/_base/lang anaplan/constants anaplan/Exceptions dojo/i18n!anaplan/nls/hierarchyConfigureView dojo/i18n!anaplan/nls/generalListsValidator".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u){return k([r],{gutters:!1,constructor:function(a){this._listEntityLongId=a.modelContent.entityLongId;this._viewDefinition=a.viewDefinition;this._showTipsOnStartup=a.showTipsOnStartup;this._updateRequired=this._isShowing=!1;this._tooltips=[];this._serialNumbers=new n;this._selectorLabelPages=this._indexSelectorLabelPageMap=this._viewIndex=null},error:function(){return!1},hide:function(a){a===h.TIPS&&(d.forEach(this._tooltips,function(a){a.destroy()}),this._tooltips=
[]);this.inherited(arguments)},onHide:function(){this._isShowing=!1;this._handleSuspend()},onShow:function(){this._isShowing=!0;this._handleResume()},postCreate:function(){this.inherited(arguments);this._showTipsOnStartup&&this.show(h.TIPS);this._createForm()},resume:function(){this._isShowing&&this._handleResume()},show:function(a){a===h.TIPS&&this._createTooltips();this.inherited(arguments)},startup:function(){this.inherited(arguments);b.addObserver(this);this._isObserver=!0},suspend:function(){this._isShowing&&
this._handleSuspend()},uninitialize:function(){this._isObserver&&(b.deleteObserver(this),this._isObserver=!1);d.forEach(this._tooltips,function(a){a.destroy()});this.inherited(arguments)},update:function(a){try{var b=a[0],d=this._serialNumbers,e=this._serialNumbers=new n(b.serialNumbers);this._viewIndex=b.viewIndex;e.columnAxisSerialNumber!==d.columnAxisSerialNumber&&(this._columnLabelPage=b.columnLabelPages[0],this._updateRequired=!0);e.rowAxisSerialNumber!==d.rowAxisSerialNumber&&(this._rowLabelPage=
b.rowLabelPages[0],this._updateRequired=!0);e.pageInfoSerialNumber!==d.pageInfoSerialNumber&&(this._pageInfo=b.pageInfo);e.dataSerialNumber!==d.dataSerialNumber&&(this._dataPage=b.dataPages[0],this._indexSelectorLabelPageMap=b.indexSelectorLabelPageMap,this._selectorLabelPages=b.selectorLabelPages,this._updateRequired=!0);this._updateRequired&&(!this._suspended&&this._isShowing)&&this._update()}catch(f){g.throwClientException(this,f)}},view:function(){var a=null;try{a=(new l(workspaceId)).getRequest({modelId:modelId,
viewDefinition:this._viewDefinition,pageRequests:[{startRow:0,startColumn:0,rowCount:-1,columnCount:-1}],cellSelectorLabelsRequired:!0,pageSelectorLabelsRequired:!0,serialNumbers:this._serialNumbers,viewIndex:this._viewIndex||-1})}catch(b){g.throwClientException(this,b)}return a},_applyConfiguration:function(c){try{var d=(new a).getCellChangeGenerator(),e,h=[],l;for(l in c)c.hasOwnProperty(l)&&(e=c[l],e.newValue!==e.originalDisplayText&&h.push(d.getCellChange({modelId:modelId,originalText:e.originalValue,
entityLongIds:[this._listEntityLongId,l],cellText:e.newValue,currentDisplayText:e.originalDisplayText})));if(0!==h.length){var k=f.createRequest(workspaceId,[{workspaceId:workspaceId,cellChanges:h,modelChanges:[]}],[],[]);g.showPleaseWaitDialog();b.post(k,!1,function(a){try{if(g.hidePleaseWaitDialog(),!a.error){var c=a.result;if(c&&c.errorInfo){var d=c.errorInfo;if(d.isKnownError)g.showErrorReporter(new u.BaseException(d.errorMessage),!0);else{var e=new u.ServerException(d.errorMessage);e.setModelRestored(!0);
g.showErrorReporter(e)}}b.gather();p.setDirtyForm(null)}}catch(f){console.error("_onApplyConfiguration onLoad handler caught exception "+f)}},function(){g.hidePleaseWaitDialog();b.gather();p.setDirtyForm(null)})}}catch(q){g.hidePleaseWaitDialog(),g.throwClientException(this,q)}},_createForm:function(){this._form=new s({listEntityLongId:this._listEntityLongId,region:"center"});this.addChild(this._form);var a=e(this._form,"Apply",q.hitch(this,"_onApplyConfiguration"));this.own(a)},_createTooltips:function(){},
_handleResume:function(){this._updateRequired&&(!this._suspended&&this._isShowing)&&this._update()},_handleSuspend:function(){},_onApplyConfiguration:function(a,b){this._applyConfiguration(a);b&&b()},_update:function(){this._form.update(this._rowLabelPage,this._columnLabelPage,this._dataPage,this._indexSelectorLabelPageMap,this._selectorLabelPages);this._updateRequired=!1}})})},"anaplan/settings/HierarchyTreeView/Tree/DndSource":function(){define("dojo/_base/declare dijit/tree/dndSource anaplan/constants anaplan/utils/FormatHelper anaplan/widgets/ConfirmationDialog dojo/Evented anaplan/common/SelectiveAccess anaplan/data/ModelContentHelper anaplan/utils/EntityLongIdHelper anaplan/utils/UIHelper anaplan/Exceptions dojo/_base/array dojo/on dojo/_base/lang dojo/_base/window dojo/dom-class dojo/i18n!anaplan/nls/hierarchyEditor".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t){return g([b,n],{checkAcceptance:function(a){return a!==this?!1:f.isAuthorized(k.userActions.MAINTAIN_CUSTOM_HIERARCHY_MEMBERS)},checkItemAcceptance:function(b,c,d){try{var e=c.getSelectedTreeNodes();c=[];for(var f=e.length,h=0;h<f;h++)c.push(e[h].item);if(!this._isUniformSelection(c))return!1;var g=s.getSingleDimensionEntityTypeIndices(this.tree.pageInfo.rowEntityTypeIndices,0);if(g&&1<g.length){var k=dijit.getEnclosingWidget(b).item,q=l.getEntityTypeIndex(c[0].entityLongId[0]),
n=l.getEntityTypeIndex(k.entityLongId[0]);if(q!==g[0])return!1;if("over"===d){if(n!==g[1]||2===g.length&&k.isAggregate[0])return!1}else if(q!==n)return!1}}catch(p){a.throwClientException(this,p)}return!0},onDndDrop:function(b,f,g){try{var l=this.targetAnchor;if(l&&"Over"===this.containerState){var k=this.tree,n=k.model;this.isDragging=!1;var y,v,E=this.dropPosition;y=l&&l.item||k.item;"Before"===E||"After"===E?(y=l.getParent()&&l.getParent().item||k.item,v=l.getIndexInParent(),"After"===E&&(v=l.getIndexInParent()+
1)):y=l&&l.item||k.item;var C=this,G=function(){d.forEach(f,function(a){if(b===C){var c=dijit.getEnclosingWidget(a),d=c.item,e=c.getParent().item;a.parentEntityId="root"!==e.entityLongId[0]?e.entityId[0]:"";a.parentName="root"!==e.entityLongId[0]?e.name[0]:"";"number"===typeof v&&y==e&&c.getIndexInParent()<v&&(v-=1);n.pasteItem(d,e,y,g,v)}},C);l?C.tree._expandNode(l):console.warn("anaplan.settings.HierarchyTreeView._dndSource onDndDrop: targetWidget is null");C.onHierarchyNodeDrop(f,l,E);C.onDndCancel()};
if(0===y.children.length&&1>=s.getSingleDimensionEntityTypeIndices(this.tree.pageInfo.rowEntityTypeIndices,0).length){var L=new r({title:t.confirmationTitle,content:t.confirmationMessage.replace("%itemName%",p.escapeHTML(Array.isArray(y.name)?y.name.join(", "):y.name))}),K=q(L,"execute",h.hitch(this,function(){K.remove();L.destroyDescendants();G()}));L.show()}else G(),C.onDndCancel()}else this.onDndCancel();c.toggle(u.body(),"anaplanHierarchyTreeViewMove",!1)}catch(D){a.showErrorReporter(new e.ClientException(this.declaredClass+
"._dndSource: onDndDrop",D))}},onHierarchyNodeDrop:function(){},onDndStart:function(){this.inherited(arguments);c.toggle(u.body(),"anaplanHierarchyTreeViewMove",!0)},_isUniformSelection:function(b){var c=!0;try{var d=b.length;if(1<d)for(var d=d-1,e=b[d],f,h=l.getEntityTypeIndex(e.entityLongId[0]);d--;){e=b[d];f=l.getEntityTypeIndex(e.entityLongId[0]);if(f!==h){c=!1;break}h=f}}catch(g){a.throwClientException(this,g)}return c}})})},"anaplan/view/NewModule/_DropArea":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/query anaplan/constants anaplan/utils/UIHelper anaplan/widgets/DimensionItemGroup anaplan/widgets/PivotComponentDropArea".split(" "),
function(g,b,k,p,r,n,f,s,l){return g("anaplan.view.NewModule._DropArea",[l],{baseClass:"newModuleDropArea",allowMultiple:!0,allowNesting:!1,addDraggableItemAtDomIndex:function(a){try{var e=a.getWidget(),d=e.get("sortPosition"),g=r(".dimensionItem",this.dropNode),h=g.length,l,c;for(c=0;c<h&&!(l=g[c],e=dijit.getEnclosingWidget(l),e.get("sortPosition")>d);c++);c<h?b.place(a.domNode,g[c],"before"):this.dropNode.appendChild(a.domNode)}catch(k){f.throwClientException(this,k)}},canDrop:function(a,b,d,g,
h){b=!0;try{var l=a.getWidget();if(l){var c;if(l instanceof s){var t=this._dndManager.getDropZoneById(a.id);if(t){var m=t.getItems();if(m)for(var r=m.length;r--;)if(l=m[r].getWidget())(c=l.get("entityLongId"))&&c===n.SYSTEM_AXIS_IDENTIFIER_LINE_ITEM_ENTITY_LONG_ID&&(b=!1)}}else(c=l.get("entityLongId"))&&c===n.SYSTEM_AXIS_IDENTIFIER_LINE_ITEM_ENTITY_LONG_ID&&(b=!1)}if(b){var z=k.getContentBox(this.dropNode);p.set(this.insertionPoint,{display:h?"none":"",top:"3px",left:"3px",width:z.w-6+"px",height:z.h-
3+"px",borderRadius:"4px"})}else this._hideInsertionPoint()}catch(x){f.throwClientException(this,x)}return b},drop:function(a,b,d){try{var g=d.getDropZone?d.getDropZone():d,h,l,c=a.getWidget(),k;if(c instanceof s&&(k=this._dndManager.getDropZoneById(a.id)))l=k,h=k.getItems();h||(h=[a]);l||(l=b);for(var m=h.length,n;m--;)n=h[m],l.removeDraggableItem(n),g.addDraggableItemAtDomIndex(n,null);c instanceof s&&(a.getDropZone().removeDraggableItem(a),k&&this._dndManager.destroyDropZone(k),this._dndManager.destroyDraggableItem(a));
var p=b.getWidget();if(p instanceof s){var r=p.getItemCount();h=g=d=a=null;if(1===r){var A=b.getItems();A.length&&(a=A[0],b.removeDraggableItem(a))}if(1>=r){var B=this._dndManager.getDraggableItemById(b.id);d=B.getDropZone();var y=B.domNode.previousSibling;if(y)g=this._dndManager.getDraggableItemById(y.id),h="outer-right";else if(y=B.domNode.nextSibling)g=this._dndManager.getDraggableItemById(y.id),h="outer-left";d.removeDraggableItem(B);this._dndManager.destroyDropZone(b);this._dndManager.destroyDraggableItem(B)}a&&
d&&d.addDraggableItem(a,g,h)}}catch(v){f.throwClientException(this,v)}},resize:function(){try{this.inherited(arguments);var a=k.getContentBox(this.domNode),b=k.getMarginBox(this.dropHere);k.setMarginBox(this.dropHere,{t:(a.h-b.h)/2,l:(a.w-b.w)/2});k.setMarginBox(this.dropNode,{t:a.t+2,l:a.l+2,w:a.w-4,h:a.h-3})}catch(d){f.throwClientException(this,d)}}})})},"anaplan/home/Slideout":function(){define("dijit/_Contained dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/layout/ContentPane dijit/registry dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/fx dojo/_base/lang dojo/aspect dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/fx/easing dojo/on dojo/text!anaplan/templates/Slideout.html dijit/form/ToggleButton dijit/form/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t){return f([p,b,k,g],{attributeMap:a.delegate(p.prototype.attributeMap,{title:{node:"titleNode",type:"innerHTML"}}),templateString:t,duration:420,startExpanded:!0,tabIndex:"0",_setTabIndexAttr:"iconNode",baseClass:"dijitExpandoPane",postCreate:function(){this.inherited(arguments);this._animHandles=[];this._isHorizontal=!0;var b="",e=!this.isLeftToRight();if(this.region){switch(this.region){case "trailing":case "right":b=e?"Left":"Right";this._needsPosition=
"left";break;case "leading":case "left":b=e?"Right":"Left";break;case "top":b="Top";break;case "bottom":this._needsPosition="top",b="Bottom"}d.add(this.domNode,"dojoxExpando"+b);d.add(this.iconNode,"dojoxExpandoIcon"+b);d.add(this.iconNode,"qa-button-toc");this._isHorizontal=/top|bottom/.test(this.region)}this.iconNode.setAttribute("aria-controls",this.id);this.own(c(this.domNode,"click",a.hitch(this,"_singleClickClose")))},destroy:function(){this._removeHandles(this._animHandles);this.inherited(arguments)},
onSlideoutStateChange:function(a){},onShowPanel:function(){},resize:function(a){this._hasSizes||this._startupSizes(a);var b=q.getMarginSize(this.domNode);this._contentBox={w:a&&"w"in a?a.w:b.w,h:(a&&"h"in a?a.h:b.h)-this._titleHeight};h.set(this.containerNode,"height",this._contentBox.h+"px");a&&q.setMarginBox(this.domNode,a);this._showing&&this._layoutChildren();this._setupAnims()},toggle:function(){this._showing?(this._hideWrapper(),this._showAnim&&this._showAnim.stop(),this._hideAnim.play()):(this._hideAnim&&
this._hideAnim.stop(),this._showAnim.play());this._showing=!this._showing;this.domNode.setAttribute("aria-expanded",this._showing);this.onSlideoutStateChange({showing:this._showing,showSize:this._showSize})},_afterResize:function(a){a=this._currentSize;this._currentSize=q.getMarginSize(this.domNode);var b=this._currentSize[this._isHorizontal?"h":"w"];b>this._titleHeight?(this._showing||(this._showing=!this._showing,this._showEnd()),this._showSize=b,this._setupAnims()):(this._showSize=a[this._isHorizontal?
"h":"w"],this._showing=!1,this._hideWrapper(),this._hideAnim.gotoPercent(89,!0));this.onSlideoutStateChange({showing:this._showing,showSize:this._showSize})},_hideEnd:function(){setTimeout(a.hitch(this._container,"layout"),25)},_hideWrapper:function(){d.add(this.domNode,"dojoxExpandoClosed");h.set(this.cwrapper,{overflow:"hidden",visibility:"hidden",opacity:"0"})},_onIconNodeClick:function(a){this.toggle();this._trap(a)},_onShowHelp:function(){if(this.getChildren().length){var b=this.getChildren()[0];
a.isFunction(b.showHelp)&&b.showHelp()}},_onToggleAll:function(b){if(this.getChildren().length){var c=this.getChildren()[0];a.isFunction(c.toggleAll)&&c.toggleAll(b)}},_removeHandles:function(a){n.forEach(a,function(a){a.remove()})},_setupAnims:function(){this._removeHandles(this._animHandles);var b={node:this.domNode,duration:this.duration},d={},e=this._showSize,f=this._closedSize,h={},g=this._isHorizontal?"height":"width",k=this._needsPosition;d[g]={end:e};h[g]={end:f};k&&(d[k]={end:function(a){return parseInt(a.style[k],
10)-e+f}},h[k]={end:function(a){return parseInt(a.style[k],10)+e-f}});this._showAnim=l.animateProperty(a.mixin(b,{easing:u.backIn,properties:d}));this._hideAnim=l.animateProperty(a.mixin(b,{easing:u.backOut,properties:h}));this._animHandles=[c(this._showAnim,"End",a.hitch(this,"_showEnd")),c(this._hideAnim,"End",a.hitch(this,"_hideEnd"))]},_showEnd:function(){h.set(this.cwrapper,{visibility:"visible",opacity:"0"});d.remove(this.domNode,"dojoxExpandoClosed");l.anim(this.cwrapper,{opacity:"1"},50,null,
a.hitch(this._container,"layout"));this.onShowPanel()},_singleClickClose:function(a){this._showing||this.toggle()},_startupSizes:function(){this._container=this.getParent();this._closedSize=this._titleHeight=q.getMarginSize(this.titleWrapper).h;if(this.splitter){var b=this.id;n.forEach(r.toArray(),function(c){c&&(c.child&&c.child.id===b)&&this.own(e.after(c,"_stopDrag",a.hitch(this,"_afterResize"),!0))},this)}this._currentSize=q.getContentBox(this.domNode);this._showSize=this._currentSize[this._isHorizontal?
"h":"w"];this._setupAnims();this.startExpanded?this._showing=!0:(this._showing=!1,this._hideWrapper(),this._hideAnim.gotoPercent(99,!0));this.domNode.setAttribute("aria-expanded",this._showing);this._hasSizes=!0},_trap:function(a){s.stop(a)}})})},"anaplan/settings/ImportsView":function(){define("anaplan/utils/FormatHelper anaplan/utils/UIHelper anaplan/data/Aggregator dojo/_base/declare anaplan/layout/ManagedContainer anaplan/toolbar/_ButtonsMixin anaplan/layout/_DashboardMixin anaplan/widgets/Button anaplan/widgets/Menu anaplan/widgets/Toolbar dijit/ToolbarSeparator anaplan/data/ModelContentHelper anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/GridletFactory anaplan/gridlet/Selection anaplan/gridlet/ViewRequestGridModel anaplan/settings/Actions/_DataSources anaplan/settings/Actions/_ImportDefinitions anaplan/settings/Actions/ManageImportDataSourceDialog anaplan/utils/EntityLongIdHelper anaplan/utils/SelectionHelper anaplan/utils/UIHelper anaplan/view/Process anaplan/widgets/DropDownButton anaplan/widgets/SearchToolbarButton anaplan/widgets/Tooltip anaplan/constants anaplan/Exceptions dojo/_base/array dojo/_base/lang dojo/json dojo/on dojo/topic dojo/i18n!anaplan/nls/imports dojo/i18n!anaplan/nls/process dojo/i18n!anaplan/nls/toolbar dojo/i18n!anaplan/nls/view".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I,P,J){return p([r,n,f],{gutters:!1,_numDataRows:0,constructor:function(a){var b=a.content[0];this._workspaceId=b.workspaceId;this._modelId=b.modelId;this._viewDefinition=a.viewDefinition||this._getViewDefinition();this._showTipsOnStartup=a.showTipsOnStartup;this._isShowing=!1;this._tooltips=[];this._gridlet=null;this._importDefinitions=new m;this._importDefinitions.initialize();this._dataSources=new t;this._dataSources.initialize()},
hide:function(a){a===C.TIPS&&(L.forEach(this._tooltips,function(a){a.destroy()}),this._tooltips=[]);this.inherited(arguments)},onHide:function(){this._isShowing=!1;this._handleSuspend()},onShow:function(){this._isShowing=!0;this._handleResume();this.getParent().getParent()&&!this._gridlet&&(this._createGridlet(),this._enableButtons(this._gridlet.selection))},postCreate:function(){this.inherited(arguments);this._createToolbar()},resume:function(){this.inherited(arguments);this._handleResume()},show:function(a){a===
C.TIPS&&this._createTooltips();this.inherited(arguments)},startup:function(){this.inherited(arguments);this._showTipsOnStartup&&this.show(C.TIPS)},suspend:function(){this.inherited(arguments);this._handleSuspend()},uninitialize:function(){L.forEach(this._tooltips,function(a){a.destroy()});this.inherited(arguments)},_createGridlet:function(){try{this._model=new c({viewDefinition:this._viewDefinition});this._gridlet=(new h({editorFactory:new q})).createGridlet({region:"center",model:this._model,defaultColumnWidth:150,
selection:(new u).initializeToDefaults()});this.addChild(this._gridlet);var a=N(this._gridlet,"SelectionChange",K.hitch(this,"_onSelectionChange")),b=N(this._gridlet,"Update",K.hitch(this,"_onUpdate")),d=N(this._gridlet,"reset",K.hitch(this,"_reset"));this.own(a,b,d);k.gather();this._searchButton.set("model",this._model);this._searchButton.set("widget",this._gridlet);this._gridlet.focus()}catch(e){A.throwClientException(this,e)}},_createViewButton:function(){var a=new l({style:"display: none;"}),
b=N(a,"open",K.hitch(this,"_updateViewMenuItems"));this.own(b);this._viewMenu=b=new y({label:P.menuView,dropDown:a,"data-anaplan-element-name":"toolbar-button-view"});this._menuItemPublishToDashboard=this._createPublishToDashboardMenu();a.addChild(this._menuItemPublishToDashboard);this._menuItemPublishToDashboard.startup();return b},_createRunButton:function(){var a=new s({label:H.buttonRunImport,iconClass:"anaplanEditorIcon anaplanEditorIconRunImport","data-anaplan-element-name":"toolbar-button-run"}),
b=a.on("click",K.hitch(this,"_doRunAction"));this.own(b);return a},_createEditButton:function(){var a=new s({label:H.buttonEditImport,iconClass:"anaplanEditorIcon anaplanEditorIconEdit","data-anaplan-element-name":"toolbar-button-edit"}),b=a.on("click",K.hitch(this,"_doEditAction"));this.own(b);return a},_createSearchButton:function(){return new v({label:H.tooltipSearch,iconClass:"anaplanEditorIcon anaplanEditorIconSearch","data-anaplan-element-name":"toolbar-button-search",showLabel:!1})},_createToolbar:function(){try{var b=
new a({region:"top"});this._toolbar=b;this.addChild(b);this._viewButton=this._createViewButton();b.addChild(this._viewButton);this._runButton=this._createRunButton();b.addChild(this._runButton);this._editButton=this._createEditButton();b.addChild(this._editButton);this._myDeleteButton=this._createDeleteButton();b.addChild(this._myDeleteButton);this._reOrderButton=this._createReOrderButton();b.addChild(this._reOrderButton);L.forEach([this._runButton,this._editButton,this._myDeleteButton,this._reOrderButton],
function(a){a&&(a.show(),a.set("disabled",!0),a.set("showLabel",!0),a.set("title",""))});b.addChild(new e);this._refreshButton=this._createRefreshButton();b.addChild(this._refreshButton);b.addChild(new e);this._searchButton=this._createSearchButton();b.addChild(this._searchButton)}catch(c){A.throwClientException(this,c)}},_createTooltip:function(a,b){var c=null;try{var d=a.get("label"),e=H["tooltip"+b.split(" ").join("")];e||(e=J["tooltip"+b.split(" ").join("")]);if(!e)return null;var f=g.searchAndReplacePlaceholders(e),
c=new E({label:f,connectId:[a.domNode],position:["below","above"],title:d})}catch(h){A.throwClientException(this,h)}return c},_createTooltips:function(){this._tooltips.length?console.warn("anaplan.settings.ImportsView expected to find no tooltips, found "+this._tooltips.length):(this._tooltips.push(this._createTooltip(this._viewButton,"View")),this._tooltips.push(this._createTooltip(this._runButton,"RunImport")),this._tooltips.push(this._createTooltip(this._editButton,"EditImport")),this._tooltips.push(this._createTooltip(this._reOrderButton,
"ReOrder")))},_doRunAction:function(){try{var a=this._getSelectedActions();if(a.count){var c=a.labels[0][0],d=D.stringify({nodes:{Import:{type:"IMPORT",action:z.entityLongIdToEntityLongIdIdentifier(a.entityLongIds[0][0]),next:"_END_"},_END_:{type:"END",next:null}},start:"Import"});this._displayProcessDialog(null,d,c,"titleImport")}}catch(e){b.showErrorReporter(new G.ClientException(null,e,{widgetId:this.id}))}},_doEditAction:function(){try{var a=this._getSelectedActions();if(a.count){var c=a.entityLongIds[0][0],
d=a.labels[0][0],e=this._getImportDefinition(c);this._showManageImportDataSources({workspaceId:this._workspaceId,modelId:this._modelId,mode:"EDIT",importType:e.importType,importDefinitionJson:D.stringify(e),importEntityLabel:d,importEntityLongId:c})}}catch(f){b.showErrorReporter(new G.ClientException(null,f,{widgetId:this.id}))}},_getSelectedActions:function(){var a=this._gridlet._selection;if(!a)return[];var b=this._getGridController();return x.getSelection(a,b.getContext())},_displayProcessDialog:function(a,
c,d,e){try{var f={workspaceId:this._workspaceId,modelId:this._modelId,processEntityLongId:a,processDefinitionJson:c,processEntityLabel:d},h=b.getSharedDialog(),g=new B(f);e||(e="titleAction");h.set("title",I[e]);h.set("refocus",!1);h.set("content",g.domNode);h.set("preventhide",!0);var l=N(h,"Cancel",function(){g.cancelProcess()}),m=N(g,"ProcessCompletion",function(){h.hide(null,!0).then(function(){k.gather()})}),q=N(g,"Cancel",function(){h.onCancel()});this.own(l,m,q);h.show()}catch(n){b.throwClientException(this,
n)}},_displayNewDashboardDialog:function(a){a===C.dashboardElementType.GRID&&(a=this._getGridController())&&this._displayNewDashboardDialogWithViewInfos(a.getButtonInfosForDashboardElements())},_addCurrentViewToDashboard:function(a){if(this._gridlet){var b=this._getGridController();b&&this._addViewsToDashboard(a,b.getButtonInfosForDashboardElements())}},_getImportDefinition:function(a){var b=this._importDefinitions.getImportDefinitions(),c=null;L.forEach(b,function(b){b.entityLongId===a&&(c=b)});
return c.importDefinition},_showManageImportDataSources:function(a){(new w(a)).show()},_enableButtons:function(a){this._searchButton.set("disabled",!1);var b={count:0};a&&(!a.isWholeGridSelected()&&!a.isWholeColumnSelected())&&(b=this._getSelectedActions());var c=0<b.count,d=0<b.count,e=1===b.count,f=1===b.count;a&&(d=d&&x.canDelete(a,this._getGridController().getContext()));for(var h=0;h<b.count;h++)var g=this._getImportDefinition(b.entityLongIds[0][h]),d=d&&!this._isSalesforceImportDefinition(g);
this._viewButton&&this._viewButton.set("disabled",!c);this._runButton&&this._runButton.set("disabled",!f);this._editButton&&this._editButton.set("disabled",!e);this._myDeleteButton&&this._myDeleteButton.set("disabled",!d);this.inherited(arguments)},_isSalesforceImportDefinition:function(a){a=z.entityLongIdIdentifierToEntityLongId(a.source);for(var b=this._dataSources.getDataSources(),c=0;c<b.length;c++){var d=b[c];if(d.entityLongId===a){if((a=d.dataSourceDefinition)&&"SALESFORCE_API"===a.dataSourceType)return!0;
break}}return!1},_getGridController:function(){return!this._gridlet?null:this._gridlet.getGridController()},_getViewDefinition:function(){var a={type:"MODEL_DEFINITION",staticContextIdentifiers:[]},b=d.getAxesForViewDefinition([C.SYSTEM_AXIS_IDENTIFIER_IMPORT_ALL_IDENTIFIER],[C.SYSTEM_AXIS_IDENTIFIER_IMPORT_DEFINITION_PROPERTY_IDENTIFIER]);K.mixin(a,b);return a},_handleResume:function(){var a=this._getGridController();a&&a.resume()},_handleSuspend:function(){this.inherited(arguments);this._gridlet&&
this._gridlet.getGridController().suspend()},_onSelectionChange:function(a){this._toolbar&&this._enableButtons(a)},_onUpdate:function(){var a=this._getNumDataRows();(this._gridlet&&!this._gridlet._selection||0===this._numDataRows&&0<a||0<this._numDataRows&&0===a)&&this._gridlet._gridController.setBestSelection();this._numDataRows=a;this._onSelectionChange(this._gridlet._selection)},_reset:function(){this._disableButtons(this._toolbar)},_updateViewMenuItems:function(){this._viewMenu.closeDropDown(!1);
this._dashboardsList&&this._updateDashboardsList()},_getNumDataRows:function(){var a=0;this._gridlet&&(this._gridlet._sizer&&"undefined"!==typeof this._gridlet._sizer._dataRowCount)&&(a=this._gridlet._sizer._dataRowCount);return a}})})},"anaplan/tabs/Workflow":function(){define("anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/home/Workflow anaplan/layout/ManagedContainer anaplan/utils/TestAttributesHelper dojo/_base/declare dojo/dom-class".split(" "),function(g,b,k,p,r,n,f){return n([p],
{testAttrName:"Workflow",gutters:!1,constructor:function(b){this._showTipsOnStartup=b.showTipsOnStartup},postCreate:function(){this.inherited(arguments);f.add(this.domNode,"workflowTab")},startup:function(){this.inherited(arguments);if(b.isWorkflowEnabled(g)){var f=b.getHasWorkflowEntityLongId(g),f=new k({hasWorkflowEntityLongId:f,leafPageSize:50,region:"center",showTipsOnStartup:this._showTipsOnStartup||!1});r.add(f,"workflow");this.addChild(f)}}})})},"anaplan/view/ModuleFormulae/Widget":function(){define("dojo/_base/declare anaplan/constants anaplan/view/_Editor dojo/i18n!anaplan/nls/moduleFormula anaplan/common/SelectiveAccess dojo/dom-style dojo/text!anaplan/templates/ModuleFormula.html anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f){return g("anaplan.view.ModuleFormulae.Widget",[k],{baseClass:"formulaBar",templateString:f,constructor:function(){},postCreate:function(){this.inherited(arguments);this.removeButton.set("label",p.buttonRemoveModuleFormula);r.isAuthorized(b.userActions.MAINTAIN_CUSTOM_MODULES)||n.set(this.moduleFormulaRemoveButtonCell,"display","none")},uninitialize:function(){},_onRemoveButtonClick:function(){this.set("formulaValue","");this._onSave()},_setButtonsDisabled:function(b){this.inherited(arguments);
this.removeButton&&this.removeButton.set("disabled",b)},_setEditModeAttr:function(b){this.inherited(arguments);this.removeButton&&this.removeButton.visible(!b)}})})},"anaplan/layout/Banner":function(){define("anaplan/constants anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/layout/Banner/_BannerHelp anaplan/layout/Banner/_BannerUser anaplan/utils/CookieHelper anaplan/utils/FormatHelper anaplan/utils/topics anaplan/utils/SingleIpHelper dijit/_WidgetBase dijit/popup dijit/TooltipDialog dojo/_base/array dojo/_base/declare dojo/_base/event dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-class dojo/dom-construct dojo/i18n!anaplan/nls/banner dojo/keys dojo/on dojo/query dojo/sniff dojo/topic anaplan/common/SelectiveAccess anaplan/keyboard/shortcutsDialog".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G){var L=function(){var a=App.interim.findDOMNode(this);a&&(a.removeEventListener("click",K),a.addEventListener("click",K))},K=function(a){if("A"===a.target.tagName.toUpperCase()){var b=a.target.href.trim();b!==window.location.href.trim()&&(a.preventDefault(),s.redirect(b))}};return h([a],{constructor:function(a){this._modelSummaryActiveState=this._modelName=this._bannerMessageTooltipDialog=null;this._tooltips=[];this._useGlobalNav=l.hasSingleIpCookie()&&
!0===b.getApplicationProperty(g.FEATURE_FLAGS.GLOBAL_NAV)},error:function(){},startup:function(){this.inherited(arguments);b.addObserver(this);this.bannerMessage=document.getElementById("bannerMessage");this.own(E.subscribe("anaplan/persistentmessage",c.hitch(this,"_persistentMessage")))},postCreate:function(){this.inherited(arguments);var a=b.getWorkspaceInfo(),d=b.getUserInfo();this._useGlobalNav?(this.domNode.setAttribute("id","gn"),w.add(this.domNode,"globalNavContainer qa-ap-gn"),this._renderGlobalNav()):
(this._connectTilesLink(),this._connectModelLink(),this._bannerUser=new r({label:f.escapeHTML(f.unescapeHTML([d.loggedInUserFirstName,d.loggedInUserLastName].join(" ")))}),this._bannerHelp=new p({label:"Help"}),z.empty("banner-user"),this._bannerUser.placeAt("banner-user").startup(),z.empty("banner-help"),this._bannerHelp.placeAt("banner-help").startup());this.own(B(t.doc,"keydown",c.hitch(this,"_onKey")),B(t.doc,"keypress",c.hitch(this,"_onKey")));window.modelId&&this._assertModel(a,window.modelId)&&
this._setModel(a,window.modelId)},_renderGlobalNav:function(){var a={onAbout:p.prototype._onAbout,onAnapedia:p.prototype._onAnapedia,onAskAQuestion:p.prototype._onAskAQuestion,onChat:p.prototype._onChat,onGetHelpFromTheCommunity:p.prototype._onGetHelpFromTheCommunity,onLogout:r.prototype._onLogout,onModelManagement:r.prototype._onModelManagement,onModelOrigins:p.prototype._onModelOrigins,onModelTitle:this._modelLinkHandler.bind(this),onProfile:r.prototype._onProfile,onShowAllConfirmations:p.prototype._onShowAllConfirmations,
onShowHelpForThisPage:p.prototype._onShowHelpForThisPage,onShowKeyboardShortcuts:function(a){App.components.GlobalNavDropdown.setOpenDropdown(null,!1);return G.showHandler(a)}},c={isSupportUser:C.isAuthorized(g.userActions.CAN_RENDER_GLOBAL_NAV),isWorkspaceAdmin:C.isAuthorized(g.userActions.CAN_RENDER_GLOBAL_NAV),hasFeatureFlagForGrid2:b.getApplicationProperty(g.FEATURE_FLAGS.GRID2),isEntitledToUseGrid2:b.hasEntitlement(g.ENTITLED_FEATURES.GRID2)};App.interim.renderReactNodeWithProvider(this.domNode,
App.components.GlobalNav,{nls:x,menuItemHandlers:a,permissions:c},__ANAPLAN_CORE_CLIENT_STORE__,L)},uninitialize:function(){b.deleteObserver(this);this._bannerUser&&(this._bannerUser.destroyRecursive(),this._bannerUser=null);this._bannerHelp&&(this._bannerHelp.destroyRecursive(),this._bannerHelp=null);this._bannerMessageTooltipDialog&&(this._bannerMessageTooltipDialog.destroy(),this._bannerMessageTooltipDialog=null);this._destroyTooltips()},update:function(){var a=b.getWorkspaceInfo();a&&window.modelId&&
this._assertModel(a,modelId)&&this._setModel(a,modelId)},view:function(){return null},_assertModel:function(a,b){return!b?!1:!k.assertModel(a,b,C.isAuthorized(g.userActions.CAN_ASSERT_MODEL))?(s.redirectToTiles(),!1):!0},_connectTilesLink:function(){var a=m.byId("tilesLink");a&&this.own(B(a,"click",c.hitch(this,this._onTiles)))},_connectModelLink:function(){var a=m.byId("modelLink");this.own(B(a,"click",this._modelLinkHandler.bind(this)))},_modelLinkHandler:function(a){a=k.getLoggedInUserDefaultDashboard(b);
return-1<a&&null!==k.getDashboardLabel(b,a)?(s.views(a),!0):-1<k.getHasWorkflowEntityLongId(b)?(s.views(g.WORKFLOW_TAB),!0):C.isAuthorized(g.userActions.CAN_VIEW_SETTINGS)?(s.views(g.SETTINGS_TAB),!0):!1},_destroyTooltips:function(){if(this._tooltips)for(var a=0;a<this._tooltips.length;a++)this._tooltips[a].destroy();this._tooltips=[]},_onKey:function(a){a.keyCode&&a.keyCode===A.ESCAPE&&u.stop(a)},_onTiles:function(a){a&&a.preventDefault();s.redirect(g.URL_IDS.LAUNCHPAD_URL_ID)},_clearPersistentMessage:function(){null!==
this._level&&(w.toggle("bannerMessage","bannerMessage bannerMessage"+this._level,!1),this._bannerMessageTooltipDialog&&(w.toggle(this._bannerMessageTooltipDialog.domNode,"anaplanBannerMessagePopup anaplanBannerMessagePopup"+this._level,!1),e.close(this._bannerMessageTooltipDialog)));this._level=null},_createTooltip:function(a,b,c){if(this._tooltips&&this._tooltips.length)for(var f=0;f<this._tooltips.length;f++)if(this._tooltips[f].id===b)return;var h=new d({id:b,classname:"anaplanTooltip",content:a,
onMouseLeave:function(){e.close(h)}});B(m.byId(c),"mouseover",function(){e.open({popup:h,around:m.byId(c)})});B(m.byId(c),"mouseout",function(){e.close(h)});this._tooltips.push(h)},_persistentMessage:function(a,b){if(!this._useGlobalNav)try{if(null===a&&null===b)this._clearPersistentMessage();else{this._clearPersistentMessage();w.toggle("bannerMessage","bannerMessage bannerMessage"+b,!0);if(null===this._bannerMessageTooltipDialog){var f=new d({id:"bannerMessageTooltipDialog",content:a,onMouseLeave:function(){e.close(f)}});
B(this.bannerMessage,"mouseover",c.hitch(this,function(){null!==this._level&&e.open({popup:f,around:this.bannerMessage})}));f.startup();this._bannerMessageTooltipDialog=f}else this._bannerMessageTooltipDialog.set("content",a);w.toggle(this._bannerMessageTooltipDialog.domNode,"anaplanBannerMessagePopup anaplanBannerMessagePopup"+b,!0);this._level=b}}catch(h){console.error(h)}},_setModel:function(a,b){if(b){var c=q.indexOf(a.modelIds,b),d=a.modelSummaries[c];if(this._useGlobalNav){var e=a.modelNames[c],
c=C.isAuthorized(g.userActions.CAN_VIEW_ICON);__ANAPLAN_CORE_CLIENT_STORE__.dispatch(App.interim.globalNavActions.setTitleInfo({modelTitle:e,modelIcons:{deployed:!0===c&&(d.activeState===g.ACTIVE_STATE_PRODUCTION||d.activeState===g.ACTIVE_STATE_PRODUCTION_MAINTENANCE),locked:d.activeState===g.ACTIVE_STATE_LOCKED,offline:d.activeState===g.ACTIVE_STATE_MAINTENANCE||d.activeState===g.ACTIVE_STATE_PRODUCTION_MAINTENANCE}}));__ANAPLAN_CORE_CLIENT_STORE__.dispatch(App.interim.globalNavActions.setInitialHelpMenuState());
document.title="Anaplan - "+e}else{if(this._modelName!==a.modelNames[c]){var f=z.create("span"),e=a.modelNames[c];document.title="Anaplan - "+e;z.place(document.createTextNode(e),f);z.place(f,y("#modelName .outer")[0],"only");this._modelName=a.modelNames[c]}this._modelSummaryActiveState!==d.activeState&&(c=C.isAuthorized(g.userActions.CAN_VIEW_TOOLTIP),e=m.byId("modelName"),d.activeState===g.ACTIVE_STATE_LOCKED?(w.add(e,"active-state-locked"),this._createTooltip(x.labelLockedTitle+x.labelLocked,"lockedTooltipPopup",
"lockedTooltip")):w.remove(e,"active-state-locked"),d.activeState===g.ACTIVE_STATE_MAINTENANCE||d.activeState===g.ACTIVE_STATE_PRODUCTION_MAINTENANCE?(w.add(e,"active-state-offline"),this._createTooltip(x.labelOfflineTitle+x.labelOffline,"offlineTooltipPopup","offlineTooltip")):w.remove(e,"active-state-offline"),!0===c&&(d.activeState===g.ACTIVE_STATE_PRODUCTION||d.activeState===g.ACTIVE_STATE_PRODUCTION_MAINTENANCE)?(w.add(e,"active-state-production"),this._createTooltip(x.labelProductionTitle+x.labelProduction,
"productionTooltipPopup","productionTooltip")):w.remove(e,"active-state-production"),this._modelSummaryActiveState=d.activeState);w.add("modelName","alm")}}}})})},"anaplan/view/_Editor":function(){define("anaplan/utils/UIHelper anaplan/utils/FormatHelper dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin anaplan/utils/EntityLongIdHelper dijit/_WidgetsInTemplateMixin anaplan/data/ModelContentHelper anaplan/constants anaplan/Exceptions anaplan/data/ChangeFactory anaplan/data/ModelContentCache anaplan/utils/SubmissionHandler anaplan/view/_EditorHelper dojo/string dojo/_base/lang dojo/dom-geometry dojo/dom-attr dojo/keys dojo/string dojo/_base/event dojo/dom-class dojo/sniff dojo/topic dojo/dom-style dojo/i18n!anaplan/nls/editor dojo/i18n!dijit/nls/common dojo/i18n!anaplan/nls/util".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G){return k([p,r,f],{baseClass:null,cssStyle:null,gridlet:null,viewRequestGridModel:null,tabindex:-1,templateString:null,templatePath:null,globalFormulaEditModule:null,editMode:!1,isEditable:!0,showTitle:!1,formulaInfo:null,constructor:function(){this._inputSelection={startIndex:0,endIndex:0}},cancelEdit:function(){this._onReset()},focus:function(){this.formula.focus()},insertExpression:function(a){a&&(this._inputSelection=h.insertExpression(this.formula,
this._inputSelection,a))},onChange:function(){},onReset:function(){},onSave:function(){},postCreate:function(){this.okButton.set("label",C.buttonOk);this.resetButton.set("label",C.buttonCancel);this.toggleButton&&this.toggleButton.set("label",E.buttonToggleFormulaEditor);this.formulaHeader&&this.formulaTitle&&this.formulaTitle.appendChild(document.createTextNode(this.title));var a=y.subscribe("anaplan/formula/startGlobalEdit",c.hitch(this,"_setGlobalFormulaEditModuleAttr")),b=y.subscribe("anaplan/formula/endGlobalEdit",
c.hitch(this,"_setGlobalFormulaEditModuleAttr")),d=y.subscribe("anaplan/formula/insertExpression",c.hitch(this,"_insertExpression")),e=y.subscribe("anaplan/formula/restoreSelectionIfFormulaEdit",c.hitch(this,"_restoreSelectionIfFormulaEdit"));this.own(a,b,d,e);this.inherited(arguments)},reset:function(){this._setCellPrecisionAttr("");this._setFormulaLabelAttr("");this._setFormulaValueAttr("");this._setEditModeAttr(!1);this._setDisabledAttr(!0);this._setIsEditableAttr(!1);this._setWriteableLeafCellCountAttr("")},
resize:function(b){try{b&&t.setMarginBox(this.domNode,b)}catch(c){var d={widgetId:this.id};b&&(d.size=b);g.showErrorReporter(new a.ClientException("_Editor: resize",c,d))}},resume:function(){this._suspended||console.warn(this.id+" resume");this._suspended=!1},setInputSelection:function(a){a&&(this.formula.focus(),this.formula.select(),this._inputSelection=a,h.setCaretPosition(this.formula,a.startIndex))},startup:function(){this._started&&console.warn("startup "+this.id);this.inherited(arguments)},
suspend:function(){this._suspended&&console.warn(this.id+" suspend");this._suspended=!0},getInputSelection:function(){return this._inputSelection},_getCssStyleAttr:function(){return this._cssStyle},_getCurrentExpressionAttr:function(){return this._currentExpression},_getDisabledAttr:function(){return m.get(this.formula,"disabled")},_getEditModeAttr:function(){return this.editMode},_getEntityLongIdsAttr:function(){return this._entityLongIds},_getFormulaLabelAttr:function(){return b.unescapeHTML(this.labelButton.get("label"))},
_getFormulaScopeAttr:function(){return this._formulaScope},_getFormulaValueAttr:function(){return this.formula.value.replace(/^\s*=\s*/,"")},_getIsEditableAttr:function(){return this.isEditable},_getModuleId:function(){return this.viewRequestGridModel?this.viewRequestGridModel.getModuleId():null},_getShowTitleAttr:function(){return this.showTitle},_getSubmissions:function(){if(!this.formulaInfo){var a=this._replaceNonBreakingSpaces(this.get("formulaValue")),c=this._currentExpression,d=this._entityLongIds;
d.push(l.SYSTEM_PROPERTY_FORMULA);var f=(new e).getCellChangeGenerator("TEXT");return[{workspaceId:workspaceId,cellChanges:[f.getCellChange({cellText:a,entityLongIds:d,format:{dataType:"TEXT"},modelId:modelId,originalText:c})]}]}a=this._replaceNonBreakingSpaces(this.get("formulaValue"));d=this.formulaInfo.formulaScope;c=n.entityLongIdToEntityLongIdIdentifier(d.versionEntityLongId);f=n.entityLongIdToEntityLongIdIdentifier(d.lineItemSubsetEntityLongId);d=this.viewRequestGridModel.getModuleId();a="\x3cModelDefinition\x3e\x3cDefineModule name\x3d'"+
b.escapeHTML(d,!0)+"'\x3e\x3cModuleFormulae\x3e\x3cModuleFormula version\x3d'"+c+"' lineItemHierarchy\x3d'"+f+"' formula\x3d'"+b.escapeHTML(a,!0)+"'\x3e\x3c/ModuleFormula\x3e\x3c/ModuleFormulae\x3e\x3c/DefineModule\x3e\x3c/ModelDefinition\x3e";return[{workspaceId:workspaceId,modelChanges:[{modelId:modelId,moduleId:d,modelChangeXml:a}]}]},_insertExpression:function(a){this.editMode&&(this.insertExpression(a),this.focus())},_restoreSelectionIfFormulaEdit:function(){this.globalFormulaEditModule&&(this.formula.selectionStart=
this._inputSelection.startIndex,this.formula.selectionEnd=this._inputSelection.endIndex)},_onDoubleClick:function(b){try{this._setEditModeAttr(!0)}catch(c){c instanceof a.UnsupportedOperationException||c instanceof a.IllegalStateException?g.showErrorReporter(c,!0):g.showErrorReporter(new a.ClientException("_Editor: _onDoubleClick",c,{widgetId:this.id},b))}},_onFormulaRowLabelCellClick:function(b){try{b.target===this.formulaRowLabelCell&&this._onLabelButtonClick(b)}catch(c){g.showErrorReporter(new a.ClientException("_Editor._onFormulaRowLabelCellClick",
c))}},_onKeyDown:function(b){try{if(b.ctrlKey&&86===b.keyCode||b.metaKey&&86===b.keyCode)this.editMode||this._setEditModeAttr(!0);else return!b.ctrlKey&&!b.metaKey&&b.stopPropagation(),!0}catch(c){c instanceof a.UnsupportedOperationException||c instanceof a.IllegalStateException?g.showErrorReporter(c,!0):g.showErrorReporter(new a.ClientException("_Editor: _onKeyDown",c,{widgetId:this.id},event))}},_onKeyPress:function(b){try{if(!b.ctrlKey&&!b.metaKey)switch(b.keyCode){case w.LEFT_ARROW:case w.RIGHT_ARROW:case w.UP_ARROW:case w.DOWN_ARROW:case w.SHIFT:break;
case w.ESCAPE:this._onReset();break;case w.ENTER:x.stop(b);this.editMode&&this._onSave();break;default:b.target===this.formula&&!this.editMode&&this._setEditModeAttr(!0)}}catch(c){c instanceof a.UnsupportedOperationException||c instanceof a.IllegalStateException?g.showErrorReporter(c,!0):g.showErrorReporter(new a.ClientException("_Editor: _onKeyPress",c,{widgetId:this.id},b))}},_onLabelButtonClick:function(b){try{m.get(this.formula,"disabled")||(this._setEditModeAttr(!0),this.formula.focus(),this.formula.select(),
this._setInputSelection())}catch(c){c instanceof a.UnsupportedOperationException||c instanceof a.IllegalStateException?g.showErrorReporter(c,!0):g.showErrorReporter(new a.ClientException("_Editor: _onLabelClick",c,{widgetId:this.id},b))}},_onMouseDown:function(b){try{this._setEditModeAttr(!0)}catch(c){c instanceof a.UnsupportedOperationException||c instanceof a.IllegalStateException?g.showErrorReporter(c,!0):g.showErrorReporter(new a.ClientException("_Editor: _onMouseDown",c,{widgetId:this.id},b))}},
_onReset:function(){this._setFormulaValueAttr(this._currentExpression);this._setEditModeAttr(!1);this.onReset()},_onSave:function(){try{this._setButtonsDisabled(!0);var b=this._getSubmissions();A.remove(this.formula,"formulaexpressionnormal");A.add(this.formula,"formulaexpressionpending");var d=this;(new q({aggregatorObserver:this.viewRequestGridModel,showPleaseWait:!0})).gather(b).then(function(){d._setButtonsDisabled(!1);d.formula&&(A.remove(d.formula,"formulaexpressionpending"),A.add(d.formula,
"formulaexpressionnormal"));d._setEditModeAttr(!1);d.onSave()},c.hitch(this,function(b){var c=function(){try{A.remove(d.formula,"formulaexpressionpending"),A.remove(d.formula,"formulaexpressioninvalid"),A.add(d.formula,"formulaexpressionnormal"),d.focus(),B("ie")&&dijit.selectInputText(d.formula,d._inputSelection.startIndex,d._inputSelection.endIndex)}catch(a){console.error(a)}finally{d._setButtonsDisabled(!1)}};b&&b.errorMessage?(A.replace(d.formula,"formulaexpressioninvalid","formulaexpressionpending"),
b.isKnownError?g.showErrorReporter(new a.BaseException(b.errorMessage),!0,!1,c):(b=new a.ServerException(b.errorMessage),b.setModelRestored(!0),g.showErrorReporter(b,!1,!1,c))):c()}))}catch(e){e instanceof a.IllegalStateException?g.showErrorReporter(e,!0):g.showErrorReporter(new a.ClientException("_Editor: _onSave",e,{widgetId:this.id})),this._setButtonsDisabled(!1)}},_replaceNonBreakingSpaces:function(a){var b=a;try{a&&(b=a.replace(/\u00A0/g," "))}catch(c){g.throwClientException(this,c)}return b},
_setButtonsDisabled:function(a){this.okButton&&this.okButton.set("disabled",a);this.resetButton&&this.resetButton.set("disabled",a);this.labelButton&&this.labelButton.set("disabled",a);this.scopeButton&&this.scopeButton.set("disabled",a);this.equalsButton&&this.equalsButton.set("disabled",a)},_setCellPrecisionAttr:function(a){this.cellPrecisionValue&&(this.cellPrecisionValue.innerHTML=b.escapeHTML(a),m.set(this.cellPrecisionValue,"title",b.escapeHTML(a)))},_setCheckedAttr:function(a){this.toggleButton.set("checked",
a)},_setCssStyleAttr:function(a){this._cssStyle&&A.remove(this.formula,this._cssStyle);A.add(this.formula,a);this._cssStyle=a},_setCurrentExpressionAttr:function(a){this._currentExpression=a},_setDisabledAttr:function(a){a?(m.set(this.formula,"disabled","disabled"),this._setButtonsDisabled(!0)):(m.remove(this.formula,"disabled"),this._setButtonsDisabled(!1));A.toggle(this.domNode,"disabled",a)},_setEditModeAttr:function(c){if(c){if(!this.isEditable)throw new a.IllegalStateException(b.searchAndReplacePlaceholders(E.messageFormulaIsNotEditable));
if(!this.editMode){this.editMode=c;var d=this.viewRequestGridModel.getModuleId();y.publish("anaplan/formula/startGlobalEdit",d,this._entityLongIds,this);d=this.getGlobalFormulaEditMessage(d,this._entityLongIds);y.publish("anaplan/persistentmessage",d,"FX")}}else this.editMode&&(this.editMode=c,y.publish("anaplan/formula/endGlobalEdit",null,this),y.publish("anaplan/persistentmessage",null,null));this.okButton&&(this.okButton.domNode.style.visibility=c?"":"hidden");this.resetButton&&(this.resetButton.domNode.style.visibility=
c?"":"hidden")},_setEntityLongIdsAttr:function(a){this._entityLongIds=a},_setFormulaLabelAttr:function(a){this.formulaRowLabelCell&&A.toggle(this.formulaRowLabelCell,"validSelection",null!==a&&0<a.length);this.labelButton.set("label",b.escapeHTML(a));this._updateLabelTooltip()},_setFormulaScopeAttr:function(a){this._formulaScope=a;var b=[];a&&"ALL"!==a&&(b.push("["),b.push(E[a]||a),b.push("]"));this.scopeButton.set("label",b.join(""));this._updateLabelTooltip()},_setFormulaValueAttr:function(a){this._value=
a;this.formula.value=a},_setGlobalFormulaEditModuleAttr:function(a){this.globalFormulaEditModule=a},_setInputSelection:function(){this._inputSelection=h.getInputSelection(this.formula)},_setIsEditableAttr:function(a){this.isEditable=a},_setShowPrecisionValueAttr:function(a){this.cellPrecisionValue&&v.set(this.cellPrecisionValue,"display",a?"":"none")},_setShowTitleAttr:function(a){this.formulaHeader&&v.set(this.formulaHeader,"display",a?"block":"none");this.showTitle=a},_setShowWriteableLeafCellCountAttr:function(b){try{this.writeableLeafCellCount&&
v.set(this.writeableLeafCellCount,"display",b?"":"none")}catch(c){throw new a.ClientException("_Editor._setShowWriteableLeafCellCountAttr",c);}},_setViewRequestGridModelAttr:function(a){this.viewRequestGridModel=a},_setWriteableLeafCellCountAttr:function(b){try{if(null!==b&&this.writeableLeafCellCount){var c=u.substitute(1===b?E.writeableLeafCellCountSingular:E.writeableLeafCellCountPlural,{writeableLeafCellCount:b});7===B("ie")?(this.writeableLeafCellCount.innerHTML="\x3cdiv\x3e\x3c/div\x3e",g.setText(this.writeableLeafCellCount.firstChild,
c)):g.setText(this.writeableLeafCellCount,c);m.set(this.writeableLeafCellCount,"title",c)}}catch(d){throw new a.ClientException("_Editor._setWriteableLeafCellCountAttr",d);}},_updateLabelTooltip:function(){var a=b.unescapeHTML(this.labelButton.get("label")),c=this.scopeButton.get("label"),d=[];a&&d.push(a);c&&d.push(c);m.set(this.formulaRowLabelCell,"title",d.join(" "))},getGlobalFormulaEditMessage:function(a,c){var e=null,f=null,h=null,g=null,k=null;if(c)for(var m=c.length,q,p,t=0;t<m;t++)switch(q=
c[t],n.getEntityTypeIndex(q)){case l.MODULE_ENTITY_TYPE_INDEX:f=s.getModuleLabel(d,q);p=d.getModuleInfo(q);break;case l.LINE_ITEM_SUBSET_ENTITY_TYPE_INDEX:k=s.getLineItemSubsetLabel(d,q);break;case l.VERSION_ENTITY_TYPE_INDEX:g=s.getVersionLabel(d,q);break;default:p&&(h=s.getLineItemLabelFromModuleInfo(p,q))}null!==f&&(null!==h?e=z.substitute(G.messageGlobalFormulaEditForLineItem,{moduleLabel:b.escapeHTML(f),lineItemLabel:b.escapeHTML(h)}):null!==k&&null!==g&&(e=z.substitute(G.messageGlobalFormulaEditForVersion,
{moduleLabel:b.escapeHTML(f),lineItemSubsetLabel:b.escapeHTML(k),versionLabel:b.escapeHTML(g)})));return e}})})},"anaplan/settings/Time2/CurrentPeriodDataProvider":function(){define("dojo/_base/lang anaplan/constants anaplan/data/ModelContentCache anaplan/data/RequestFactory anaplan/data/Aggregator dijit/Destroyable dojo/_base/array dojo/_base/declare dojo/Deferred dojo/Evented".split(" "),function(g,b,k,p,r,n,f,s,l,a){return new (s([a,n],{constructor:function(){this.inProgress=!1},_isModelLocked:function(){var a=
k.getWorkspaceInfo();if(a){var d=f.indexOf(a.modelIds,modelId);if(-1<d&&a.modelSummaries[d].activeState===b.ACTIVE_STATE_LOCKED)return!0}return!1},getData:function(a){var b=new l;a=p.createRequest(workspaceId,[],[],[{actionId:"GET_TIMESCALE_DETAIL_PERIODS",params:a}]);this.inProgress=!0;r.post(a,!1,g.hitch(this,function(a){this.inProgress=!1;this._onResponse(a,b)}),function(a){this.inProgress=!1;b.reject(a)});return b.promise},_onResponse:function(a,b){if(a&&a.error)b.reject(a.error);else if(a&&a.result){if(a.result.systemActionResults){var f=
a.result.systemActionResults;if(1===f.length){for(var f=f[0].detailPeriodsLabelPage,h=[],g=0;g<f.count;g++)h.push({name:f.labels[0][g],id:f.entityIds[0][g]});b.resolve(h)}else b.reject("handler expected to find 1 system action result")}}else b.reject("No result from system action request")}}))})},"anaplan/forms/UserDetails":function(){define("anaplan/utils/FormatHelper anaplan/data/Aggregator anaplan/constants anaplan/data/ModelContentCache anaplan/data/RequestFactory anaplan/Exceptions anaplan/forms/validators anaplan/utils/UIHelper anaplan/widgets/Tooltip dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/dom-geometry dojo/dom-style dojo/i18n!anaplan/nls/users dojo/i18n!dijit/nls/common dojo/keys dojo/store/Memory dojo/text!anaplan/templates/_UserDetails.html dijit/form/ValidationTextBox dijit/form/FilteringSelect anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x){return h([e,a,d],{baseClass:"formDetails userDetails",createMode:!1,tabindex:-1,widgetsInTemplate:!0,templateString:x,constructor:function(a){this._workspaceId=a.workspaceId;this._modelId=a.modelId;this._isSsoServerManaged=a.isSsoServerManaged;this._existingUser=null;this._connections=[];this._rolesLabelPage=a.rolesLabelPage;this._ssoToolTip=null},onComplete:function(){},onError:function(){},onFind:function(){},postCreate:function(){s.setText(this.labelEmailAddress,
t.labelEmailAddress);s.setText(this.labelFirstName,t.labelFirstName);s.setText(this.labelLastName,t.labelLastName);s.setText(this.labelIsWorkspaceAdministrator,t.labelIsWorkspaceAdministrator);s.setText(this.labelIsExceptionUser,t.labelIsExceptionUser);s.setText(this.labelRole,t.labelRole);s.setText(this.labelAddressValidationLoading,t.labelAddressValidationLoading);!1==this._isSsoServerManaged&&(this.labelIsExceptionUser.style.display="none",this.inputIsExceptionUser.style.display="none");this.buttonSubmit.set("label",
m.buttonOk);this.buttonSubmit.set("disabled",!0);this.buttonCancel.set("label",m.buttonCancel);this._setFormStateSearch();this.inputEmailAddress.validator=this._validateEmailAddress.bind(this)},resize:function(a){try{a&&(0<a.h&&0<a.w)&&u.setMarginBox(this.domNode,a)}catch(b){var c={widgetId:this.id};a&&(c.size=a);this.onError(new n.ClientException("UserDetails: resize",b,c))}},startup:function(){this._started&&console.warn("startup "+this.id);this._ssoTooltip=this._createSSOTooltip();this.inherited(arguments)},
uninitialize:function(){this._ssoTooltip.destroy();q.forEach(this._connections,function(a){a.remove()});this.inherited(arguments)},_createSSOTooltip:function(){var a=g.searchAndReplacePlaceholders(t.checkboxSSOTooltip);return new l({label:a,connectId:[this.inputIsExceptionUser,this.labelIsExceptionUser],position:["below","above"],title:""})},_addUserToWorkspace:function(a,b,c,d){a=r.createRequest(this._workspaceId,[],[],[{actionId:"ADD_USER_TO_WORKSPACE",params:{userId:a,isExceptionUser:!b,userWorkspaceRole:c,
modelId:this._modelId,modelRole:d}}]);return this._postSynchronous(a)},_createUser:function(a,b,c,d,e,f){a=r.createRequest(this._workspaceId,[],[],[{actionId:"CREATE_USER",params:{emailAddress:a,firstName:b,lastName:c,isExceptionUser:!d,userWorkspaceRole:e,modelId:this._modelId,modelRole:f}}]);return(a=this._postSynchronous(a))?a.user:void 0},_doSearch:function(){this.inputEmailAddress.validate();if(this.inputEmailAddress.isValid()&&!this._existingUser){var a=this;this._findUser(this.inputEmailAddress.get("value"),
function(b){a._existingUser=b;a._showUser(a._existingUser);a._existingUser?(a._setFormStateExisting(),a.buttonSubmit.set("disabled",!1),a.buttonSubmit.focus()):(a._setFormStateCreate(),a.inputFirstName.focus(),a.buttonSubmit.set("disabled",!1))})}},_findUser:function(a,b){var d=r.createRequest(this._workspaceId,[],[],[{actionId:"FIND_USER",params:{emailAddress:a}}]);c.set(this.labelAddressValidationLoading,"display","block");var e=this;this._postAsynchronous(d,function(a){c.set(e.labelAddressValidationLoading,
"display","none");b(a&&a.user?a.user:null)})},_getDefaultInbuiltRole:function(a){return(a=p.getInbuiltModelRolesMap()[a])&&a.count?a.labels[0][0]:""},_onCancel:function(){if(this.getParent()&&this.getParent().onCancel)this.getParent().onCancel()},_onEmailBlur:function(a){try{this._emailAddressValidationEnabled=!0,this._doSearch()}catch(b){if(this.getParent()&&this.getParent().onCancel)this.getParent().onCancel();s.showErrorReporter(new n.ClientException("anaplan.forms.UserDetails: _onEmailBlur",b,
{widgetId:this.id},a))}},_onEmailKeyPress:function(a){try{a.keyCode==w.ENTER&&this._doSearch()}catch(b){if(this.getParent()&&this.getParent().onCancel)this.getParent().onCancel();s.showErrorReporter(new n.ClientException("anaplan.forms.UserDetails: _onEmailKeyPress",b,{widgetId:this.id},a))}},_onSubmit:function(a){try{if(this.inputEmailAddress.isValid()&&this.inputFirstName.isValid()&&this.inputLastName.isValid()&&this.filteringSelectRoles.isValid()){var b=this.inputIsWorkspaceAdministrator.checked?
k.selectiveAccess.userWorkspaceRole.ADMIN:k.selectiveAccess.userWorkspaceRole.USER,c=this.filteringSelectRoles.get("value");if(this._existingUser)this._addUserToWorkspace(this._existingUser.userId,this.inputIsExceptionUser.checked,b,c),this.onComplete(this._existingUser.userId);else{var d=this._createUser(this.inputEmailAddress.get("value"),this.inputFirstName.get("value"),this.inputLastName.get("value"),this.inputIsExceptionUser.checked,b,c);this.onComplete(d.userId)}}}catch(e){if(this.getParent()&&
this.getParent().onCancel)this.getParent().onCancel();s.showErrorReporter(new n.ClientException("anaplan.forms.UserDetails: _onSubmit",e,{widgetId:this.id},a))}},_populateRoles:function(a){var b=p.getInbuiltModelRolesMap();a=[b[a]||b[k.selectiveAccess.userWorkspaceRole.USER],this._rolesLabelPage];for(var b=[],c=0;c<a.length;c++){var d=a[c];if(d)for(var e=0;e<d.count;e++)b.push({name:d.labels[0][e],label:d.labels[0][e]})}a=new z({data:{identifier:"name",label:"label",items:b}});this.filteringSelectRoles.set("store",
a)},_postAsynchronous:function(a,c){try{var d;b.post(a,!1,function(a){a.result.systemActionResults&&a.result.systemActionResults.length&&(d=a.result.systemActionResults[0],c(d))},function(a,b){console.error(a,b)})}catch(e){s.throwClientException(this,e)}},_postSynchronous:function(a){var c;b.post(a,!0,function(a){a.result.systemActionResults&&a.result.systemActionResults.length&&(c=a.result.systemActionResults[0])},function(a,b){console.error(a,b)});return c},_setFormStateSearch:function(){this.inputEmailAddress.set("disabled",
!1);this.inputFirstName.set("disabled",!0);this.inputLastName.set("disabled",!0);this.inputIsWorkspaceAdministrator.disabled=!0;this.inputIsExceptionUser.disabled=!0;this.filteringSelectRoles&&this.filteringSelectRoles.set("disabled",!0)},_setFormStateCreate:function(){this.inputEmailAddress.set("disabled",!0);this.inputFirstName.set("disabled",!1);this.inputLastName.set("disabled",!1);this.inputIsWorkspaceAdministrator.disabled=!1;this.inputIsExceptionUser.disabled=!1;this.filteringSelectRoles&&
this.filteringSelectRoles.set("disabled",!1)},_setFormStateExisting:function(){this.inputEmailAddress.set("disabled",!0);this.inputFirstName.set("disabled",!0);this.inputLastName.set("disabled",!0);this.inputIsWorkspaceAdministrator.disabled=!1;this.inputIsExceptionUser.disabled=!1;this.filteringSelectRoles&&this.filteringSelectRoles.set("disabled",!1)},_setRolesLabelPageAttr:function(a){this._rolesLabelPage=a;this._populateRoles(this.inputIsWorkspaceAdministrator.checked?k.selectiveAccess.userWorkspaceRole.ADMIN:
k.selectiveAccess.userWorkspaceRole.USER)},_showUser:function(a){var b=a&&a.userWorkspaceRole?a.userWorkspaceRole:k.selectiveAccess.userWorkspaceRole.USER,c=a&&a.userModelRole?a.userModelRole:this._getDefaultInbuiltRole(b);this._populateRoles(b);this._isMe=!0;this.filteringSelectRoles.set("value",c);this._isMe=!1;a&&(a.emailAddress&&this.inputEmailAddress.set("value",a.emailAddress),a.firstName&&this.inputFirstName.set("value",a.firstName),a.lastName&&this.inputLastName.set("value",a.lastName),a.isExceptionUser&&
(this.inputIsExceptionUser.checked=!1),a.userWorkspaceRole&&(this.inputIsWorkspaceAdministrator.checked=a.userWorkspaceRole==k.selectiveAccess.userWorkspaceRole.ADMIN))},_validateEmailAddress:function(a){return!this._emailAddressValidationEnabled?!0:RegExp(f.emailAddress(),"i").test(a)}})})},"anaplan/settings/Actions/Toolbar":function(){define("dojo/_base/lang anaplan/anapediaKeys anaplan/constants anaplan/data/ModelContentCache anaplan/settings/Shared/Toolbar anaplan/widgets/DropDownButton anaplan/widgets/MenuItem dijit/Menu dijit/ToolbarSeparator dojo/_base/declare dojo/i18n!anaplan/nls/actionEditor dojo/i18n!anaplan/nls/common dojo/i18n!anaplan/nls/imports dojo/i18n!anaplan/nls/toolbar dojo/json".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u){return a("anaplan.settings.Actions.Toolbar",[r],{region:"top",startup:function(){this.viewButton=this._createViewButton();this.addChild(this.viewButton);this.newActionButton=this._createNewActionButton();this.addChild(this.newActionButton);this.runActionButton=this._createRunActionButton();this.addChild(this.runActionButton);this.editActionButton=this._createEditActionButton();this.addChild(this.editActionButton);this.deleteButton=this._createDeleteButton();
this.addChild(this.deleteButton);this._reOrderButton=this._createReOrderButton();this.addChild(this._reOrderButton);this.insertDeleteMoveSeparator=new l;this.addChild(this.insertDeleteMoveSeparator);this.manageImportDataSourcesButton=this._createManageImportDataSourcesButton();this.addChild(this.manageImportDataSourcesButton);this.manageImportDataSourcesSeparator=new l;this.addChild(this.manageImportDataSourcesSeparator);this.exportButton=this._createExportButton();this.addChild(this.exportButton);
this.addChild(new l);this.refreshButton=this._createRefreshButton();this.addChild(this.refreshButton);this.addChild(new l);this.searchButton=this._createSearchButton();this.addChild(this.searchButton)},enableButtons:function(a,b,d,e,f,h){this.searchButton.set("disabled",!1);this.refreshButton.set("disabled",!1);this.exportButton.set("disabled",!1);this.moveButton&&this.moveButton.get("disabled")===d&&this.moveButton.set("disabled",!d);this.deleteButton&&this.deleteButton.get("disabled")===b&&this.deleteButton.set("disabled",
!b);this.viewButton&&this.viewButton.get("disabled")===h&&this.viewButton.set("disabled",!h);this.editActionButton&&this.editActionButton.get("disabled")===f&&this.editActionButton.set("disabled",!f);this.runActionButton&&this.runActionButton.get("disabled")===e&&this.runActionButton.set("disabled",!e);this._reOrderButton&&this._reOrderButton.set("disabled",!d);this.newActionButton&&this.newActionButton.get("disabled")&&this.newActionButton.set("disabled",!1);this.manageImportDataSourcesButton&&this.manageImportDataSourcesButton.get("disabled")&&
this.manageImportDataSourcesButton.set("disabled",!1)},_createRunActionButton:function(){return this._createButton("anaplanEditorIcon anaplanEditorIconRunImport",d.labelRun+"...",g.hitch(this,"onRunAction"),!0,!0,"toolbar-button-run-action")},_createManageImportDataSourcesButton:function(){return this._createButton("",q.buttonManageSources,g.hitch(this,"onManageImportDataSources"),!0,!0,"toolbar-button-manage-import-data-sources")},_createEditActionButton:function(){return this._createButton("anaplanEditorIcon anaplanEditorIconEdit",
h.labelEdit,g.hitch(this,"onEditAction"),!0,!0,"toolbar-button-edit-action")},_createNewActionButton:function(){var a=this,d,g=new s({style:"display: none;"}),l=new n({label:h.labelNewAction,dropDown:g,"data-anaplan-element-name":"toolbar-button-new-action"}),q=[{actionType:k.ACTION_TYPE_PROCESS,actionLabel:e[k.ACTION_TYPE_PROCESS]||k.ACTION_TYPE_PROCESS},{actionType:k.ACTION_TYPE_DELETE_BY_SELECTION,actionLabel:e[k.ACTION_TYPE_DELETE_BY_SELECTION]||k.ACTION_TYPE_DELETE_BY_SELECTION,helpContent:b.deleteFromListUsingSelection},
{actionType:k.ACTION_TYPE_TASK_ELEMENT,actionLabel:e.DASHBOARD,helpContent:b.openDashboard,taskElement:u.stringify({taskElementType:"DASHBOARD"})},{actionType:k.ACTION_TYPE_TASK_ELEMENT,actionLabel:e.SIMPLE_CREATE,helpContent:b.create,taskElement:u.stringify({taskElementType:"BULK_OPERATION",operation:"SIMPLE_CREATE"})},{actionType:k.ACTION_TYPE_TASK_ELEMENT,actionLabel:e.BULK_DELETE_ENTITIES,helpContent:b.deleteBranch,taskElement:u.stringify({taskElementType:"BULK_OPERATION",operation:"BULK_DELETE_ENTITIES",
deletionMode:"ALL_LEVELS"})},{actionType:k.ACTION_TYPE_TASK_ELEMENT,actionLabel:e.SELECT_CHILDREN,helpContent:b.assign,taskElement:u.stringify({taskElementType:"BULK_OPERATION",operation:"SELECT_CHILDREN"})},{actionType:k.ACTION_TYPE_TASK_ELEMENT,actionLabel:e.BULK_ENTITY_COPY,helpContent:b.copyBranch,taskElement:u.stringify({taskElementType:"BULK_OPERATION",operation:"BULK_ENTITY_COPY",copyMode:"ALL_LEVELS"})}];!0!==p.getApplicationProperty("hpCustomButtons.disabled")&&(q=q.concat([{actionType:k.ACTION_TYPE_TASK_ELEMENT,
actionLabel:e.COPY_TO_NUMBERED_LIST,taskElement:u.stringify({taskElementType:"BULK_OPERATION",operation:"COPY_TO_NUMBERED_LIST"})},{actionType:k.ACTION_TYPE_TASK_ELEMENT,actionLabel:e.SYNCHRONISE_HIERARCHY,taskElement:u.stringify({taskElementType:"BULK_OPERATION",operation:"SYNCHRONISE_HIERARCHY"})}]));p.hasEntitlement(k.ENTITLED_FEATURES.OPTIMIZER)&&(q=q.concat([{actionType:k.ACTION_TYPE_TASK_ELEMENT,actionLabel:e.OPTIMIZER,taskElement:u.stringify({taskElementType:k.taskElementType.BULK_OPERATION,
operation:k.taskElementOperation.RUN_OPTIMIZER})}]));(d=p.getWorkspaceInfo())&&d.allowedToRunCMPLSolver&&(q=q.concat([{actionType:k.ACTION_TYPE_TASK_ELEMENT,actionLabel:e.Solver,taskElement:u.stringify({taskElementType:k.taskElementType.BULK_OPERATION,operation:k.taskElementOperation.RUN_CMPL_SCRIPT})}]));d=function(b){var d=new f({label:b.actionLabel+"..."});d.on("click",function(){a.onBulkOperation(b.actionType,b)});g.addChild(d)};for(var r=0;r<q.length;r++)d(q[r]);return l}})})},"anaplan/settings/Time2/SubmissionHandler":function(){define("./TimeDataTransform anaplan/data/RequestFactory anaplan/data/Aggregator dijit/Destroyable dojo/_base/declare dojo/Deferred dojo/Evented".split(" "),
function(g,b,k,p,r,n,f){return new (r([f,p],{submit:function(f,l){var a=new n,e=g.buildCellChanges(f,l);0===e.length?a.resolve():(e=b.createRequest(window.workspaceId,[{workspaceId:window.workspaceId,cellChanges:e,modelChanges:[]}],[],[]),k.post(e,!1,function(b){b?b.error?a.reject(b.error):b.result&&b.result.errorInfo?a.reject(b.result.errorInfo.errorMessage,b.result.errorInfo.isKnownError):a.resolve(b):a.reject("No response from server")},function(b){a.reject(b)}));return a.promise}}))})},"anaplan/settings/Hierarchy":function(){define("anaplan/utils/FormatHelper dojo/_base/declare dijit/layout/TabContainer anaplan/widgets/Tooltip anaplan/settings/HierarchyConfigureView anaplan/settings/HierarchyGridView anaplan/settings/HierarchyPropertiesAndSubsetsView anaplan/settings/HierarchyTreeView anaplan/data/ModelContentHelper anaplan/constants anaplan/utils/UIHelper dojo/_base/array dojo/_base/lang dojo/on dojo/topic dojo/dom-class dojo/i18n!anaplan/nls/hierarchy dojo/i18n!anaplan/nls/common".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m){return b("anaplan.settings.Hierarchy",[k],{gutters:!1,constructor:function(a){var b=a.content[0];this._workspaceId=b.workspaceId;this._modelId=b.modelId;this._viewDefinition=b.viewDefinition;this._modelContent=a.modelContent;this._firstRebuild=!0;this._showTipsOnStartup=a.showTipsOnStartup;this._tooltips=[];this._globalFormulaEditModule=a.globalFormulaEditModule||null},hide:function(b){b===a.TIPS&&(d.forEach(this._tooltips,function(a){a.destroy()}),this._tooltips=
[]);d.forEach(this.getChildren(),function(a){a.hide(b)})},postCreate:function(){this.inherited(arguments);this._createTabs();this.own(u.subscribe("anaplan/modelId",q.hitch(this,"_setModelId")),u.subscribe("anaplan/formula/startGlobalEdit",q.hitch(this,"_setGlobalFormulaEditModule")),u.subscribe("anaplan/formula/endGlobalEdit",q.hitch(this,"_setGlobalFormulaEditModule")));c.add(this.domNode,"settings")},resume:function(){d.forEach(this.getChildren(),function(a){a.resume()})},selectChild:function(){var a=
this,b=arguments;e.dirtyFormCheck(function(){a.inherited(b)},function(){})},show:function(b){b===a.TIPS&&this._createTooltips();d.forEach(this.getChildren(),function(a){a.show(b)})},startup:function(){this.inherited(arguments);this._selectedWidget&&this.selectChild(this._selectedWidget);this._showTipsOnStartup&&this._createTooltips()},suspend:function(){d.forEach(this.getChildren(),function(a){a.suspend()})},uninitialize:function(){d.forEach(this._tooltips,function(a){a.destroy()});this.inherited(arguments)},
_createTabs:function(){try{for(var b=[{id:this.id+"_TREE_VIEW",title:t.titleTreeView,widgetClass:s,viewDefinition:this._viewDefinition},{id:this.id+"_GRID_VIEW",title:t.titleGridView,widgetClass:n,viewDefinition:this._viewDefinition},{id:this.id+"_PROPERTIES",title:m.labelProperties,widgetClass:f,viewDefinition:q.mixin(q.clone(this._viewDefinition),l.getAxesForViewDefinition([a.SYSTEM_AXIS_IDENTIFIER_CUSTOM_PROPERTY_IDENTIFIER],[a.SYSTEM_AXIS_IDENTIFIER_PROPERTY_PROPERTY_IDENTIFIER]))},{id:this.id+
"_SUBSETS",title:m.labelSubsets,widgetClass:f,viewDefinition:q.mixin(q.clone(this._viewDefinition),l.getAxesForViewDefinition([a.SYSTEM_AXIS_IDENTIFIER_SUBSET_IDENTIFIER],[a.SYSTEM_AXIS_IDENTIFIER_SUBSET_PROPERTY_IDENTIFIER]))},{id:this.id+"_CONFIGURE",title:t.titleConfigure,widgetClass:r,viewDefinition:q.mixin({type:"MODEL_DEFINITION"},l.getAxesForViewDefinition([a.SYSTEM_AXIS_IDENTIFIER_HIERARCHY_IDENTIFIER],[a.SYSTEM_AXIS_IDENTIFIER_HIERARCHY_PROPERTY_IDENTIFIER]))}],c=b.length,d,g,k=0;k<c;k++)if(d=
b[k],g=new d.widgetClass({workspaceId:this._workspaceId,modelId:this._modelId,id:d.id,title:d.title,viewDefinition:d.viewDefinition,modelContent:this._modelContent,showTipsOnStartup:this._showTipsOnStartup,globalFormulaEditModule:this._globalFormulaEditModule}),this.addChild(g),d.widgetClass===s){var p=h(g,"TreeLimitExceeded",q.hitch(this,"_onTreeLimitExceeded"));this.own(p)}}catch(u){e.throwClientException(this,u)}},_createTooltip:function(a,b){var c=a.get("label"),d=t["tooltip"+b.split(" ").join("")],
d=g.searchAndReplacePlaceholders(d);return new p({label:d,connectId:[a.domNode],position:["below","above"],title:c})},_createTooltips:function(){if(this._tooltips.length)console.warn("Hierarchy expected to find no tooltips, found "+this._tooltips.length);else for(var a=this.tablist.getChildren(),b=a.length,c,d=0;d<b;d++)c=a[d],this._tooltips.push(this._createTooltip(c,c.get("label")))},_onTreeLimitExceeded:function(){var a=this.getChildren();1<a.length&&this.selectChild(a[1])},_setGlobalFormulaEditModule:function(a){this._globalFormulaEditModule=
a},_setModelId:function(a){this._modelId=a;this._globalFormulaEditModule=null}})})},"anaplan/settings/Time2":function(){define("./Time2/DataProvider ./Time2/DirtyFormDialog ./Time2/Form ./Time2/SaveHandler anaplan/Exceptions anaplan/layout/ManagedContainer anaplan/utils/JsHelper anaplan/utils/UIHelper dojo/_base/declare dojo/_base/lang dojo/Deferred".split(" "),function(g,b,k,p,r,n,f,s,l,a,e){var d=new Date;d.setHours(0,0,0,0);var q={fiscalYearExtraWeekMonth:11,weekFormat:"Numbered",startDate:d,fiscalYearEndType:"Last in Month",
fiscalYearEndMonth:12,fiscalYearEndDayInWeek:7,quarterlyWeekGrouping:"4-4-5"};return l([n],{gutters:!1,liveSplitters:!1,_safeMode:!0,constructor:function(a){this._dataprovider=new g(a.content[0])},postCreate:function(){this.inherited(arguments);this._form=new k;this.addChild(this._form);this.isHidden=!1},startup:function(){this.inherited(arguments);this._attach();this._dataprovider.initialize()},_attach:function(){this._dataprovider.on("update",a.hitch(this,"_onDataReceived"));this._form.on("valueChange",
a.hitch(this,"_onFormDataChanged"));this._form.on("apply",a.hitch(this,"_onApplyForm"));this._form.on("dataloaded",a.hitch(this,function(){this.hasLoadedData=!0}));this.own(p.on("pending",function(){s.showPleaseWaitDialog()}));this.own(p.on("finished",function(){s.hidePleaseWaitDialog()}))},_onDataReceived:function(b){if(!this.isHidden&&!this.isSuspended()){this._safeMode=1<b.rowLabelPagesCount;this._sourceData=a.clone(b);for(var d in b.value)b.noCurrentValue[d]&&(b.value[d]=q[d]);this._startingFormData=
a.clone(b);this._form.updateForm(b)}},_onApplyForm:function(b){var d=this._form,c=new e;p.saveValues(b,this._sourceData,this._safeMode).then(a.hitch(this,function(a){!0!==a?(s.setDirtyForm(null),this._dataprovider.refresh()):this._form.refreshState();c.resolve(a)}),function(a){a&&s.showErrorReporter(new r.BaseException(a),!0,!1,function(){d.refreshState()});c.reject(a)});return c.promise},_applyCurrentForm:function(){var a=new e;if(this._form.isValid()){var b=this._form.get("value");this._onApplyForm(b).then(function(b){a.resolve(b)},
function(b){a.reject(b)})}else a.reject("Form is invalid");return a.promise},_onFormDataChanged:function(a){a=f.checksum(a);var b=f.checksum(this._startingFormData.value);s.setDirtyForm(a!==b?this:null)},handleNavigation:function(d,e){var c=this._form.isValid(),f=new b({isValid:c});f.on("cancel",a.hitch(this,function(){f.destroy();e()}));f.on("apply",a.hitch(this,function(){this._applyCurrentForm().then(function(a){!0===a?(f.destroy(),e()):(s.setDirtyForm(null),f.destroy(),d())},function(){s.setDirtyForm(null);
f.destroy();e()})}));f.on("discard",a.hitch(this,function(){s.setDirtyForm(null);f.destroy();this._form.reset();d()}));f.show()},onHide:function(){this.inherited(arguments);this.isHidden=!0},onShow:function(){this._form.disableButtons();this._dataprovider.refresh();this.inherited(arguments);this.isHidden=!1},resume:function(){this._form.disableButtons();this._dataprovider.refresh();this.inherited(arguments)},destroy:function(){this._dataprovider.destroy();this.inherited(arguments)}})})},"anaplan/view/ModelManagement/NewModelView":function(){define("anaplan/utils/UIHelper anaplan/Exceptions anaplan/view/ModelManagement/ModelView dojo/_base/declare dojo/_base/event dojo/dom-attr dojo/i18n!anaplan/nls/modelManagement dojo/i18n!dijit/nls/common dojo/keys dojo/string dojo/text!anaplan/templates/ModelManagement/NewModelView.html dijit/form/ValidationTextBox anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e){return p([k],{templateString:e,createModelButton:null,onCreateModel:function(){},onValidStateChange:function(a){this.createModelButton.set("disabled",!a)},postCreate:function(){try{this.inherited(arguments),g.setText(this.modelNameLabel,f.labelModelName),this.createModelButton.set("label",f.buttonCreateModel),this.cancelButton.set("label",s.buttonCancel),n.set(this.modelNameLabel,"for",this.modelNameTextBox.id)}catch(a){throw new b.ClientException("NewModelView#postCreate",
a);}},_onCreateModel:function(){try{var d=this;this.modelNameTextBox.validator=function(a){a=d._checkModelName(a);return null!==a&&0<a.length?(this.invalidMessage=a,!1):!0};if(!this.modelNameTextBox.isValid()||!this.isValid())this.modelNameTextBox.focus();else{var e=this.modelNameTextBox.get("value");this.onCreateModel(a.trim(e))}}catch(f){throw new b.ClientException("NewModelView#_onCreateModel",f);}},_onCreateModelButtonClick:function(){this._onCreateModel()},_onKeyDown:function(a){var b=a.keyCode;
b===l.ESCAPE?(this._onCancel(),r.stop(a)):b===l.ENTER&&(this._onCreateModel(),r.stop(a))},_onShow:function(){this.onTitleChange(f.titleNewModel);this.onHelpChange(null);this.modelNameTextBox.focus()}})})},"anaplan/home/Workflow":function(){define("anaplan/api/service anaplan/anapediaKeys anaplan/common/SelectiveAccess anaplan/common/ViewSerialNumbers anaplan/constants anaplan/data/Aggregator anaplan/data/ChangeFactory anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/data/RequestFactory anaplan/data/UserInfo anaplan/data/ViewRequestRequestGenerator anaplan/Exceptions anaplan/home/Workflow/EmailForm anaplan/home/Workflow/InlineEditor anaplan/home/Workflow/StatusConfirmationForm anaplan/utils/EntityLongIdHelper anaplan/utils/FormatHelper anaplan/utils/JsHelper anaplan/utils/SubmissionHandler anaplan/utils/UIHelper anaplan/utils/WorkflowEntityHelper anaplan/widgets/ConfirmationDialog anaplan/widgets/DropDownButton anaplan/widgets/Menu anaplan/widgets/MenuItem anaplan/widgets/Tooltip anaplan/widgets/Tree dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/focus dijit/form/Textarea dijit/layout/utils dijit/Tooltip dijit/tree/TreeStoreModel dojo/_base/array dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/window dojo/data/ItemFileWriteStore dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/i18n!anaplan/nls/gridlet dojo/i18n!anaplan/nls/workflow dojo/i18n!dijit/nls/loading dojo/json dojo/on dojo/string dojo/text!anaplan/templates/Workflow.html dijit/ToolbarSeparator anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I,P,J,O,T,Q,ca,Z,X,V,da,S,$,M,aa,W,Y,R,ba){return O("anaplan.home.Workflow",[K,L,D],{testAttrName:"Workflow",baseClass:"workflow",hasWorkflowEntityLongId:-1,leafPageSize:null,tabindex:-1,templateString:ba,constructor:function(a){this._treeConnections=[];this._currentSelection=null;this._showTipsOnStartup=a.showTipsOnStartup;this._tooltips=[];this._gatherOnResume=!0;this._serialNumbers=new p},error:function(){this._waitMessageDisplayed&&
this._hideWaitMessage()},hide:function(){this._tooltips.length?this._destroyTooltips():console.warn("anaplan.home.Workflow hide expected to find tooltips and did not")},postCreate:function(){this.inherited(arguments);this.messageOfTheDay.editorWrapper=u;this.messageOfTheDay.editor=F;var a=new A;this.buttonBulkEmail.set("label",M.labelBulkEmail||"Mail To");this.buttonComplete.set("label",M[r.WORKFLOW_STATUS_COMPLETE_ENTITY_LONG_ID]);this.buttonComplete.set("iconClass",a.getIconClass("Complete",null));
this.buttonInProgress.set("label",M[r.WORKFLOW_STATUS_IN_PROGRESS_ENTITY_LONG_ID]);this.buttonInProgress.set("iconClass",a.getIconClass("In Progress",null));this.buttonNotStarted.set("label",M[r.WORKFLOW_STATUS_NOT_STARTED_ENTITY_LONG_ID]);this.buttonNotStarted.set("iconClass",a.getIconClass("Not Started",null));this._loadingMessageLabel.innerHTML=aa.loadingState;this._setWorkflowHeadline();a=this._messageOfTheDayIsEditable();this.messageOfTheDay.set("disabled",!a);this._setMessageOfTheDay(a);this._createCellMenuButton();
n.addObserver(this)},reset:function(){this._showWaitMessage();this._hideCellMenuButton();this._pageInfo=this._dataPage=this._rowLabelPage=null;this._fixedRowCount=this._rowCount=this._fixedColumnCount=this._columnCount=0;this._serialNumbers=new p;this._viewIndex=-1;this._nameArray=this._iconClassArray=this._currentSelection=null;this._userWriteAccessColumnIndex=-1;this._writeAccessString=this._rowEntityLongIdsString=null;this._destroyTree();this._resetMessageOfTheDay();x.setText(this.workflowHeadline,
M.titleWorkflow);this._setToolbarDisabled();this._rebuild=!0},startup:function(){this._started?console.warn("startup "+this.id):(this.inherited(arguments),!0===this._showTipsOnStartup&&this.show(r.TIPS))},_destroyTree:function(){J.forEach(this._treeConnections,function(a){a.remove()});this._tree&&(this._tree.model.destroy(),this._tree.destroy(),this._tree=this._store=null)},resize:function(a){if(a){da.setMarginBox(this.domNode,a);a=Q.mixin(da.getMarginBox(this.domNode),a||{});a=H.marginBox2contentBox(this.domNode,
a);var b=da.getMarginBox(this.header);a=Q.mixin(a,{h:a.h-b.h});da.setMarginBox(this.treeContainer,a)}},resume:function(){this._suspended||console.warn("resume "+this.id);this._suspended=!1;this._gatherOnResume?(n.gather(),this._gatherOnResume=!1):(this._rebuild||!this._tree?this._rebuildTree():this._refresh&&this._refreshTree(),this._waitMessageDisplayed&&this._hideWaitMessage())},setModelId:function(){this.reset()},show:function(a){a===r.TIPS&&(this._tooltips.length?console.warn("anaplan.home.Workflow show did not expect to find any tooltips but found "+
this._tooltips.length):this._createTooltips())},suspend:function(){this._suspended?console.warn("suspend "+this.id):(this._hideCellMenuButton(),this._suspended=!0)},uninitialize:function(){this._destroyTooltips();this._cellMenuButton&&this._cellMenuButton.destroy();this._destroyTree();this._confirmationDialog&&this._confirmationDialog.destroy();n.deleteObserver(this)},update:function(a){var b=this._serialNumbers||new p,c;c=l.getHasWorkflowEntityLongId(s);if(this.hasWorkflowEntityLongId!==c)this.reset(),
this._setWorkflowHeadline(),this.hasWorkflowEntityLongId=c,this._suspended&&(this._gatherOnResume=!0);else{this._gatherOnResume=!1;c=this._messageOfTheDayIsEditable();this._setMessageOfTheDay(c);this.messageOfTheDay.set("disabled",!c);this._viewIndex=a[0].viewIndex;this._serialNumbers=c=a[0].serialNumbers;if(b.rowAxisSerialNumber!==c.rowAxisSerialNumber||b.columnAxisSerialNumber!==c.columnAxisSerialNumber)this._rebuild=!0,b.rowAxisSerialNumber!==c.rowAxisSerialNumber&&(1!==a[0].rowLabelPages.length&&
console.warn("anaplan.home.Workflow; "+a[0].rowLabelPages.length+" row label pages; expected 1"),this._rowLabelPage=a[0].rowLabelPages[0]),b.columnAxisSerialNumber!==c.columnAxisSerialNumber&&(1!==a[0].columnLabelPages.length&&console.warn("anaplan.home.Workflow; "+a[0].columnLabelPages.length+" column label pages; expected 1"),this._columnLabelPage=a[0].columnLabelPages[0]),this._columnCount=a[0].columnCount,this._rowCount=a[0].rowCount,this._fixedColumnCount=a[0].fixedColumnCount,this._fixedRowCount=
a[0].fixedRowCount;b.pageInfoSerialNumber!==c.pageInfoSerialNumber&&(this._pageInfo=a[0].pageInfo);b.dataSerialNumber!==c.dataSerialNumber&&(this._refresh=!0,1!==a[0].dataPages.length&&console.warn("anaplan.home.Workflow; "+a[0].dataPages.length+" data pages; expected 1"),this._dataPage=a[0].dataPages[0]);this._suspended||(this._rebuild?this._rebuildTree():this._refresh&&this._refreshTree(),this._waitMessageDisplayed&&this._hideWaitMessage())}},view:function(){if(-1===this.hasWorkflowEntityLongId)return null;
var a={type:"MODEL_DATA",staticContextIdentifiers:[t.entityLongIdToEntityLongIdIdentifier(this.hasWorkflowEntityLongId)]},b=l.getAxesForViewDefinition([r.SYSTEM_AXIS_IDENTIFIER_ENTITY_IDENTIFIER],[r.SYSTEM_AXIS_IDENTIFIER_WORKFLOW_PROPERTY_IDENTIFIER]);Q.mixin(a,b);return(new d(workspaceId)).getRequest({modelId:modelId,viewDefinition:a,pageRequests:[{startRow:0,startColumn:0,rowCount:-1,columnCount:-1}],cellSelectorLabelsRequired:!1,pageSelectorLabelsRequired:!1,serialNumbers:this._serialNumbers,
viewIndex:this._viewIndex||-1})},_getDescendantIndices:function(a,b,c,d){a.push(b);b=J.indexOf(c,this._rowLabelPage.entityLongIds[0][b]);if(-1<b){b=d[b];for(var e=0;e<b.length;e++)this._getDescendantIndices(a,b[e],c,d)}},_bulkEmail:function(a){try{var b=this._getUserWriteAccessColumnIndex();if(-1!=b){for(var c=this._rowLabelPage.parentEntityLongIds[0],d=[],f=[],h=0;h<c.length;h++){var g=c[h];if(-1!=g){var l=J.indexOf(f,g);-1===l?(f.push(g),d.push([h])):d[l].push(h)}}c=[];this._getDescendantIndices(c,
J.indexOf(this._rowLabelPage.entityLongIds[0],this._currentSelection.entityLongId),f,d);for(var k=this._columnCount,d=[],q=e.getLoggedInUserEmailAddress(),n=this._getStatusColumnIndex(),f=0;f<c.length;f++){var s=c[f],p=this._dataPage.cellText[s*k+b];if(p&&p.length)for(var t=p.split(","),h=0;h<t.length;h++){var u=t[h].replace(/^\s+/,"");if(u&&u.length&&u!=q&&-1===J.indexOf(d,u)){g=-1;if(this._getCellIsEditable(s,n))g=Number(this._getCellValue(s,n));else var Q=this._getCellText(s,n),g="600"==Q?r.WORKFLOW_STATUS_NOT_STARTED_ENTITY_LONG_ID:
"006"==Q?r.WORKFLOW_STATUS_COMPLETE_ENTITY_LONG_ID:r.WORKFLOW_STATUS_IN_PROGRESS_ENTITY_LONG_ID;-1!==J.indexOf(a,g)&&d.push(u)}}}for(var v=this._rowLabelPage.labels[0][J.indexOf(this._rowLabelPage.entityLongIds[0],this._currentSelection.entityLongId)],b=[],k=0;k<a.length;k++)b.push(M[a[k]]);var w=b.join(M.messageOr||",");if(d.length){var y=["Anaplan",[[modelName,v].join(" - "),["(",w,")"].join("")].join(" ")].join(", "),B=["mailto:",d.join(),"?subject\x3d",y].join("");location.href=B}else{var z=M.messageNoItemsBulkEmail,
z=z.replace("%s",m.escapeHTML(v)),z=z.replace("%t",w);x.showInfoDialog(z,{title:M.titleBulkEmail})}}}catch(C){console.error(C)}},_createTooltip:function(a,b){var c=M["tooltip"+b]||b,c=m.searchAndReplacePlaceholders(c);return new C({connectId:a,label:c,position:["below","above"]})},_createTooltips:function(){this._tooltips.push(this._createTooltip(this.buttonNotStarted.domNode,r.WORKFLOW_STATUS_NOT_STARTED_ENTITY_LONG_ID));this._tooltips.push(this._createTooltip(this.buttonInProgress.domNode,r.WORKFLOW_STATUS_IN_PROGRESS_ENTITY_LONG_ID));
this._tooltips.push(this._createTooltip(this.buttonComplete.domNode,r.WORKFLOW_STATUS_COMPLETE_ENTITY_LONG_ID));this._tooltips.push(this._createTooltip(this.buttonBulkEmail.domNode,"MailTo"))},_destroyTooltips:function(){for(var a=0;a<this._tooltips.length;a++)this._tooltips[a].destroy();this._tooltips=[]},_hideCellMenuButton:function(){this._clearCellMenu();this._cellMenuButton.domNode.style.visibility="hidden"},_clearCellMenu:function(){try{for(var a=this._cellMenu,b=a.getChildren().length-1;0<=
b;b--){var c=a.getChildren()[b];a.removeChild(c)}}catch(d){console.error(d)}},_createCellMenuButton:function(){try{var a=new v({"class":"anaplanCellMenu"}),b=Y(a,"Open",Q.hitch(this,"_onCellMenuOpen"));this.own(b);var c=new y({label:$.buttonCellMenu,showLabel:!1,dropDown:a,"class":"cellMenuButton",style:"visibility: hidden;"});V.place(c.domNode,ca.body());this._cellMenuButton=c;this._cellMenu=a;this._clearCellMenu()}catch(d){x.throwClientException(this,d)}},_onCellMenuOpen:function(a){try{if(this._clearCellMenu(),
this._emailAddresses){var b=this._emailAddresses.split(",");if(0!==b.length)for(var c=0;c<b.length;c++)this._cellMenu.addChild(this._createCellMenuItem(b[c],this._emailSubject))}}catch(d){x.showErrorReporter(new q.ClientException("anaplan.home.Workflow: _onCellMenuOpen",d,{widgetId:this.id},a))}},_createCellMenuItem:function(a,b){var c=["mailto:",a,"?subject\x3dAnaplan ",modelName," ",b].join("");return new E({label:a,onClick:function(){location.href=c}})},_createTree:function(a){this._compositeHierarchyNames=
this._getCompositeHierarchyNames();var b=new P({store:a,query:{name:"*"},mayHaveChildren:function(a){return 0<a.children.length}}),c=this,d=this._cellMenuButton,b=new G({model:b,showRoot:!1,tabindex:this.tabindex,leafPageSize:this.leafPageSize,getIconClass:function(b){return a.getValue(b,"iconClass")},persist:!1,_onNodeMouseEnter:function(a){var b=c._getTooltipTable(a.item);null!=b&&I.show(b,a.labelNode,w.isNullOrUndefined(a._pageBackLink)?["below","above"]:["above","below"]);var b="hidden"!==d.domNode.style.visibility,
e=a.get("item"),f=e.name[0].split(" (")[0];!e||!e.writeAccessEmailAddress[0]||0===e.writeAccessEmailAddress[0].length?(c._emailSubject=null,c._emailAddresses=null,b&&c._hideCellMenuButton()):(c._emailSubject=f,c._emailAddresses=e.writeAccessEmailAddress[0],a=T.coords(a.contentNode),da.setMarginBox(d.domNode,{l:a.x+a.w,t:a.y}),b||(d.domNode.style.visibility="visible"))},_onNodeMouseLeave:function(a){I.hide(a.labelNode)}});this._treeConnections.push(Y(b,"Click",Q.hitch(this,"_onClick")));this.treeContainer.appendChild(b.domNode);
b.startup();return b},_getTooltipTable:function(a){if(""===a.descendentNotStartedCount)return null;var b=M.descendentNotStartedLabel,c=M.descendentInProgressLabel,d=M.descendentCompleteLabel,e=M.descendentTotalLabel,f=this._getFirstHierarchyNameIndex(a.descendentNotStartedCount[0]),h=this._getDescendentRowValues(a.descendentNotStartedCount[0]),g=this._getDescendentRowValues(a.descendentInProgressCount[0]),l=this._getDescendentRowValues(a.descendentCompleteCount[0]),k=this._getDescendentRowValues(a.descendentTotalCount[0]),
q=h.length,f=this._getDescendentHierarchyNameRowValues(f,q),n="";a='\x3cdiv class\x3d"workflowStatusTooltip"\x3e\x3ctable cellspacing\x3d"0" cellpadding\x3d"0"\x3e\x3ctr\x3e\x3cth\x3e\x3cb\x3e\x26nbsp;'+m.cleanEscapeHTML(a.name[0])+'\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/b\x3e\x3c/th\x3e\x3cth align\x3d"right"\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon anaplanWorkflowIcon WorkflowComplete"\x3e\x3c/span\x3e\x26nbsp;\x3cb\x3e'+d+'\x3c/b\x3e\x26nbsp;\x26nbsp;\x3c/th\x3e\x3cth align\x3d"right"\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon anaplanWorkflowIcon WorkflowInProgress"\x3e\x3c/span\x3e\x26nbsp;\x3cb\x3e'+
c+'\x3c/b\x3e\x26nbsp;\x26nbsp;\x3c/th\x3e\x3cth align\x3d"right"\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon anaplanWorkflowIcon WorkflowNotStarted"\x3e\x3c/span\x3e\x26nbsp;\x3cb\x3e'+b+'\x3c/b\x3e\x26nbsp;\x26nbsp;\x3c/th\x3e\x3cth align\x3d"right"\x3e\x26nbsp;\x26nbsp;\x3cb\x3e'+e+"\x3c/b\x3e\x26nbsp;\x26nbsp;\x3c/th\x3e\x3c/tr\x3e";for(b=0;b<q;b++)b===q-1&&(n='class\x3d"noborder"'),a+="\x3ctr\x3e",a=a+"\x3ctd "+n+"\x3e\x26nbsp;"+m.escapeHTML(f[b])+"\x26nbsp;\x26nbsp;\x3c/td\x3e",a=
a+"\x3ctd "+n+' align\x3d"right"\x3e'+l[b]+"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/td\x3e",a=a+"\x3ctd "+n+' align\x3d"right"\x3e'+g[b]+"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/td\x3e",a=a+"\x3ctd "+n+' align\x3d"right"\x3e'+h[b]+"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/td\x3e",a=a+"\x3ctd "+n+' align\x3d"right"\x3e\x26nbsp;\x26nbsp;'+k[b]+"\x26nbsp;\x26nbsp;\x26nbsp;\x26nbsp;\x3c/td\x3e",
a+="\x3c/tr\x3e";return a+"\x3c/table\x3e\x3c/div\x3e"},_getFirstHierarchyNameIndex:function(a){return parseInt(this._splitDescendentValues(a)[0],10)},_getDescendentRowValues:function(a){var b=[];a=this._splitDescendentValues(a);for(var c=1;c<a.length;c++)b.push(a[c]);return b},_splitDescendentValues:function(a){return a.split(",")},_getDescendentHierarchyNameRowValues:function(a,b){var c=[],d;if(0>a||a+b>this._compositeHierarchyNames.length)for(d=0;d<b;d++)c.push("");else for(d=a;d<a+b;d++)c.push(this._compositeHierarchyNames[d]);
return c},_getCompositeHierarchyNames:function(){for(var a=s.getCompositeHierarchyEntityLongIds(),b=[],c=0;c<a.length;c++){var d=l.getHierarchyLabel(s,a[c]);b.push(d)}return b},_diff:function(a,b){if(!a||!b)return[];a.length!==b.length&&console.warn(this.id+" _diff expected to compare arrays of same length but found "+[a.length,b.length].join());for(var c=[],d=a.length,e=0;e<d;e++)(a[e]!=this._iconClassArray[e]||b[e]!=this._nameArray[e])&&c.push(e);return c},_displayWorkflowStatusConfirmationDialog:function(a,
b,d){try{var e=this,f=x.getSharedDialog(),h=new c({workflowItemEntityLongId:a,workflowStatusEntityLongId:b,newStatusText:d});f.set("title",M.workflowStatusConfirmationTitle);f.set("refocus",!1);f.set("content",h.domNode);var g=Y(h,"Ok",function(){f.hide();var a=h.get("workflowItemEntityLongId"),b=h.get("workflowStatusEntityLongId"),c=h.get("resetDescendents");e._submitWorkflowStatusChange(a,b,c)}),l=Y(h,"Cancel",function(){f.onCancel()}),k=Y(h,"DialogHide",Q.hitch(this,function(){this._tree&&N.focus(this._tree)}));
this.own(l,k,g);f.show()}catch(m){x.showErrorReporter(new q.ClientException("Workflow: onDisplayWorkflowStatusConfirmationForm",m,{widgetId:this.id}))}},_displayEmailFormDialog:function(){try{var a=this,c=this._currentSelection;if(c)if(this._isLeaf(c.entityLongId))a._bulkEmail([r.WORKFLOW_STATUS_NOT_STARTED_ENTITY_LONG_ID,r.WORKFLOW_STATUS_IN_PROGRESS_ENTITY_LONG_ID,r.WORKFLOW_STATUS_COMPLETE_ENTITY_LONG_ID]);else{var d=x.getSharedDialog(),e=new h({currentSelection:Q.mixin(c,{label:this._rowLabelPage.labels[0][J.indexOf(this._rowLabelPage.entityLongIds[0],
c.entityLongId)]}),value:this._lastEmailFormValue||[]});d.set("title",M.titleEmailForm);d.set("refocus",!1);d.set("content",e.domNode);d.setHelpContent(b.workflow);var f=Y(e,"Cancel",function(){d.onCancel()}),g=Y(e,"Ok",function(){d.hide();var b=e.get("value");a._bulkEmail(b);a._lastEmailFormValue=b}),l=Y(e,"DialogHide",Q.hitch(this,function(){this._tree&&N.focus(this._tree)}));this.own(g,l,f);d.show()}}catch(k){x.showErrorReporter(new q.ClientException("Workflow: onDisplayEmailForm",k,{widgetId:this.id}))}},
_getCellIsEditable:function(a,b){return-1==a?null:this._dataPage.isEditable[a*this._columnCount+b]},_getCellText:function(a,b){return-1==a?null:this._dataPage.cellText[a*this._columnCount+b]},_getCellValue:function(a,b){return-1==a?null:this._dataPage.cellValues[a*this._columnCount+b]},_getConfirmationDialog:function(){this._confirmationDialog?J.forEach(this._confirmationHandles,function(a){a.remove()}):(this._confirmationDialog=new B({}),this._confirmationHandles=[]);return this._confirmationDialog},
_getDefaultSelection:function(a){if(!this._rowLabelPage||0===this._rowLabelPage.count)return console.warn("anaplan.home.Workflow _getDefaultSelection expected to find label page with at least one item and did not"),null;var b=J.indexOf(this._rowLabelPage.parentEntityLongIds[0],-1),c=this._rowLabelPage.entityLongIds[0][-1===b?0:b],d=!1;try{J.forEach(a,function(a){if(Q.isArray(a.entityLongId)&&Q.isArray(a.changePermission)&&a.entityLongId.length===a.changePermission.length)for(var b=0;b<a.entityLongId.length;b++)a.entityLongId[b]==
c&&(d=a.changePermission[b]);else a&&(a.entityLongId&&a.entityLongId==c)&&(d=a.changePermission)})}catch(e){console.warn("unable to get default selection in workflow "+e),d=!1}return{entityLongId:c,label:this._rowLabelPage.labels[0][-1===b?0:b],changePermission:d}},_getHasWorkflowLabel:function(){return l.getHasWorkflowLabel(s)},_getItems:function(a){for(var b=[],c={},d=0;d<a.length;d++)c[a[d].entityLongId]=d;for(d=0;d<a.length;d++){var e=a[d];if(-1==e.parentEntityLongId)b.push(e);else{var f=c[e.parentEntityLongId];
0<=f?a[f].children.push(e):b.push(e)}}return[{entityLongId:"root",name:"root",children:b}]},_getOrderedParentChildArray:function(){var a=[],b=this._columnCount,c=this._dataPage.cellText,d=this._dataPage.cellValues,f=this._rowLabelPage,h=f.entityLongIds[0],g=f.labels[0],l=f.parentEntityLongIds[0],k=this._getStatusColumnIndex();if(-1===k)return[];for(var m=this._getDescendentNotStartedColumnIndex(),q=this._getDescendentInProgressColumnIndex(),n=this._getDescendentCompleteColumnIndex(),s=this._getDescendentTotalColumnIndex(),
p=this._getAccessUserNamesColumnIndex(),r=this._getAccessUserEmailsColumnIndex(),t=this._getChangePermissionColumnIndex(),u=e.getLoggedInUserEmailAddress(),Q=new A,v=0;v<f.count;v++){var w=v*b+k,y=v*b+m,B=v*b+q,z=v*b+n,x=v*b+s,C=d[v*b+p],Z=d[v*b+r],ca="true"===d[v*b+t],G=Q.getIconClass(c[w],null),L=[];Z&&Z.length&&(Z=Z.split(","),J.forEach(Z,function(a){(a=a.replace(/^\s+/,""))&&(a.length&&a!=u)&&L.push(a)}));a.push({cellValue:d[w],descendentNotStartedCount:d[y],descendentInProgressCount:d[B],descendentCompleteCount:d[z],
descendentTotalCount:d[x],changePermission:ca,children:[],entityLongId:h[v],iconClass:G,name:C&&C.length?[g[v]," (",C,")"].join(" "):g[v],parentEntityLongId:l[v],writeAccessEmailAddress:L.join()})}return a},_getPathToSelection:function(a){var b=[];if(this._rowLabelPage){var c=this._rowLabelPage.entityLongIds[0],d=this._rowLabelPage.parentEntityLongIds[0];for(a=J.indexOf(c,a.entityLongId);-1!==a;)b.push(String(c[a])),a=J.indexOf(c,d[a])}b.push("root");return b.reverse()},_getStatusColumnIndex:function(){return J.indexOf(this._columnLabelPage.entityLongIds[0],
r.SYSTEM_PROPERTY_STATUS)},_getDescendentNotStartedColumnIndex:function(){return J.indexOf(this._columnLabelPage.entityLongIds[0],r.SYSTEM_PROPERTY_WORKFLOW_NOT_STARTED_DESCENDENT_COUNT)},_getDescendentInProgressColumnIndex:function(){return J.indexOf(this._columnLabelPage.entityLongIds[0],r.SYSTEM_PROPERTY_WORKFLOW_IN_PROGRESS_DESCENDENT_COUNT)},_getDescendentCompleteColumnIndex:function(){return J.indexOf(this._columnLabelPage.entityLongIds[0],r.SYSTEM_PROPERTY_WORKFLOW_COMPLETE_DESCENDENT_COUNT)},
_getDescendentTotalColumnIndex:function(){return J.indexOf(this._columnLabelPage.entityLongIds[0],r.SYSTEM_PROPERTY_WORKFLOW_TOTAL_DESCENDENT_COUNT)},_getAccessUserNamesColumnIndex:function(){return J.indexOf(this._columnLabelPage.entityLongIds[0],r.SYSTEM_PROPERTY_WORKFLOW_ACCESS_USER_NAMES)},_getAccessUserEmailsColumnIndex:function(){return J.indexOf(this._columnLabelPage.entityLongIds[0],r.SYSTEM_PROPERTY_WORKFLOW_ACCESS_USER_EMAILS)},_getChangePermissionColumnIndex:function(){return J.indexOf(this._columnLabelPage.entityLongIds[0],
r.SYSTEM_PROPERTY_WORKFLOW_CHANGE_PERMISSION)},_getStatusCellIndex:function(a){a=J.indexOf(this._rowLabelPage.entityLongIds[0],a);if(-1===a)return console.warn("anaplan.home.Workflow expected to find currently selected item in label page but did not"),-1;var b=this._columnCount,c=this._getStatusColumnIndex();return-1===c?(console.warn("anaplan.home.Workflow _getStatusCellIndex expected to find status column but did not"),-1):a*b+c},_getUserWriteAccessColumnIndex:function(){return J.indexOf(this._columnLabelPage.entityLongIds[0],
r.SYSTEM_PROPERTY_WRITE_ACCESS_USERS)},_getLeafIndices:function(a,b,c,d){var e=J.indexOf(c,this._rowLabelPage.entityLongIds[0][a]);if(-1===e)b.push(a);else{a=d[e];for(e=0;e<a.length;e++)this._getLeafIndices(a[e],b,c,d)}},_getCellChanges:function(a,b,c){for(var d=this._getStatusColumnIndex(),e=[],e=e.concat(this._pageInfo.staticContext.entityLongIds[0]),e=e.concat(this._pageInfo.currentPageLabels.entityLongIds[0]),e=e.concat(this._columnLabelPage.entityLongIds[0][d]),h=new f,g=this._rowLabelPage.parentEntityLongIds[0],
l=[],k=[],m=0;m<g.length;m++){var q=g[m];if(-1!=q){var n=J.indexOf(k,q);-1===n?(k.push(q),l.push([m])):l[n].push(m)}}g=[];this._getLeafIndices(J.indexOf(this._rowLabelPage.entityLongIds[0],a),g,k,l);a=h.getCellChangeGenerator(b.dataType);h=[];for(l=0;l<g.length;l++)k=g[l],h.push(a.getCellChange({format:b,entityLongIds:e.concat(this._rowLabelPage.entityLongIds[0][k]),originalText:this._getCellValue(k,d),currentDisplayText:"",cellText:c,modelId:modelId}));return h},_getMessageOfTheDay:function(a){var b=
g.model.getModelProperty(r.MODEL_PROPERTY_NAMES.MESSAGE_OF_THE_DAY);return b&&0<b.length?b:a?M.messageOfTheDayInstructions:M.messageOfTheDayDefault},_getWillLock:function(a){if(!this._isLeaf(a))return!1;var b=e.getLoggedInUserEmailAddress();return!this._hasWriteAccessHigherUpHierarchy(b,a)},_hasWriteAccess:function(a,b){if(!b)return!1;var c=this._getUserWriteAccessColumnIndex();if(-1===c)return!0;var d=this._dataPage.cellText,e=this._columnCount,f=J.indexOf(this._rowLabelPage.entityLongIds[0],b),
c=d[f*e+c];if(!c)return!1;c=c.split(",");for(d=0;d<c.length;d++)if(String(c[d]).replace(/^\s+/,"")==a)return!0;return!1},_hasWriteAccessHigherUpHierarchy:function(a,b){if(!b)return!1;for(var c=this._rowLabelPage.entityLongIds[0],d=this._rowLabelPage.parentEntityLongIds[0],e=J.indexOf(c,b),e=d[e];e&&-1!=e;){if(this._hasWriteAccess(a,e))return!0;e=J.indexOf(c,e);e=d[e]}return!1},_hideWaitMessage:function(){this._waitMessage.style.display="none";this.treeContainer.style.display="";this._waitMessageDisplayed=
!1},_isLeaf:function(a){return-1==a?!1:-1===J.indexOf(this._rowLabelPage.parentEntityLongIds[0],a)},_messageOfTheDayIsEditable:function(){return k.isAuthorized(r.userActions.WORKFLOW_CAN_MAINTAIN_MESSAGE_OF_THE_DAY)},_messageOfTheDayOnChange:function(a){a!==this._messageOfTheDay&&g.model.setModelProperty(r.MODEL_PROPERTY_NAMES.MESSAGE_OF_THE_DAY,R.trim(a),!1).then(function(){this.resize()}.bind(this),function(a){a.serverError?x.showErrorReporter(new q.KnownException(a.error,a),!0,!1,function(){this._messageOfTheDay=
this._getMessageOfTheDay(!0);this.messageOfTheDay.set("value",this._messageOfTheDay)}.bind(this)):x.showErrorReporter(new q.ClientException("Workflow: _onClick",a))}.bind(this))},_onClick:function(a,b){try{var c=this._store.getIdentity(a),d=!1;a&&a.changePermission&&0<a.changePermission.length&&(d=a.changePermission[0]);this._setCurrentSelection({entityLongId:c,label:"",changePermission:d})}catch(e){c={widgetId:this.id},a&&(c.item={},a.name&&0<a.name.length&&(c.item.name=a.name[0]),a.index&&0<a.index.length&&
(c.item.index=a.index[0])),b&&(c.treeNode={},b.id&&(c.treeNode.node=b.toString(),c.treeNode.id=b.id)),x.showErrorReporter(new q.ClientException("Workflow: _onClick",e,c))}},_onComplete:function(){this._setWorkflowStatus(r.WORKFLOW_STATUS_COMPLETE_ENTITY_LONG_ID)},_onInProgress:function(){this._setWorkflowStatus(r.WORKFLOW_STATUS_IN_PROGRESS_ENTITY_LONG_ID)},_onNotStarted:function(){this._setWorkflowStatus(r.WORKFLOW_STATUS_NOT_STARTED_ENTITY_LONG_ID)},_rebuildTree:function(){if(!this._rowLabelPage||
!this._dataPage)this._rebuild=!1;else{var a=this._rowLabelPage.entityLongIds[0].join(),b=this._getUserWriteAccessColumnIndex();if(a==this._rowEntityLongIdsString&&b==this._userWriteAccessColumnIndex)this._rebuild=!1,this._refreshTree();else{this._rowEntityLongIdsString=a;this._userWriteAccessColumnIndex=b;a=[];b=(new Date).getTime();this._tree&&this._destroyTree();var c=(new Date).getTime();a.push("d");a.push(c-b);var b=(new Date).getTime(),d=this._getOrderedParentChildArray(),c=(new Date).getTime();
a.push("pca");a.push(c-b);var b=(new Date).getTime(),e=[],f=[];J.forEach(d,function(a){e.push(a.iconClass);f.push(a.name)});this._iconClassArray=e;this._nameArray=f;c=(new Date).getTime();a.push("cache");a.push(c-b);var b=(new Date).getTime(),h=this._getItems(d);a.push("items");c=(new Date).getTime();a.push(c-b);b=(new Date).getTime();h=new Z({data:{identifier:"entityLongId",label:"name",items:h}});a.push("store");c=(new Date).getTime();a.push(c-b);this._store=h;b=(new Date).getTime();this._tree=
this._createTree(h);a.push("tree");c=(new Date).getTime();a.push(c-b);this._currentSelection&&-1!==J.indexOf(this._rowLabelPage.entityLongIds[0],this._currentSelection.entityLongId)?(this._tree.set("path",this._getPathToSelection(this._currentSelection)),this._setCurrentSelection(this._currentSelection)):(a=this._getDefaultSelection(d))?(this._tree.set("path",this._getPathToSelection(a)),this._setCurrentSelection(a)):this._setToolbarDisabled();this._refresh=this._rebuild=!1}}},_refreshTree:function(){var a=
this,b=this._getOrderedParentChildArray(),c=[],d=[];J.forEach(b,function(b){a._refreshItem(b);c.push(b.iconClass);d.push(b.name)});var e=this._diff(c,d);this._iconClassArray=c;this._nameArray=d;for(var f=0;f<e.length;f++)this._updateNameAndIconClass(b[e[f]]);this._currentSelection&&-1!==J.indexOf(this._rowLabelPage.entityLongIds[0],this._currentSelection.entityLongId)?(this._tree.set("path",this._getPathToSelection(this._currentSelection)),this._setCurrentSelection(this._currentSelection)):(b=this._getDefaultSelection(b))?
(this._tree&&this._tree.set("path",this._getPathToSelection(b)),this._setCurrentSelection(b)):this._setToolbarDisabled();this._refresh=!1},_resetMessageOfTheDay:function(){this.messageOfTheDay.get("editing")&&this.messageOfTheDay.cancel();this._messageOfTheDay="";this.messageOfTheDay.set("value",this._messageOfTheDay);this.messageOfTheDay.set("disabled",!0);X.remove(this.messageOfTheDay.domNode,"workflowMessageOfTheDayEditable");X.add(this.messageOfTheDay.domNode,"workflowMessageOfTheDay")},_setCurrentSelection:function(a){!a||
!a.entityLongId?this._setToolbarDisabled():(this._currentSelection=a,k.isPermittedAccessToMaintainWorkflow()?a.changePermission?(a=this._getCellValue(J.indexOf(this._rowLabelPage.entityLongIds[0],a.entityLongId),this._getStatusColumnIndex()))?Number(a)==r.WORKFLOW_STATUS_NOT_STARTED_ENTITY_LONG_ID?this._setToolbarDisabled([!1,!1,!0]):Number(a)==r.WORKFLOW_STATUS_IN_PROGRESS_ENTITY_LONG_ID?this._setToolbarDisabled([!1,!0,!1]):Number(a)==r.WORKFLOW_STATUS_COMPLETE_ENTITY_LONG_ID?this._setToolbarDisabled([!0,
!1,!1]):this._setToolbarDisabled([!1,!1,!1]):this._setToolbarDisabled():this._setToolbarDisabled([!0,!0,!0]):this._setToolbarDisabled())},_setToolbarDisabled:function(a){a?(this.buttonComplete.set("disabled",a[0]||!1),this.buttonInProgress.set("disabled",a[1]||!1),this.buttonNotStarted.set("disabled",a[2]||!1),a=this._getUserWriteAccessColumnIndex(),S.set(this.buttonBulkEmail.domNode,"display",-1===a?"none":""),-1<a&&this.buttonBulkEmail.set("disabled",!1)):(this.buttonComplete.set("disabled",!0),
this.buttonInProgress.set("disabled",!0),this.buttonNotStarted.set("disabled",!0),this.buttonBulkEmail.set("disabled",!0))},_showWaitMessage:function(){this.treeContainer.style.display="none";this._waitMessage.style.display="";this._waitMessageDisplayed=!0},_updateNameAndIconClass:function(a){var b=this._store;b.fetchItemByIdentity({identity:a.entityLongId,onItem:function(c){c?(b.setValue(c,"iconClass",a.iconClass),b.setValue(c,"name",a.name)):console.warn("anaplan.home.Workflow _setValues failed to update identity "+
a.entityLongId)}})},_refreshItem:function(a){var b=this._store;b.fetchItemByIdentity({identity:a.entityLongId,onItem:function(c){c?(b.setValue(c,"descendentNotStartedCount",a.descendentNotStartedCount),b.setValue(c,"descendentInProgressCount",a.descendentInProgressCount),b.setValue(c,"descendentCompleteCount",a.descendentCompleteCount),b.setValue(c,"descendentTotalCount",a.descendentTotalCount),b.setValue(c,"changePermission",a.changePermission)):console.warn("anaplan.home.Workflow _setValues failed to update identity "+
a.entityLongId)}})},_setWorkflowHeadline:function(){var a=this._getHasWorkflowLabel(),a=null==a?M.titleWorkflow:[a,M.titleWorkflow].join(" ");x.setText(this.workflowHeadline,a)},_setMessageOfTheDay:function(a){this._messageOfTheDay=this._getMessageOfTheDay(a);this.messageOfTheDay.set("value",this._messageOfTheDay);a?(X.remove(this.messageOfTheDay.domNode,"workflowMessageOfTheDay"),X.add(this.messageOfTheDay.domNode,"workflowMessageOfTheDayEditable")):(X.add(this.messageOfTheDay.domNode,"workflowMessageOfTheDay"),
X.remove(this.messageOfTheDay.domNode,"workflowMessageOfTheDayEditable"));this.resize()},_setWorkflowStatus:function(a){if(this._currentSelection){var b=this._currentSelection.entityLongId,c=["Not Started","In Progress","Complete"][t.getEntityIndex(a)],d;a==r.WORKFLOW_STATUS_NOT_STARTED_ENTITY_LONG_ID?d=M.messageChangeWorkflowStatusToNotStarted:a==r.WORKFLOW_STATUS_COMPLETE_ENTITY_LONG_ID&&(d=M.messageChangeWorkflowStatusToComplete);a==r.WORKFLOW_STATUS_NOT_STARTED_ENTITY_LONG_ID||a==r.WORKFLOW_STATUS_COMPLETE_ENTITY_LONG_ID?
(c=this._getConfirmationDialog(),c.set("title",M.titleConfirm),c.set("content",d),d=Y(c,"execute",Q.hitch(this,function(){this._submitWorkflowStatusChange(b,a,!0)})),this.own(d),this._confirmationHandles.push(d),c.show()):a==r.WORKFLOW_STATUS_IN_PROGRESS_ENTITY_LONG_ID&&this._displayWorkflowStatusConfirmationDialog(b,a,c)}},_submitWorkflowStatusChange:function(a,b,c){a={actionId:"SET_WORKFLOW_STATUS",params:{workflowItemEntityLongId:a,workflowStatusEntityLongId:b,resetDescendents:c,modelId:modelId}};
this._setToolbarDisabled(!0);x.showPleaseWaitDialog();b=Q.hitch(this,function(a){!a||!a.result||!a.result.systemActionResults||0===a.result.systemActionResults.length?x.showInfoDialog("Invalid response.",{title:M.messageTitleWorkflowStatusUpdateFailed}):(a=a.result.systemActionResults[0],!1==a.successful&&x.showInfoDialog(a.message,{title:M.messageTitleWorkflowStatusUpdateFailed}),this._updateWorkflowStatusView())});(new z).post(null,null,[a]).then(b,function(){return!1})},_updateWorkflowStatusView:function(){var a=
[],b=function(){x.hidePleaseWaitDialog();J.forEach(a,function(a){a.remove()})},c=Y(this,"update",b),b=Y(this,"error",b),a=[c,b];n.gather()}})})},"anaplan/widgets/FloatingTab":function(){define("dojo/touch anaplan/Exceptions anaplan/widgets/DropDownButton anaplan/widgets/FloatingWindow dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/_base/array dojo/on dojo/topic dojox/gesture/tap dojo/sniff".split(" "),function(g,b,k,p,r,n,f,s,l,a,e,d){return r([p],{baseClass:"floatingTab",menu:null,postCreate:function(){this.inherited(arguments);
d("ios")?this.__connections=[l(this.titleBar,e.doubletap,f.hitch(this,"onAttach"))]:this.__connections=[l(this.titleBar,"dblclick",f.hitch(this,"onAttach"))]},onAttach:function(){},setGlobalContext:function(b,d){for(var e=0;e<this.getChildren().length;e++){var c=this.getChildren()[e];c.setGlobalContext?c.setGlobalContext(b,d):a.publish("anaplan/"+c.id+"/globalContext",b,d)}},hhide:function(a){for(var b=0;b<this.getChildren().length;b++){var d=this.getChildren()[b];d.hide&&d.hide(a)}},rresume:function(a){for(var b=
0;b<this.getChildren().length;b++){var d=this.getChildren()[b];d.resume&&d.resume(a)}},show:function(){try{this.inherited(arguments);var a=this.getChildren();if(1===a.length){var d=a[0];d.focus&&d.focus()}}catch(e){throw new b.ClientException("anaplan.widgets.FloatingTab.show",e);}},sshow:function(a){for(var b=0;b<this.getChildren().length;b++){var d=this.getChildren()[b];d.show&&d.show(a)}},startup:function(){this.inherited(arguments);if(this._menuButton)try{this._menuButton.startup()}catch(a){console.warn(this.id,
"call to menuButton.startup has failed silently")}},uninitialize:function(){s.forEach(this.__connections,function(a){a.remove()});this._menuButton&&(this._menuButton.closeDropDown(),this._menuButton.dropDown=null,this._menuButton.destroyRecursive(),this._menuButton=null);this.inherited(arguments)},_onCancel:function(){this.getChildren()[0].getChildren()[0].isCloseableMayPrompt().then(f.hitch(this,function(a){if(a)this.onCancel()}))},_setMenuAttr:function(a){var b;this._set("menu",a);a&&(b=this._menuButton=
new k({dropDown:a,showLabel:!1,iconClass:"anaplanEditorIcon anaplanEditorIconMenu","class":"anaplanFloatingTabMenuButton"}),this.own(b.on(g.press,function(a){b.focus();a.stopPropagation()})),this.own(b.on("dblclick",function(a){a.stopPropagation()})),d("ios")&&this.own(b.on(e.doubletap,function(a){a.stopPropagation()})),n.place(b.domNode,this.titleNode,"before"))}})})},"anaplan/settings/Currencies":function(){define("anaplan/anapediaKeys anaplan/utils/FormatHelper anaplan/utils/UIHelper anaplan/data/Aggregator dijit/Toolbar dijit/ToolbarSeparator dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/on anaplan/data/ModelContentCache anaplan/constants anaplan/data/ModelContentHelper anaplan/gridlet/GridletFactory anaplan/gridlet/ViewRequestGridModel anaplan/layout/ManagedContainer anaplan/toolbar/_ButtonsMixin anaplan/utils/EntityLongIdHelper anaplan/view/MaintainBaseCurrencies anaplan/widgets/HelpBox anaplan/widgets/Tooltip dojo/i18n!anaplan/nls/currencies".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B){return s([t,m],{gutters:!1,liveSplitters:!1,constructor:function(a){try{this._workspaceId=a.workspaceId,this._modelId=a.modelId,this._showTipsOnStartup=a.showTipsOnStartup,this._tooltips=[],this._nls=B,this._connections=[]}catch(b){k.throwClientException(this,b)}},hide:function(a){try{a==q.TIPS&&this._destroyTooltips()}catch(b){k.throwClientException(this,b)}},postCreate:function(){try{this.inherited(arguments);var b=document.createElement("h3");
a.add(b,"settingsInstructions");var c=new _Widget({region:"top"},b),d=this._nls.instructionsCurrencies,e=this._getBaseCurrencyLabel();b.appendChild(document.createTextNode([d,e].join(" ")));this.addChild(c);var f=new t({region:"center"});f.addChild(this._createToolbar());f.addChild(this._createGridlet());this.addChild(f);p.gather()}catch(h){k.throwClientException(this,h)}},show:function(a){try{a==q.TIPS&&this._createTooltips()}catch(b){k.throwClientException(this,b)}},startup:function(){try{this.inherited(arguments),
this._showTipsOnStartup&&this.show(q.TIPS)}catch(a){k.throwClientException(this,a)}},uninitialize:function(){try{this._destroyTooltips(),f.forEach(this._connections,function(a){a.remove()}),this.inherited(arguments)}catch(a){k.throwClientException(this,a)}},_createGridlet:function(){var a={type:"MODEL_DEFINITION",staticContextIdentifiers:[w.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_CURRENCY_EXCHANGE_RATE)],columnSizes:{customRowLabelWidthsByDimension:[{identifier:w.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_AXIS_IDENTIFIER_CURRENCY_ENTITY_LONG_ID),
width:100}],customWidthsByLineItem:[],customWidthsByStyle:[],defaultColumnWidth:q.DEFAULT_COLUMN_WIDTH}},b=h.getAxesForViewDefinition([q.SYSTEM_AXIS_IDENTIFIER_CURRENCY_IDENTIFIER],[q.SYSTEM_AXIS_IDENTIFIER_TIME_IDENTIFIER]);l.mixin(a,b);this._model=new c({workspaceId:this._workspaceId,modelId:this._modelId,viewDefinition:a});this._gridlet=(new u).createGridlet({region:"center",model:this._model});this._connections.push(e(this._gridlet,"SelectionChange",l.hitch(this,"_onSelectionChange")));return this._gridlet},
_createToolbar:function(){try{var a=new r({region:"top"});a.addChild(this._createCopyDownButton());a.addChild(this._createCopyAcrossButton());a.addChild(new n);this._deleteButton=this._createDeleteButton();a.addChild(this._deleteButton);a.addChild(new n);this._refreshButton=this._createRefreshButton();a.addChild(this._refreshButton);return a}catch(b){k.throwClientException(this,b)}},_createTooltip:function(a,c){var d=null;try{var e=a.attr("label"),d=new A({label:b.searchAndReplacePlaceholders(this._nls["tooltip"+
c]||"$(ANAPEDIA:"+e+")"),connectId:[a.domNode],position:["below","above"],title:e})}catch(f){k.throwClientException(this,f)}return d},_createTooltips:function(){try{this._tooltips.length?console.warn("Currencies expected to find no tooltips but found: "+this._tooltips.length):this._maintainBaseCurrenciesButton&&this._tooltips.push(this._createTooltip(this._maintainBaseCurrenciesButton,"MaintainBaseCurrencies"))}catch(a){k.throwClientException(this,a)}},_destroyTooltips:function(){try{for(var a=0;a<
this._tooltips.length;a++)this._tooltips[a].destroy();this._tooltips=[]}catch(b){k.throwClientException(this,b)}},_displayMaintainBaseCurrenciesDialog:function(){try{var a=k.getSharedDialog(),b=new z({workspaceId:this._workspaceId,modelId:this._modelId});b.connect(b,"onSetBaseCurrencies",function(){a.hide()});b.connect(b,"onCancel",function(){a.onCancel()});a.attr("title",this._nls.titleMaintainBaseCurrencies);a.attr("refocus",!1);a.attr("content",b.domNode);a.setHelpContent(g.currencyConversion);
a.show()}catch(c){k.throwClientException(this,c)}},_getBaseCurrencyLabel:function(){var a="?";try{var b=d.getModelInfo();if(!b)return console.warn("anaplan.settings.Currencies expected to find model info and did not"),a;if(!b.baseCurrencyEntityLongId)return a;var c=d.getAllCurrenciesLabelPage();if(!c)return console.warn("anaplan.settings.Currencies expected to find all currencies label page and did not"),a;var e=f.indexOf(c.entityLongIds[0],b.baseCurrencyEntityLongId);if(-1==e)return console.warn("anaplan.settings.Currencies expected to find base currency entity long id in all currencies label page and did not"),
a;a=c.labels[0][e]}catch(h){console.error(h)}finally{return a}},_onSelectionChange:function(a){this._currentSelection=a;this._deleteButton&&this._deleteButton.attr("disabled",!1)}})})},"anaplan/widgets/SearchBar":function(){define("dojo/_base/declare dojo/dom-class dijit/_WidgetBase dijit/_TemplatedMixin dojo/keys dijit/focus dojo/text!anaplan/templates/Widgets/SearchBar.html".split(" "),function(g,b,k,p,r,n,f){return g([k,p],{baseClass:"anaplanSearchBar",templateString:f,disabled:!1,updateOnKeyUp:!0,
stopBlur:!1,postCreate:function(){this.inherited(arguments);this.disabled&&(this.textBox.setAttribute("disabled",this.disabled),b.add(this.domNode,"disabled"))},complete:function(){b.remove(this.icon,"pending")},hasFocus:function(){return n.curNode===this.textBox},silentFocus:function(){return this.stopBlur},preventBlur:function(){this.stopBlur=!0},_onChange:function(){this._beginSearch()},_onKeyUp:function(b){switch(b.keyCode){case r.ENTER:this.emit("make_selection");case r.DOWN_ARROW:case r.UP_ARROW:b.preventDefault();
break;default:this.updateOnKeyUp&&this._beginSearch()}},_onKeyDown:function(b){switch(b.keyCode){case r.ENTER:break;case r.DOWN_ARROW:this.emit("move_down");break;case r.UP_ARROW:this.emit("move_up");break;default:return}b.preventDefault()},_onClick:function(){this.textBox.select();b.add(this.domNode,"focus")},_onFocus:function(){b.add(this.domNode,"focus")},_onClickCancel:function(b){this._cancelSearch();this._onClick();b.stopPropagation()},_onBlur:function(){this.stopBlur?(this.textBox.focus(),
this.stopBlur=!1):this.defer(function(){(!this.textBox.focused||!this.domNode.focused||!this.cancelButton.focused)&&b.remove(this.domNode,"focus")},50)},_beginSearch:function(){""===this.textBox.value?this._cancelSearch():(b.remove(this.cancelButton,"hidden"),b.add(this.icon,"pending"),this.emit("search",{value:this.textBox.value}))},_cancelSearch:function(){this.emit("cancel");b.remove(this.icon,"pending");this.textBox.value="";b.add(this.cancelButton,"hidden")}})})},"anaplan/modelmap/yfilesGraph":function(){define("dojo/Evented dojo/_base/declare dijit/_WidgetBase dojo/query dojo/_base/lang dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin anaplan/utils/UIHelper anaplan/utils/JsHelper anaplan/modelmap/Graph dojo/dom-class dojo/topic dojo/sniff dojo/text!anaplan/templates/ModelMap/GraphSvgTemplate.html dojo/text!anaplan/templates/ModelMap/yFilesCanvas.html anaplan/modelmap/yfiles/widgets/GraphView dojo/NodeList-manipulate".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u){return b([a,k,n,f,g],{templateString:u,_preprocesstemplates:!0,_showLoadingForGroupAction:!1,_cachedHierarchicalLayouter:null,_needsfitGraphBounds:!0,_hasLayout:!1,_layouter:null,_layout:"Hierarchic",_isolationMode:null,_cachedData:null,orientation:"LEFT_TO_RIGHT",grouped:!0,collapsedEdges:!0,canMinimiseGroup:!0,yGraph:null,yGraphControl:null,yFoldingGraph:null,yOverviewControl:null,groups:null,yNodes:{},_groupNodes:{},yGroups:{},constructor:function(){this.isready=
!1;this.groups={};0===p("#template_svg").length&&p("body").append(h);s.showPleaseWaitDialog("Loading...")},postCreate:function(){var a=r.hitch(this,function(){s.hidePleaseWaitDialog();this._initGraph();this.configure();this.isready=!0;this.emit("ready")});if(window.yfiles)a();else{var b=d.subscribe("anaplan/yfiles/ready",r.hitch(this,function(){a();b.remove()}));this.own(b);require(["yfiles/yfiles-all","yfiles/license"],function(){11<=q("safari")&&(yfiles.workaroundCR320635=!0)})}},_initGraph:function(){this.yGraphControl=
new yfiles.canvas.GraphControl;this.yGraphControl.preventEventPropagation=!1;this.yGraph=this.yGraphControl.graph;this.yOverviewControl=new yfiles.canvas.GraphOverviewControl.ForMaster(this.yGraphControl);this.yGraph.safeGet(yfiles.graph.DefaultGraph.$class).groupingSupported=!0;var a=new yfiles.graph.FoldingManager.WithMaster(this.yGraph);!0===this.collapsedEdges&&(a.dummyEdgeConverter=new yfiles.graph.MergingDummyEdgeConverter);this.yFoldingGraph=a.createManagedView();this.yGraph=this.yFoldingGraph.graph;
this.yGraphControl.graph=this.yGraph;this.yGraphControl.inputMode=this._getGraphInputSettings();this.yGraphControl.sizeChangedTimerEnabled=!1;this.yGraphControl.focusPaintManager.showFocusPolicy=yfiles.model.ShowFocusPolicy.ALWAYS;this.yGraphControl.selectionPaintManager.enabled=!1;this.yGraphControl.focusPaintManager.enabled=!1;this.yGraphControl.highlightPaintManager.enabled=!1},load:function(){this.clear();this.inherited(arguments);this.addGroups()},isFunctionalAreaInCurrentSelection:function(a){return!!this.yGroups[a]},
getZoom:function(){return this.yGraphControl.zoom},moveTo:function(a,b){var d=new yfiles.geometry.PointD,e=this.yNodes[a].node;d.x=e.x+e.width/2;d.y=e.y+e.height/2+88;this.yGraphControl.zoomToWithCenter(d,b||1)},moveToGroup:function(a){var b=this.yGroups[a];this.expandGroup(b);this.defer(r.hitch(this,function(){var a=new yfiles.geometry.PointD;a.x=this.yGraphControl.width/2+b.x-10;a.y=this.yGraphControl.height/2+b.y-10;this.yGraphControl.zoomToWithCenter(a,1)}))},switchOrientation:function(){this.orientation=
"LEFT_TO_RIGHT"===this.orientation?"TOP_TO_BOTTOM":"LEFT_TO_RIGHT"},configure:function(){this.graphCanvas.set("graphControl",this.yGraphControl);this.overviewCanvas.set("graphControl",this.yOverviewControl);this.yGraph.nodeDefaults.style=new modelmaps.styles.ZoomStyle(new yfiles.drawing.TemplateNodeStyle.WithKey("lowZoomNodeStyleTemplate"),new yfiles.drawing.TemplateNodeStyle.WithKey("midZoomNodeStyleTemplate"),new yfiles.drawing.TemplateNodeStyle.WithKey("highZoomNodeStyleTemplate"));this.yGraph.nodeDefaults.size=
new yfiles.geometry.SizeD(225,125);var a=new modelmaps.styles.EdgeStyle;a.arrows=new modelmaps.styles.ArrowStyle;this.yGraph.edgeDefaults.style=a;window.modelmap={currentzoom:null,headertextconverter:new modelmaps.converters.HeaderTextConverter,textwrapconverter:new modelmaps.converters.TextWrapConverter,listwrapconverter:new modelmaps.converters.ListWrapConverter,focusclassconverter:new modelmaps.converters.FocusClassConverter,cellcounttransformconverter:new modelmaps.converters.CellCountTransformConverter,
selectednodeconverter:new modelmaps.converters.SelectedNodeConverter}},_getGraphInputSettings:function(){var a=new yfiles.input.GraphViewerInputMode;a.clickableItems=yfiles.graph.GraphItemTypes.NODE;a.selectableItems=yfiles.graph.GraphItemTypes.NODE;a.marqueeSelectableItems=yfiles.graph.GraphItemTypes.NONE;a.toolTipItems=yfiles.graph.GraphItemTypes.NONE;a.contextMenuItems=yfiles.graph.GraphItemTypes.NONE;a.focusableItems=yfiles.graph.GraphItemTypes.NODE;a.navigationInputMode.collapsingGroupsAllowed=
!0;a.navigationInputMode.expandingGroupsAllowed=!0;a.navigationInputMode.fitContentAfterGroupActions=!1;a.navigationInputMode.addGroupExpandedListener(yfiles.lang.delegate(this._onGroupExpanded,this));a.navigationInputMode.addGroupCollapsedListener(yfiles.lang.delegate(this._onGroupCollapsed,this));a.addItemDoubleClickedListener(yfiles.lang.delegate(this._onItemDoubleClicked,this));return a},clear:function(){this.yGraph.clear();this.yOverviewControl.graph.clear();this.yGroups={};this.yNodes={};this._groupNodes=
{};this._hasLayout=!1},dispose:function(){this.yGraph=this.yGraphControl=this.yOverviewControl=this.yFoldingGraph=null;this._needsfitGraphBounds=!0},addGroups:function(){if(this.grouped){var a=this.yGraph.getGroupedGraph();a.groupNodeDefaults.style=new modelmaps.styles.GroupStyle;if(null!==a){this._showLoadingForGroupAction=4<l.getObjectKeys(this._groupNodes).length;var b=0,d;for(d in this._groupNodes)if(this._groupNodes.hasOwnProperty(d)){var e=a.groupNodesArray(this._groupNodes[d]);e.tag={name:d,
isgroup:!0,iscollapsed:!1,colour:this.groups[d].colour,id:"group_"+b};this.yGroups[d]=e;b++}}}},addNode:function(a){var b=this.yGraph.createNode();a.displayitems=this._getDisplayItems(a);b.height=this._getNodeHeight(a);a.height=b.height;a.width=b.width;a.widthInner=b.width-1;b.tag=a;this._storeYNode(a.name,b);this._addToGroup(a.parent,b);this._executeTemplatePreprocess(a)},_getDisplayItems:function(a){var b="Not Applicable"!==a.periodtype,d="Not Applicable"!==a.version,e={},f;for(f in a.items)a.items.hasOwnProperty(f)&&
(e[a.items[f]]={icon:a.items[f]===anaplan.constants.BUILT_IN_HIERARCHY_USER_HIERARCHY_ENTITY_ID?"users_icon":"list_icon"});b&&(b={icon:"clock_icon"},0<a.timerange.length&&(b.text=a.periodtype+" - "+a.timerange),e[a.periodtype]=b);d&&(e.Versions={icon:"versions_icon"});for(var h in a.lineitems)a.lineitems.hasOwnProperty(h)&&(e[a.lineitems[h]]={icon:"lineitem_icon"});return e},_getNodeHeight:function(a){a=l.getObjectKeys(a.displayitems).length;a=Math.min(a,6);return Math.max(33+15*a,90)},_storeYNode:function(a,
b){void 0===this.yNodes[a]?this.yNodes[a]={node:b,from:[],to:[]}:this.yNodes[a].node=b},_addToGroup:function(a,b){void 0===this._groupNodes[a]&&(this._groupNodes[a]=[]);this._groupNodes[a].push(b)},_executeTemplatePreprocess:function(a){!0===this._preprocesstemplates&&(window.modelmap.textwrapconverter.convert(a),window.modelmap.listwrapconverter.convert(a,"L"),window.modelmap.listwrapconverter.convert(a,"M"),window.modelmap.headertextconverter.convert(a,"L"),window.modelmap.headertextconverter.convert(a,
"M"))},addEdge:function(a,b){if(this.yNodes[a]&&this.yNodes[b]){var d=this.yGraph.createEdge(this.yNodes[a].node,this.yNodes[b].node);d.tag={to:b,from:a,fromNode:this.yNodes[a].node.tag,toNode:this.yNodes[b].node.tag};this.yNodes[a].from.push(d);this.yNodes[b].to.push(d)}},_getLayout:function(){var a=null;switch(this._layout){case "Hierarchic":null===this._cachedHierarchicalLayouter&&(a=new yfiles.hierarchic.IncrementalHierarchicLayouter,a.orthogonalRouting=!0,a.compactness=0.1,a.preferredEdgeLength=
1,a.preferredMinimalNodeDistance=1,a.clusterNodes=!1,a.recursiveGroupLayering=!1,a.nodeToNodeDistance=10,this._cachedHierarchicalLayouter=a);a=this._cachedHierarchicalLayouter;break;case "Organic":a=new yfiles.organic.SmartOrganicLayouter;break;case "Orthogonal":a=new yfiles.orthogonal.OrthogonalLayouter;break;case "Circular":a=new yfiles.circular.CircularLayouter;break;case "SingleCycle":a=new yfiles.circular.SingleCycleLayouter;break;default:throw Error("Unknown layout"+this._layout);}a.layoutOrientation=
yfiles.layout.LayoutOrientation[this.orientation];return a},drawQuietly:function(){if(null===this._layouter){var a=this._getLayout();this._layouter=new yfiles.graph.LayoutExecutor.FromControlAndLayouter(this.yGraphControl,a);this._layouter.animateViewport=!1;this._layouter.easedAnimation=!1;this._layouter.updateContentRect=!0}this._layouter.start()},draw:function(a){if(this._hasLoaded){var b=this._getLayout();a&&s.showPleaseWaitDialog("Drawing Model Map");this.defer(function(){b.applyLayout(this.yGraph);
this.yGraphControl.morphLayout(b,yfiles.system.TimeSpan.fromSeconds(0.1),r.hitch(this,"_updateGraph"))})}},_updateGraph:function(){s.hidePleaseWaitDialog();this.yGraphControl.updateContentRect();this.yGraphControl.fitGraphBounds();this.fitContent();this.emit("redraw")},zoomOriginal:function(){yfiles.system.NavigationCommands.ZOOM.executeOnTarget(1,this.yGraphControl)},zoomIn:function(){yfiles.system.NavigationCommands.INCREASE_ZOOM.executeOnTarget(null,this.yGraphControl)},zoomOut:function(){yfiles.system.NavigationCommands.DECREASE_ZOOM.executeOnTarget(null,
this.yGraphControl)},fitContent:function(){this.yGraphControl.fitGraphBounds();yfiles.canvas.CanvasControl.FIT_CONTENT_COMMAND.executeOnTarget(null,this.yGraphControl)},collapseAllGroups:function(){var a=this;!0===a._showLoadingForGroupAction&&s.showPleaseWaitDialog("Collapsing Groups");this.defer(function(){for(var b in a.yGroups)if(a.yGroups.hasOwnProperty(b)){var d=a.yGroups[b];a.yFoldingGraph.collapse(d);d.setSize(new yfiles.geometry.SizeD(225,125));d.tag.iscollapsed=!0}a.drawQuietly();a.fitContent();
!0===a._showLoadingForGroupAction&&s.hidePleaseWaitDialog()})},collapseGroup:function(a){var b=this;!0===b._showLoadingForGroupAction&&s.showPleaseWaitDialog("Collapsing "+a.tag.name);this.defer(function(){yfiles.input.GraphCommands.COLLAPSE_GROUP_COMMAND.executeOnTarget(a,b.yGraphControl);!0===b._showLoadingForGroupAction&&s.hidePleaseWaitDialog()})},expandGroup:function(a){var b=this;!0===this._showLoadingForGroupAction&&s.showPleaseWaitDialog("Expanding "+a.tag.name);this.defer(function(){yfiles.input.GraphCommands.EXPAND_GROUP_COMMAND.executeOnTarget(a,
b.yGraphControl);!0===b._showLoadingForGroupAction&&s.hidePleaseWaitDialog()})},expandAllGroups:function(){var a=this;!0===a._showLoadingForGroupAction&&s.showPleaseWaitDialog("Expanding Groups");this.defer(function(){for(var b in a.yGroups)if(a.yGroups.hasOwnProperty(b)){var d=a.yGroups[b];a.yFoldingGraph.expand(d);d.tag.iscollapsed=!1}a.drawQuietly();!0===a._showLoadingForGroupAction&&s.hidePleaseWaitDialog();a.fitContent()})},_onGroupExpanded:function(a,b){b.item.tag.iscollapsed=!1;this.yGraphControl.updateVisual();
this.drawQuietly()},_onGroupCollapsed:function(a,b){var d=b.item;d.setSize(new yfiles.geometry.SizeD(250,125));d.tag.iscollapsed=!0;this.drawQuietly()},groupNodes:function(a){this.grouped=a;this.yGraph.safeGet(yfiles.graph.DefaultGraph.$class).groupingSupported=this.grouped;this.drawQuietly()},_onItemDoubleClicked:function(a,b){b.item.tag.isgroup?this._toggleGroup(b.item):this.emit("viewitem",b.item.tag);b.handled=!0},_toggleGroup:function(a){a.tag.iscollapsed?this.expandGroup(a):this.collapseGroup(a)},
_onToggleOverviewClick:function(){e.toggle(this.overviewCanvas.domNode,"overviewHidden")}})})},"anaplan/settings/Time2/ConfirmationDialog":function(){define("dijit/Destroyable dojo/Evented anaplan/utils/UIHelper anaplan/view/Confirmation dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/time dojo/on".split(" "),function(g,b,k,p,r,n,f,s){return r([b,g],{_dialog:null,constructor:function(){this.inherited(arguments);var b=new p({heading:f.titleAreYouSure,innerHtml:f.messageConfirmTimeSetting});
this._dialog=k.getSharedDialog({roles:["confirm-time-settings"]});this._dialog.set("content",b.domNode);this._dialog.set("title",f.titleConfirm);this._dialog.set("refocus",!0);this._handleHide=s(b,"DialogHide",n.hitch(this,function(){this._dialog._destroyed||this.emit("cancel")}));this._handleCancel=s(b,"Cancel",n.hitch(this,function(){this.hide()}));this._handleConfirm=s(b,"Confirm",n.hitch(this,function(){this.emit("confirm")}))},show:function(){this._dialog.show()},hide:function(){this._dialog.hide()},
destroy:function(){this._handleHide.remove();this._handleCancel.remove();this._handleConfirm.remove();this.hide();this.inherited(arguments)}})})},"anaplan/settings/Time2/DirtyFormDialog":function(){define("dijit/Destroyable dojo/Evented anaplan/utils/UIHelper anaplan/view/ApplyChanges dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/time dojo/on".split(" "),function(g,b,k,p,r,n,f,s){return r([b,g],{_dialog:null,constructor:function(b){this.inherited(arguments);var a=new p({messageText:b.isValid?
f.messageApplyChanges:f.messageDiscardChanges,hideApplyButton:!b.isValid});this._dialog=k.getSharedDialog();this._dialog.set("content",a.domNode);this._dialog.set("title",b.isValid?f.titleApplyChanges:f.titleDiscardChanges);this._dialog.set("refocus",!1);this._handleHide=s(a,"DialogHide",n.hitch(this,function(){this._dialog._destroyed||this.emit("cancel")}));this._handleCancel=s(a,"Cancel",n.hitch(this,function(){this.hide()}));this._handleDiscard=s(a,"Discard",n.hitch(this,function(){this.emit("discard")}));
this._handleApply=s(a,"Apply",n.hitch(this,function(){this.emit("apply")}))},show:function(){this._dialog.show()},hide:function(){this._dialog._destroyed||this._dialog.hide()},destroy:function(){this._handleHide.remove();this._handleCancel.remove();this._handleDiscard.remove();this._handleApply.remove();this._dialog._destroyed||this.hide();this.inherited(arguments)}})})},"anaplan/settings/Dashboards":function(){define("anaplan/data/ModelContentCache anaplan/utils/FormatHelper dojo/_base/declare dijit/layout/TabContainer anaplan/widgets/Tooltip anaplan/data/ModelContentHelper anaplan/settings/Dashboards/PersonalViews anaplan/settings/View dojo/_base/array dojo/_base/lang anaplan/utils/EntityLongIdHelper anaplan/utils/UIHelper anaplan/constants dojo/i18n!anaplan/nls/modules dojo/i18n!anaplan/nls/common".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u){return k("anaplan.settings.Dashboards",[p],{constructor:function(a){this._commonParams=a;this._modelContent=a.modelContent;this._viewDefinition=a.content[0].viewDefinition},hide:function(a){l.forEach(this.getChildren(),function(b){b.hide(a)})},postCreate:function(){this.inherited(arguments);this._createTabs()},resume:function(){l.forEach(this.getChildren(),function(a){a.resume()})},show:function(a){l.forEach(this.getChildren(),function(b){b.show(a)})},suspend:function(){l.forEach(this.getChildren(),
function(a){a.suspend()})},_createTabs:function(){var b=new s(a.mixin(this._commonParams,{id:this.id+"_DASHBOARDS",title:u.labelDashboards}));this.addChild(b);g.hasEntitlement(q.ENTITLED_FEATURES.PERSONAL_SAVED_DASHBOARDS)&&(b=new f({id:this.id+"_PERSONAL_VIEWS",title:u.labelPersonalViews,viewDefinition:this._viewDefinition,modelContent:this._modelContent,className:"dashboards-personal-views"}),this.addChild(b))}})})},"anaplan/validators/RemoteModelsValidator":function(){define(["anaplan/constants",
"dojo/_base/array","dojo/_base/declare","dojo/i18n!anaplan/nls/remoteModelsValidator"],function(g,b,k,p){return k(null,{name:"RemoteModelsValidator",constructor:function(){this._resetConfirmationFlags()},confirm:function(k){var n={};k=k.getCellUpdates();if(!k.isEmpty()){k=k.getItemsArray();for(var f=k.length,s,l=0;l<f;l++)s=k[l],this._confirmRemoteModelDefinitionChange&&-1!==b.indexOf(s.entityLongIds,g.SYSTEM_PROPERTY_REMOTE_MODEL_DEFINITION)&&s.originalText!==s.cellText&&(n[p.remoteModelDefinitionChange]=
"remoteModelDefinitionChange")}return n},setDisabledConfirmationKeys:function(g){this._resetConfirmationFlags();g&&-1!==b.indexOf(g,this.name+".remoteModelDefinitionChange")&&(this._confirmRemoteModelDefinitionChange=!1)},_resetConfirmationFlags:function(){this._confirmRemoteModelDefinitionChange=!0}})})},"anaplan/settings/HierarchyGridView":function(){define("anaplan/data/Aggregator dojo/_base/declare anaplan/layout/_DashboardMixin anaplan/settings/HierarchyView dojo/_base/array dojo/_base/lang dojo/on anaplan/data/ModelContentCache anaplan/constants anaplan/Exceptions anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/GridletFactory anaplan/view/_LinkCellDecorator anaplan/widgets/DropDownButton anaplan/widgets/Menu anaplan/utils/ChangeValidator anaplan/utils/EntityLongIdHelper anaplan/data/ModelContentHelper anaplan/view/_TreeLabelDecorator anaplan/validators/HierarchyValidator anaplan/utils/SelectionHelper anaplan/gridlet/ViewRequestGridModel anaplan/gridlet/Selection anaplan/utils/UIHelper dojo/i18n!anaplan/nls/toolbar".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v){return b([p,k],{numDataRows:0,constructor:function(){},onShow:function(){this.inherited(arguments);this.getParent().getParent()&&!this._gridlet&&this._createGridlet()},resume:function(){this._isShowing&&this._handleResume()},suspend:function(){this._isShowing&&this._handleSuspend()},_addCurrentViewToDashboard:function(a){this._gridlet&&this._addViewsToDashboard(a,[{dashboardElementType:l.dashboardElementType.GRID,viewDefinition:this._gridlet._model.getViewDefinition()}])},
_createGridlet:function(){try{this._model=new A({workspaceId:this._workspaceId,modelId:this._modelId,viewDefinition:this._viewDefinition,labelDecorators:[new w],cellDecorators:[new q]});this._gridlet=(new d({editorFactory:new e})).createGridlet({region:"center",defaultColumnWidth:150,model:this._model,changeValidator:new c({validators:[new z]}),selection:(new B).initializeToDefaults()});this.addChild(this._gridlet);var a=f(this._gridlet,"reset",n.hitch(this,"_reset")),b=f(this._gridlet,"SelectionChange",
n.hitch(this,"_onSelectionChange")),h=f(this._gridlet,"Update",n.hitch(this,"_onUpdate"));this.own(a,b,h);g.gather();this._searchButton.set("model",this._model);this._searchButton.set("widget",this._gridlet);this._gridlet.focus()}catch(l){y.throwClientException(this,l)}},_createToolbarButtons:function(){this._viewButton=this._createViewButton();this._toolbar.addChild(this._viewButton);this.inherited(arguments)},_createViewButton:function(){var a=new u({style:"display: none;"}),b=f(a,"open",n.hitch(this,
"_updateViewMenuItems"));this.own(b);this._viewMenu=b=new h({label:v.menuView,dropDown:a,"data-anaplan-element-name":"toolbar-button-view"});this._menuItemPublishToDashboard=this._createPublishToDashboardMenu();a.addChild(this._menuItemPublishToDashboard);this._menuItemPublishToDashboard.startup();this._menuItemPublishPageSelectorsToDashboard=this._createPublishPageSelectorsToDashboardMenu(v.labelPublishListAsPageSelectorToDashboard);a.addChild(this._menuItemPublishPageSelectorsToDashboard);this._menuItemPublishPageSelectorsToDashboard.startup();
return b},_displayDeleteDialog:function(){try{var b=this._getGridController();b&&b.beginBulkDelete()}catch(c){c instanceof a.UnsupportedOperationException?y.showErrorReporter(c,!0):y.showErrorReporter(new a.ClientException(this.declaredClass+"_displayDeleteDialog",c))}},_displayInsertDialog:function(){try{var b=this._getGridController();if(b){var c=m.getHierarchyEntityLongIdForViewDefinition(s,this._viewDefinition);b.beginBulkInsert(null,{systemAxisEntityLongIdIdentifier:t.entityLongIdToEntityLongIdIdentifier(c),
systemAxisLabel:m.getHierarchyLabel(s,c)})}}catch(d){y.showErrorReporter(new a.ClientException(this.declaredClass+"_displayInsertDialog",d,{widgetId:this.id}))}},_displayNewDashboardDialog:function(a){try{if(this._gridlet)if(a===l.dashboardElementType.GRID){var b=this._gridlet._model.getViewDefinition(),c=this._gridlet._model.getPageInfo();this._displayNewDashboardDialogWithViewInfos([{dashboardElementType:l.dashboardElementType.GRID,viewDefinition:b,pageInfo:c}])}else a===l.dashboardElementType.PAGE_SELECTOR&&
this._displayNewDashboardDialogWithViewInfos(this._getGridController().getPageSelectorViewInfosForDashboardElements())}catch(d){y.throwClientException(this,d)}},_enableButtons:function(a){this.inherited(arguments);if(this._moveButton&&!this._moveButton.get("disabled")){var b=this._getGridController(),b=x.canMove(a,b.getContext());this._moveButton.get("disabled")==b&&this._moveButton.set("disabled",!b)}r.forEach([this._viewButton,this._importButton,this._refreshButton,this._searchButton],function(a){a&&
a.set("disabled",!1)})},_getGridController:function(){return!this._gridlet?null:this._gridlet.getGridController()},_getParentColumnIndex:function(){var a=-1;try{for(var b=this._model,c=b._getColumnCount(),d=0;d<c&&-1===a;d++){var e=b._getColumn(d);e&&e.entityLongIds[0]===l.SYSTEM_PROPERTY_PARENT&&(a=d)}-1===a&&console.error(this.declaredClass+"._getParentColumnIndex: parent column index not found")}catch(f){y.throwClientException(this,f)}return a},_handleResume:function(){this.inherited(arguments);
this._gridlet&&this._gridlet._gridController.resume()},_handleSuspend:function(){this.inherited(arguments);this._gridlet&&this._gridlet._gridController.suspend()},_onItemsMoved:function(){this.inherited(arguments);this._gridlet.setCurrentSelection(null)},_onSelectionChange:function(a){var b=this._getGridController();x.publishExpression(a,b.getContext(),this._globalFormulaEditModule);this._enableButtons(a)},_onUpdate:function(){var a=this._getNumDataRows();(this._gridlet&&!this._gridlet._selection||
0===this._numDataRows&&0<a||0<this._numDataRows&&0===a)&&this._gridlet._gridController.setBestSelection();this._numDataRows=a},_reset:function(){this._disableButtons(this._toolbar)},_updateViewMenuItems:function(){this._viewMenu.closeDropDown(!1);this._dashboardsList&&this._updateDashboardsList()},_getNumDataRows:function(){var a=0;this._gridlet&&(this._gridlet._sizer&&"undefined"!==typeof this._gridlet._sizer._dataRowCount)&&(a=this._gridlet._sizer._dataRowCount);return a}})})},"anaplan/view/MaintainBaseCurrencies":function(){define("anaplan/utils/UIHelper anaplan/data/Aggregator anaplan/data/ModelContentCache anaplan/constants anaplan/data/ChangeFactory anaplan/data/RequestFactory anaplan/Exceptions anaplan/layout/StackContainer anaplan/widgets/Dialog2 anaplan/widgets/MasterSelector anaplan/widgets/PleaseWait dijit/_Contained dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/on dojo/window dojo/_base/array dojo/_base/lang dojo/_base/declare dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/i18n!anaplan/nls/maintainBaseCurrencies dojo/i18n!dijit/nls/common dojo/i18n!dijit/nls/loading dojo/text!anaplan/templates/ImportDefinitionUsersMapping.html".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C){var G=z([q,d,h,u],{baseClass:"maintainBaseCurrencies",template:C,constructor:function(a){this._workspaceId=a.workspaceId;this._modelId=a.modelId;this._selectedCurrencyEntityLongIds=[]},onCancel:function(){},onSetBaseCurrencies:function(){},postCreate:function(){try{this.inherited(arguments),g.setText(this.allCurrenciesLabel,y.labelAllCurrencies),g.setText(this.selectionListLabel,y.labelSelectionList),g.setText(this.loadingLabel,E.loadingState),
x.set(this.okButton,"label",v.buttonOk),x.set(this.cancelButton,"label",v.buttonCancel),this._nls=y}catch(a){g.throwClientException(this,a)}},setAllCurrenciesLabelPage:function(a){try{this._allCurrenciesLabelPage=a,this._createAllCurrenciesSelector()}catch(b){g.throwClientException(this,b)}},uninitialize:function(){try{this._allCurrenciesSelector&&this._allCurrenciesSelector.destroy(),this.inherited(arguments)}catch(a){g.throwClientException(this,a)}},_addCurrencyToSelection:function(a){try{if(this._allCurrenciesLabelPage){var b=
this._allCurrenciesLabelPage,c=m.indexOf(b.entityLongIds[0],a);if(-1===c)console.warn("anaplan.view.MaintainBaseCurrencies: currency not found with entityLongId "+a);else{var d=this,e=A.create("div",{id:this._getSelectionItemId(a)}),f=A.create("div",{"class":"selectedCurrencyLabel"},e),h=A.create("div",{"class":"selectedCurrencyRemoveLink"},e),l=A.create("a",{href:"#",onclick:function(){d._removeSelectedCurrency(a)}},h);A.create("div",{style:"clear: both;"},e);g.setText(f,b.labels[0][c]);g.setText(l,
this._nls.labelRemove);A.place(e,this.selectionListContainer);-1===m.indexOf(this._selectedCurrencyEntityLongIds,a)&&this._selectedCurrencyEntityLongIds.push(a);t.scrollIntoView(e)}}}catch(k){g.throwClientException(this,k)}},_createAllCurrenciesSelector:function(){try{if(this._allCurrenciesLabelPage){this.loading.style.display="none";var b=B.getContentBox(this.allCurrenciesContainer),d=new a({labelPage:this._allCurrenciesLabelPage,style:"height: "+b.h+"px; width: "+b.w+"px;",displayLimit:p.MAJOR_CURRENCY_COUNT,
submitOnClick:!0});this._allCurrenciesSelector=d;A.place(d.domNode,this.allCurrenciesContainer);this.own(c(this,"Submit",w.hitch(this,"_onCurrencySelect")));this.own(c(this,"DblClick",w.hitch(this,"_setBaseCurrencies")));d.startup();d.resize();this._loadBaseCurrencies();d.focus()}}catch(e){g.throwClientException(this,e)}},_getSelectionItemId:function(a){var b=null;try{b=this.id+":"+a}catch(c){g.throwClientException(this,c)}return b},_loadBaseCurrencies:function(){try{for(var a=k.getBaseCurrenciesLabelPage().entityLongIds[0],
b=a.length,c=0;c<b;c++)this._addCurrencyToSelection(a[c])}catch(d){g.throwClientException(this,d)}},_onCancelButtonClick:function(){this.onCancel()},_onCurrencySelect:function(a){try{null!==a&&(-1===m.indexOf(this._selectedCurrencyEntityLongIds,a)?this._addCurrencyToSelection(a):this._scrollToSelectedCurrency(a))}catch(b){g.throwClientException(this,b)}},_onOkButtonClick:function(){this._setBaseCurrencies()},_removeSelectedCurrency:function(a){try{var b=document.getElementById(this._getSelectionItemId(a));
b&&A.destroy(b);var c=m.indexOf(this._selectedCurrencyEntityLongIds,a);-1!==c&&this._selectedCurrencyEntityLongIds.splice(c,1)}catch(d){g.throwClientException(this,d)}},_scrollToSelectedCurrency:function(a){try{var b=document.getElementById(this._getSelectionItemId(a));b&&t.scrollIntoView(b)}catch(c){g.throwClientException(this,c)}},_setBaseCurrencies:function(){this.onSetBaseCurrencies(this._selectedCurrencyEntityLongIds)}});return z([s,l.ContentMixin],{constructor:function(a){this._workspaceId=
a.workspaceId;this._modelId=a.modelId;this._canHideDialog=!0},onBeforeDialogHide:function(){return this._canHideDialog},onCancel:function(){},onDialogShow:function(){this._loadAllCurrencies()},onSetBaseCurrencies:function(){},postCreate:function(){try{this.inherited(arguments),this._mainView=new G({workspaceId:this._workspaceId,modelId:this._modelId}),this._pleaseWaitView=new e,this.own(c(this._mainView,"SetBaseCurrencies",w.hitch(this,"_onSetBaseCurrencies"))),this.own(c(this._mainView,"Cancel",
w.hitch(this,"_onCancel"))),this.own(c(this._pleaseWaitView,"HelpChange",w.hitch(this,"onHelpChange"))),this.addChild(this._mainView),this.addChild(this._pleaseWaitView)}catch(a){g.throwClientException(this,a)}},_loadAllCurrencies:function(){try{var a=k.getAllCurrenciesLabelPage();this._mainView.setAllCurrenciesLabelPage(a)}catch(b){g.throwClientException(this,b)}},_onCancel:function(){this.onCancel()},_onSetBaseCurrencies:function(a){try{this._canHideDialog=!1;this.selectChild(this._pleaseWaitView);
var c=(new r).getModelChangeGenerator({entityTypeClass:"SYSTEM",entityTypeIndex:p.CURRENCY_ENTITY_TYPE_INDEX}),d=[{modelId:this._modelId,modelChangeXml:c.getModelChangeXml("SET_BASE_CURRENCIES",{entityLongIds:a})}],e=this,h=n.createRequest(this._workspaceId,[{workspaceId:this._workspaceId,cellChanges:[],modelChanges:d}],[],[]);b.post(h,!1,function(a){try{e._canHideDialog=!0;if(a.result)k.populateCache(a.result);else throw new f.ClientException("anaplan.view.MaintainBaseCurrencies: _onSetBaseCurrencies has no response result");
e.onSetBaseCurrencies()}catch(b){g.showErrorReporter(new f.ClientException("anaplan.view.MaintainBaseCurrencies: _onSetBaseCurrencies (loadHandler)",b,{widgetId:e.id}))}},function(a){e._canHideDialog=!0;console.error(a)})}catch(l){g.throwClientException(this,l)}}})})},"anaplan/settings/Modules/ModulesView":function(){define("anaplan/Exceptions anaplan/settings/Modules/ModulesView/CopyModuleDialog anaplan/toolbar/_ButtonsMixin anaplan/settings/Modules/ModulesView/Toolbar anaplan/utils/UIHelper anaplan/constants anaplan/data/Aggregator anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/GridletFactory anaplan/gridlet/Selection anaplan/gridlet/ViewRequestGridModel anaplan/layout/ManagedContainer anaplan/utils/ChangeValidator anaplan/utils/SelectionHelper anaplan/validators/ModuleBlueprintValidator anaplan/view/Export anaplan/view/NewModule anaplan/widgets/Dialog dojo/_base/declare dojo/_base/lang dojo/string dojo/i18n!anaplan/nls/common dojo/i18n!anaplan/nls/exportLabels dojo/i18n!anaplan/nls/modules dojo/on dojo/topic".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E){return w([d,k],{gutters:!1,constructor:function(a){this._viewDefinition=a.viewDefinition;this._showTipsOnStartup=a.showTipsOnStartup;this._isShowing=!1;this._gridlet=null},hide:function(a){a===n.TIPS&&this._toolbar&&this._toolbar.hideTooltips();this.inherited(arguments)},onHide:function(){this._isShowing=!1;this._handleSuspend()},onShow:function(){this._isShowing=!0;this._handleResume()},postCreate:function(){this.inherited(arguments);
this._createGridlet();this._toolbar=new p({model:this._model,gridlet:this._gridlet});this.addChild(this._toolbar);this._toolbar.on("Open",z.hitch(this,"_doOpen"));this._toolbar.on("Insert",z.hitch(this,"_displayInsertModuleDialog"));this._toolbar.on("Reorder",z.hitch(this,"_displayReOrderDialog"));this._toolbar.on("Delete",z.hitch(this,"_displayDeleteDialog"));this._toolbar.on("Export",z.hitch(this,"_displayExportDialog"));this._toolbar.on("Refresh",z.hitch(this,"_doRefresh"));this._toolbar.on("Copy",
z.hitch(this,"_displayCopyModuleDialog"))},resume:function(){this.inherited(arguments);this._handleResume()},show:function(a){a===n.TIPS&&this._toolbar&&this._toolbar._createTooltips();this.inherited(arguments)},startup:function(){this.inherited(arguments);this._showTipsOnStartup&&this.show(n.TIPS);this._enableButtons(this._gridlet.selection)},suspend:function(){this.inherited(arguments);this._handleSuspend()},uninitialize:function(){this.inherited(arguments)},_createGridlet:function(){this._model=
new e({viewDefinition:this._viewDefinition});this._gridlet=(new l({editorFactory:new s})).createGridlet({region:"center",model:this._model,changeValidator:new q({validators:[new u]}),selection:(new a).initializeToDefaults()});this.addChild(this._gridlet);v(this._gridlet,"reset",z.hitch(this,"_reset"));v(this._gridlet,"SelectionChange",z.hitch(this,"_onSelectionChange"));v(this._gridlet,"Update",z.hitch(this,"_onUpdate"));f.gather();setTimeout(z.hitch(this,function(){this._gridlet.domNode&&this._gridlet.focus()}),
125)},_displayCopyModuleDialog:function(){var a=this._getRelativeTo(),c=new b({moduleToCopyId:a.entityLongId});this.own(c.on("success",function(a){a.exists()&&(a.canAccess()?E.publish("anaplan/views",a.data.entityLongId):(a=x.substitute(y.titleCopyModule,{moduleName:a.getName()}),r.showInfoDialog(y.noAccessToCopyModule,{title:a}),f.gather()))}));this.own(c.on("failed",function(a){r.showErrorReporter(new g.ClientException("anaplan.settings.ModulesView#_displayCopyModuleDialog",a))}));this.own(c.on("closed",
function(){c.destroy()}));c.show()},_displayExportDialog:function(){try{var a=r.getSharedDialog(),b=new c({modelId:window.modelId,viewDefinition:this._viewDefinition,pageInfo:this._model.getPageInfo(),hierarchyId:A.labelModules});a.set("title",B.titleExport);a.set("refocus",!1);a.set("content",b.domNode);this.own(v(b,"AfterExport",function(){a.hide()}),v(b,"Cancel",function(){a.onCancel()}));a.show()}catch(d){r.throwClientException(this,d)}},_getRelativeTo:function(){if(this._gridlet){var a=this._gridlet._selection,
b=this._getGridController(),a=h.getRowsSelection(a,b.getContext());if(a.count)return{entityId:a.originalLabels[0][0],entityLongId:a.entityLongIds[0][0]}}return{entityId:null,entityLongId:null}},_displayInsertModuleDialog:function(){var a=this._getRelativeTo(),a=new t({relativeTo:a.entityId,model:this._model}),b=new m({title:y.titleNewModule,"class":"anaplanBlueDialog",resizeContentsToFitViewport:!0,content:a}),c=v(a,"Submit",z.hitch(this,function(a){b.hide().then(function(){a&&r.showInfoDialog(a,
{title:y.titleNewModule})})})),d=v(a,"Cancel",z.hitch(this,function(){b.hide()})),e=v(b,"Hide",z.hitch(this,function(){c.remove();d.remove();e.remove();var a=setInterval(function(){"none"===b.domNode.style.display&&(clearInterval(a),b.set("content",null),b.destroy())},250)}));b.show();a.onShow()},_doOpen:function(){if(this._gridlet){for(var a=h.getSelection(this._gridlet._selection,this._gridlet._gridController.getContext()),b=[],c=a.count,d=0;d<c;d++)b.push(a.entityLongIds[0][d]);b.length&&E.publish("anaplan/views",
b)}},_enableButtons:function(a){var b=!1,c=!1,d=!1,e=null,f=null,f=!0;a&&(f=this._getGridController(),e=f.getContext(),c=h.canInsert(a,e),b=h.canReOrder(a,e),f=h.isEmptyGrid(e),d=h.isSingleRowSelected(a,e));e=c&&!f;a=!f&&!a.isWholeColumnSelected();this._toolbar.enableButtons(e,b,a,c,d)},_getGridController:function(){return!this._gridlet?null:this._gridlet.getGridController()},_handleResume:function(){this._gridlet&&this._gridlet._gridController.resume()},_handleSuspend:function(){this.inherited(arguments);
this._gridlet&&this._gridlet._gridController.suspend()},_onSelectionChange:function(a){this._enableButtons(a)},_onUpdate:function(){this._gridlet&&!this._gridlet._selection&&this._gridlet._gridController.setBestSelection()},_reset:function(){this._toolbar.disableButtons()}})})},"anaplan/settings/Tags":function(){define("anaplan/anapediaKeys anaplan/constants anaplan/Exceptions anaplan/api/service anaplan/data/Aggregator anaplan/data/ModelContentHelper anaplan/forms/TagSearchFields anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/GridletFactory anaplan/gridlet/Selection anaplan/gridlet/Themes anaplan/gridlet/ViewRequestGridModel anaplan/layout/ManagedContainer anaplan/layout/ContentPane anaplan/layout/_ManagedMixin anaplan/settings/Actions/_DataSources anaplan/toolbar/_ButtonsMixin anaplan/utils/EntityLongIdHelper anaplan/utils/FormatHelper anaplan/utils/SelectionHelper anaplan/utils/UIHelper anaplan/widgets/Button anaplan/widgets/SearchToolbarButton anaplan/widgets/Tooltip anaplan/widgets/Dialog anaplan/view/Grid dijit/layout/BorderContainer anaplan/widgets/Toolbar dijit/ToolbarSeparator dojo/i18n!anaplan/nls/toolbar dojo/i18n!anaplan/nls/gridlet dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/dom-class dojo/topic dojo/on dojo/Deferred dojo/string dojo/dom-style dojo/json".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I,P,J,O,T,Q,ca){return N([q,t],{gutters:!1,liveSplitters:!1,_numDataRows:0,_drillDownIdCounter:0,constructor:function(a){var b=a.content[0];this._workspaceId=b.workspaceId;this._modelId=b.modelId;this._viewDefinition=a.viewDefinition||this._getViewDefinition();this._showTipsOnStartup=a.showTipsOnStartup;this._isShowing=!1;this._tooltips=[];this._gridlet=null;this._dataSources=new c;this._dataSources.initialize();this.own(P.subscribe("anaplan/uierror",
this.error.bind(this)))},onHide:function(){this._isShowing=!1;this._handleSuspend()},onShow:function(){this._isShowing=!0;this._handleResume();this.getParent().getParent()&&!this._gridlet&&this._createGridlet()},postCreate:function(){this.inherited(arguments)},resume:function(){this.inherited(arguments);this._handleResume()},startup:function(a){try{this.inherited(arguments),this._toolbar=this._createToolbar(),this.addChild(this._toolbar),this._showTipsOnStartup&&this._createTooltips(),this._createGridlet()}catch(b){console.error(b)}},
show:function(a){a===b.TIPS&&this._createTooltips();this.inherited(arguments)},hide:function(a){a===b.TIPS&&this._destroyTooltips();this.inherited(arguments)},error:function(){},update:function(){},uninitialize:function(){this._destroyTooltips();this.inherited(arguments)},_createGridlet:function(){try{this._model=new d({viewDefinition:this._viewDefinition});this._gridlet=(new l({editorFactory:new s})).createGridlet({region:"center",model:this._model,defaultColumnWidth:150,selection:(new a).initializeToDefaults()});
this.addChild(this._gridlet);var b=J(this._gridlet,"SelectionChange",F.hitch(this,"_onSelectionChange")),c=J(this._gridlet,"Update",F.hitch(this,"_onUpdate")),e=J(this._gridlet,"reset",F.hitch(this,"_reset"));this.own(b,c,e);r.gather();this._searchButton.set("model",this._model);this._searchButton.set("widget",this._gridlet);this._gridlet.focus()}catch(f){x.throwClientException(this,f)}},_createSearchButton:function(){return new B({iconClass:"anaplanEditorIcon anaplanEditorIconSearch",label:K.labelSearch,
showLabel:!1,"data-anaplan-element-name":"toolbar-button-search"})},_createFindButton:function(){var a=new A({label:K.labelFind,"data-anaplan-element-name":"toolbar-button-find"});this.own(a.on("click",F.hitch(this,"_displayFindDialog")));return a},_createToolbar:function(){var a=new G({region:"top"});this._insertButton=this._createInsertButton();a.addChild(this._insertButton);this._deleteButton=this._createDeleteButton();a.addChild(this._deleteButton);a.addChild(new L);this._reOrderButton=this._createReOrderButton();
a.addChild(this._reOrderButton);this._findButton=this._createFindButton();a.addChild(this._findButton);this._refreshButton=this._createRefreshButton();a.addChild(this._refreshButton);a.addChild(new L);this._searchButton=this._createSearchButton();a.addChild(this._searchButton);H.forEach([this._insertButton,this._deleteButton,this._reOrderButton,this._findButton],function(a){a&&(a.show(),a.set("disabled",!0),a.set("showLabel",!0),a.set("title",""))});return a},_createTooltips:function(){this._destroyTooltips();
try{this._tooltips.push(this._createTooltip(this._insertButton,"Insert")),this._tooltips.push(this._createTooltip(this._deleteButton,"Delete")),this._tooltips.push(this._createTooltip(this._findButton,"Find"))}catch(a){x.throwClientException(this,a)}},_createTooltip:function(a,b,c){c=c?["after","before"]:["below","above"];var d=a.get("label");b=w.searchAndReplacePlaceholders(b);return new y({label:b,connectId:[a.domNode],position:c,title:d})},_destroyTooltips:function(){this._tooltips&&0<this._tooltips.length&&
H.forEach(this._tooltips,function(a){a.destroy()});this._tooltips=[]},_disableButtons:function(){this._setDisabled(!0)},_enableButtons:function(a){if(this._toolbar){var b=!1,c=!1,d=!1;a&&(b=this._gridlet._gridController,d=a.isWholeColumnSelected(),c=z.canReOrder(a,b.getContext()),b=!(this._model?!this._model.getRowCount()&&!this._model.getColumnCount():1)&&!d);this._insertButton&&this._insertButton.get("disabled")===b&&this._insertButton.set("disabled",!b);this._deleteButton&&this._deleteButton.get("disabled")===
b&&this._deleteButton.set("disabled",!b);this._reOrderButton&&this._reOrderButton.set("disabled",!c);this._findButton&&this._findButton.set("disabled",!1);this._searchButton&&this._searchButton.set("disabled",!1);this.inherited(arguments)}},_getGridController:function(){return!this._gridlet?null:this._gridlet.getGridController()},_onSelectionChange:function(a){this._enableButtons(a)},_onUpdate:function(){var a=this._getNumDataRows();(this._gridlet&&!this._gridlet._selection||0===this._numDataRows&&
0<a||0<this._numDataRows&&0===a)&&this._gridlet._gridController.setBestSelection();this._numDataRows=a;this._onSelectionChange(this._gridlet._selection)},_getNumDataRows:function(){var a=0;this._gridlet&&(this._gridlet._sizer&&"undefined"!==typeof this._gridlet._sizer._dataRowCount)&&(a=this._gridlet._sizer._dataRowCount);return a},_reset:function(){this._toolbar&&this._disableButtons(this._toolbar)},_setDisabled:function(a){this._toolbar&&H.forEach([this._insertButton,this._deleteButton,this._reOrderButton,
this._refreshButton,this._searchButton],function(b){b&&b.set("disabled",a)})},_getViewDefinition:function(){var a={type:"MODEL_DEFINITION",staticContextIdentifiers:[],columnSizes:{customRowLabelWidthsByDimension:[],customWidthsByLineItem:[],customWidthsByStyle:[],defaultColumnWidth:300}},c=n.getAxesForViewDefinition([b.SYSTEM_AXIS_IDENTIFIER_TAG_IDENTIFIER],[b.SYSTEM_AXIS_IDENTIFIER_TAG_PROPERTY_IDENTIFIER]);F.mixin(a,c);return a},_handleResume:function(){var a=this._getGridController();a&&a.resume()},
_handleSuspend:function(){this.inherited(arguments);this._gridlet&&this._gridlet.getGridController().suspend()},_getGridController:function(){return!this._gridlet?null:this._gridlet._gridController},_displayFindDialog:function(){try{var a=this._getGridController(),b=z.getRowsSelection(this._gridlet._selection,a.getContext()),c=new f({rowsSelection:b}),d=x.getSharedDialog();d.set("title",D.titleSearchTag);d.set("refocus",!1);d.set("content",c.domNode);d.setHelpContent(g.searchTags);var e=J(c,"Complete",
F.hitch(this,function(a){d.hide();this._findTagResultHandler(a)}));c.own(e);d.show()}catch(h){h instanceof k.UnsupportedOperationException?x.showErrorReporter(h,!0):x.showErrorReporter(new k.ClientException("anaplan.Tags: _displayFindDialog",h))}},_findTagResultHandler:function(a){try{var b=D.titleTagSearchResults;if(a.drillDownTitleLines){var c=[];H.forEach(a.drillDownTitleLines,function(a){c.push(w.escapeHTML(a))});b=c.join("\x3cbr\x3e")}var d={drillDownDashboard:a.dashboardDefinition,drillDownLevel:a.drillDownLevel,
drillDownIdForWindow:this.createDrillDownId(),titleCellFormats:[],drillDownTitleLines:"",title:b,refocusWidget:this._gridView,sizeToContent:!0};P.publish("anaplan/drilldown/dashboard",d)}catch(e){x.showErrorReporter(new k.ClientException("anaplan.Tags: _findTagResultHandler",e))}finally{if(this.getParent()&&this.getParent().onCancel)this.getParent().onCancel()}},createDrillDownId:function(){return"TagSearch-"+this._drillDownIdCounter++}})})},"anaplan/view/SavedViewSaveAs":function(){define("anaplan/data/Aggregator anaplan/data/ModelContentCache anaplan/constants anaplan/data/ChangeFactory anaplan/data/ModelContentHelper anaplan/data/RequestFactory anaplan/layout/StackContainer anaplan/view/Confirmation anaplan/view/SavedViewSaveAs/_MainView anaplan/widgets/Dialog2 dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/savedViewSaveAs dojo/json dojo/on".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u){return e([f,a.ContentMixin],{constructor:function(a){this._workspaceId=a.workspaceId;this._modelId=a.modelId;this._moduleEntityLongId=a.moduleEntityLongId;this._viewDefinition=a.viewDefinition},onAfterSave:function(){},onCancel:function(){},onDialogShow:function(){this._mainView.show()},postCreate:function(){this.inherited(arguments);this._moduleLabel=r.getModuleLabel(b,this._moduleEntityLongId);this._moduleEntityId=r.getModuleEntityId(b,this._moduleEntityLongId);
this._mainView=new l({moduleLabel:this._moduleLabel,moduleEntityLongId:this._moduleEntityLongId});this._confirmationView=new s({heading:q.titleConfirmOverwrite,message:q.messageConfirmOverwrite});this.addChild(this._mainView,0);this.addChild(this._confirmationView,1);this.own(u(this._mainView,"Cancel",d.hitch(this,"_onCancel")));this.own(u(this._mainView,"Save",d.hitch(this,"_onSave")));this.own(u(this._confirmationView,"Confirm",d.hitch(this,"_onConfirmOverwrite")));this.own(u(this._confirmationView,
"Cancel",d.hitch(this,"_onCancelOverwrite")))},resize:function(a){a?this.resize():this.inherited(arguments)},startup:function(){this.inherited(arguments)},_getViewDefinitionToSaveAsText:function(a){var b=d.clone(this._viewDefinition);a||(b.currentPageIdentifiers=[]);b.globalContextIdentifiers=void 0;return h.stringify(b)},_isDuplicateSavedViewName:function(a){for(var d=b.getViewsInfo().moduleEntityLongIds,e=b.getViewsLabelPage(),f=e.labels[0],e=e.count,h=this._moduleEntityLongId,g=0;g<e;g++)if(d[g]==
h&&f[g]==a)return!0;return!1},_onCancelOverwrite:function(){this.selectChild(this._mainView)},_onConfirmOverwrite:function(){this._performSave&&this._performSave()},_onSave:function(a,b,d){if(d)this._saveAsDefaultViewForModule(b);else if(this._isDuplicateSavedViewName(a)){var e=this;this._performSave=function(){e._saveViewWithName(a,b)};this.selectChild(this._confirmationView);this.resize()}else this._saveViewWithName(a,b)},_onCancel:function(){this.onCancel()},_saveAsDefaultViewForModule:function(a){a=
[(new p).getCellChangeGenerator().getCellChange({modelId:this._modelId,noCurrentValue:!0,originalText:null,entityLongIds:[this._moduleEntityLongId,k.SYSTEM_PROPERTY_SAVED_VIEW_DEFINITION],cellText:this._getViewDefinitionToSaveAsText(a)})];a=n.createRequest(workspaceId,[{workspaceId:this._workspaceId,cellChanges:a,modelChanges:[]}],[],[]);g.gather(a);this.onAfterSave()},_saveViewWithName:function(a,b){var d=(new p).getModelChangeGenerator({entityTypeClass:"SAVED_VIEW"}),d=[{modelId:this._modelId,moduleId:this._moduleEntityId,
modelChangeXml:d.getModelChangeXml("INSERT",{name:a,moduleId:this._moduleEntityId,viewDefinition:this._getViewDefinitionToSaveAsText(b)})}],d=n.createRequest(this._workspaceId,[{workspaceId:this._workspaceId,cellChanges:[],modelChanges:d}],[],[]);g.gather(d);this.onAfterSave()}})})},"anaplan/tabs/DashboardWrapper":function(){define("anaplan/api/service anaplan/common/SelectiveAccess anaplan/constants anaplan/dashboard/DashboardHelper anaplan/data/ModelContentCache anaplan/Exceptions anaplan/keyboard/helpers anaplan/keyboard/keyboardEvents anaplan/layout/_ManagedMixin anaplan/tabs/Dashboard anaplan/utils/getLocalStorage anaplan/utils/PromiseUtil anaplan/utils/SingleIpHelper anaplan/utils/UIHelper anaplan/widgets/ConfirmationDialog dijit/layout/ContentPane dijit/registry dojo/_base/declare dojo/_base/lang dojo/dom dojo/i18n!anaplan/nls/undo dojo/json dojo/mouse dojo/on dojo/query dojo/string dojo/topic dojo/window".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G){function L(a,b,c){return new Promise(function(d,e){try{var f=new u({title:a,content:b,buttons:c.map(function(a){return Object.assign({},a,{handler:function(){d(a)}})})});f.on("hide",function(){f.destroy()});f.show()}catch(h){e(h)}})}function K(a){if("undefined"===typeof a||null===a)a={dashboardElements:[],lastModifiedSerialNumber:0};return a}function D(){var a=F(this._dashboardArgs.dashboardEntityLongId),b=this._dash._getDashboardDefinitionForComparison(),
a=H.apply(a),b=H.apply(b),a=I.apply(a),b=I.apply(b);return a===b}function N(a,b){b.isMasterView?a.setupDefaultObservers():a.setupEndUserViewInitialLoadObservers()}function F(a){var b;a=r.getDashboardInfo(a);null!==a&&(b=JSON.parse(a.dashboardDefinitionJsonString));return K(b)}var H=p.createNormalizedDashboardDefinitionTransformer([/@lastModifiedSerialNumber$/,/@guid$/,/@showBreakbackMarkers$/]),I=p.createHashTransformer();return m([c,l],{_dashboardArgs:null,_tabButtonId:null,_loadingController:null,
_menuController:null,_dashboardModel:null,_dash:null,constructor:function(a){this._dashboardArgs=a;var c=App.models.DashboardModel,d=window.workspaceId,l=window.modelId,m=a.dashboardEntityLongId,n={undo:w.clone(x)};n.undo.toolbarButtonTooltip=E.substitute(n.undo.toolbarButtonTooltip,{shortcut:f.renderAsText(s.ANAPLAN_UNDO)});c=this._dashboardModel=new c(d,l,m,n,q.hasSingleIpCookie()&&g.model.getModelProperty(k.MODEL_PROPERTY_NAMES.PERSONAL_SAVED_DASHBOARDS)&&r.hasEntitlement(k.ENTITLED_FEATURES.PERSONAL_SAVED_DASHBOARDS),
a.isHomeDashboard,e(),r.hasEntitlement(k.ENTITLED_FEATURES.DATA_INPUT_UNDO));d=b.isAuthorized(k.userActions.MAINTAIN_CUSTOM_DASHBOARDS);d={canEdit:d,canPublish:d&&!b.isModelStructureReadOnlyForCurrentUser()};this._menuController=new App.controllers.DashboardToolbarController(c,h,new App.services.PersonalSavedDashboardsService,L,F,D.bind(this),d);a.uuid=h.generateId(a.dashboardEntityLongId);c=C.subscribe("anaplan/tabContainer/homeDashboardChanged",this._onHomeDashboardChanged.bind(this));d=C.subscribe("anaplan/dashboards/"+
a.uuid+"/put",this._onDashboardPublishedTo.bind(this));a=C.subscribe("anaplan/undoManager/x"+a.dashboardEntityLongId+"/stackSize",this._onUndoStackSizeChange.bind(this));this.own(c,d,a)},startup:function(a){if(!this._started){this.inherited(arguments);var b=this._dashboardArgs.dashboardDefinition;this._dashboardArgs.isDrillDown?this._renderDrilldown(b):(this._dashboardModel.canAccessPersonalSavedDashboards?(this._showLoadingSpinner(),this._menuController.attemptToLoadMyView(this._dashboardArgs.viewInfos&&
0<this._dashboardArgs.viewInfos.length).then(function(a){this._hideLoadingSpinner();this._renderDashboard(a)}.bind(this))):this._renderDashboard(b),g.model.notifyOpenPage({modelId:window.modelId,pageId:this.dashboardId}))}},destroy:function(){this._loadingController&&"function"===typeof this._loadingController.destroy&&this._loadingController.destroy();this._menuController&&"function"===typeof this._menuController.destroy&&this._menuController.destroy();this.inherited(arguments)},canBeAged:function(){return this._dashboardModel.isMasterView&&
(!this._dash||!this._dash.isEdited()&&!this._dash.isInDesignerView())},isAged:function(){return null===this._dash},unageTab:function(){this._renderDashboard(F(this.dashboardEntityLongId))},ageTab:function(){try{null!==this._dash&&(this._dash._destroyDashboard(),this._dash.destroy(),this._dash=null)}catch(a){a&&"CancelError"===a.name||console.warn("Failed to age dashboard tab",a)}},canDetach:function(){return this._dash&&!this._dashboardModel.isFloating&&!this._dash.isInDesignerView()},suspend:function(){this.inherited(arguments);
if(this._menuController)this._menuController.onSuspendTab()},resume:function(){this.inherited(arguments);if(this._menuController)this._menuController.onResumeTab();g.model.notifyOpenPage({modelId:window.modelId,pageId:this.dashboardId})},isInClosableState:function(){return!this._dash?!0:this._dash.isInClosableState()},getServerDashboardDefinitionChanged:function(){return!this._dash?!1:this._dash.getServerDashboardDefinitionChanged()},isCloseableMayPrompt:function(){return!this._dash?d.resolve(!0):
this._dash.canCloseDashboard()},afterDetach:function(){this._menuController.onDetachTab()},afterDetatchCompleted:function(){this._menuController.onDetachTabCompleted()},afterReattach:function(){this._menuController.onAttachTab(this._getTabLabelNode())},getCombinedDashboardElementSize:function(){var a=500,b=0;if(!this._dash||!this._dashboardArgs.dashboardDefinition)return{width:a,height:350};for(var c=0;c<this._dashboardArgs.dashboardDefinition.dashboardElements.length;c++)var d=this._dash.getGridModelSizerByElementIndex(c),
e=this._dash.getGridModelThemeByElementIndex(c),d=this._calculateSize(d,e),a=d.width>a?d.width:a,b=b+d.height;return{width:a,height:b}},_calculateSize:function(a,b){if(null===a)return{width:0,height:0};var c=a.getWidth(b)+a.getFixedColumnWidths()+3+75,d=a.getHeight(b)+a.getFixedRowHeights()+3+55;return{width:c,height:d}},_renderDrilldown:function(a){setTimeout(function(){this._dashboardModel.hideToolbar=!0;this._dashboardModel.isFloating=!0;this._renderDashboard(a)}.bind(this),150)},_renderDashboard:function(b){this._dashboardArgs.dashboardDefinition=
K(b);this._dashboardArgs.dashboardModel=this._dashboardModel;this._dash=new a(this._dashboardArgs);this._setupDashboardListeners();this._dashboardModel.hideToolbar||this._menuController.initialize(this._dash,this._getTabLabelNode());N(this._dash,this._dashboardModel);var c=this;this._dash.initialLoad().then(function(){c.onInitialLoad()});this.set("content",this._dash);this.getParent().resize()},onInitialLoad:function(){},_setupDashboardListeners:function(){this.own(this._dash.on("UpdateMenu",function(){this._menuController.update()}.bind(this)),
this._dash.on("attachFloatingDashboard",function(){if(this._dashboardModel.isFloating)this.getParent().getParent().onAttach()}.bind(this)))},_getTabLabelNode:function(){return this.tabButtonId?document.getElementById(this.tabButtonId):null},_showLoadingSpinner:function(){this._loadingController=new App.controllers.DashboardLoadingController(this.containerNode)},_hideLoadingSpinner:function(){this._loadingController&&this._loadingController.destroy()},_getTitleAttr:function(){var a=this._getEnclosingTabElement();
return!a?"":a.label},_getEnclosingTabElement:function(){return this.getParent().controlButton},_onHomeDashboardChanged:function(a){this._dashboardModel.isHomeDashboard=a===this._dashboardModel.dashboardEntityLongId;this._menuController.setDefaultDashboardIcon();this._menuController.setupDojoTabHeader()},_onDashboardPublishedTo:function(a){this._dashboardModel.isMasterView||this._dashboardModel.switchToMasterView();var b=F(this.dashboardEntityLongId);this._dash.publishItemsToDashboard(a,b)},_onUndoStackSizeChange:function(a){this._menuController.onUndoStackSizeChange(a)}})})},
"anaplan/settings/Shared/DashboardMenuList":function(){define("dojo/_base/declare dijit/Menu dijit/MenuSeparator anaplan/widgets/MenuItem anaplan/utils/FormatHelper anaplan/data/ModelContentCache dojo/_base/lang dojo/on dojo/i18n!anaplan/nls/toolbar".split(" "),function(g,b,k,p,r,n,f,s,l){return g("anaplan.settings.Shared.DashboardMenuList",[b],{startup:function(){this.inherited(arguments)},updateDashboardsList:function(a){a=a||!1;this.destroyDescendants();var b=n.getDashboardsLabelPage(),d=b.entityLongIds[0],
g=b.labels[0],b=b.count,h=new p({label:l.labelNewDashboard,disabled:a});this.addChild(h);b&&this.addChild(new k);for(var r=0;r<b;r++){var c=this._createPublishToDashboardMenuItem(d[r],g[r],a);this.addChild(c)}a||(a=s(h,"click",f.hitch(this,function(){this.onNewDashboardClick(h.getParent().fromItem)})),this.own(a))},_createPublishToDashboardMenuItem:function(a,b,d){var g=new p({label:r.escapeHTML(b),disabled:d?!0:!1});d||(b=s(g,"click",f.hitch(this,function(){this.onDashboardClick(g.getParent().fromItem,
a)})),this.own(b));return g},onNewDashboardClick:function(){},onDashboardClick:function(){}})})},"anaplan/view/ModelManagement":function(){define("anaplan/api/service anaplan/anapediaKeys anaplan/constants anaplan/data/Aggregator anaplan/data/ModelContentCache anaplan/data/RequestFactory anaplan/Exceptions anaplan/layout/StackContainer anaplan/utils/EncryptionHelper anaplan/utils/FormatHelper anaplan/utils/UIHelper anaplan/utils/PromiseUtil anaplan/utils/RedirectHelper anaplan/view/Confirmation anaplan/view/Dialog2ContentAdapter anaplan/view/Export anaplan/view/Import anaplan/view/Information anaplan/view/ModelManagement/CopyAndArchiveModelView anaplan/view/ModelManagement/CopyAndSanitizeModelView anaplan/view/ModelManagement/CopyModelView anaplan/view/ModelManagement/ImportModelView anaplan/view/ModelManagement/MainView anaplan/view/ModelManagement/ModelManagementTaskProgress anaplan/view/ModelManagement/NewModelView anaplan/view/ModelManagement/RenameModelView anaplan/widgets/Dialog2 anaplan/widgets/PleaseWait dojo/topic dojo/_base/declare dojo/_base/lang dojo/dom-style dojo/i18n!anaplan/nls/modelManagement dojo/json dojo/on dojo/request dojo/dom-construct dojo/dom-class dojo/Deferred".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I,P,J,O,T){return K([s,C.ContentMixin],{constructor:function(a){try{this._workspaceId=a.workspaceId,this._workspaceName=a.workspaceName,this._modelId=a.modelId,this._openOnStatusTab=a.openOnStatusTab,this._canClose=!0,this._closeButtonHandler=this._refreshPoll=null,this._showPleaseWaitOnStartup=a.showPleaseWait||!1,this._pleaseWaitTitle=a.pleaseWaitTitle}catch(b){throw new f.ClientException("ModelManagement#constructor",
b);}},onBeforeDialogHide:function(){return this._closeButtonHandler?(this._closeButtonHandler(),!1):this._canClose},onClose:function(){},onCloseWithoutRedirection:function(){},onArchiveModel:function(){},onCloseModel:function(){},onCreateModel:function(){},onRenameModel:function(){},onCopyModel:function(){},onDeleteModel:function(){},onDialogHide:function(){this._refreshPoll&&(clearTimeout(this._refreshPoll),this._refreshPoll=null);this.inherited(arguments)},onImportModel:function(){},onSwitchModel:function(){},
onSetModelOnline:function(){},onSetModelOffline:function(){},onChangeModelModestatus:function(){},onModelModeStatusChanged:function(a,b,c){},onCompareSync:function(){},postCreate:function(){try{this.inherited(arguments),this._createMainView(),this._createPleaseWaitView()}catch(a){throw new f.ClientException("ModelManagement#postCreate",a);}},resize:function(){arguments[0]=null;this.inherited(arguments)},selectChildWithCloseButtonCallback:function(a,b){this.selectChild(a);this._closeButtonHandler=
b||null},selectChild:function(a){try{if(a!==this._pleaseWaitView&&a!==this._modelManagementTaskProgress&&a!==this._importView)this.onTitleChange("");this.onHelpChange(null);this._closeButtonHandler=null;this.inherited(arguments)}catch(b){throw new f.ClientException("ModelManagement#selectChild",b);}},startup:function(){try{this.inherited(arguments),this._showPleaseWaitOnStartup?(this._canClose=!1,this.onTitleChange(this._pleaseWaitTitle),this.selectChild(this._pleaseWaitView)):this._refreshModelList()}catch(a){throw new f.ClientException("ModelManagement#startup",
a);}},uninitialize:function(){this._refreshPoll&&(clearTimeout(this._refreshPoll),this._refreshPoll=null);this.inherited(arguments)},_createCancelConfirmationView:function(){try{var a=new h;this.addChild(a);this.own(a.on("confirm",D.hitch(this,"_onConfirmCancel")),a.on("cancel",D.hitch(this,"_onCancelCancel")),a.on("titleChange",D.hitch(this,"onTitleChange")),a.on("helpChange",D.hitch(this,"onHelpChange")));this._cancelConfirmationView=a}catch(b){throw new f.ClientException("ModelManagement#_createCancelConfirmationView",
b);}},_createCopyModelView:function(){try{var a=new x;this.addChild(a);this.own(I(a,"titleChange",D.hitch(this,"onTitleChange")),I(a,"cancel",D.hitch(this,"_onCancelCopyModel")),I(a,"copyModel",D.hitch(this,"_onPerformCopyModel")),I(a,"helpChange",D.hitch(this,"onHelpChange")));this._copyModelView=a}catch(b){throw new f.ClientException("ModelManagement#_createCopyModelView",b);}},_createCopyAndArchiveModelView:function(){try{var a=new w;this.addChild(a);this.own(a.on("titleChange",D.hitch(this,"onTitleChange")),
a.on("cancel",D.hitch(this,"_onCancelCopyAndArchiveModel")),a.on("copyAndArchiveModel",D.hitch(this,"_onPerformCopyAndArchiveModel")),a.on("helpChange",D.hitch(this,"onHelpChange")));this._copyAndArchiveModelView=a}catch(b){throw new f.ClientException("ModelManagement#_createCopyAndArchiveModelView",b);}},_createCopyAndSanitizeModelView:function(){try{var a=new z;this.addChild(a);this.own(a.on("titleChange",D.hitch(this,"onTitleChange")),a.on("cancel",D.hitch(this,"_onCancelCopyAndSanitizeModel")),
a.on("copyAndSanitizeModel",D.hitch(this,"_onPerformCopyAndSanitizeModel")),a.on("helpChange",D.hitch(this,"onHelpChange")));this._copyAndSanitizeModelView=a}catch(b){throw new f.ClientException("ModelManagement#_createCopyAndSanitizeModelView",b);}},_createCopyAndSanitizeModelInformationView:function(){try{var a=new m({helpKey:b.manageModels,message:""});N.set(a.domNode,"width","auto");this.addChild(a);this.own(I(a,"ok",D.hitch(this,"_onOkCopyAndSanitizeModelInformationView")),I(a,"titleChange",
D.hitch(this,"onTitleChange")),I(a,"helpChange",D.hitch(this,"onHelpChange")));this._copyAndSanitizeModelInformationView=a}catch(c){throw new f.ClientException("ModelManagement#_createCopyAndSanitizeModelInformationView",c);}},_createDeleteConfirmationView:function(){try{var a=new h;this.addChild(a);this.own(a.on("confirm",D.hitch(this,"_onConfirmDeletion")),a.on("cancel",D.hitch(this,"_onCancelDeletion")),a.on("titleChange",D.hitch(this,"onTitleChange")),a.on("helpChange",D.hitch(this,"onHelpChange")));
this._deleteConfirmationView=a}catch(b){throw new f.ClientException("ModelManagement#_createDeleteConfirmationView",b);}},_createRenameModelView:function(){try{var a=new E;this.addChild(a);this.own(a.on("titleChange",D.hitch(this,"onTitleChange")),a.on("cancel",D.hitch(this,"_onCancelRenameModel")),a.on("renameModel",D.hitch(this,"_onPerformRenameModel")),a.on("helpChange",D.hitch(this,"onHelpChange")));this._renameModelView=a}catch(b){throw new f.ClientException("ModelManagement#_createRenameModelView",
b);}},_createExportView:function(a,b){try{this._exportView&&(this.removeChild(this._exportView),this._exportView.destroy());var d=new c({exportType:"ModelImplementationExporter",workspaceName:this._workspaceName,modelId:a,modelName:b,title:F.titleExportModel});this.addChild(d);this.own(d.on("cancel",D.hitch(this,"_onCancelExportModel")),d.on("afterExport",D.hitch(this,"_onAfterExport")),d.on("titleChange",D.hitch(this,"onTitleChange")),d.on("helpChange",D.hitch(this,"onHelpChange")));this._exportView=
d}catch(e){throw new f.ClientException("ModelManagement#_createExportView",e);}},_createImportModelView:function(){try{var a=new A;this.addChild(a);this.own(a.on("titleChange",D.hitch(this,"onTitleChange")),a.on("cancel",D.hitch(this,"_onCancelImportModel")),a.on("importModel",D.hitch(this,"_onPerformImportModel")),a.on("helpChange",D.hitch(this,"onHelpChange")));this._importModelView=a}catch(b){throw new f.ClientException("ModelManagement#_createImportModelView",b);}},_createImportView:function(a,
b){try{this._importView&&(this.removeChild(this._importView),this._importView.destroy());var c=r.getWorkspaceInfo();if(!c){console.warn("ModelManagement#_createImportView expected to find workspaceInfo but did not");return}var d=null;if(this._modelId)d=this._modelId;else if(c){var e=c.modelSummaries;if(e&&e.length)for(var h=0;h<e.length;h++)if(e[h].activeState!==k.ACTIVE_STATE_ARCHIVED&&e[h].activeState!==k.ACTIVE_STATE_LOCKED){d=e[h].modelId;break}}if(!d)return!1;var g=new t({workspaceId:this._workspaceId,
workspaceName:this._workspaceName,workspaceInfo:c,modelId:d,modelName:a,modelSource:b,importType:"ModelImplementationImporter",helpContent:"model-building/alm/model-modes"});this.addChild(g);this.own(g.on("cancel",D.hitch(this,"_onCancelImportModel")),g.on("afterImport",D.hitch(this,"_onAfterImport")),g.on("titleChange",D.hitch(this,"onTitleChange")),g.on("helpChange",D.hitch(this,"onHelpChange")));this._importView=g}catch(l){throw new f.ClientException("ModelManagement#_createImportView",l);}return!0},
_createMainView:function(){try{var a=new B({workspaceId:this._workspaceId,workspaceName:this._workspaceName,modelId:this._modelId,openOnStatusTab:this._openOnStatusTab});this.addChild(a);this.own(I(a,"close",D.hitch(this,"_onClose")),I(a,"titleChange",D.hitch(this,"onTitleChange")),I(a,"helpChange",D.hitch(this,"onHelpChange")),I(a,"switchModel",D.hitch(this,"_onSwitchModel")),I(a,"newModel",D.hitch(this,"_onNewModel")),I(a,"copyModel",D.hitch(this,"_onCopyModel")),I(a,"copyAndArchiveModel",D.hitch(this,
"_onCopyAndArchiveModel")),I(a,"copyAndSanitizeModel",D.hitch(this,"_onCopyAndSanitizeModel")),I(a,"deleteModel",D.hitch(this,"_onDeleteModel")),I(a,"renameModel",D.hitch(this,"_onRenameModel")),I(a,"cancelTask",D.hitch(this,"_onCancelTask")),I(a,"importModel",D.hitch(this,"_onImportModel")),I(a,"exportModel",D.hitch(this,"_onExportModel")),I(a,"closeModel",D.hitch(this,"_onCloseModel")),I(a,"setModelOnline",D.hitch(this,"_onSetModelOnline")),I(a,"setModelOffline",D.hitch(this,"_onSetModelOffline")),
I(a,"changeModelModestatus",function(a,b){e.checkDirtyTabsAndForm().then(function(c){c||this._onChangeModelModestatus(a,b)}.bind(this))}.bind(this)),I(a,"compareSync",D.hitch(this,"_onCompareSync")));this._mainView=a}catch(b){throw new f.ClientException("ModelManagement#_createMainView",b);}},_createModelManagementTaskProgress:function(){try{var a=new y;this.addChild(a);this.own(I(a,"onHelpChange",D.hitch(this,"onHelpChange")));this.own(I(a,"titleChange",D.hitch(this,"onTitleChange")));this._modelManagementTaskProgress=
a}catch(b){throw new f.ClientException("ModelManagement#_createModelManagementTaskProgress",b);}},_createNewModelView:function(){try{var a=new v;this.addChild(a);this.own(I(a,"titleChange",D.hitch(this,"onTitleChange")),I(a,"cancel",D.hitch(this,"_onCancelNewModel")),I(a,"createModel",D.hitch(this,"_onCreateModel")),I(a,"helpChange",D.hitch(this,"onHelpChange")));this._newModelView=a}catch(b){throw new f.ClientException("ModelManagement#_createNewModelView",b);}},_createPleaseWaitView:function(){try{var a=
new G;this.addChild(a);this.own(I(a,"onHelpChange",D.hitch(this,"onHelpChange")));this._pleaseWaitView=a}catch(b){throw new f.ClientException("ModelManagement#_createPleaseWaitView",b);}},_createSetModelOnlineConfirmationView:function(){try{var a=new h({helpKey:b.manageModels,title:F.titleSetModelOnline,innerHtml:F.labelSetModelOnlineConfirmation,statusStyle:h.STATUS_STYLE_WARNING});this.addChild(a);this.own(I(a,"confirm",D.hitch(this,"_onConfirmSetModelOnline")),I(a,"cancel",D.hitch(this,"_onCancelSetModelOnline")),
I(a,"titleChange",D.hitch(this,"onTitleChange")),I(a,"helpChange",D.hitch(this,"onHelpChange")));this._setModelOnlineConfirmationView=a}catch(c){throw new f.ClientException("ModelManagement#_createSetModelOnlineConfirmationView",c);}},_createSetModelOfflineConfirmationView:function(){try{var a=new h({helpKey:b.manageModels,title:F.titleSetModelOffline,innerHtml:F.labelSetModelOfflineConfirmation,statusStyle:h.STATUS_STYLE_WARNING});this.addChild(a);this.own(I(a,"confirm",D.hitch(this,"_onConfirmSetModelOffline")),
I(a,"cancel",D.hitch(this,"_onCancelSetModelOffline")),I(a,"titleChange",D.hitch(this,"onTitleChange")),I(a,"helpChange",D.hitch(this,"onHelpChange")));this._setModelOfflineConfirmationView=a}catch(c){throw new f.ClientException("ModelManagement#_createSetModelOfflineConfirmationView",c);}},_onOkCopyAndSanitizeModelInformationView:function(){try{this.selectChild(this._mainView)}catch(a){throw new f.ClientException("ModelManagement#_onOkCopyAndSanitizeModelInformationView",a);}},_onAfterExport:function(){try{this.selectChild(this._mainView)}catch(a){throw new f.ClientException("ModelManagement#_onAfterExport",
a);}},_onAfterImport:function(){try{var a=this._importView.getModelName(),b=this;this._canClose=!1;this.selectChild(this._pleaseWaitView);var c=n.createRequest(workspaceId,[],[],[],null,!0);this._post(c,!1,function(c){try{var d=b._modelId,e,h,g;if(c){if(c.error)return;if(c.result){var l=r.getWorkspaceInfo();if(l){e=l.modelSummaries;h=e.length;for(g=0;g<h;g++)if(e[g].modelName===a){d=e[g].modelId;break}}else console.warn("ModelManagement#_onAfterImport expected to find workspaceInfo but did not")}}b._canClose=
!0;b.onImportModel(d,a);b.selectChild(b._mainView);b._mainView.setModelIdInModelsTab(d)}catch(k){throw new f.ClientException("ModelManagement#_onAfterImport (response)",k);}})}catch(d){throw new f.ClientException("ModelManagement#_onAfterImport (request)",d);}},_onSetModelOnline:function(a,b){try{a&&(this._setModelOnlineConfirmationView||this._createSetModelOnlineConfirmationView(),this._setModelOnlineConfirmationView.set("heading",F.labelSetModelOnline.replace(/\$\{modelName\}/,b)),this.selectChild(this._setModelOnlineConfirmationView))}catch(c){throw new f.ClientException("ModelManagement#_onSetModelOnline",
c);}},_onSetModelOffline:function(a,b){try{a&&(this._setModelOfflineConfirmationView||this._createSetModelOfflineConfirmationView(),this._setModelOfflineConfirmationView.set("heading",F.labelSetModelOffline.replace(/\$\{modelName\}/,b)),this.selectChild(this._setModelOfflineConfirmationView))}catch(c){throw new f.ClientException("ModelManagement#_onSetModelOffline",c);}},_onCompareSync:function(a,b){"undefined"!==typeof window&&window.App&&(this.onCloseWithoutRedirection(),App.interim.syncModel.dispatchStartCompareSync(window.App.interim.getReduxDispatch(),
a,b,this._workspaceId))},_onChangeModelModestatus:function(a,b){if("undefined"!==typeof window&&window.App){this.onCloseWithoutRedirection();var c=this._getModestatusOfCurrentlySelectedModel(),d=c[0],e=c[1],c=F.titleModelModeSelection.replace(/\$\{modelName\}/,b),f=window.App.interim.getReduxDispatch(),h=this.onModelModeStatusChanged;App.interim.modelManagement.dispatchChangeModeStatus(f,c,function(b,c){App.interim.modelManagement.dispatchAttemptChangeModestatus(f,a,b,c,d,e).then(function(d){h(a,
b,c);L.publish("anaplan/show",k.MODEL_MANAGEMENT,{openOnStatusTab:!1,modelId:a,showPleaseWait:!1})})},a,b,d,e)}},_getModestatusOfCurrentlySelectedModel:function(a){a=this._mainView.getSelectedModelActiveStateInModelsTab();return App.interim.modelManagement.activeStateToModestatus(a)},_onCancelCancel:function(){this.selectChild(this._mainView)},_onCancelCopyModel:function(){this.selectChild(this._mainView)},_onCancelCopyAndArchiveModel:function(){this.selectChild(this._mainView)},_onCancelCopyAndSanitizeModel:function(){this.selectChild(this._mainView)},
_onCancelDeletion:function(){this.selectChild(this._mainView)},_onCancelRenameModel:function(){this.selectChild(this._mainView)},_onCancelExportModel:function(){this.selectChild(this._mainView)},_onCancelImportModel:function(){this.selectChild(this._mainView)},_onCancelNewModel:function(){this.selectChild(this._mainView)},_onCancelSetModelOnline:function(){this.selectChild(this._mainView)},_onCancelSetModelOffline:function(){this.selectChild(this._mainView)},_onCancelTask:function(a,b){try{this._cancelConfirmationView||
this._createCancelConfirmationView();var c=b.taskType?b.taskType.toLowerCase():"operation";b.userGuid&&b.hasOwnProperty("userFirstName")&&b.hasOwnProperty("userLastName")&&(c+=" started by "+b.userFirstName+" "+b.userLastName);if(0<b.startTime){var d=new Date(b.startTime),c=c+(" at "+d.toLocaleTimeString());d.toISOString()!==(new Date).toISOString()&&(c+=" on "+d.toLocaleDateString())}this._cancelConfirmationView.set("title",F.titleCancelTask);this._cancelConfirmationView.set("heading",F.labelCancelTask.replace(/\$\{modelName\}/,
a));this._cancelConfirmationView.set("message",F.labelCancelTaskConfirmation.replace(/\$\{taskText\}/,c));this.selectChild(this._cancelConfirmationView)}catch(e){throw new f.ClientException("ModelManagement#_onCancelTask",e);}},_onCreateModel:function(a){try{var b=this;this._canClose=!1;this.selectChild(this._pleaseWaitView);var c={actionId:"CREATE_MODEL",params:D.mixin({workspaceId:this._workspaceId,modelName:a},{populateSampleData:!1})},d=n.createRequest(workspaceId,[],[],[c],null,!0);this._post(d,
!1,function(c){try{var d=b._modelId;if(c){if(c.error)return;if(c.result){var e=r.getWorkspaceInfo();if(e){var h=e.modelSummaries;for(c=0;c<h.length;c++)if(h[c].modelName===a){d=h[c].modelId;break}}else console.warn("ModelManagement#_onCreateModel expected to find new workspaceInfo in result but did not")}}b._canClose=!0;b.onCreateModel(d,a);b.selectChild(b._mainView);b._mainView.setModelIdInModelsTab(d)}catch(g){throw new f.ClientException("ModelManagement#_onCreateModel (response)",g);}})}catch(e){throw new f.ClientException("ModelManagement#_onCreateModel (request)",
e);}},_onClose:function(){try{this._refreshPoll&&(clearTimeout(this._refreshPoll),this._refreshPoll=null),this.onClose()}catch(a){throw new f.ClientException("ModelManagement#_onClose",a);}},_onCloseModel:function(a,b){try{var c=n.createRequest(this._workspaceId,[],[],[{actionId:"UNLOAD_MODEL",params:{modelId:a}}],null,!0);delete c.modelId;delete c.modelDefinitionSerialNumber;this._post(c,!1,D.hitch(this,function(c){try{if(!c||!c.error)this.onCloseModel(a,b),this._refreshModelList()}catch(d){throw new f.ClientException("ModelManagement#_onCloseModel (response)",
d);}}))}catch(d){throw new f.ClientException("ModelManagement#_onCloseModel (request)",d);}},_onConfirmSetModelOnline:function(){try{var a=this;this._canClose=!1;this.selectChild(this._pleaseWaitView);var b=this._mainView.getSelectedModelIdInModelsTab(),c=this._mainView.getSelectedModelNameInModelsTab(),d=this._getModestatusOfCurrentlySelectedModel(),e=d[0],h=d[1],g=App.interim.getReduxStore();App.interim.modelManagement.dispatchAttemptChangeModestatus(g.dispatch,b,e,"ONLINE",e,h).then(function(d){a._canClose=
!0;if(d.successful)a.onSetModelOnline(b,c);a.selectChild(a._mainView);a._mainView.setModelIdInModelsTab(b)})}catch(l){throw new f.ClientException("ModelManagement#_onConfirmSetModelOnline (request)",l);}},_onConfirmSetModelOffline:function(){try{var a=this;this._canClose=!1;this.selectChild(this._pleaseWaitView);var b=this._mainView.getSelectedModelIdInModelsTab(),c=this._mainView.getSelectedModelNameInModelsTab(),d=this._getModestatusOfCurrentlySelectedModel(),e=d[0],h=d[1],g=App.interim.getReduxStore();
App.interim.modelManagement.dispatchAttemptChangeModestatus(g.dispatch,b,e,"OFFLINE",e,h).then(function(d){a._canClose=!0;if(d.successful)a.onSetModelOffline(b,c);a.selectChild(a._mainView);a._mainView.setModelIdInModelsTab(b)})}catch(l){throw new f.ClientException("ModelManagement#_onConfirmSetModelOffline (request)",l);}},_onConfirmCancel:function(){try{var a=this._mainView.getSelectedModelSummaryInStatusTab();if(!a||!a.taskSummary)this._onCancelCancel();else{this.selectChild(this._pleaseWaitView);
var b=this;P.post("jsonrpc",{data:H.stringify({workspaceId:this._workspaceId,modelId:a.modelId,requestType:"PROGRESS",taskId:a.taskSummary.taskId,cancel:!0}),headers:{"Content-Type":"application/json"},handleAs:"json",sync:!1,timeout:1E4}).then(function(){setTimeout(function(){try{b.selectChild(b._mainView),b._refreshModelList()}catch(a){console.warn("ModelManagement#_onConfirmCancel request load handler caught exception "+a)}},2E3)},function(a){console.warn("ModelManagement#_onConfirmCancel request failed "+
a);e.showErrorReporter(new f.ClientException("ModelManagement#_onConfirmCancel",null,{widgetId:this.id}))})}}catch(c){throw new f.ClientException("ModelManagement#_onConfirmCancel",c);}},_onConfirmDeletion:function(){try{var a=this;this._canClose=!1;this.selectChild(this._pleaseWaitView);var b=this._mainView.getSelectedModelIdInModelsTab(),c=this._mainView.getSelectedModelNameInModelsTab(),d=n.createRequest(this._workspaceId,[],[],[{actionId:"DELETE_MODEL",params:{modelId:b}}],null,!0);this._post(d,
!1,function(d){try{if(!d||!d.error)a._canClose=!0,a.onDeleteModel(b,c),a.selectChild(a._mainView),a._mainView.setModelIdInModelsTab(null)}catch(e){throw new f.ClientException("ModelManagement#_onConfirmDeletion (response)",e);}})}catch(e){throw new f.ClientException("ModelManagement#_onConfirmDeletion (request)",e);}},_onCopyModel:function(a,b){try{a&&(this._copyModelView||this._createCopyModelView(),this._copyModelView.reset(),this._copyModelView.setModel(a,b),this.selectChild(this._copyModelView))}catch(c){throw new f.ClientException("ModelManagement#_onCopyModel",
c);}},_onCopyAndArchiveModel:function(a,b){try{a&&(this._copyAndArchiveModelView||this._createCopyAndArchiveModelView(),this._copyAndArchiveModelView.reset(),this._copyAndArchiveModelView.setModel(a,b),this.selectChild(this._copyAndArchiveModelView))}catch(c){throw new f.ClientException("ModelManagement#_onCopyAndArchiveModel",c);}},_onCopyAndSanitizeModel:function(b,c){try{if(b){this._copyAndSanitizeModelView||this._createCopyAndSanitizeModelView();this._modelManagementTaskProgress||this._createModelManagementTaskProgress();
this._copyAndSanitizeModelInformationView||this._createCopyAndSanitizeModelInformationView();var d=a.escapeHTML(c),e=F.titleCopyAndSanitizeModel.replace(/\$\{modelName\}/,d);this._copyAndSanitizeModelView.reset();this._copyAndSanitizeModelView.setModel(b,c);this._modelManagementTaskProgress.reset();this._modelManagementTaskProgress.set("modelName",c);this._copyAndSanitizeModelInformationView.set("title",e);this.selectChild(this._copyAndSanitizeModelView)}}catch(h){throw console.error(h),new f.ClientException("ModelManagement#_onCopyAndSanitizeModel",
h);}},_onDeleteModel:function(a,b){try{a&&(this._deleteConfirmationView||this._createDeleteConfirmationView(),this._deleteConfirmationView.set("title",F.titleDeleteModel),this._deleteConfirmationView.set("heading",F.labelDeleteModel.replace(/\$\{modelName\}/,b)),this._deleteConfirmationView.set("message",F.labelDeleteModelConfirmation),this.selectChild(this._deleteConfirmationView))}catch(c){throw new f.ClientException("ModelManagement#_onDeleteModel",c);}},_onRenameModel:function(a,b){try{a&&(this._renameModelView||
this._createRenameModelView(),this._renameModelView.reset(),this._renameModelView.setModel(a,b),this.selectChild(this._renameModelView))}catch(c){throw new f.ClientException("ModelManagement#_onRenameModel",c);}},_onExportModel:function(a,b){try{a&&(this._createExportView(a,b),this.selectChild(this._exportView))}catch(c){throw new f.ClientException("ModelManagement#_onExportModel",c);}},_onImportModel:function(){try{this._importModelView||this._createImportModelView(),this._importModelView.reset(),
this.selectChild(this._importModelView)}catch(a){throw new f.ClientException("ModelManagement#_onImportModel",a);}},_onNewModel:function(){try{this._newModelView||this._createNewModelView(),this._newModelView.reset(),this.selectChild(this._newModelView)}catch(a){throw new f.ClientException("ModelManagement#_onNewModel",a);}},_onPerformCopyModel:function(a,b){var c=this;try{this._canClose=!1;this.selectChild(this._pleaseWaitView);var d=n.createRequest(this._workspaceId,[],[],[{actionId:"COPY_MODEL",
params:{modelId:a,newModelName:b}}],null,!0);this._post(d,!1,function(a){try{var d=c._modelId;if(a){if(a.error)return;if(a.result){var e=r.getWorkspaceInfo();if(e){var h=e.modelSummaries;for(a=0;a<h.length;a++)if(h[a].modelName===b){d=h[a].modelId;break}}else console.warn("ModelManagement#_onPerformCopyModel expected to find new workspaceInfo in result but did not")}}c._canClose=!0;c.onCopyModel(d,b);c.selectChild(c._mainView);c._mainView.setModelIdInModelsTab(d)}catch(g){throw new f.ClientException("ModelManagement#_onPerformCopyModel (response)",
g);}})}catch(e){throw new f.ClientException("ModelManagement#_onPerformCopyModel (request)",e);}},_onPerformCopyAndArchiveModel:function(a,b,c){try{var d=this;this._canClose=!1;this.selectChild(this._pleaseWaitView);var e=n.createRequest(this._workspaceId,[],[],[{actionId:"COPY_AND_ARCHIVE_MODEL",params:{modelId:a,newModelName:c}}],null,!0);this._post(e,!1,function(a){try{var e=null,h=null;if(a){if(a.error)return;if(a.result){var g=r.getWorkspaceInfo();if(g){var l=g.modelSummaries;for(a=0;a<l.length;a++)if(l[a].modelName===
c){e=l[a].modelId;break}for(a=0;a<l.length;a++)if(l[a].modelName===b){h=l[a].modelId;break}}else console.warn("ModelManagement#_onPerformCopyAndArchiveModel expected to find new workspaceInfo in result but did not")}}d._canClose=!0;d._onCopyAndArchiveModel(e,c);d.selectChild(d._mainView);d._mainView.setModelIdInModelsTab(h)}catch(k){throw new f.ClientException("ModelManagement#_onPerformCopyAndArchiveModel (response)",k);}})}catch(h){throw new f.ClientException("ModelManagement#_onPerformCopyAndArchiveModel (request)",
h);}},_onPerformCopyAndSanitizeModel:function(a,b,c,d){try{var e=this;this._cancelled=this._canClose=!1;this.selectChild(this._modelManagementTaskProgress);this._encryptPassphrase(d).then(function(b){b=n.createRequest(e._workspaceId,[],[],[{actionId:"COPY_AND_SANITIZE_MODEL",params:{modelId:a,newModelName:c,passphrase:b.passphrase,key:b.key}}],null,!0);e._post(b,!1,function(a){try{if(a){if(a.error)return;if(a.result){var b=a.result;if(!b.systemActionResults||!b.systemActionResults.length)return;var c=
b.systemActionResults[0];if(c.successful)e._modelManagementTaskProgress.monitor(F.labelSanitizationInProgress,c.modelId,c.taskId).then(function(a){e._copyAndSanitizeModelInformationView.set("message",a.taskResult?a.taskResult.localMessageText:a.currentStep);e.selectChild(e._copyAndSanitizeModelInformationView)});else{var d=F.errorCopyForSanitizationFailed;c.error&&(d+=" "+c.error.messageText);e._copyAndSanitizeModelInformationView.set("message",d);e.selectChild(e._copyAndSanitizeModelInformationView)}}}e._canClose=
!0}catch(h){throw new f.ClientException("ModelManagement#_onPerformCopyAndSanitizeModel (response)",h);}})})}catch(h){throw new f.ClientException("ModelManagement#_onPerformCopyAndSanitizeModel (request)",h);}},_encryptPassphrase:function(a){var b=new T;this._getPublicEncryptionKey().then(function(c){try{var d=l.generateSymmetricKey(128),e={passphrase:l.encryptWithSymmetricKey(d,a,"PASSPHRASE"),key:l.wrapWithPublicKey(c,d)};b.resolve(e)}catch(f){b.reject("Error encrypting passphrase")}}).otherwise(function(a){b.reject(a)});
return b},_getPublicEncryptionKey:function(){var a=new T,b=n.createRequest(this._workspaceId,[],[],[{actionId:"GENERATE_ENCRYPTION_KEY"}]);p.post(b,!1,function(b){b.error?a.reject(b.error):(b=b.result.systemActionResults[0],b.publicKey?a.resolve(b.publicKey):a.reject("Failed to fetch encryption key from server"))},function(){a.reject("Failed to fetch encryption key from server")});return a},_onPerformRenameModel:function(a,b){try{var c=this;this._canClose=!1;this.selectChild(this._pleaseWaitView);
var d=n.createRequest(this._workspaceId,[],[],[{actionId:"RENAME_MODEL",params:{modelId:a,newModelName:b}}],null,!0);this._post(d,!1,function(d){try{if(!d||!d.error)c._canClose=!0,c.onRenameModel(a,b),c.selectChild(c._mainView),c._mainView.setModelIdInModelsTab(a)}catch(e){throw new f.ClientException("ModelManagement#_onPerformRenameModel (response)",e);}})}catch(e){throw new f.ClientException("ModelManagement#_onPerformRenameModel (request)",e);}},_onPerformImportModel:function(a,b){try{a&&this._createImportView(a,
b)&&this.selectChild(this._importView)}catch(c){throw new f.ClientException("ModelManagement#_onPerformImportModel",c);}},_onSwitchModel:function(a,b){this.onSwitchModel(a,b)},_refreshModelList:function(a){try{var b=this;this._refreshPoll&&(clearTimeout(this._refreshPoll),this._refreshPoll=null);if(this.selectedChildWidget===this._mainView){var c=n.createRequest(this._workspaceId,[],[],[],null,!0);delete c.modelId;delete c.modelDefinitionSerialNumber;var d=this._mainView.getSelectedModelIdInModelsTab(),
e=this._mainView.getSelectedModelIdInStatusTab();this._post(c,!1,function(a){if(!b._destroyed)try{a&&a.result&&(r.populateCache(a.result),b._mainView.setModelIdInModelsTab(d),b._mainView.setModelIdInStatusTab(e),b._refreshPoll||(b._refreshPoll=setTimeout(function(){b._refreshModelList(!0)},1E4)))}catch(c){throw new f.ClientException("ModelManagement#_refreshModelList (response)",c);}},function(a){console.warn("Failed to refresh model list: "+a)},a)}else this._refreshPoll=setTimeout(function(){b._refreshModelList(!0)},
1E4)}catch(h){throw new f.ClientException("ModelManagement#_refreshModelList (request)",h);}},_post:function(a,b,c,d,e){var h=null;try{var g=this;p.post(a,b,function(a,d){(!a||!a.result||!a.result.workspaceInfo)&&console.warn("ModelManagement#_post _onGet handler has received response with no workspace info");if(a&&a.result){var e=a.result;r.populateCache(e);e.systemActionResults&&e.systemActionResults.length&&(h=e.systemActionResults[0],!b&&h&&(g._modelId=h.modelId))}c&&c(a,d)},d,e)}catch(l){throw new f.ClientException("ModelManagement#_post",
l);}return h}})})},"dojox/gesture/Base":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom dojo/on dojo/touch dojo/has ../main".split(" "),function(g,b,k,p,r,n,f,s,l){g.experimental("dojox.gesture.Base");p.getObject("gesture",!0,l);return b(null,{defaultEvent:" ",subEvents:[],touchOnly:!1,_elements:null,constructor:function(a){p.mixin(this,a);this.init()},init:function(){this._elements=[];if(!s("touch")&&this.touchOnly)console.warn("Gestures:[",this.defaultEvent,
"] is only supported on touch devices!");else{var a=this.defaultEvent;this.call=this._handle(a);this._events=[a];k.forEach(this.subEvents,function(b){this[b]=this._handle(a+"."+b);this._events.push(a+"."+b)},this)}},_handle:function(a){var b=this;return function(d,f){var h=arguments;2<h.length&&(d=h[1],f=h[2]);if(!d||!d.nodeType&&!d.attachEvent&&!d.addEventListener)return n(d,a,f);var g=b._add(d,a,f);return{remove:function(){g.remove();b._remove(d,a)}}}},_add:function(a,b,d){var g=this._getGestureElement(a);
if(!g){var g={target:a,data:{},handles:{}},h=p.hitch(this,"_process",g,"press"),l=p.hitch(this,"_process",g,"move"),c=p.hitch(this,"_process",g,"release"),k=p.hitch(this,"_process",g,"cancel"),m=g.handles;this.touchOnly?(m.press=n(a,"touchstart",h),m.move=n(a,"touchmove",l),m.release=n(a,"touchend",c),m.cancel=n(a,"touchcancel",k)):(m.press=f.press(a,h),m.move=f.move(a,l),m.release=f.release(a,c),m.cancel=f.cancel(a,k));this._elements.push(g)}g.handles[b]=!g.handles[b]?1:++g.handles[b];return n(a,
b,d)},_getGestureElement:function(a){for(var b=0,d;b<this._elements.length;b++)if(d=this._elements[b],d.target===a)return d},_process:function(a,b,d){d._locking=d._locking||{};!d._locking[this.defaultEvent]&&!this.isLocked(d.currentTarget)&&(("INPUT"!=d.target.tagName||"radio"==d.target.type||"checkbox"==d.target.type)&&"TEXTAREA"!=d.target.tagName&&d.preventDefault(),d._locking[this.defaultEvent]=!0,this[b](a.data,d))},press:function(a,b){},move:function(a,b){},release:function(a,b){},cancel:function(a,
b){},fire:function(a,b){a&&b&&(b.bubbles=!0,b.cancelable=!0,n.emit(a,b.type,b))},_remove:function(a,b){var d=this._getGestureElement(a);if(d&&d.handles){d.handles[b]--;var f=d.handles;k.some(this._events,function(a){return 0<f[a]})||(this._cleanHandles(f),d=k.indexOf(this._elements,d),0<=d&&this._elements.splice(d,1))}},_cleanHandles:function(a){for(var b in a)a[b].remove&&a[b].remove(),delete a[b]},lock:function(a){this._lock=a},unLock:function(){this._lock=null},isLocked:function(a){return!this._lock||
!a?!1:this._lock!==a&&r.isDescendant(a,this._lock)},destroy:function(){k.forEach(this._elements,function(a){this._cleanHandles(a.handles)},this);this._elements=null}})})},"anaplan/settings/ModelContentsTree/Tree":function(){define(["dojo/_base/declare","anaplan/widgets/Tree","dojo/_base/lang","anaplan/utils/EntityLongIdHelper","anaplan/constants"],function(g,b,k,p,r){return g("anaplan.settings.ModelContentsTree.Tree",[b],{store:null,region:"center",showRoot:!1,autoExpand:!0,getLabelClass:function(b){b=
this.model.store.getIdentity(b);if(b===r.MODEL_CONTENT_NEW_LIST_ENTITY_LONG_ID||b===r.MODEL_CONTENT_NEW_LINE_ITEM_SUBSET_ENTITY_LONG_ID||b===r.MODEL_CONTENT_NEW_TIME_RANGE_ENTITY_LONG_ID)return"newItemLabel";b=p.getEntityTypeIndex(b);return b===r.HIERARCHY_ENTITY_TYPE_INDEX||b===r.LINE_ITEM_SUBSET_ENTITY_TYPE_INDEX||b===r.TIME_RANGE_ENTITY_TYPE_INDEX?"listLabel":""},_buildClassesList:function(){var b=anaplan.constants,f;!1===k.isObject(this._iconClassList1)&&(f={},f[b.MODEL_CONTENT_TIMESCALE_ENTITY_LONG_ID]=
"anaplanEditorIcon anaplanEditorIconTime",f[b.MODEL_CONTENT_VERSION_ENTITY_LONG_ID]="anaplanEditorIcon anaplanEditorIconVersions",f[b.MODEL_CONTENT_USERS_ENTITY_LONG_ID]="anaplanEditorIcon anaplanEditorIconUser",f[b.MODEL_CONTENT_IMPORTS_ENTITY_LONG_ID]="anaplanEditorIcon anaplanEditorIconImport",f[b.MODEL_CONTENT_HIERARCHY_ENTITY_LONG_ID]="anaplanEditorIcon anaplanEditorIconGeneralList",f[b.MODEL_CONTENT_LINE_ITEM_SUBSET_ENTITY_LONG_ID]="anaplanEditorIcon anaplanEditorIconLineItemSubset",f[b.MODEL_CONTENT_MODULE_ENTITY_LONG_ID]=
"anaplanModuleIcon anaplanModuleIconGreen",f[b.MODEL_CONTENT_DASHBOARD_ENTITY_LONG_ID]="anaplanEditorIcon anaplanEditorIconDashboard",f[b.MODEL_CONTENT_REMOTE_MODEL_ENTITY_LONG_ID]="anaplanEditorIcon anaplanEditorIconConnections",this._iconClassList1=f);!1===k.isObject(this._iconClassList2)&&(f={},f[b.MODEL_CONTENT_LISTS_AND_ROLLUPS_ENTITY_LONG_ID]="anaplanEditorIcon anaplanEditorIconListsAndRollups",f[b.MODEL_CONTENT_HISTORY_ENTITY_LONG_ID]="anaplanEditorIcon anaplanEditorIconShowHistory",f[b.MODEL_CONTENT_EXPORTS_ENTITY_LONG_ID]=
"anaplanEditorIcon anaplanEditorIconExport",f[b.MODEL_CONTENT_ACTION_ENTITY_LONG_ID]="anaplanEditorIcon anaplanEditorIconRunImport",f[b.MODEL_CONTENT_CONTENTS_ENTITY_LONG_ID]="anaplanEditorIcon anaplanEditorIconContents",f[b.MODEL_CONTENT_REVISION_TAGS_ENTITY_LONG_ID]="anaplanEditorIcon anaplanEditorIconRevisionTags",f[b.MODEL_CONTENT_TAGS_ENTITY_LONG_ID]="anaplanEditorIcon anaplanEditorIconDataTags",this._iconClassList2=f)},getIconClass:function(b){b=this.model.store.getIdentity(b);var f=p.getEntityTypeIndex(b);
this._buildClassesList();return k.isString(this._iconClassList1[b])?this._iconClassList1[b]:f===r.HIERARCHY_ENTITY_TYPE_INDEX||f===r.LINE_ITEM_SUBSET_ENTITY_TYPE_INDEX?"listIcon":k.isString(this._iconClassList2[b])?this._iconClassList2[b]:"noIcon"}})})},"anaplan/view/ModelManagement/ModelsTab":function(){define("anaplan/api/service anaplan/common/SelectiveAccess anaplan/constants anaplan/data/ModelContentCache anaplan/Exceptions anaplan/utils/UIHelper dijit/_FocusMixin dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-attr dojo/dom-style dojo/topic dojo/i18n!anaplan/nls/modelManagement dojo/text!anaplan/templates/ModelManagement/ModelsTab.html anaplan/widgets/Tooltip anaplan/utils/UIHelper anaplan/react/_ReactContainerMixin anaplan/widgets/MasterSelector anaplan/widgets/Button dijit/form/CheckBox dijit/form/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A){return q([a,s,f,l,e,A],{baseClass:"modelManagementModelsTab",templateString:w,showArchivedModelsCheckBox:null,showArchivedModelsLabel:null,constructor:function(a){this._workspaceId=a.workspaceId;this._workspaceName=a.workspaceName;this._selectedModelId=this._modelId=a.modelId;this._selectedModelSummary=this._selectedModelName=null;this._scrollToSelectedModelRequired=!0},onCopyModel:function(){},onCopyAndArchiveModel:function(){},onCopyAndSanitizeModel:function(){},
onDeleteModel:function(){},onExportModel:function(){},onImportModel:function(){},onNewModel:function(){},onRenameModel:function(){},onSetModelOnline:function(){},onSetModelOffline:function(){},onChangeModelModestatus:function(){},onCompareSync:function(){},onSwitchModel:function(){},getSelectedModelActiveState:function(){return this._getSelectedModelActiveState()},getSelectedModelId:function(){return this._selectedModelId},getSelectedModelName:function(){return this._selectedModelName},getSelectedModelSummary:function(){return this._selectedModelSummary},
postCreate:function(){try{this.containerNode=this.actionButtons;this.setComponentType(App.components.ModelViewButtons);this.inherited(arguments);n.setText(this.showArchivedModelsLabel,m.labelShowArchivedModels);u.set(this.showArchivedModelsLabel,"for",this.showArchivedModelsCheckBox.id);var a=g.workspace.hasEntitlement("ALM");this.componentProps={id:"modelViewButtons",onButtonClick:this.onButtonClick.bind(this),openModel:{displayed:!0,disabled:!0},newModel:{displayed:!0,disabled:!1},copyModel:{displayed:!0,
disabled:!0},deleteModel:{displayed:!0,disabled:!0},renameModel:{displayed:!0,disabled:!0},importModel:{displayed:!0,disabled:!1},exportModel:{displayed:!0,disabled:!0},copyArchive:{displayed:!0,disabled:!0},copySanitize:{displayed:!0,disabled:!0},changeMode:{displayed:!0,disabled:!0},online:{displayed:!0,disabled:!0},offline:{displayed:!1,disabled:!0},compareSync:{displayed:!0,disabled:!a,enterpriseWarning:!a}};this._updateModelSelector();this._updateCompareSyncButtonState()}catch(b){throw new r.ClientException("ModelsTab#postCreate",
b);}},onButtonClick:function(a,b){var c={newModel:this._onNewModel.bind(this),openModel:this._onOpen.bind(this),copyModel:this._onCopyModel.bind(this),deleteModel:this._onDeleteModel.bind(this),renameModel:this._onRenameModel.bind(this),exportModel:this._onExportModel.bind(this),copyArchive:this._onCopyAndArchiveModel.bind(this),copySanitize:this._onCopyAndSanitizeModel.bind(this),importModel:this._onImport.bind(this),changeMode:function(){this.onChangeModelModestatus(this._selectedModelId,this._selectedModelName)}.bind(this),
online:function(){this.onSetModelOnline(this._selectedModelId,this._selectedModelName)}.bind(this),offline:function(){this.onSetModelOffline(this._selectedModelId,this._selectedModelName)}.bind(this),compareSync:function(){this.onCompareSync(this._selectedModelId,this._selectedModelName)}.bind(this)};if(c[a])c[a]();else throw new r.ClientException("ModelsTab#onButtonClick","Unknown button action: "+a);},scrollToSelection:function(){this.modelSelector.scrollToSelection()},setModelId:function(a){this._modelId=
a;this._updateModelSelector()},startup:function(){try{this.inherited(arguments),this._updateActionButtonState()}catch(a){throw new r.ClientException("ModelsTab#startup",a);}},_setNotSelectionButtonStates:function(){this.componentProps.newModel.disabled=!1;this.componentProps.openModel.disabled=!0;this.componentProps.copyModel.disabled=!0;this.componentProps.copyArchive.disabled=!0;this.componentProps.copySanitize.disabled=!0;this.componentProps.deleteModel.disabled=!0;this.componentProps.renameModel.disabled=
!0;this.componentProps.exportModel.disabled=!0;this.componentProps.changeMode.disabled=!0;this.componentProps.online.disabled=!0;this.componentProps.online.displayed=!0;this.componentProps.offline.disabled=!0;this.componentProps.compareSync.disabled=!0},_getSelectedModelActiveState:function(){var a=p.getModelSummary(this._selectedModelId);return a?a.activeState:null},_onCopyModel:function(){try{if(this._workspaceId)this.onCopyModel(this._selectedModelId,this._selectedModelName)}catch(a){throw new r.ClientException("ModelsTab#_onCopyModel",
a);}},_onCopyAndArchiveModel:function(){this.onCopyAndArchiveModel(this._selectedModelId,this._selectedModelName)},_onCopyAndSanitizeModel:function(){this.onCopyAndSanitizeModel(this._selectedModelId,this._selectedModelName)},_onDeleteModel:function(){this.onDeleteModel(this._selectedModelId,this._selectedModelName)},_onExportModel:function(){if(this._workspaceId)this.onExportModel(this._selectedModelId,this._selectedModelName)},_onImportModel:function(){try{if(this._workspaceId)this.onImportModel()}catch(a){throw new r.ClientException("ModelsTab#_onImportModel",
a);}},_onModelSelectionChange:function(a,b){try{this._selectedModelId=a,this._selectedModelName=b,this._selectedModelSummary=p.getModelSummary(a),this._updateActionButtonState()}catch(c){throw new r.ClientException("ModelsTab#_onModelSelectionChange",c);}},_onRenameModel:function(){try{if(this._workspaceId)this.onRenameModel(this._selectedModelId,this._selectedModelName)}catch(a){throw new r.ClientException("ModelsTab#_onRenameModel",a);}},_onShowArchivedModelsCheckBoxChange:function(){this._updateModelSelector()},
_onImport:function(){var a=this._modelId,b=p.getWorkspaceInfo();if(!a&&b&&(b=b.modelSummaries)&&b.length)for(var c=0;c<b.length;c++){var d=b[c].activeState;if(d!==k.ACTIVE_STATE_ARCHIVED&&d!==k.ACTIVE_STATE_LOCKED){a=b[c].modelId;break}}a?this._onImportModel():n.showInfoDialog(m.importFailureWithNoModels,{title:m.titleImportModel})},_onNewModel:function(){if(this._workspaceId)this.onNewModel()},_onOpen:function(){if(null!==this._selectedModelId)this.onSwitchModel(this._selectedModelId,this._selectedModelName)},
_updateActionButtonState:function(){try{var a=k.MODEL_ENTITY_TYPE_INDEX,c=b.canUpdate(a);this.componentProps.newModel.displayed=b.canCreate(a);this.componentProps.importModel.displayed=b.canImport(a);this.componentProps.exportModel.displayed=b.canExport(a);this.componentProps.copySanitize.displayed=b.canExport(a);if(this._selectedModelSummary){var d=this._selectedModelSummary.activeState;if(null!==d){this.componentProps.openModel.disabled=d===k.ACTIVE_STATE_ARCHIVED;this.componentProps.copyModel.disabled=
d===k.ACTIVE_STATE_ARCHIVED;this.componentProps.copyArchive.disabled=d===k.ACTIVE_STATE_ARCHIVED;this.componentProps.copySanitize.disabled=d===k.ACTIVE_STATE_ARCHIVED;this.componentProps.deleteModel.disabled=!1;this.componentProps.renameModel.disabled=!1;this.componentProps.exportModel.disabled=d===k.ACTIVE_STATE_ARCHIVED;var e=c&&(d===k.ACTIVE_STATE_MAINTENANCE||d===k.ACTIVE_STATE_PRODUCTION_MAINTENANCE),f=c&&(d===k.ACTIVE_STATE_UNLOCKED||d===k.ACTIVE_STATE_PRODUCTION);this.componentProps.online.displayed=
e;this.componentProps.offline.displayed=!e;this.componentProps.online.disabled=!e;this.componentProps.offline.disabled=!f;this.componentProps.changeMode.disabled=!1;this._updateCompareSyncButtonState()}else this._setNotSelectionButtonStates()}else this._setNotSelectionButtonStates()}catch(h){throw new r.ClientException("ModelsTab#_updateActionButtonState",h);}this.renderReact(this.componentProps)},_updateCompareSyncButtonState:function(){if(g.workspace.hasEntitlement("ALM")){var a=null,b=!1;if(this._selectedModelSummary){var c=
this._selectedModelSummary.activeState,d=this._selectedModelSummary.validSyncTarget;c===k.ACTIVE_STATE_ARCHIVED||c===k.ACTIVE_STATE_LOCKED?a=m.tooltipCompareSyncWrongModeStatus:d?b=!0:a=m.tooltipCompareSyncNoSources;this.componentProps.compareSync.disabled=!b;this.componentProps.compareSync.tooltip=a}}},uninitialize:function(){this._compareSyncButtonTooltip&&this._compareSyncButtonTooltip.destroy()},_updateModelSelector:function(){if(!this._destroyed)try{var a=p.getWorkspaceInfo();if(a){var b=this._getModelSummariesForVisibleModels(a),
c=!1;d.forEach(b,function(a){a.taskSummary=null;c=c||a.modelId===this._selectedModelId}.bind(this));this.modelSelector.set("modelSummaries",b);this._selectedModelId=c?this._selectedModelId:null;this._selectedModelName=p.getModelName(this._selectedModelId);this._selectedModelSummary=p.getModelSummary(this._selectedModelId);this.modelSelector.set("value",{value:this._selectedModelId},!this._scrollToSelectedModelRequired);this._scrollToSelectedModelRequired=!1;this._updateActionButtonState()}}catch(e){throw new r.ClientException("ModelsTab#_updateModelSelector",
e);}},_getModelSummariesForVisibleModels:function(a){a=h.clone(a.modelSummaries);if(this.showArchivedModelsCheckBox.get("checked"))return a;for(var b=[],c=0;c<a.length;c++)a[c].activeState!==k.ACTIVE_STATE_ARCHIVED&&b.push(a[c]);return b}})})},"anaplan/view/Grid":function(){define("anaplan/utils/UIHelper anaplan/data/Aggregator dojo/_base/declare anaplan/constants anaplan/format/util anaplan/utils/JsHelper anaplan/utils/DrillDownWindowManager anaplan/common/SelectiveAccess anaplan/data/ModelContentCache anaplan/gridlet/Themes anaplan/data/ContextCache anaplan/layout/ManagedContainer anaplan/view/Grid/_Views anaplan/view/_EditorHelper anaplan/data/ModelContentHelper anaplan/Exceptions anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/cellmenu/DynamicCellMenuDelegate anaplan/gridlet/cellmenu/SelectionCellMenuDelegate anaplan/gridlet/GridletFactory anaplan/gridlet/Selection anaplan/gridlet/ViewRequestGridModel anaplan/gridlet/isGrid2Enabled anaplan/quicksum/QuickSum anaplan/quicksum/QuickSumContainer anaplan/utils/ChangeValidator anaplan/utils/EntityLongIdHelper anaplan/utils/SelectionHelper anaplan/utils/UIHelper anaplan/validators/ModuleBlueprintValidator anaplan/view/FormulaBar anaplan/view/FormulaEditor anaplan/view/ModuleFormulae anaplan/view/FormulaWindow anaplan/widgets/ViewBar anaplan/view/_ComparisonViewCellDecorator anaplan/view/_LinkCellDecorator anaplan/view/_SubsidiaryViewLabelDecorator anaplan/view/_TreeLabelDecorator anaplan/utils/CookieHelper dijit/layout/BorderContainer dojo/_base/html dojo/window dojo/on dojo/json dojo/fx dojo/_base/fx dojo/_base/lang dojo/topic dojo/_base/array dojo/dom-style dojo/dom-geometry dojo/dom-construct dojo/_base/window dojo/dom-class dojo/fx/easing dojo/i18n!anaplan/nls/editor".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I,P,J,O,T,Q,ca,Z,X,V,da,S,$,M,aa,W,Y,R,ba,ga,ea,la,ja){return k([d],{design:"headline",gutters:!1,liveSplitters:!1,closeSubView:function(){if(!this._previousView||!this._previousView.viewReference&&!this._previousView.viewDefinition)console.warn("Grid.closeSubView: missing previous view reference or view definition");else{if(this._previousView.hasOwnProperty("viewDefinition")&&null!==this._previousView.viewDefinition){var a=
M.mixin(M.clone(this._previousView.viewDefinition),{currentPageIdentifiers:[],globalContextIdentifiers:e.getContextIdentifiers()});this._gridlet._gridController.revertView({viewDefinition:a,listFilterChanges:this._previousView.listFilterChanges})}else a=M.mixin(M.clone(this._previousView.viewReference),{globalContextIdentifiers:e.getContextIdentifiers()}),this._gridlet._gridController.revertView({viewReference:a,listFilterChanges:this._previousView.listFilterChanges});this._previousView=null;this._viewBar.reset();
b.gather()}},constructor:function(a){this._quickSumEnabledByUser=a.showQuickSumOnStartup||!1;this._showBreakbackMarkersOnStartup=a.showBreakbackMarkersOnStartup||!1;var b=-1;this._staticContextIdentifiers=a.viewReference?[C.entityLongIdToEntityLongIdIdentifier(a.viewReference.entityDefaultViewEntityLongId)]:a.viewDefinition.staticContextIdentifiers;this._views=new q({moduleViewReference:a.moduleViewReference});this._views.initialize();var c=new O({views:this._views}),d=new P(a.viewDefinition||{}),
f=new T,b=-1;if(a.moduleViewReference){var h=a.moduleViewReference;h.hasOwnProperty("entityDefaultViewEntityLongId")&&(b=h.entityDefaultViewEntityLongId)}this._model=new A({viewDefinition:a.viewDefinition,viewReference:M.mixin(a.viewReference,{globalContextIdentifiers:e.getContextIdentifiers()}),labelDecorators:[c,f],cellDecorators:[d,new J],showBreakbackMarkers:this._showBreakbackMarkersOnStartup,containerEntityLongId:b});this._params=a.params||{};this._globalFormulaEditModule=a.globalFormulaEditModule||
null;this._previousView=a.previousView||null;this._selectionInitialized=!1},addModuleFormula:function(a){if(this._moduleFormulae){var b=this._moduleFormulae.addModuleFormula(a);setTimeout(function(){b.focus()},200)}},getCurrentSelection:function(){var a=this._gridlet;return!a?null:a._selection},getGridController:function(){return!this._gridlet?null:this._gridlet.getGridController()},getLineItemId:function(){return this._lineItemId},getPageInfo:function(){return this._pageInfo},getSelectedColumnStyle:function(){var a=
null;try{var b=this.getCurrentSelection(),c=this.getGridController();if(b&&!b.isWholeRowSelected()&&!b.isWholeGridSelected()){var d=G.getColumnsSelection(b,c.getContext());if(d&&d.length)var e=d[0],a=e.style?e.style:null}}catch(f){L.throwClientException(this,f)}return a},focus:function(){try{if(this._gridlet)if(this._isFormulaEditMode()){if(this._formulaWindow){this._formulaWindow.focus();return}}else{this._gridlet.focus();return}this.inherited(arguments)}catch(a){console.error(this.id,"focus",a)}},
getPreviousView:function(){return M.clone(this._previousView)},hide:function(a){a===p.QUICK_SUM&&(this._quickSumEnabledByUser=!1,this._destroyQuickSum())},show:function(a){a===p.QUICK_SUM&&(this._quickSumEnabledByUser=!0,this._createQuickSum())},isDirty:function(){if(this._model&&this._model.isDirty())return!0;var a=this._getActiveEditor();return!a?!1:a.get("editMode")},isSubView:function(){return null!==this._previousView},onReset:function(){},onSelectionChange:function(){},onUpdate:function(){},
openDefaultView:function(){if(this._areWeInMiddleOfModuleFormulaEdit())L.showDirtyTabsMessage([this.getParent().get("title")]);else{this._previousView=null;this._viewBar.reset();var a={entityDefaultViewEntityLongId:u.getModuleEntityLongIdForViewDefinitionOrReference(l,this._model.getViewDefinition()),globalContextIdentifiers:e.getContextIdentifiers()};this._gridlet._gridController.switchView(a);b.gather()}},openSubView:function(a){this._areWeInMiddleOfModuleFormulaEdit()?(console.warn(this.id,"TODO: cannot exit blueprint mode because in middle of module formula edit"),
L.showDirtyTabsMessage([this._getModuleLabel()])):(a={entityDefaultViewEntityLongId:a,globalContextIdentifiers:e.getContextIdentifiers()},a=this._gridlet._gridController.switchView(a),null===this._previousView&&(this._previousView=a),this._viewBar.reset(),this._viewBar.showCloseButton(),b.gather())},revertView:function(a){try{this._areWeInMiddleOfModuleFormulaEdit()?(console.warn(this.id,"TODO: cannot exit blueprint mode because in middle of module formula edit"),L.showDirtyTabsMessage([this._getModuleLabel()])):
(this._gridlet._gridController.revertView(a),this._previousView=null,this._viewBar.reset(),b.gather())}catch(c){L.throwClientException(this,c)}},postCreate:function(){this.inherited(arguments);this.own(aa.subscribe("anaplan/formula/startGlobalEdit",M.hitch(this,"_setGlobalFormulaEditModule")),aa.subscribe("anaplan/formula/endGlobalEdit",M.hitch(this,"_setGlobalFormulaEditModule")),aa.subscribe("anaplan/formula/detach",M.hitch(this,"_detachFormulaWindow")));this._gridletSelectionChangeTopic="anaplan/view/Grid/"+
this.id+"/selectionChange"},startup:function(){this._started&&console.warn(this.id,"startup");try{this.inherited(arguments);this._toggleLineItemFormulaEditor(!1);var a=new E({validators:[new K]}),b=M.mixin({model:this._model,region:"center",changeValidator:a,selection:(new x).initializeToDefaults(),showBreakbackMarkersOnStartup:this._showBreakbackMarkersOnStartup,dynamicCellMenuDelegate:new m,selectionCellMenuDelegate:new w({drillDownLevel:0,drillDownId:null}),drillDownLevel:0,drillDownId:null,useGrid2:!0},
this._params);this._gridlet=(new z({editorFactory:new t})).createGridlet(b);this._lineItemFormulaEditor.set("gridlet",this._gridlet);var c=V(this._gridlet,"selectionChange",M.hitch(this,"_onSelectionChange")),d=V(this._gridlet,"update",M.hitch(this,"_onUpdate")),e=V(this._gridlet,"subsidiaryViewSelect",M.hitch(this,"_onSubsidiaryViewSelect")),f=V(this._gridlet,"reset",M.hitch(this,"_reset")),h=V(this._gridlet,"blur",function(){this._gridlet&&aa.publish(this._gridletSelectionChangeTopic,this._gridlet.id,
null)}.bind(this)),g=V(window,"onscroll",M.hitch(this,"_onWindowScroll"));this.own(c,d,e,f,h,g);var l=new ca({region:"center",gutters:!1});this._viewBar=this._createViewBar();l.addChild(this._viewBar);l.addChild(this._gridlet);this.addChild(l);this._createQuickSum();this.focus()}catch(k){console.error(k)}},reset:function(){this._reset()},resume:function(){this._suspended||console.warn(this.id+" resume");var a=this.getGridController();a&&a.resume();this._createQuickSum();this.inherited(arguments);
this.focus()},setGlobalContext:function(a,b){a&&this._model&&this._gridlet._gridController.setGlobalContext(a,b)&&this._reset()},suspend:function(){this._suspended&&console.warn(this.id+" suspend");var a=this.getGridController();a&&a.suspend();this._destroyQuickSum();this.inherited(arguments)},uninitialize:function(){this._views&&this._views.destroy();this._destroyQuickSum();this.inherited(arguments)},_createViewBar:function(){var b=new I({region:"top",model:this._model,themeId:a.getThemeIdFromViewDefinition(this,
this._model._themeId)}),c=V(b,"comparisonModeToggle",M.hitch(this,"_onComparisonModeToggle")),d=V(b,"closeViewButtonClick",M.hitch(this,"_onCloseViewButtonClick"));this.own(c,d);this.isSubView()&&b.showCloseButton();return b},_attachFormulaWindow:function(a){try{Q.createCookie("formulawindow",Z.coords(this._formulaWindow.domNode));var b=this._model.getModuleEntityLongId();aa.publish("anaplan/views",b);var d=null;if("ModuleFormulae"===this._attachAs)var e=Z.coords(this._moduleFormulae.domNode),d={x:Math.max(e.x,
0),y:Math.max(e.y,0)};else var f=this._viewBar.isDisplayed()?this._viewBar.coords():Z.coords(this._gridlet.domNode),d={x:Math.max(f.x,0),y:Math.max(f.y,0)};Y.set(this._formulaWindow.titleBar,"display","none");S.chain([S.slideTo({node:this._formulaWindow.domNode,left:d.x,top:d.y,duration:500,easing:la.sineIn,onEnd:M.hitch(this,function(){R.setMarginBox(this._formulaWindow.domNode,{l:d.x,t:d.y})})}),$.animateProperty({node:this._formulaWindow.domNode,properties:{width:-1<W.indexOf(["FormulaBar","ModuleFormulae"],
this._attachAs)?R.getContentBox(this.domNode).w:200,height:-1<W.indexOf(["FormulaBar","ModuleFormulae"],this._attachAs)?100:R.getContentBox(this.domNode)},onEnd:M.hitch(this,function(){try{if(this.domNode){if("ModuleFormulae"===this._attachAs){var b=M.mixin(h.getPropertiesForEditor(this._formulaWindow),{viewRequestGridModel:this._model});this._formulaWindow.destroyRecursive();this._formulaWindow=null;if(a===h.ATTACH_REASON_DOCK){var d=this._moduleFormulae.dockModuleFormula(b);setTimeout(function(){d.focus()},
200);return}if(a===h.ATTACH_REASON_RESET){this._moduleFormulae.rebuild();return}if(a===h.ATTACH_REASON_SAVE){this._moduleFormulae.rebuild();return}}this._toggleLineItemFormulaEditor("FormulaEditor"===this._attachAs)}else this._formulaWindow.destroyRecursive(),this._formulaWindow=null}catch(e){g.showErrorReporter(new c.ClientException("_attachFormulaWindow animateProperty _onEnd",e))}})})]).play()}catch(l){g.showErrorReporter(new c.ClientException("_attachFormulaWindow",l))}},_createQuickSum:function(){this._quickSumEnabledByUser&&
!this._quickSum&&(this._quickSum=new y(this._gridletSelectionChangeTopic),this._quickSumOnShowHandle=V(this._quickSum,"Show",this._showQuickSum.bind(this)),this._quickSumOnHideHandle=V(this._quickSum,"Hide",this._hideQuickSum.bind(this)))},_destroyQuickSum:function(){this._quickSumOnShowHandle&&(this._quickSumOnShowHandle.remove(),this._quickSumOnShowHandle=null);this._quickSumOnHideHandle&&(this._quickSumOnHideHandle.remove(),this._quickSumOnHideHandle=null);this._quickSum&&(this._quickSum.destroy(),
this._quickSum=null)},_showQuickSum:function(a){if(!this._quickSumContainer){if(!a)return;this._quickSumContainer=new v({quickSumModel:this._quickSum,region:"bottom"});this.addChild(this._quickSumContainer)}this._quickSumContainer.render()},_hideQuickSum:function(){if(this._quickSumContainer){try{this.removeChild(this._quickSumContainer),this._quickSumContainer.destroy()}catch(a){}this._quickSumContainer=null}},_detachFormulaWindow:function(){var a=null,b=null,d=null,e=null,f=-1,l=null;try{l=this._getActiveEditor();
if(!l)return;if(l instanceof H){l.focus();return}l instanceof D&&(e="FormulaBar");l instanceof N&&(e="FormulaEditor");-1<W.indexOf(this._moduleFormulae.getChildren(),l)&&(e="ModuleFormulae",f=this._moduleFormulae.getIndexOfChild(l));a=Z.coords(l.domNode);b=l.getInputSelection();d=h.getPropertiesForEditor(l)}catch(k){g.showErrorReporter(new c.ClientException("_detachFormulaWindow error processing existing editor",k));return}var m=null;try{m=new H(M.mixin(d,{attachAs:e,gridlet:this._gridlet,globalFormulaEditModule:this._globalFormulaEditModule,
showTitle:!0,viewRequestGridModel:this._model,windowTitle:this._globalFormulaEditModule,style:"left:"+a.x+"px;top:"+a.y+"px;"}));Y.set(m.titleBar,"display","none");m.startup();ba.place(m.domNode,ga.body());m.resize({w:a.w,h:a.h});var q=V(m,"attach",M.hitch(this,function(){this._attachFormulaWindow(h.ATTACH_REASON_DOCK)})),n=V(m,"reset",M.hitch(this,function(){this._attachFormulaWindow(h.ATTACH_REASON_RESET)})),s=V(m,"save",M.hitch(this,function(){this._attachFormulaWindow(h.ATTACH_REASON_SAVE)}));
this.own(q,n,s);this._attachAs=e;this._attachAsIndex=f;this._formulaWindow=m}catch(p){g.showErrorReporter(new c.ClientException("_detachFormulaWindow error creating formula window",p));m&&m.destroyRecursive();return}try{l instanceof D||l instanceof N?(this.removeChild(this._lineItemFormulaEditor),this._lineItemFormulaEditor.destroyRecursive(),this._lineItemFormulaEditor=null):(this._moduleFormulae.removeChild(l),l.destroyRecursive())}catch(r){g.showErrorReporter(new c.ClientException("_detachFormulaWindow error removing existing formula editor",
r));return}try{var t=h.getFormulaWindowCoords();S.chain([$.animateProperty({node:m.domNode,properties:{width:t.w,height:t.h},onEnd:M.hitch(this,function(){try{m.resize({w:t.w,h:t.h})}catch(a){g.showErrorReporter(new c.ClientException("_detachFormulaWindow animateProperty _onEnd",a))}})}),S.slideTo({node:m.domNode,left:t.x,top:t.y,duration:500,easing:la.sineIn,onEnd:M.hitch(this,function(){try{Y.set(m.titleBar,"display",""),m.layout(),m.setInputSelection(b),m.focus()}catch(a){g.showErrorReporter(new c.ClientException("_detachFormulaWindow slideTo _onEnd",
a))}})})]).play()}catch(u){g.showErrorReporter(new c.ClientException("_detachFormulaWindow error during animation",u))}},_enableDisableFormula:function(){if(s.isAuthorized(p.userActions.MAINTAIN_CUSTOM_LINE_ITEMS))if(null===this._lineItemId){if(this._lineItemFormulaEditor&&this._lineItemFormulaEditor.set("disabled",!0),this._moduleFormulae){var a=this._isFormulaEditMode();W.forEach(this._moduleFormulae.getChildren(),function(b){b.get("editMode")||b.set("disabled",a)})}}else this._setFormulaDisabled(this._isFormulaEditMode());
else this._setFormulaDisabled(!0)},_getActiveEditor:function(){if(this._formulaWindow)return this._formulaWindow;for(var a=this._getEditors(),b=0;b<a.length;b++)if(a[b]&&a[b].get("editMode"))return a[b];return null},_getCellPrecision:function(a){var b,c;a&&("FORMAT"===a.dataType?a.cellValue&&a.cellValue.dataType&&(c=a.cellValue.dataType,"ENTITY"===c?(a=a.cellValue.hierarchyEntityLongId)&&(b=u.getHierarchyId(l,a)):"TIME_ENTITY"===c?(a=a.cellValue.periodType,null!==a&&(b=a.entityId)):b=a.cellValue&&
a.cellValue.dataType?a.cellValue.dataType:""):b="DATE"===a.dataType?r.formatDateCellText(a.originalText):null!==a.originalText?a.originalText:"");n.isNullOrUndefined(b)&&(b="");return b},_getEditors:function(){var a=[];this._lineItemFormulaEditor&&a.push(this._lineItemFormulaEditor);if(this._moduleFormulae)var b=this._moduleFormulae.getChildren(),a=a.concat(b);return a},_getModuleFormulaeIsEmpty:function(){return!this._moduleFormulae?!0:0===this._moduleFormulae.getChildren().length},_getModuleLabel:function(){if(!this._model)return null;
var a=this._model.getModuleEntityLongId();return u.getModuleLabel(l,a)},_getWriteableLeafCellCount:function(a){var b=-1;try{a&&(b=a.writeableLeafCellCount)}catch(d){throw new c.ClientException("Grid._getWriteableLeafCellCount",d);}return b},_hideModuleFormulae:function(){if(!this._moduleFormulae||"none"===this._moduleFormulae.domNode.style.display)return!1;this._moduleFormulae.domNode.style.display="none";return!0},_hideViewBar:function(){if(!this._viewBar||!this._viewBar.isDisplayed())return!1;this._viewBar.hide();
return!0},_showViewBar:function(a){var b=!1;if(!this._viewBar)return console.warn(this.id,"_showViewBar expected to find viewBar and did not"),!1;this._viewBar.isDisplayed()||(this._viewBar.show(),b=!0);this._viewBar.updatePageSelectors(this._pageInfo,a);this._isFormulaEditMode()?this._viewBar.disablePageSelectors():this._viewBar.enablePageSelectors();a=this.getGridController();a=null!==a?a.getViewName():"";this._viewBar.setViewName(a);this.isSubView()&&this._viewBar.showCloseButton(this.isSubView());
this._viewBar.setViewDefinition(this._model.getViewDefinition(),this._model.getPageInfo());return b},_isFormulaEditMode:function(){return null!==this._globalFormulaEditModule},_onCloseViewButtonClick:function(){this.closeSubView()},_onComparisonModeToggle:function(a){var c=this._model.getViewDefinition();a&&c.comparisonMode||!a&&!c.comparisonMode||(a?this._previousComparisonInfo&&M.mixin(c,this._previousComparisonInfo):(this._previousComparisonInfo={comparisonBase:c.comparisonBase,comparisonIdentifier:c.comparisonIdentifier,
comparisonMode:c.comparisonMode,useComparisonColourCoding:c.useComparisonColourCoding},delete c.comparisonBase,delete c.comparisonIdentifier,delete c.comparisonMode,delete c.useComparisonColourCoding),this._gridlet._gridController.setViewDefinition(c),b.gather(),this.focus())},_onSelectionChange:function(a){try{if(this._selectionInitialized&&this._isFormulaEditMode()){var b=this.getGridController();G.publishExpression(a,b.getContext(),this._globalFormulaEditModule)}else this._editorCoords=a?a.clone():
null,this._areWeInMiddleOfLineItemFormulaEdit()||(this._updateLineItemFormula(a),this._enableDisableFormula());this._selectionInitialized=!0;this._gridlet&&aa.publish(this._gridletSelectionChangeTopic,this._gridlet.id,a)}catch(d){g.showErrorReporter(new c.ClientException("Grid: _onSelectionChange",d))}finally{this.onSelectionChange(a)}},_onSubsidiaryViewSelect:function(a){this.openSubView(a)},_areWeInMiddleOfLineItemFormulaEdit:function(){return this._getActiveEditor()===this._lineItemFormulaEditor||
this._formulaWindow&&"ModuleFormulae"!==this._attachAs},_areWeInMiddleOfModuleFormulaEdit:function(){return null===this._getActiveEditor()?!1:!this._areWeInMiddleOfLineItemFormulaEdit()},_onUpdate:function(a){try{this._pageInfo=a[1];var b=!1;this._model.isDataView()?(this._lineItemFormulaEditor&&this._lineItemFormulaEditor.get("showTitle")&&(this._lineItemFormulaEditor.set("showTitle",!1),b=!0),b=this._showViewBar(a[0].serialNumbers.pageInfoSerialNumber)||b,b=this._hideModuleFormulae()||b):(this._lineItemFormulaEditor&&
!this._lineItemFormulaEditor.get("showTitle")&&(this._lineItemFormulaEditor.set("showTitle",!0),b=!0),b=this._hideViewBar()||b,b=this._showModuleFormulae()||b);if(!this._areWeInMiddleOfLineItemFormulaEdit()){var d=this.getCurrentSelection();this._updateLineItemFormula(d)}this._areWeInMiddleOfModuleFormulaEdit()||(b=this._updateModuleFormulae()||b);b&&this.resize();if(!this._gridlet._selection){var e=this.getGridController();e&&e.setBestSelection()}}catch(f){g.showErrorReporter(new c.ClientException("Grid: _onUpdate",
f))}finally{this.onUpdate(a)}},_onWindowScroll:function(){0<X.getBox().t&&2<f.getWindowCount()?this._gridlet.set("forceOverflowX","hidden"):this._gridlet.set("forceOverflowX",null)},_onFormulaReset:function(){try{this.focus()}catch(a){L.throwClientException(this,a)}},_reset:function(){try{this._viewBar&&(this._viewBar.disablePageSelectors(),this._viewBar.reset()),this._areWeInMiddleOfLineItemFormulaEdit()||this._lineItemFormulaEditor&&this._lineItemFormulaEditor.reset(),this._selectionInitialized=
!1}catch(a){g.showErrorReporter(new c.ClientException("Grid: _reset",a))}finally{this.onReset()}},_setFormulaDisabled:function(a){for(var b=this._getEditors(),c=0;c<b.length;c++){var d=b[c];d&&!d.get("editMode")&&d.set("disabled",a)}},_setGlobalFormulaEditModule:function(a){null!==a?this._viewBar.disablePageSelectors():this._viewBar.enablePageSelectors();this._gridlet&&(this._gridlet.setReadOnly(null!==a),null===a&&!this._suspended&&(this._editorCoords&&(this._gridlet.setCurrentSelection(this._editorCoords),
this._updateLineItemFormula(this._editorCoords)),this.focus()));this._globalFormulaEditModule=a;this._enableDisableFormula()},_showModuleFormulae:function(){if(!this._moduleFormulae||"none"!==this._moduleFormulae.domNode.style.display)return!1;this._moduleFormulae.domNode.style.display="";return!0},_toggleLineItemFormulaEditor:function(a){try{ea.toggle(this.domNode,"formulaEditorExpanded",a);W.forEach(this._formulaHandles,function(a){a.remove()});this._formulaHandles=[];this._gridlet&&(this._gridlet.showWaitMessage(),
this._gridlet.setResizeEnabled(!1));var b=this._lineItemFormulaEditor||this._formulaWindow||null,c=null;null!==b&&(c=b.getInputSelection());var d=a?N:D,e=this._model.isDataView(),f=new d(M.mixin(h.getPropertiesForEditor(b),{checked:a,layoutPriority:a?9:2,region:a?"left":"top",showPrecisionValue:e,showTitle:!e,splitter:a,title:ja.titleLineItemFormula,globalFormulaEditModule:this._globalFormulaEditModule,gridlet:this._gridlet,viewRequestGridModel:this._model}));this.addChild(f);b instanceof H?(this._formulaWindow.destroyRecursive(),
this._formulaWindow=null):this._lineItemFormulaEditor&&(this.removeChild(this._lineItemFormulaEditor),this._lineItemFormulaEditor.destroyRecursive(),this._lineItemFormulaEditor=null);c&&f.setInputSelection(c);setTimeout(M.hitch(this,function(){var a=V(f,"change",M.hitch(this,"_toggleLineItemFormulaEditor"));this.own(a);this._formulaHandles.push(a)}),150);var g=V(f,"reset",M.hitch(this,"_onFormulaReset"));this.own(g);this._formulaHandles.push(g);this._lineItemFormulaEditor=f;this._gridlet&&(this._gridlet.setResizeEnabled(!0),
this._gridlet.domNode.style.display="",this._gridlet.hideWaitMessage());this.resize()}catch(l){console.error(l)}},_updateLineItemFormula:function(a){if(this._lineItemFormulaEditor){var b=this.getGridController(),c=G.getEntityLongIdsForCurrentSelection(a,b.getContext());this._lineItemId=(c=this._model.getFormula(c))&&c.label?c.label:null;a=G.getCurrentCell(a,b.getContext());var b=this._getCellPrecision(a),d=this._getWriteableLeafCellCount(a),e=this._lineItemFormulaEditor,f=this._model.isDataView(),
h=c&&c.expression?c.expression:"",g=u.getAllEntityLongIdsForPageInfo(this._pageInfo);c&&c.entityLongId&&g.push(c.entityLongId);e.set("showPrecisionValue",f);e.set("showWriteableLeafCellCount",0<=d&&a.isEditable&&a.isCalculated&&f);e.set("writeableLeafCellCount",d);e.set("cellPrecision",b);e.set("currentExpression",h);e.set("formulaLabel",c&&c.label?c.label:"");e.set("formulaValue",h);e.set("formulaScope",c&&c.scope?c.scope:"ALL");e.set("cssStyle",c&&c.style?c.style:"");e.set("entityLongIds",g&&g.length?
g:[]);e.set("isEditable",c&&c.isEditable?!0:!1)}else console.warn(this.id,"_updateLineItemFormula expected to find lineItemFormulaEditor and did not")},_updateModuleFormulae:function(){return!this._moduleFormulae?(this._moduleFormulae=new F({viewRequestGridModel:this._model,region:"top",layoutPriority:1,showTitle:!0}),this.own(V(this._moduleFormulae,"ContentSizeChange",M.hitch(this,"resize"))),this.addChild(this._moduleFormulae),this._enableDisableFormula(),!1):this._moduleFormulae.update()}})})},
"anaplan/widgets/ViewBar":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin anaplan/widgets/_WidgetMixin anaplan/widgets/_DomVisibleMixin dijit/_WidgetsInTemplateMixin anaplan/widgets/_PageSelectorMixin anaplan/widgets/ComparisonIndicator anaplan/widgets/ViewIndicator dojo/_base/lang dojo/on dojo/text!anaplan/templates/ViewBar.html dijit/Toolbar".split(" "),function(g,b,k,p,r,n,f,s,l,a,e,d){return g([b,k,n,f,r,p],{baseClass:"viewBar",themeClass:"theme-class-placeholder",
templateString:d,constructor:function(a){this._model=a.model;this.set("themeClass",a.themeId)},disablePageSelectors:function(){this._setPageSelectorsDisabled(!0)},enablePageSelectors:function(){this._setPageSelectorsDisabled(!1)},getModel:function(){return this._model},hidePageSelectors:function(){this._hidePageSelectors()},onCloseViewButtonClick:function(){},onComparisonModeToggle:function(){},postCreate:function(){this.inherited(arguments);this.visible(!1);this._viewIndicator=new l({},this.viewIndicatorNode);
var b=e(this._viewIndicator,"closeViewButtonClick",a.hitch(this,"_onCloseViewButtonClick"));this._comparisonIndicator=new s({},this.comparisonIndicatorNode);var d=e(this._comparisonIndicator,"change",a.hitch(this,"_onComparisonModeToggle"));this.own(b,d)},reset:function(){this.visible(!1);this._destroyPageSelectors();this._viewIndicator.reset();this._comparisonIndicator.reset()},setViewDefinition:function(a,b){this._comparisonIndicator.setViewDefinition(a,b);this.visible(!0)},setViewName:function(a){this._viewIndicator.updateViewName(a);
this.visible(!0)},showCloseButton:function(){this._viewIndicator.showCloseButton()},uninitialize:function(){this._viewIndicator&&(this._viewIndicator.destroy(),this._viewIndicator=null);this._comparisonIndicator&&(this._comparisonIndicator.destroy(),this._comparisonIndicator=null);this.inherited(arguments)},updatePageSelectors:function(a,b){this._updatePageSelectors(a,b);this.visible(!0);this._pageInfo=a},_onCloseViewButtonClick:function(a){this.onCloseViewButtonClick(a)},_onComparisonModeToggle:function(a){this.onComparisonModeToggle(a)}})})},
"anaplan/layout/ManagedContainer":function(){define(["dojo/_base/declare","dijit/layout/BorderContainer","anaplan/layout/_ManagedMixin"],function(g,b,k){return g("anaplan.layout.ManagedContainer",[b,k],{liveSplitters:!1})})},"anaplan/view/ModuleFormulae":function(){define("dojo/_base/declare dijit/_WidgetBase anaplan/data/ModelContentCache anaplan/view/ModuleFormulae/Widget anaplan/view/_EditorHelper dijit/_Container dojo/dom-class dojo/on dojo/_base/lang dojo/i18n!anaplan/nls/moduleFormula".split(" "),
function(g,b,k,p,r,n,f,s,l,a){return g("anaplan.view.ModuleFormulae",[b,n],{constructor:function(a){this._viewRequestGridModel=a.viewRequestGridModel},postCreate:function(){f.add(this.domNode,"moduleFormulae moduleFormulaeEmpty");var a=this._createHeaderNode();this.domNode.appendChild(a);a=document.createElement("div");this.domNode.appendChild(a);this.containerNode=a;this.inherited(arguments)},uninitialize:function(){},rebuild:function(){this._rebuild(this._getFormulaInfos());this.onContentSizeChange()},
update:function(){return this._conditionalRebuild(this._getFormulaInfos())},addModuleFormula:function(a){a=this._addModuleFormula({formulaScope:a,formulaString:null});a.set("editMode",!0);this.onContentSizeChange();return a},dockModuleFormula:function(a,b){var f=new p(a);this.addChild(f,b);s(f,"Reset",l.hitch(this,function(){if(this._conditionalRebuild(this._getFormulaInfos()))this.onContentSizeChange()}));s(f,"Save",l.hitch(this,function(){if(this._conditionalRebuild(this._getFormulaInfos()))this.onContentSizeChange()}));
this.onContentSizeChange();return f},onContentSizeChange:function(){},_addModuleFormula:function(b){b=new p(l.mixin({formulaInfo:b,viewRequestGridModel:this._viewRequestGridModel,editMode:!1,showTitle:!1,title:a.titleHeader,entityLongIds:this._getEntityLongIds(b.formulaScope)},r.decomposeFormulaInfo(b)));f.remove(this.domNode,"moduleFormulaeEmpty");s(b,"Reset",l.hitch(this,function(){if(this._conditionalRebuild(this._getFormulaInfos()))this.onContentSizeChange()}));s(b,"Save",l.hitch(this,function(){if(this._conditionalRebuild(this._getFormulaInfos()))this.onContentSizeChange()}));
this.addChild(b);return b},_conditionalRebuild:function(a){var b=!1;if(a&&!this._formulaInfos)b=!0;else if(a.length!==this._formulaInfos.length)b=!0;else if(a.length!==this.getChildren().length)b=!0;else for(var f=0;f<a.length;f++){var h=this.getChildren()[f],g=a[f],c=r.decomposeFormulaInfo(g);h.set("currentExpression",c.currentExpression);h.set("formulaLabel",c.formulaLabel);h.set("formulaScope",c.formulaScope);h.set("formulaValue",c.formulaValue);h.set("formulaInfo",g);h.set("entityLongIds",this._getEntityLongIds(g.formulaScope))}this._formulaInfos=
a;if(!b)return!1;this._rebuild(a);return!0},_createHeaderNode:function(){var b=document.createElement("div");b.className="moduleFormulaeHeader";var d=document.createElement("h3");d.appendChild(document.createTextNode(a.titleHeader));b.appendChild(d);return b},_getEntityLongIds:function(a){return!a||!this.viewRequestGridModel?[]:[this.viewRequestGridModel.getModuleEntityLongId(),a.lineItemSubsetEntityLongId,a.versionEntityLongId]},_getFormulaInfos:function(){var a=this._viewRequestGridModel.getModuleEntityLongId();
return k.getModuleInfo(a).formulaInfos},_rebuild:function(a){this.destroyDescendants();if(!a||!a.length)f.add(this.domNode,"moduleFormulaeEmpty");else for(var b=0;b<a.length;b++)this._addModuleFormula(a[b])}})})},"dojo/NodeList-manipulate":function(){define("./query ./_base/lang ./_base/array ./dom-construct ./dom-attr ./NodeList-dom".split(" "),function(g,b,k,p,r){function n(b){for(;b.childNodes[0]&&1==b.childNodes[0].nodeType;)b=b.childNodes[0];return b}function f(b,a){"string"==typeof b?(b=p.toDom(b,
a&&a.ownerDocument),11==b.nodeType&&(b=b.childNodes[0])):1==b.nodeType&&b.parentNode&&(b=b.cloneNode(!1));return b}var s=g.NodeList;b.extend(s,{_placeMultiple:function(b,a){for(var e="string"==typeof b||b.nodeType?g(b):b,d=[],f=0;f<e.length;f++)for(var h=e[f],k=this.length,c=k-1,n;n=this[c];c--)0<f&&(n=this._cloneNode(n),d.unshift(n)),c==k-1?p.place(n,h,a):h.parentNode.insertBefore(n,h),h=n;d.length&&(d.unshift(0),d.unshift(this.length-1),Array.prototype.splice.apply(this,d));return this},innerHTML:function(b){return arguments.length?
this.addContent(b,"only"):this[0].innerHTML},text:function(b){if(arguments.length){for(var a=0,e;e=this[a];a++)1==e.nodeType&&r.set(e,"textContent",b);return this}for(var d="",a=0;e=this[a];a++)d+=r.get(e,"textContent");return d},val:function(f){if(arguments.length){for(var a=b.isArray(f),e=0,d;d=this[e];e++){var g=d.nodeName.toUpperCase(),h=d.type,n=a?f[e]:f;if("SELECT"==g){g=d.options;for(h=0;h<g.length;h++){var c=g[h];c.selected=d.multiple?-1!=k.indexOf(f,c.value):c.value==n}}else"checkbox"==h||
"radio"==h?d.checked=d.value==n:d.value=n}return this}if((d=this[0])&&1==d.nodeType){f=d.value||"";if("SELECT"==d.nodeName.toUpperCase()&&d.multiple){f=[];g=d.options;for(h=0;h<g.length;h++)c=g[h],c.selected&&f.push(c.value);f.length||(f=null)}return f}},append:function(b){return this.addContent(b,"last")},appendTo:function(b){return this._placeMultiple(b,"last")},prepend:function(b){return this.addContent(b,"first")},prependTo:function(b){return this._placeMultiple(b,"first")},after:function(b){return this.addContent(b,
"after")},insertAfter:function(b){return this._placeMultiple(b,"after")},before:function(b){return this.addContent(b,"before")},insertBefore:function(b){return this._placeMultiple(b,"before")},remove:s.prototype.orphan,wrap:function(b){if(this[0]){b=f(b,this[0]);for(var a=0,e;e=this[a];a++){var d=this._cloneNode(b);e.parentNode&&e.parentNode.replaceChild(d,e);n(d).appendChild(e)}}return this},wrapAll:function(b){if(this[0]){b=f(b,this[0]);this[0].parentNode.replaceChild(b,this[0]);b=n(b);for(var a=
0,e;e=this[a];a++)b.appendChild(e)}return this},wrapInner:function(g){if(this[0]){g=f(g,this[0]);for(var a=0;a<this.length;a++){var e=this._cloneNode(g);this._wrap(b._toArray(this[a].childNodes),null,this._NodeListCtor).wrapAll(e)}}return this},replaceWith:function(b){b=this._normalize(b,this[0]);for(var a=0,e;e=this[a];a++)this._place(b,e,"before",0<a),e.parentNode.removeChild(e);return this},replaceAll:function(b){b=g(b);for(var a=this._normalize(this,this[0]),e=0,d;d=b[e];e++)this._place(a,d,"before",
0<e),d.parentNode.removeChild(d);return this},clone:function(){for(var b=[],a=0;a<this.length;a++)b.push(this._cloneNode(this[a]));return this._wrap(b,this,this._NodeListCtor)}});s.prototype.html||(s.prototype.html=s.prototype.innerHTML);return s})},"anaplan/view/ApplyChanges":function(){define("dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin anaplan/widgets/_WidgetMixin dojo/_base/declare dojo/_base/event dojo/keys anaplan/widgets/Dialog2 dojo/text!anaplan/templates/ApplyChanges.html dojo/i18n!anaplan/nls/applyChanges dojo/i18n!dijit/nls/common anaplan/widgets/Button".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e){return r("anaplan.view.ApplyChanges",[g,b,k,s.ContentMixin,p],{baseClass:"applyChanges",tabIndex:-1,templateString:l,widgetsInTemplate:!0,onApply:function(){},onCancel:function(){},onDiscard:function(){},postCreate:function(){this.inherited(arguments);this.discardButton.set("label",a.buttonDiscard);this.applyButton.set({label:a.buttonApply,"class":"primary-button"});this.cancelButton.set("label",e.buttonCancel)},_onApply:function(){this.onApply()},_onApplyButtonClick:function(){this._onApply()},
_onCancel:function(){this.onCancel()},_onCancelButtonClick:function(){this._onCancel()},_onDiscard:function(){this.onDiscard()},_onDiscardButtonClick:function(){this._onDiscard()},_onKeyDown:function(a){var b=a.keyCode;b===f.ESCAPE?(this._onCancel(),n.stop(a)):b===f.ENTER&&(!1===this.applyButton.isShowing()?this._onDiscard():this._onApply(),n.stop(a))},_onKeyPress:function(a){a.currentTarget===this.domNode&&a.stopPropagation()},_setHideApplyButtonAttr:function(a){this.applyButton.toggle(!a)},_setMessageTextAttr:function(a){this.setText(this.message,
a)}})})},"anaplan/settings/Time2/Forms/MonthsQuartersYears":function(){define("anaplan/utils/UIHelper ./FormBase ./Widgets/CurrentFiscalYearSelect ./Widgets/CurrentPeriodFilteringSelect ./Widgets/FiscalYearMonthSelect ./Widgets/FiscalYearLabelAlignment ./Widgets/YearsSpinner dojo/_base/declare dojo/_base/lang dojo/_base/sniff".split(" "),function(g,b,k,p,r,n,f,s,l){return s([b],{testableName:"formMonthsQuartersYears",_formfields:[{name:"fiscalYearStartMonth",nls:"labelFiscalYearStartMonth",Ctor:r,
triggerCurrentPeriod:!0},{name:"takeFiscalYearNameFromPeriodStart",nls:"labelTakeFiscalYearNameFromPeriodStart",Ctor:n},{name:"currentFiscalYear",nls:"labelCurrentFiscalYear",Ctor:k,triggerCurrentPeriod:!0},{name:"numberOfPastYears",nls:"labelNumberOfPastYears",Ctor:f,options:{constraints:{min:0,max:20},required:!0},triggerCurrentPeriod:!0},{name:"numberOfFutureYears",nls:"labelNumberOfFutureYears",Ctor:f,options:{constraints:{min:0,max:50},required:!0},triggerCurrentPeriod:!0},{name:"currentPeriod",
nls:"labelCurrentPeriod",Ctor:p},{name:"include",options:{showFiscalYearExtraMonthQuarter:!1}}],_attach:function(){this.inherited(arguments);this.fields.fiscalYearStartMonth.on("change",l.hitch(this,function(){this.applyFormLogic(this.get("value"))}));this.fields.takeFiscalYearNameFromPeriodStart.on("change",l.hitch(this,function(){this.applyFormLogic(this.get("value"))}))},applyFormLogic:function(a){var b=a.takeFiscalYearNameFromPeriodStart!==this._oldVal.takeFiscalYearNameFromPeriodStart;if(a.fiscalYearStartMonth!==
this._oldVal.fiscalYearStartMonth||b)g.toggleNode(this.rows.takeFiscalYearNameFromPeriodStart,1!==a.fiscalYearStartMonth),this.fields.currentFiscalYear.refreshValues(a.fiscalYearStartMonth,a.takeFiscalYearNameFromPeriodStart);this.fields.includeOptions.applyFormLogic(a,!1);this.inherited(arguments)}})})},"dijit/tree/dndSource":function(){define("dojo/_base/array dojo/_base/declare dojo/dnd/common dojo/dom-class dojo/dom-geometry dojo/_base/lang dojo/on dojo/touch dojo/topic dojo/dnd/Manager ./_dndSelector".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e){return b("dijit.tree.dndSource",e,{isSource:!0,accept:["text","treeNode"],copyOnly:!1,dragThreshold:5,betweenThreshold:0,generateText:!0,constructor:function(a,b){b||(b={});n.mixin(this,b);var e=b.accept instanceof Array?b.accept:["text","treeNode"];this.accept=null;if(e.length){this.accept={};for(var f=0;f<e.length;++f)this.accept[e[f]]=1}this.mouseDown=this.isDragging=!1;this.targetBox=this.targetAnchor=null;this.dropPosition="";this._lastY=this._lastX=0;this.sourceState=
"";this.isSource&&p.add(this.node,"dojoDndSource");this.targetState="";this.accept&&p.add(this.node,"dojoDndTarget");this.topics=[l.subscribe("/dnd/source/over",n.hitch(this,"onDndSourceOver")),l.subscribe("/dnd/start",n.hitch(this,"onDndStart")),l.subscribe("/dnd/drop",n.hitch(this,"onDndDrop")),l.subscribe("/dnd/cancel",n.hitch(this,"onDndCancel"))]},checkAcceptance:function(){return!0},copyState:function(a){return this.copyOnly||a},destroy:function(){this.inherited(arguments);for(var a;a=this.topics.pop();)a.remove();
this.targetAnchor=null},_onDragMouse:function(b,e){var f=a.manager(),g=this.targetAnchor,c=this.current,k=this.dropPosition,l="Over";if(c&&0<this.betweenThreshold){if(!this.targetBox||g!=c)this.targetBox=r.position(c.rowNode,!0);b.pageY-this.targetBox.y<=this.betweenThreshold?l="Before":b.pageY-this.targetBox.y>=this.targetBox.h-this.betweenThreshold&&(l="After")}if(e||c!=g||l!=k){g&&this._removeItemClass(g.rowNode,k);c&&this._addItemClass(c.rowNode,l);if(c)if(c==this.tree.rootNode&&"Over"!=l)f.canDrop(!1);
else{k=g=!1;if(f.source==this){var k="Over"===l,n;for(n in this.selection){var s=this.selection[n];if(s.item===c.item){g=!0;break}s.getParent().id!==c.id&&(k=!1)}}f.canDrop(!g&&!k&&!this._isParentChildDrop(f.source,c.rowNode)&&this.checkItemAcceptance(c.rowNode,f.source,l.toLowerCase()))}else f.canDrop(!1);this.targetAnchor=c;this.dropPosition=l}},onMouseMove:function(b){if(!(this.isDragging&&"Disabled"==this.targetState)){this.inherited(arguments);var e=a.manager();if(this.isDragging)this._onDragMouse(b);
else if(this.mouseDown&&this.isSource&&(Math.abs(b.pageX-this._lastX)>=this.dragThreshold||Math.abs(b.pageY-this._lastY)>=this.dragThreshold)){var f=this.getSelectedTreeNodes();if(f.length){if(1<f.length){var l=this.selection,c=0,n=[],m,s;a:for(;m=f[c++];){for(s=m.getParent();s&&s!==this.tree;s=s.getParent())if(l[s.id])continue a;n.push(m)}f=n}f=g.map(f,function(a){return a.domNode});e.startDrag(this,f,this.copyState(k.getCopyKeyState(b)));this._onDragMouse(b,!0)}}}},onMouseDown:function(a){this.mouseDown=
!0;this.mouseButton=a.button;this._lastX=a.pageX;this._lastY=a.pageY;this.inherited(arguments)},onMouseUp:function(a){this.mouseDown&&(this.mouseDown=!1,this.inherited(arguments))},onMouseOut:function(){this.inherited(arguments);this._unmarkTargetAnchor()},checkItemAcceptance:function(){return!0},onDndSourceOver:function(b){this!=b?(this.mouseDown=!1,this._unmarkTargetAnchor()):this.isDragging&&a.manager().canDrop(!1)},onDndStart:function(b,e,f){this.isSource&&this._changeState("Source",this==b?f?
"Copied":"Moved":"");e=this.checkAcceptance(b,e);this._changeState("Target",e?"":"Disabled");this==b&&a.manager().overSource(this);this.isDragging=!0},itemCreator:function(a){return g.map(a,function(a){return{id:a.id,name:a.textContent||a.innerText||""}})},onDndDrop:function(a,b,e){if("Over"==this.containerState){var f=this.tree,c=f.model,k=this.targetAnchor;this.isDragging=!1;var l,n,s;l=k&&k.item||f.item;"Before"==this.dropPosition||"After"==this.dropPosition?(l=k.getParent()&&k.getParent().item||
f.item,n=k.getIndexInParent(),"After"==this.dropPosition?(n=k.getIndexInParent()+1,s=k.getNextSibling()&&k.getNextSibling().item):s=k.item):l=k&&k.item||f.item;var p;g.forEach(b,function(f,r){var u=a.getItem(f.id);if(-1!=g.indexOf(u.type,"treeNode"))var v=u.data,E=v.item,C=v.getParent().item;a==this?("number"==typeof n&&l==C&&v.getIndexInParent()<n&&(n-=1),c.pasteItem(E,C,l,e,n,s)):c.isItem(E)?c.pasteItem(E,C,l,e,n,s):(p||(p=this.itemCreator(b,k.rowNode,a)),c.newItem(p[r],l,n,s))},this);this.tree._expandNode(k)}this.onDndCancel()},
onDndCancel:function(){this._unmarkTargetAnchor();this.mouseDown=this.isDragging=!1;delete this.mouseButton;this._changeState("Source","");this._changeState("Target","")},onOverEvent:function(){this.inherited(arguments);a.manager().overSource(this)},onOutEvent:function(){this._unmarkTargetAnchor();var b=a.manager();this.isDragging&&b.canDrop(!1);b.outSource(this);this.inherited(arguments)},_isParentChildDrop:function(a,b){if(!a.tree||a.tree!=this.tree)return!1;for(var e=a.tree.domNode,f=a.selection,
c=b.parentNode;c!=e&&!f[c.id];)c=c.parentNode;return c.id&&f[c.id]},_unmarkTargetAnchor:function(){this.targetAnchor&&(this._removeItemClass(this.targetAnchor.rowNode,this.dropPosition),this.dropPosition=this.targetBox=this.targetAnchor=null)},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")}})})},"anaplan/settings/Modules":function(){define("anaplan/utils/FormatHelper dojo/_base/declare dijit/layout/TabContainer anaplan/widgets/Tooltip anaplan/data/ModelContentHelper anaplan/settings/Modules/FunctionalAreasView anaplan/settings/Modules/LineItemsView anaplan/settings/Modules/ModulesView dojo/_base/array dojo/_base/lang anaplan/utils/EntityLongIdHelper anaplan/utils/UIHelper anaplan/constants dojo/i18n!anaplan/nls/modules dojo/i18n!anaplan/nls/common".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u){return b("anaplan.settings.Modules",[k],{constructor:function(a){this._modelContent=a.modelContent;this._showTipsOnStartup=a.showTipsOnStartup;this._viewDefinition=a.content[0].viewDefinition;this._tooltips=[]},hide:function(a){a===q.TIPS&&(l.forEach(this._tooltips,function(a){a.destroy()}),this._tooltips=[]);l.forEach(this.getChildren(),function(b){b.hide(a)})},postCreate:function(){this.inherited(arguments);this._createTabs()},resume:function(){l.forEach(this.getChildren(),
function(a){a.resume()})},show:function(a){a===q.TIPS&&this._createTooltips();l.forEach(this.getChildren(),function(b){b.show(a)})},startup:function(){this.inherited(arguments);this._showTipsOnStartup&&this._createTooltips()},suspend:function(){l.forEach(this.getChildren(),function(a){a.suspend()})},uninitialize:function(){l.forEach(this._tooltips,function(a){a.destroy()});this.inherited(arguments)},_createTabs:function(){var b=[];b.push({id:this.id+"_MODULES",title:u.labelModules,widgetClass:s,viewDefinition:a.mixin(this._viewDefinition,
{columnSizes:{customRowLabelWidthsByDimension:[],customWidthsByLineItem:[{identifier:e.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_MODULE_LINE_ITEMS),width:500},{identifier:e.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_APPLIES_TO),width:300},{identifier:e.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_FUNCTIONAL_AREA),width:150},{identifier:e.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_REFERENCED_BY),width:500},{identifier:e.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_TAGS),
width:300}],customWidthsByStyle:[],defaultColumnWidth:q.DEFAULT_COLUMN_WIDTH}})});b.push({id:this.id+"_FUNCTIONAL_AREAS",title:u.labelFunctionalAreas,widgetClass:n,viewDefinition:a.mixin({type:"MODEL_DEFINITION",staticContextIdentifiers:[]},r.getAxesForViewDefinition([q.SYSTEM_AXIS_IDENTIFIER_FUNCTIONAL_AREA_IDENTIFIER],[q.SYSTEM_AXIS_IDENTIFIER_FUNCTIONAL_AREA_PROPERTY_IDENTIFIER]))});b.push({id:this.id+"_LINE_ITEMS",title:u.labelLineItems,widgetClass:f,viewDefinition:a.mixin({type:"MODEL_DEFINITION",
staticContextIdentifiers:[]},r.getAxesForViewDefinition([q.SYSTEM_AXIS_IDENTIFIER_MODULE_WITH_LINE_ITEM_IDENTIFIER],[q.SYSTEM_AXIS_IDENTIFIER_LINE_ITEM_PROPERTY_IDENTIFIER]))});for(var d,h=0;h<b.length;h++)d=b[h],d=new d.widgetClass({id:d.id,title:d.title,viewDefinition:d.viewDefinition,modelContent:this._modelContent,showTipsOnStartup:this._showTipsOnStartup}),this.addChild(d)},_createTooltip:function(a,b){var d=a.get("label"),e=h["tooltip"+b.split(" ").join("")],e=g.searchAndReplacePlaceholders(e);
return new p({label:e,connectId:[a.domNode],position:["below","above"],title:d})},_createTooltips:function(){if(this._tooltips.length)console.warn(this.declaredClass+" expected to find no tooltips, found "+this._tooltips.length);else for(var a=this.tablist.getChildren(),b=a.length,d,e=0;e<b;e++)d=a[e],this._tooltips.push(this._createTooltip(d,d.get("label")))}})})},"dojox/gesture/tap":function(){define(["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","./Base","../main"],function(g,b,k,
p,r){g.experimental("dojox.gesture.tap");g=b(p,{defaultEvent:"tap",subEvents:["hold","doubletap"],holdThreshold:500,doubleTapTimeout:250,tapRadius:10,press:function(b,f){if(f.touches&&2<=f.touches.length)clearTimeout(b.tapTimeOut),delete b.context;else{var g=f.target;this._initTap(b,f);b.tapTimeOut=setTimeout(k.hitch(this,function(){this._isTap(b,f)&&this.fire(g,{type:"tap.hold"});delete b.context}),this.holdThreshold)}},release:function(b,f){if(b.context&&this._isTap(b,f))switch(b.context.c){case 1:this.fire(f.target,
{type:"tap"});break;case 2:this.fire(f.target,{type:"tap.doubletap"})}clearTimeout(b.tapTimeOut)},_initTap:function(b,f){b.context||(b.context={x:0,y:0,t:0,c:0});var g=(new Date).getTime();g-b.context.t<=this.doubleTapTimeout?b.context.c++:(b.context.c=1,b.context.x=f.screenX,b.context.y=f.screenY);b.context.t=g},_isTap:function(b,f){var g=Math.abs(b.context.x-f.screenX),k=Math.abs(b.context.y-f.screenY);return g<=this.tapRadius&&k<=this.tapRadius}});r.gesture.tap=new g;r.gesture.tap.Tap=g;return r.gesture.tap})},
"anaplan/widgets/ManageViewsDialog":function(){define("anaplan/anapediaKeys dojo/string dojo/on anaplan/constants anaplan/data/ModelContentHelper anaplan/data/ChangeFactory anaplan/data/RequestFactory anaplan/data/ModelContentCache anaplan/layout/StackContainer anaplan/utils/UIHelper anaplan/view/Confirmation anaplan/widgets/Dialog2 anaplan/widgets/ManageViewsDialog/_MainView dojo/i18n!anaplan/nls/manageViewsDialog dojo/_base/declare dojo/_base/lang dojo/_base/array".split(" "),function(g,b,k,p,r,
n,f,s,l,a,e,d,q,h,u,c,t){return u([l,d.ContentMixin],{constructor:function(a){this._viewDefinition=a.viewDefinition;this._grid=a.grid},onClose:function(){},onResetDefaultView:function(){},postCreate:function(){try{this.inherited(arguments),this._mainView=new q({viewDefinition:this._viewDefinition,grid:this._grid}),this._confirmDeletionView=new e({heading:h.titleConfirmDeletion,message:h.messageConfirmDeletion}),this._confirmResetDefaultViewView=new e({heading:h.titleConfirmResetDefaultView,message:h.messageConfirmResetDefaultView}),
this.addChild(this._mainView),this.addChild(this._confirmDeletionView),this.addChild(this._confirmResetDefaultViewView),k(this._mainView,"Close",c.hitch(this,"_onClose")),k(this._mainView,"Delete",c.hitch(this,"_onDelete")),k(this._mainView,"ResetDefaultView",c.hitch(this,"_onResetDefaultView")),k(this._confirmDeletionView,"Confirm",c.hitch(this,"_onConfirmDeletion")),k(this._confirmDeletionView,"Cancel",c.hitch(this,"_onCancelConfirmation")),k(this._confirmResetDefaultViewView,"Confirm",c.hitch(this,
"_onConfirmResetDefaultView")),k(this._confirmResetDefaultViewView,"Cancel",c.hitch(this,"_onCancelConfirmation"))}catch(b){a.throwClientException(this,b)}},resize:function(a){a?this.resize():this.inherited(arguments)},startup:function(){try{this._started&&console.warn("startup "+this.id),this.inherited(arguments)}catch(b){a.throwClientException(this,b)}},_onCancelConfirmation:function(){try{this.selectChild(this._mainView),this._setHelpContent()}catch(b){a.throwClientException(this,b)}},_onClose:function(){try{this.onClose()}catch(b){a.throwClientException(this,
b)}},_onConfirmDeletion:function(){try{var b=this,c=this._mainView.getSelection();!c||null===c.entityLongId?console.warn("ManageViewDialog._onConfirmDeletion: no selection"):this._mainView.performAction(function(){var a=r.getModuleEntityIdForViewDefinitionOrReference(s,b._viewDefinition),d=(new n).getModelChangeGenerator({entityTypeClass:"SAVED_VIEW"}),a=[{modelId:modelId,moduleId:a,modelChangeXml:d.getModelChangeXml("DELETE",{entityLongId:c.entityLongId})}];return f.createRequest(workspaceId,[{workspaceId:workspaceId,
cellChanges:[],modelChanges:a}],[],[])},function(){b.selectChild(b._mainView);b._setHelpContent()})}catch(d){a.throwClientException(this,d)}},_onConfirmResetDefaultView:function(){try{var b=this;this._mainView.performAction(function(){var a=r.getModuleEntityLongIdForViewDefinitionOrReference(s,b._viewDefinition),a=[(new n).getCellChangeGenerator().getCellChange({modelId:modelId,noCurrentValue:!0,originalText:null,entityLongIds:[a,p.SYSTEM_PROPERTY_SAVED_VIEW_DEFINITION],cellText:null})];return f.createRequest(workspaceId,
[{workspaceId:workspaceId,cellChanges:a,modelChanges:[]}],[],[])},function(){b.selectChild(b._mainView);b._setHelpContent();b.onResetDefaultView()})}catch(c){a.throwClientException(this,c)}},_onDelete:function(){try{var c=this._mainView.getSelection();if(!c||null===c.entityLongId)console.warn("ManageViewDialog._onConfirmDeletion: no selection");else{var d=b.substitute(h.titleConfirmDeletion,{viewName:c.label});this._confirmDeletionView.set("heading",d);this.selectChild(this._confirmDeletionView);
this.onHelpChange(null)}}catch(e){a.throwClientException(this,e)}},_onResetDefaultView:function(){try{var c=r.getModuleEntityLongIdForViewDefinitionOrReference(s,this._viewDefinition),d=s.getModulesLabelPage(),e=t.indexOf(d.entityLongIds[0],c),f=b.substitute(h.messageConfirmResetDefaultView,{moduleName:d.labels[0][e]});this._confirmResetDefaultViewView.set("message",f);this.selectChild(this._confirmResetDefaultViewView);this.onHelpChange(null)}catch(g){a.throwClientException(this,g)}},_setHelpContent:function(){try{this.onHelpChange(g.views)}catch(b){a.throwClientException(this,
b)}}})})},"anaplan/view/Dialog2ContentAdapter":function(){define("anaplan/utils/UIHelper dijit/_Contained dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dojo/_base/declare dojo/_base/event dojo/keys dojo/dom-attr dojo/dom-class dojo/dom-style anaplan/widgets/Dialog2 dojo/text!anaplan/templates/Dialog2ContentAdapter.html dojo/i18n!anaplan/nls/confirmation anaplan/widgets/Button dijit/form/CheckBox".split(" "),function(g,b,k,p,r,n,f,s,l,a,e,d,q,h){return n("anaplan.view.Dialog2ContentAdapter",
[p,k,r,d.ContentMixin,b],{baseClass:"dialog2ContentAdapter",templateString:q,title:"",helpKey:"",modalClassString:"modal-dialog",contentNode:null,onBeforeDestroy:function(){},onEscape:function(){},_setModalClassStringAttr:function(a){this.inherited(arguments);this.domNode&&(this.contentNode.className=a)},_onShow:function(){this.contentNode.className=this.modalClassString},_onKeyDown:function(a){switch(a.keyCode){case s.ESCAPE:this.onEscape(),f.stop(a)}},destroy:function(){this.onBeforeDestroy();this.inherited(arguments)}})})},
"anaplan/settings/Modules/ModulesView/CopyModuleDialog":function(){define("anaplan/utils/UIHelper dojo/Deferred anaplan/utils/confirmationDialogHelper anaplan/utils/TestAttributesHelper anaplan/widgets/Dialog anaplan/Exceptions anaplan/api/service anaplan/view/CopyModule dijit/Destroyable dojo/Evented anaplan/utils/JsHelper dojo/_base/declare dojo/string dojo/_base/lang dojo/i18n!anaplan/nls/modules dojo/i18n!anaplan/nls/copyModule dojo/on".split(" "),function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t){return d([a,
l],{_dialog:null,_view:null,_targetModule:null,constructor:function(a){this.inherited(arguments);this._validateArgs(a)&&(this._createDialog(),this._showLoading(),f.modules.fetchById(a.moduleToCopyId).then(function(a){a.exists()?(this._createView(a),this._attach()):this._showError()}.bind(this),this._showError))},_showError:function(){this._dialog.set("title",c.copyModuleDialogFailedLoadTitle);this._dialog.set("content",c.copyModuleDialogFailedLoadMessage)},_createDialog:function(){var a=q.substitute(u.titleCopyModule,
{moduleName:"Loading..."});this._dialog=new r({duration:0,title:a,"class":"anaplanBlueDialog copyModuleDialog",resizeContentsToFitViewport:!0});this.own(this._dialog);p.add(this._dialog,"copy-module-dialog");p.add(this._view,"copy-module-dialog-view")},_createView:function(a){this._targetModule=a;this._view=new s({sourceModuleName:this._targetModule.data.entityId,functionalAreaId:this._targetModule.data.functionalAreaId,hasViews:this._targetModule.hasViews()});a=q.substitute(u.titleCopyModule,{moduleName:this._targetModule.getName()});
this._dialog.set("content",this._view);this._dialog.set("title",a);g.hidePleaseWaitDialog();this._dialog.show()},_attach:function(){this.own(t(this._view,"Submit",h.hitch(this,"_onSubmit")),t(this._view,"Cancel",h.hitch(this,"_onCancel")),t(this._dialog,"Hide",h.hitch(this,"_onHide")))},_onHide:function(){this.emit("closed")},_onCancel:function(){this.hide()},_onSubmit:function(a){e.isObject(a)?(a.toCopy=this._targetModule.data.entityLongId,this._copyModule(a).then(function(a){this._dialog.hide();
this.emit("success",a)}.bind(this),function(a){a.actionError?this.showError(a.error):(this._dialog.hide(),this.emit("failed",a.error))}.bind(this))):this.showError("Failed to submit copy module request")},_validateArgs:function(a){if(!1===e.isNumber(a.moduleToCopyId))throw new n.ClientException("anaplan.settings.Modules.ModulesView.CopyModuleDialog#constructor","Invalid args, expected a moduleToCopyId");return!0},_copyModule:function(a){var c=new b;if(this._targetModule.hasLineItemSubset()){var d=
this._getCopyModuleMessage(),e=q.substitute(u.titleCopyModule,{moduleName:this._targetModule.getName()});k.showDialog(e,d,function(b){!0===b&&(this._showLoading("Copying..."),f.modules.copy(a).then(c.resolve,c.reject))}.bind(this))}else this._showLoading("Copying..."),f.modules.copy(a).then(c.resolve,c.reject);return c.promise},_getCopyModuleMessage:function(){var a=u.copyModuleWarning,a=a+q.substitute(u.copyModuleWarningLineItems,{items:"\x3cul\x3e\x3cli\x3e"+this._targetModule.getLineItemSubsetNames().join("\x3c/li\x3e\x3cli\x3e")+
"\x3c/ul\x3e"});this._targetModule.hasVersionFormulae()&&(a+=q.substitute(u.copyModuleWarningVersionFormulae,{items:"\x3cul\x3e\x3cli\x3e"+this._targetModule.getVersionFormulaeLineItemDescriptions().join("\x3c/li\x3e\x3cli\x3e")+"\x3c/ul\x3e"}));return a},showError:function(a){this._view.showError(a);this._view.enable()},_showLoading:function(a){this._view&&this._view.disable()},show:function(){this._dialog.show()},hide:function(){this._dialog.hide()}})})},"anaplan/tabs/ModelMap":function(){define("dojo/_base/declare dijit/layout/ContentPane anaplan/layout/_ManagedMixin anaplan/modelmap/ModelMap dojo/dom-style dojo/topic".split(" "),
function(g,b,k,p,r,n){return g([b,k],{constructor:function(){},postCreate:function(){this.inherited(arguments);this.map=new p;this.addChild(this.map);this.own(n.subscribe("modelmap/viewmodule",this._viewModule))},_viewModule:function(b){n.publish("anaplan/views",b)},resize:function(b){this.inherited(arguments);var g=r.get(this.domNode).width,k=r.get(this.domNode).height;if(b.h+"px"!==k||b.w+"px"!==g)r.set(this.domNode,{height:b.h,width:b.w}),this.map.draw()},show:function(){this.inherited(arguments)},
resume:function(){this.map.resume()},suspend:function(){this.inherited(arguments);this.map.suspend()},dispose:function(){this.map.dispose()}})})},"anaplan/widgets/TextBoxSelectorMixin":function(){define("dojo/_base/declare dojo/dom-style dojo/keys dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!anaplan/templates/TextBoxSelector.html".split(" "),function(g,b,k,p,r,n,f){return g([p,r,n],{baseClass:"dijitTextBox textBoxSelector",templateString:f,cssStateNodes:{},postCreate:function(){this.inherited(arguments)},
onSecondaryAction:function(){},onChange:function(b){},_onItemsChanged:function(){if(!this.get("disabled")){var b=this.get("value");this.onChange(b)}},_onSecondaryAction:function(){if(!this.get("disabled"))this.onSecondaryAction()},_onSecondaryActionHandler:function(b){this._onSecondaryAction()},_onTextBoxKeyUpHandler:function(b){this._onItemsChanged()},_onTextBoxBlurHandler:function(b){b=this.get("value").replace(/,(?=[^\s])/g,", ");this.set("value",b)}})})},"anaplan/utils/DrillDownWindowManager":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/topic dojo/dom-style dojo/on dojo/window dijit/Destroyable dijit/layout/BorderContainer anaplan/Exceptions anaplan/utils/JsHelper anaplan/utils/FormatHelper anaplan/widgets/Button anaplan/widgets/FloatingWindow anaplan/tabs/DashboardWrapper anaplan/view/ManageImportSources/_BottomButton".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c){g=new (g([s],{constructor:function(){this.own(p.subscribe("anaplan/drilldown/dashboard",k.hitch(this,"_openDrillDownDashboard")))},_paths:{},_windows:{},_dashboard:null,_dashboardListener:null,_sizeToContent:!1,close:function(b){try{b&&(this._cleanUpWindow(b.id),b.hide())}catch(c){throw new a.ClientException("anaplan.utils.DrillDownWindowManager.close",c);}},closeAll:function(){try{for(var b in this._windows)this.closeAllWithId(b)}catch(c){throw new a.ClientException("anaplan.utils.DrillDownWindowManager.closeAll",
c);}},closeAllWithId:function(c){try{b.forEach(this._windows[c],function(a){this.close(a)},this)}catch(d){throw new a.ClientException("anaplan.utils.DrillDownWindowManager.closeAllWithId",d);}},destroy:function(){try{this.closeAll(),this._windows=this._paths=null}catch(b){throw new a.ClientException("anaplan.utils.DrillDownWindowManager.destroy",b);}},getWindowCount:function(){return this._getWindowCount()},_openDrillDownDashboard:function(a){this._dashboard=new u({isDrillDown:!0,dashboardDefinition:a.drillDownDashboard,
dashboardEntityLongId:-1,dashboardEntityId:null,drillDownLevel:a.drillDownLevel,drillDownId:a.drillDownIdForWindow,titleCellFormats:a.titleCellFormats,region:"center"});this._sizeToContent=a.sizeToContent;this.open(a.drillDownIdForWindow,a.drillDownLevel,a.title,this._dashboard,a.refocusWidget)},open:function(b,e,g,s,p){try{this._windows[b]?this.close(this._windows[b][e-1]):this.closeAll();var q=f.getBox(),r,u,v,E;this._sizeToContent&&this._addListener();r=q.w/2;u=q.h/2;v=q.w/4;E=q.h/4;var C=new h({baseClass:"floatingTab",
title:d.escapeHTML(d.unescapeHTML(g)),style:["left: ",v,"px; top: ",E,"px; width: ",r,"px; height: ",u,"px;"].join(""),refocusWidget:p}),G=n(C,"FirstMove",function(){C.toggleDownArrow(!1)}),L=n(C,"Closing",k.hitch(this,function(){L.remove();G.remove();this._cleanUpWindow(C.id)})),K=new c({region:"bottom",windowToAttach:C}),D=new l;D.addChild(s);D.addChild(K);C.startup();C.addChild(D);C.show();D.resize();this._windows[b]||(this._windows[b]=[]);this._windows[b].push(C);this._paths[C.id]=b;this.organize();
C.domNode.scrollIntoView(!1)}catch(N){throw new a.ClientException("anaplan.utils.DrillDownWindowManager.open",N);}},_getDataTagSearchResultWindowHeight:function(a,b,c,d,e,f){a=(a+e)/Math.min(f,2);a<b.h?(b=b.h+c,a=a>b?b:a):a=b.h-d;return a},_getDataTagSearchResultWindowWidth:function(a,b,c,d,e){a+=d/Math.max(e,1);a<b.w?(b=b.w+c,a=a>b?b:a):a=b.w-d;return a},organize:function(){try{var c=this._getPathCount();if(c){var d=f.getBox(),e=1<c?20:150,h,g,k,l,n,s,p,q=this._sizeToContent?this._dashboard.getCombinedDashboardElementSize():
null;this._sizeToContent?(h=this._getDataTagSearchResultWindowWidth(q.width,d,e,20,c),g=(d.w-h)/2):(h=(d.w-e)/Math.max(c,1)-e,g=e);for(var u in this._windows)s=this._windows[u],p=s.length,l=1<p?20:150,this._sizeToContent?(k=this._getDataTagSearchResultWindowHeight(q.height,d,l,20,150,s.length),n=(d.h-k)/2):(n=l,k=(d.h-l)/Math.min(s.length,2)-l),b.forEach(this._windows[u],function(a,b){r.set(a.domNode,{top:n+"px",left:g+"px"});a.resize({w:h,h:k});a.toggleDownArrow(1<p&&b<p-1);n+=k+l}),g+=h+e}}catch(L){throw new a.ClientException("anaplan.utils.DrillDownWindowManager.organize",
L);}},_onAfterUpdate:function(){this._removeListener();this.organize()},_removeListener:function(){this._dashboardListener&&this._dashboardListener.remove()},_addListener:function(){this._dashboardListener=n(this._dashboard,"InitialLoad",this._onAfterUpdate.bind(this));this.own(this._dashboardListener)},_cleanUpWindow:function(b){try{var c=this._paths[b];if(c){for(var d=this._windows[c],e=d.length,f=-1,h=null,g=0;g<e;g++)if(d[g].id===b){f=g;g<e-1&&(h=this._windows[c][f+1]);break}-1!==f&&(delete this._paths[b],
this._windows[c].splice(f,1),this._windows[c].length||delete this._windows[c],h?this.close(h):this.organize(),this._removeListener)}}catch(k){throw new a.ClientException("anaplan.utils.DrillDownWindowManager._cleanUpWindow",k);}},_getPathCount:function(){var b=0;try{b=e.getObjectKeys(this._windows).length}catch(c){throw new a.ClientException("anaplan.utils.DrillDownWindowManager._getPathCount",c);}return b},_getWindowCount:function(){var b=0;try{for(var c in this._windows)b+=this._windows[c].length}catch(d){throw new a.ClientException("anaplan.utils.DrillDownWindowManager._getWindowCount",
d);}return b}}));k.setObject("anaplan.utils.DrillDownWindowManager",g);return g})},"anaplan/view/ModelManagement/CopyAndArchiveModelView":function(){define("anaplan/utils/UIHelper anaplan/utils/FormatHelper anaplan/Exceptions anaplan/view/ModelManagement/ModelView dojo/_base/declare dojo/_base/event dojo/dom-attr dojo/i18n!anaplan/nls/modelManagement dojo/i18n!dijit/nls/common dojo/keys dojo/string dojo/text!anaplan/templates/ModelManagement/CopyAndArchiveModelView.html anaplan/widgets/Button dijit/form/ValidationTextBox".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d){return r([p],{templateString:d,cancelButton:null,copyAndArchiveModelButton:null,onCopyAndArchiveModel:function(){},onValidStateChange:function(a){try{this.copyAndArchiveModelButton.set("disabled",!a)}catch(b){throw new k.ClientException("CopyAndArchiveModelView#onValidStateChange",b);}},postCreate:function(){try{this.inherited(arguments);g.setText(this.modelNameLabel,s.labelModelName);this.copyAndArchiveModelButton.set("label",s.buttonCopyAndArchiveModel);this.cancelButton.set("label",
l.buttonCancel);f.set(this.modelNameLabel,"for",this.modelNameTextBox.id);var a=this;this.modelNameTextBox.validator=function(b){b=a._checkModelName(b);return null!=b&&0<b.length?(this.invalidMessage=b,!1):!0}}catch(b){throw new k.ClientException("CopyAndArchiveModelView#postCreate",b);}},setModel:function(a,b){try{this._modelId=a,this._modelName=b}catch(d){throw new k.ClientException("CopyAndArchiveModelView#setModel",d);}},_onCopyAndArchiveModel:function(){try{if(this.isValid()){var a=this.modelNameTextBox.get("value");
this.onCopyAndArchiveModel(this._modelId,this._modelName,e.trim(a))}}catch(b){throw new k.ClientException("CopyAndArchiveModelView#_onCopyAndArchiveModel",b);}},_onCopyAndArchiveModelButtonClick:function(a){this._onCopyAndArchiveModel()},_onKeyDown:function(b){var d=b.keyCode;d===a.ESCAPE?(this._onCancel(),n.stop(b)):d===a.ENTER&&(this._onCopyAndArchiveModel(),n.stop(b))},_onShow:function(){try{var a=b.escapeHTML(this._modelName);this.onTitleChange(s.titleCopyAndArchiveModel.replace(/\$\{modelName\}/,
a));this.onHelpChange(null);this.modelNameTextBox.focus()}catch(d){throw new k.ClientException("CopyAndArchiveModelView#_onShow",d);}}})})},"anaplan/settings/UsersAndRoles/_Users":function(){define("./Users/_Model anaplan/anapediaKeys anaplan/common/SelectiveAccess anaplan/constants anaplan/data/Aggregator anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/data/RequestFactory anaplan/Exceptions anaplan/forms/UserDetails anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/GridletFactory anaplan/gridlet/Selection anaplan/layout/ManagedContainer anaplan/settings/UsersAndRoles/Users/_Roles anaplan/utils/ChangeValidator anaplan/utils/EntityLongIdHelper anaplan/utils/FormatHelper anaplan/utils/SelectionHelper anaplan/utils/SubmissionHandler anaplan/utils/UIHelper anaplan/validators/UserListValidator anaplan/view/Export anaplan/view/ManageImportSources anaplan/widgets/Button anaplan/widgets/ConfirmationDialog anaplan/widgets/Dialog anaplan/widgets/SearchToolbarButton anaplan/widgets/Tooltip anaplan/widgets/Toolbar dijit/ToolbarSeparator dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/i18n!anaplan/nls/exportLabels dojo/i18n!anaplan/nls/toolbar dojo/i18n!anaplan/nls/users dojo/on".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D,N,F,H,I,P,J,O){return F([h],{gutters:!1,liveSplitters:!1,constructor:function(a){this._workspaceId=a.workspaceId;this._modelId=a.modelId;this._gridlet=null;var b={name:J.labelUsers,type:"MODEL_DATA",staticContextIdentifiers:[],columnSizes:{defaultColumnWidth:150,customRowLabelWidthsByDimension:[],customWidthsByLineItem:[{identifier:t.entityLongIdToEntityLongIdIdentifier(p.SYSTEM_PROPERTY_USER_FIRST_NAME),width:90},{identifier:t.entityLongIdToEntityLongIdIdentifier(p.SYSTEM_PROPERTY_USER_LAST_NAME),
width:90},{identifier:t.entityLongIdToEntityLongIdIdentifier(p.SYSTEM_PROPERTY_USER_MODEL_ROLE),width:120},{identifier:t.entityLongIdToEntityLongIdIdentifier(p.SYSTEM_PROPERTY_USER_GUID),width:200}],customWidthsByStyle:[]}},c=f.getAxesForViewDefinition([p.SYSTEM_AXIS_IDENTIFIER_USER_IDENTIFIER],[p.SYSTEM_AXIS_IDENTIFIER_USER_PROPERTY_IDENTIFIER]);H.mixin(b,c);this._viewDefinition=b;this._model=new g({workspaceId:this._workspaceId,modelId:this._modelId,viewDefinition:this._viewDefinition});this._tooltips=
[];this._showTipsOnStartup=a.showTipsOnStartup},startup:function(){this._started&&console.warn("startup %s",this.id);try{this.inherited(arguments);this._toolbar=this._createToolbar();this.addChild(this._toolbar);this._showTipsOnStartup&&this.show(p.TIPS);this._gridlet=(new d({editorFactory:new e})).createGridlet({region:"center",defaultColumnWidth:150,model:this._model,changeValidator:new c({validators:[new A]}),selection:(new q).initializeToDefaults()});this.addChild(this._gridlet);var a=O(this._gridlet,
"SelectionChange",H.hitch(this,"_onSelectionChange")),b=O(this._gridlet,"Update",H.hitch(this,"_onUpdate")),f=O(this._gridlet,"reset",H.hitch(this,"_reset"));this.own(a,b,f);this._roles=new u({workspaceId:this._workspaceId,modelId:this._modelId});this._roles.initialize();var h=O(this._gridlet,"Update",H.hitch(this,"_onUsersUpdate")),g=O(this._roles,"Update",H.hitch(this,"_onRolesUpdate"));this.own(h,g);this._model.getSelectorLabelPage=H.hitch(this,"_getRolesSelectorLabelPage");r.gather();this._searchButton.set("model",
this._model);this._searchButton.set("widget",this._gridlet);n.addObserver(this);setTimeout(H.hitch(this,function(){this._gridlet.domNode&&this._gridlet.focus()}),125)}catch(k){console.error(k)}},uninitialize:function(){n.deleteObserver(this);this._confirmationHandles&&N.forEach(this._confirmationHandles,function(a){a.remove()});this._confirmationDialog&&this._confirmationDialog.destroy();this._roles&&this._roles.destroy();n.setUsersInModel(null);this.inherited(arguments)},update:function(){this._beingDestroyed||
this._enableButtons()},hide:function(a){if(a===p.TIPS){for(var b=0;b<this._tooltips.length;b++)this._tooltips[b].destroy();this._tooltips=[]}this.inherited(arguments)},show:function(a){a===p.TIPS&&this._createTooltips();this.inherited(arguments)},_confirm:function(a,b){var c=this;this._confirmationDialog||(this._confirmationDialog=new E({}),this._confirmationHandles=[]);var d=function(){N.forEach(c._confirmationHandles,function(a){a.remove()})};d();this._confirmationDialog.set("content",a);var e=
O(this._confirmationDialog,"Hide",function(){setTimeout(function(){d();c._gridlet.focus()},1E3)});this._confirmationHandles.push(e);e=O(this._confirmationDialog,"execute",H.hitch(this,b));this._confirmationHandles.push(e);this._confirmationDialog.show()},_createDeleteButton:function(){var a=new v({label:J.buttonDeleteUser,showLabel:"true","data-anaplan-element-name":"toolbar-button-delete-user",disabled:!0});this.own(O(a,"click",H.hitch(this,"_doConfirmDelete")));return a},_doConfirmDelete:function(){var a=
this,b=this._getGridController(),b=w.getRowsSelection(this._gridlet._selection,b.getContext());if(!(1<b.count))try{var c=[],d=[],e=b.labels[0][0],f=a._findUser(e);f?(c.push(f.userId),d.push(m.escapeHTML(m.unescapeHTML([f.firstName,f.lastName].join(" "))))):(c.push(e),d.push(e));var h;h=1===c.length?J.messageConfirmDelete.replace("%s",d[0]):J.messageConfirmMultipleDelete.replace("%s",c.length);this._confirm(h,function(){a._doDelete(c)})}catch(g){x.showErrorReporter(new l.ClientException("_Users: _createDeleteButton (onClick)",
g))}},_doDelete:function(a){var b=this._gridlet,c=[];N.forEach(a,function(a){c.push({actionId:"DELETE_USER_FROM_WORKSPACE",params:{userId:a}})});(new z({aggregatorObserver:this._model})).gather(null,null,c).then(function(){b.fixSelection()})},_createExportButton:function(){var a=new v({iconClass:"anaplanEditorIcon anaplanEditorIconExport",label:J.buttonExportUsers,showLabel:"true","data-anaplan-element-name":"toolbar-button-export"}),b=a.on("click",H.hitch(this,function(){this._displayExportDialog()}));
this.own(b);return a},_createImportButton:function(){var a=new v({iconClass:"anaplanEditorIcon anaplanEditorIconImport",label:J.buttonImportUsers,showLabel:"true","data-anaplan-element-name":"toolbar-button-import",disabled:!0}),b=a.on("click",H.hitch(this,function(){this._displayManageSourcesDialog()}));this.own(b);return a},_createInsertButton:function(){var c=this,d=new v({label:J.buttonAddUser,showLabel:"true","data-anaplan-element-name":"toolbar-button-add-user",disabled:!0}),e=d.on("click",
H.hitch(this,function(){var d=0!=this._model.getColumnCount()%2?!0:!1,e=new a({workspaceId:c._workspaceId,modelId:c._modelId,isSsoServerManaged:d,rolesLabelPage:c._rolesLabelPage}),f;d?(f=x.getSharedDialog(),f.set("title",J.titleAddUser),f.set("refocus",!1),f.set("content",e.domNode)):f=new C({title:J.titleAddUser,content:e.domNode});var h=O(e,"Complete",H.hitch(this,function(a){console.warn("TODO: position grid when return from gather (?) "+a);f.hide();this._gridlet.focus();r.gather()}));e.own(h);
d&&f.setHelpContent(b.singleSignOn);f.show()}));this.own(e);return d},_createRefreshButton:function(){var a=this,b=new v({iconClass:"anaplanEditorIcon anaplanEditorIconRefresh",label:P.labelRefresh,showLabel:"true","data-anaplan-element-name":"toolbar-button-refresh"});b.on("click",function(){a._getGridController().refresh()});return b},_createSearchButton:function(){return new G({iconClass:"anaplanEditorIcon anaplanEditorIconSearch",label:P.labelSearch,showLabel:!1,"data-anaplan-element-name":"toolbar-button-search"})},
_createToolbar:function(){var a=new K({region:"top"});this._insertButton=this._createInsertButton();a.addChild(this._insertButton);this._deleteButton=this._createDeleteButton();a.addChild(this._deleteButton);a.addChild(new D);this._importButton=this._createImportButton();a.addChild(this._importButton);this._exportButton=this._createExportButton();a.addChild(this._exportButton);a.addChild(new D);this._refreshButton=this._createRefreshButton();a.addChild(this._refreshButton);a.addChild(new D);this._searchButton=
this._createSearchButton();a.addChild(this._searchButton);return a},_createTooltip:function(a,b){var c=["below","above"],d=a.get("label"),e=J["tooltip"+b.split(" ").join("")];if(e)return e=m.searchAndReplacePlaceholders(e),new L({label:e,connectId:[a.domNode],position:c,title:d})},_createTooltips:function(){this._tooltips.push(this._createTooltip(this._insertButton,"AddUser"));this._tooltips.push(this._createTooltip(this._deleteButton,"DeleteUser"))},_disableButtons:function(){this._toolbar.getChildren().forEach(function(a){a.set("disabled",
!0)})},_displayExportDialog:function(){var a=x.getSharedDialog(),b=new B({modelId:this._modelId,viewDefinition:this._viewDefinition,pageInfo:this._model.getPageInfo(),hierarchyId:J.labelUsers});a.set("title",I.titleExport);a.set("refocus",!1);a.set("content",b.domNode);var c=O(b,"AfterExport",function(){a.hide()});a.own(c);b=O(b,"Cancel",function(){a.onCancel()});a.own(b);a.show()},_displayManageSourcesDialog:function(){var a=x.getSharedDialog(),c=new y({workspaceId:this._workspaceId,modelId:this._modelId,
importType:p.importType.USERS,targetId:t.entityLongIdToEntityLongIdIdentifier(p.SYSTEM_AXIS_IDENTIFIER_USER_ENTITY_LONG_ID)});a.set("title","Select Source");a.set("refocus",!1);a.set("content",c.domNode);c=O(c,"Close",function(){a.onCancel()});a.own(c);a.setHelpContent(b.usersImport);a.show()},_enableButtons:function(){var a=k.canCreate(p.USER_ENTITY_TYPE_INDEX),b=k.canDelete(p.USER_ENTITY_TYPE_INDEX),c=this._gridlet._selection,d=[];c&&(!c.isWholeGridSelected()&&!c.isWholeColumnSelected())&&(d=this._getGridController(),
d=w.getSelection(c,d.getContext()));c=1===d.count;b=b&&c;this._deleteButton.get("disabled")==b&&this._deleteButton.set("disabled",!b);[this._insertButton,this._importButton].forEach(function(b){b&&b.get("disabled")===a&&b.set("disabled",!a)});[this._refreshButton,this._exportButton,this._searchButton].forEach(function(a){a&&!0===a.get("disabled")&&a.set("disabled",!1)})},_findUser:function(a){a=s.createRequest(this._workspaceId,[],[],[{actionId:"FIND_USER",params:{emailAddress:a}}]);return(a=this._postSynchronous(a))&&
a.user?a.user:null},_getGridController:function(){return!this._gridlet?null:this._gridlet._gridController},_getRolesSelectorLabelPage:function(a,b){console.warn("TODO: get userWorkspaceRole from grid - likely returned as boolean");var c=p.selectiveAccess.userWorkspaceRole.USER,c=n.getInbuiltModelRolesMap()[c],d=this._rolesLabelPage;b({start:0,count:c.count+d.count,entityIds:[c.entityIds[0].slice().concat(d.entityIds[0].slice())],entityLongIds:[c.entityLongIds[0].slice().concat(d.entityLongIds[0].slice())],
labels:[c.labels[0].slice().concat(d.labels[0].slice())],parentEntityLongIds:[c.parentEntityLongIds[0].slice().concat(d.parentEntityLongIds[0].slice())]})},_onRolesUpdate:function(a){this._rolesLabelPage=a},_onSelectionChange:function(){this._enableButtons()},_onUpdate:function(){this._gridlet&&!this._gridlet._selection&&this._gridlet._gridController.setBestSelection()},_onUsersUpdate:function(){this._enableButtons()},_postSynchronous:function(a){var b=this,c;r.post(a,!0,function(a){a.error||(a.result?
(a=a.result,!a.systemActionResults||!a.systemActionResults.length?console.warn(b.declaredClass+"_postSyncronous expected to receive system action result and did not"):c=a.systemActionResults[0]):console.warn(b.declaredClass+"_postSyncronous expected to receive result and did not"))},function(){});return c},_reset:function(){this._disableButtons()}})})},"anaplan/modelmap/display/IsolationMode":function(){define("dojo/_base/declare dojo/Evented dojo/query dojo/_base/lang dojo/_base/array dojo/on".split(" "),
function(g,b,k,p,r,n){return g([b],{_clickListener:null,_dblClickListener:null,_clickTimeout:0,_doubleClick:!1,_nodes:null,_selectedNodes:null,_panel:null,_hideUnselected:!1,_lastSelection:null,constructor:function(){this._nodes=[];this._selectedNodes=[]},listen:function(b,g){this._panel=k(".yfiles-svgpanel",g)[0];null===this._clickListener&&(this._clickListener=n(this._panel,".select-node:click",p.hitch(this,"_toggleSelected")),this._dblClickListener=n(this._panel,".select-node:dblclick",p.hitch(this,
"_handleDoubleClick")));this.update(b);this._svgAddClass(this._panel,"active")},remove:function(){this._clickListener.remove()},getSelectedNodes:function(){return r.filter(this._nodes,function(b){return b.selected||b.relativeSelected})},update:function(b){this._nodes=b;this._setupRelationships();this._selectedNodes=this._updateSelectedNodes(this._nodes,this._selectedNodes)},enterIsolateMode:function(){this._hideUnselected=!0;this._svgRemoveClass(this._panel,"active")},exitIsolateMode:function(){this._hideUnselected=
!1;this._svgAddClass(this._panel,"active")},clearSelection:function(){var b=k(".modelmap-node");r.forEach(b,p.hitch(this,function(b){var f=b.querySelector(".modelmap-checkbox"),a=this._findNodeBy("id",b.getAttribute("data-id"));this._deselectNode(a,b,f)}));r.forEach(this._selectedNodes,p.hitch(this,"_removeNode"));this._exitHighlightMode();this._lastSelection=null},select:function(b,g){if(!this._hideUnselected){var k=this._findNodeBy("id",g);this._svgAddClass(this._panel,"isolate-mode");if(null!==
b){var a=b.querySelector(".modelmap-checkbox");this._svgAddClass(a,"checked");this._svgAddClass(b,"isolate-display");this._svgAddClass(b,"selected")}this._selectNode(k);this._lastSelection=k;this.emit("enable_button")}},isSelectedNode:function(b){return r.some(this._selectedNodes,function(g){return g.name===b})},isIsolateMode:function(){return this._hideUnselected},getLastSelection:function(){return this._lastSelection},_toggleSelected:function(b){if(!this._hideUnselected){var g=b.target.parentNode.getAttribute("data-id"),
k=this._findNodeBy("id",g);this._clickTimeout=setTimeout(p.hitch(this,function(){var a=this._panel.querySelector('g[data-id\x3d"'+g+'"]'),b=a.querySelector(".modelmap-checkbox");this._doubleClick?this._doubleClick=!1:k.selected?this._deselectNode(k,a,b):this.select(a,g)}),250)}},_handleDoubleClick:function(){this._doubleClick=!0;clearTimeout(this._clickTimeout);setTimeout(p.hitch(this,function(){this._doubleClick=!1}),350)},_selectNode:function(b){b.selected=!0;this._selectedNodes.push(b);this._highlightArrows(b.name);
r.forEach(b.allRelationships,p.hitch(this,function(b){try{var f=k('.modelmap-node[data-label\x3d"'+b+'"]')[0];this._svgAddClass(f,"isolate-display")}catch(a){}this._findNodeBy("name",b).relativeSelected=!0}))},_deselectNode:function(b,g,k){this._removeNode(b);this._svgRemoveClass(k,"checked");this._svgRemoveClass(g,"selected");this._checkSafeToDeselect(b.name)&&this._svgRemoveClass(g,"isolate-display");1>this._selectedNodes.length&&this._exitHighlightMode()},_removeNode:function(b){b.selected=!1;
this._selectedNodes=r.filter(this._selectedNodes,function(g){return b!==g});this._removeArrowHighlight(b.name);r.forEach(b.allRelationships,p.hitch(this,"_removeRelatedNode"))},_exitHighlightMode:function(){this._svgRemoveClass(this._panel,"isolate-mode");this.emit("disable_button")},_removeRelatedNode:function(b){if(this._checkSafeToDeselect(b)){var g=k('.modelmap-node[data-label\x3d"'+b+'"]').pop();this._findNodeBy("name",b).relativeSelected=!1;g&&this._svgRemoveClass(g,"isolate-display")}},_highlightArrows:function(b){function g(b){this._svgAddClass(b,
"isolate-display")}k('.fullArrow[data-to\x3d"'+b+'"]').forEach(p.hitch(this,g));k('.fullArrow[data-from\x3d"'+b+'"]').forEach(p.hitch(this,g))},_removeArrowHighlight:function(b){function g(b){var a=b.getAttribute("data-from");r.some(this._selectedNodes,function(b){return a===b.name})||this._svgRemoveClass(b,"isolate-display")}k('.fullArrow[data-to\x3d"'+b+'"]').forEach(p.hitch(this,g));k('.fullArrow[data-from\x3d"'+b+'"]').forEach(p.hitch(this,g))},_findNodeBy:function(b,g){return r.filter(this._nodes,
function(k){return k[b]===g}).pop()||null},_checkSafeToDeselect:function(b){for(var g=this._selectedNodes.length,k,a;g--;){if(this._selectedNodes[g].name===b)return!1;a=this._selectedNodes[g].allRelationships;for(k=a.length;k--;)if(a[k]===b)return!1}return!0},_setupRelationships:function(){var b=this,g=this._nodes;r.forEach(g,function(k){k.allRelationships=k.relationships.slice();r.forEach(g,function(a){b._isRelative(k,a)&&k.allRelationships.push(a.name)})})},_isRelative:function(b,g){return r.some(g.relationships,
function(g){return b.name===g})},_updateSelectedNodes:function(b,g){r.forEach(b,p.hitch(this,function(b){this._isSelected(b.entityLongId,g)&&this._selectNode(b)}));return r.filter(b,function(b){return b.selected})},_isSelected:function(b,g){var k=r.filter(g,function(a){return a.entityLongId===b}).pop();return!!k&&k.selected},_svgAddClass:function(b,g){if(p.exists("classList.add",b))b.classList.add(g);else{var k=b.getAttribute("class");b.setAttribute("class",k+" "+g)}},_svgRemoveClass:function(b,g){if(p.exists("classList.add",
b))b.classList.remove(g);else{var k=b.getAttribute("class"),k=r.filter(k.split(" "),function(a){return a!==g}).join(" ");b.setAttribute("class",k)}}})})},"anaplan/settings/Time2/Forms/Widgets/SelectWithData":function(){define(["anaplan/utils/JsHelper","dijit/form/Select","dojo/_base/declare","dojo/data/ObjectStore","dojo/store/Memory"],function(g,b,k,p,r){return k(b,{sortByLabel:!1,labelType:"text",required:!0,useLabelAsValue:!1,startup:function(){this.inherited(arguments);this.refreshValues()},refreshValues:function(){this.set("store",
this._getData());this.data.selected&&this.set("value",this.data.selected)},_getData:function(){var b=[],f;for(f in this.data.items)g.has(this.data.items,f)&&b.push({label:this.data.items[f],id:f});b=new r({data:b});return new p({objectStore:b})},_getValueAttr:function(){var b=this._getValueFromOpts();if(this.useLabelAsValue){var f=this._getData().objectStore.query({id:b});return 1===f.length?f[0].label:b}return g.tryParseInt(b)}})})},"anaplan/view/_EditorHelper":function(){define("dojo/_base/declare anaplan/data/ModelContentHelper anaplan/data/ModelContentCache anaplan/utils/CookieHelper anaplan/utils/FormatHelper dojo/window dojo/json dojo/has dojo/_base/sniff".split(" "),
function(g,b,k,p,r,n,f,s,l){g=g("anaplan.view._EditorHelper",[],{ATTACH_REASON_DOCK:0,ATTACH_REASON_SAVE:1,ATTACH_REASON_RESET:2,decomposeFormulaInfo:function(a){if(!a)return console.warn("anaplan.view._EditorHelper decomposeFormulaInfo expected formulaInfo argument and found",a),{currentExpression:"",formulaLabel:"",formulaScope:"",formulaValue:""};var e=a.formulaScope,d=b.getLineItemSubsetLabel(k,e.lineItemSubsetEntityLongId),e=b.getVersionLabel(k,e.versionEntityLongId);a=a.formulaString&&a.formulaString.length?
a.formulaString:"";return{currentExpression:a,formulaLabel:e,formulaScope:d,formulaValue:a}},getFormulaWindowCoords:function(){var a=n.getBox(),b=Math.max(a.w/3,250),d=Math.max(a.h/2,200),b={w:b,h:d,x:b<a.w?2*(a.w/3):0,y:d<a.h?a.h/4:0},d=p.loadCookie("formulawindow");if(!d)return b;d.x=Math.max(d.x,0);d.y=Math.max(d.y,0);return d.w+d.x>a.w||d.h+d.y>a.h?b:d},getPropertiesForEditor:function(a){return!a?{cssStyle:"formulaexpressionnormal",currentExpression:"",disabled:!1,editMode:!1,entityLongIds:[],
formulaInfo:null,formulaLabel:"",formulaScope:"",formulaValue:"",showTitle:!1,title:""}:{cssStyle:a.get("cssStyle"),currentExpression:a.get("currentExpression"),disabled:a.get("disabled"),editMode:a.get("editMode"),entityLongIds:a.get("entityLongIds"),formulaInfo:a.get("formulaInfo"),formulaLabel:a.get("formulaLabel"),formulaScope:a.get("formulaScope"),formulaValue:a.get("formulaValue"),showTitle:!1,title:a.get("title")}},getInputSelection:function(a){var b=-1,d=-1;document.selection?(d=document.selection.createRange(),
b=d.duplicate(),b.moveToElementText(a),b.setEndPoint("EndToEnd",d),b=b.text.length-d.text.length,d=b+d.text.length):(b=a.selectionStart,d=a.selectionEnd);return{startIndex:b,endIndex:d}},insertExpression:function(a,b,d){s("ie")||(b=this.getInputSelection(a));var f=a.value,h=[],g=b.startIndex;b=b.endIndex;var c=f.substring(0,g);b=f.substring(b);h.push(c);var c=f.length,k=f.match(/(.+?)\s+$/);k&&(c=k[1].length);if(g>=c&&!this._isOperator(d)&&(g=f.match(/([^\s])\s*$/)))if(g=g[1],!this._isOperator(g)&&
!("("===g||","===g||":"===g||"\x26"===g||"\x3c"===g||"\x3e"===g))g=f.substring(0,c).split(" "),g=g[g.length-1].toUpperCase(),5<g.length&&"SELECT"===g.substring(g.length-6)||2<g.length&&"SUM"===g.substring(g.length-3)||5<g.length&&"LOOKUP"===g.substring(g.length-6)?h.push(":"):"IF"===g||"THEN"===g||"ELSE"===g||"OR"===g?" "!==f.substring(c,c+1)&&h.push(" "):h.push("+");h.push(r.unescapeHTML(d));b&&b.length&&" "!==b.substring(0,1)&&h.push(" ");h.push(b);a.value=h.join("");return this.setCaretPosition(a,
a.value.length-b.length)},_isOperator:function(a){return"+"===a||"-"===a||"*"===a||"/"===a||"\x3d"===a?!0:!1},setCaretPosition:function(a,b){if(a.createTextRange){var d=a.createTextRange();d.moveStart("character",-a.value.length);d.moveEnd("character",-a.value.length);d.moveStart("character",b);d.moveEnd("character",0);d.select()}else a.selectionStart=a.selectionEnd=b;return{startIndex:b,endIndex:b}}});anaplan.view._EditorHelper=new g;return anaplan.view._EditorHelper})},"anaplan/view/SavedViewSaveAs/_SaveAsTextBox":function(){define("dojo/_base/declare dojo/string dijit/form/ValidationTextBox anaplan/constants anaplan/utils/IdChecker dojo/i18n!anaplan/nls/savedViewSaveAs".split(" "),
function(g,b,k,p,r,n){return g("anaplan.view.SavedViewSaveAs._SaveAsTextBox",[k],{maxChars:p.MAXIMUM_ID_LENGTH,trim:!0,constructor:function(b){b&&(this.maxChars=b.maxChars||this.maxChars);this._idChecker=new r},validator:function(f,g){if(!0==this.get("disabled"))return!0;var k=b.trim(f);if(!this._idChecker.checkId(k,!1))return this.invalidMessage=this._idChecker.getInvalidIdMessage(),!1;for(var k=k.toLowerCase(),a=g.reservedViewNames,e=0;e<a.length;e++)if(k==a[e].toLowerCase())return this.invalidMessage=
n.messageInvalidDuplicateName,!1;return!0}})})},"anaplan/settings/Modules/LineItemsView":function(){define("anaplan/utils/FormatHelper anaplan/utils/UIHelper anaplan/data/Aggregator dojo/_base/declare anaplan/layout/ManagedContainer anaplan/toolbar/_ButtonsMixin dijit/ToolbarSeparator anaplan/widgets/Button anaplan/widgets/Tooltip anaplan/widgets/Toolbar anaplan/widgets/SearchToolbarButton anaplan/gridlet/_editor/EditorFactory anaplan/gridlet/GridletFactory anaplan/utils/ChangeValidator anaplan/utils/EntityLongIdHelper anaplan/view/Export anaplan/validators/ModuleBlueprintValidator anaplan/gridlet/Selection anaplan/utils/SelectionHelper anaplan/gridlet/ViewRequestGridModel dojo/_base/array dojo/_base/lang dojo/topic dojo/on anaplan/Exceptions anaplan/constants dojo/i18n!anaplan/nls/modules dojo/i18n!anaplan/nls/view dojo/i18n!anaplan/nls/toolbar dojo/i18n!anaplan/nls/common dojo/i18n!anaplan/nls/exportLabels".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C,G,L,K,D){return p([r,n],{gutters:!1,constructor:function(a){this._viewDefinition=a.viewDefinition;this._showTipsOnStartup=a.showTipsOnStartup;this._isShowing=!1;this._tooltips=[];this._gridlet=null},hide:function(a){a===E.TIPS&&(x.forEach(this._tooltips,function(a){a.destroy()}),this._tooltips=[]);this.inherited(arguments)},onHide:function(){this._isShowing=!1;this._handleSuspend()},onShow:function(){this._isShowing=!0;this._handleResume();
this.getParent().getParent()&&!this._gridlet&&this._createGridlet()},postCreate:function(){this.inherited(arguments);this._createToolbar()},resume:function(){this.inherited(arguments);this._handleResume()},show:function(a){a===E.TIPS&&this._createTooltips();this.inherited(arguments)},startup:function(){this.inherited(arguments);this._showTipsOnStartup&&this.show(E.TIPS)},suspend:function(){this.inherited(arguments);this._handleSuspend()},uninitialize:function(){x.forEach(this._tooltips,function(a){a.destroy()});
this.inherited(arguments)},_createExportButton:function(){var a=new s({iconClass:"anaplanEditorIcon anaplanEditorIconExport",label:L.labelExport,showLabel:"true","data-anaplan-element-name":"toolbar-button-export"}),b=a.on("click",A.hitch(this,"_displayExportDialog"));this.own(b);return a},_createGridlet:function(){try{this._model=new z({viewDefinition:this._viewDefinition}),this._gridlet=(new q({editorFactory:new d})).createGridlet({region:"center",model:this._model,changeValidator:new h({validators:[new t]}),
defaultColumnWidth:150,selection:(new m).initializeToDefaults()}),this.addChild(this._gridlet),this.own(y(this._gridlet,"SelectionChange",A.hitch(this,"_onSelectionChange")),y(this._gridlet,"Update",A.hitch(this,"_onUpdate")),y(this._gridlet,"reset",A.hitch(this,"_reset"))),k.gather(),this._searchButton.set("model",this._model),this._searchButton.set("widget",this._gridlet),this._gridlet.focus()}catch(a){b.throwClientException(this,a)}},_createOpenButton:function(){var a=new s({label:C.buttonOpenModule,
iconClass:"anaplanEditorIcon anaplanEditorIconOpen","data-anaplan-element-name":"toolbar-button-open"}),b=a.on("click",A.hitch(this,"_doOpen"));this.own(b);return a},_createSearchButton:function(){return new e({iconClass:"anaplanEditorIcon anaplanEditorIconSearch",label:L.labelSearch,showLabel:!1,"data-anaplan-element-name":"toolbar-button-search"})},_createToolbar:function(){var b=new a({region:"top"});this._toolbar=b;this.addChild(b);this._openButton=this._createOpenButton();b.addChild(this._openButton);
b.addChild(new f);this._exportButton=this._createExportButton();b.addChild(this._exportButton);b.addChild(new f);this._refreshButton=this._createRefreshButton();b.addChild(this._refreshButton);b.addChild(new f);this._searchButton=this._createSearchButton();b.addChild(this._searchButton)},_createTooltip:function(a,b){var c=a.get("label"),d=C["tooltip"+b.split(" ").join("")];d||(d=G["tooltip"+b.split(" ").join("")]);if(!d)return null;d=g.searchAndReplacePlaceholders(d);return new l({label:d,connectId:[a.domNode],
position:["below","above"],title:c})},_createTooltips:function(){this._tooltips.length?console.warn(this.declaredClass+" expected to find no tooltips, found "+this._tooltips.length):(this._tooltips.push(this._createTooltip(this._openButton,"Open")),this._tooltips.push(this._createTooltip(this._refreshButton,"Refresh")))},_displayExportDialog:function(){var a=b.getSharedDialog(),d=new c({modelId:modelId,viewDefinition:this._viewDefinition,pageInfo:this._model.getPageInfo(),hierarchyId:K.labelLineItems});
a.set("title",D.titleExport);a.set("refocus",!1);a.set("content",d.domNode);var e=y(d,"AfterExport",function(){a.hide()});this.own(e);d=y(d,"Cancel",function(){a.onCancel()});this.own(d);a.show()},_doOpen:function(){try{for(var a=this._gridlet,c=this._getGridController(),d=w.getSelection(a._selection,c.getContext()),e=d.count,a=[],c=0;c<e;c++){var f=d.entityLongIds[0][c];u.getEntityTypeIndex(f)===E.MODULE_ENTITY_TYPE_INDEX&&a.push(f)}a.length&&B.publish("anaplan/views",a)}catch(h){b.showErrorReporter(new v.ClientException(this.declaredClass+
": _doOpen",h,{widgetId:this.id}))}},_enableButtons:function(a){this._searchButton.set("disabled",!1);this._exportButton.set("disabled",!1);var b=this._getGridController();this._openButton.set("disabled",!a||w.isOperationOnColumns(a,b.getContext()));this.inherited(arguments)},_getGridController:function(){return!this._gridlet?null:this._gridlet.getGridController()},_handleResume:function(){var a=this._getGridController();a&&a.resume()},_handleSuspend:function(){this.inherited(arguments);this._gridlet&&
this._gridlet.getGridController().suspend()},_onSelectionChange:function(a){this._enableButtons(a)},_onUpdate:function(){this._gridlet&&!this._gridlet._selection&&this._gridlet._gridController.setBestSelection()},_reset:function(){this._disableButtons(this._toolbar)}})})},"anaplan/settings/Actions":function(){define("anaplan/utils/FormatHelper dojo/_base/declare dijit/layout/TabContainer anaplan/widgets/Tooltip anaplan/data/ModelContentHelper anaplan/settings/ActionsView anaplan/settings/ImportsView anaplan/settings/ImportDataSourcesView dojo/_base/array dojo/_base/lang anaplan/utils/EntityLongIdHelper anaplan/utils/UIHelper anaplan/constants dojo/i18n!anaplan/nls/actions dojo/i18n!anaplan/nls/common".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u){return b("anaplan.settings.Actions",[k],{constructor:function(a){this._modelContent=a.modelContent;this._showTipsOnStartup=a.showTipsOnStartup;this._viewDefinition=a.content[0].viewDefinition;this._tooltips=[];this._args=a},hide:function(a){a===q.TIPS&&(l.forEach(this._tooltips,function(a){a.destroy()}),this._tooltips=[]);l.forEach(this.getChildren(),function(b){b.hide(a)})},postCreate:function(){this.inherited(arguments);this._createTabs()},resume:function(){l.forEach(this.getChildren(),
function(a){a.resume()})},show:function(a){a===q.TIPS&&this._createTooltips();l.forEach(this.getChildren(),function(b){b.show(a)})},startup:function(){this.inherited(arguments);this._showTipsOnStartup&&this._createTooltips()},suspend:function(){l.forEach(this.getChildren(),function(a){a.suspend()})},uninitialize:function(){l.forEach(this._tooltips,function(a){a.destroy()});this.inherited(arguments)},_createTabs:function(){var b=[];b.push({id:this.id+"_ACTIONS",title:u.labelActions,widgetClass:n,viewDefinition:a.mixin(a.mixin({},
this._viewDefinition),{columnSizes:{customWidthsByLineItem:[],customWidthsByStyle:[],defaultColumnWidth:350,rowLabelWidth:400}})});b.push({id:this.id+"_IMPORTS",title:u.labelImports,widgetClass:f,viewDefinition:a.mixin({type:"MODEL_DEFINITION",staticContextIdentifiers:[],columnSizes:{customWidthsByLineItem:[{identifier:e.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_IMPORT_SOURCE_TYPE),width:100},{identifier:e.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_IMPORT_TARGET_TYPE),width:100},
{identifier:e.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_IMPORT_PRODUCTION_DATA),width:100}],customWidthsByStyle:[],defaultColumnWidth:150}},r.getAxesForViewDefinition([q.SYSTEM_AXIS_IDENTIFIER_IMPORT_ALL_IDENTIFIER],[q.SYSTEM_AXIS_IDENTIFIER_IMPORT_DEFINITION_PROPERTY_IDENTIFIER]))});b.push({id:this.id+"_IMPORT_DATA_SOURCES",title:u.labelImportDataSources,widgetClass:s,viewDefinition:a.mixin({type:"MODEL_DEFINITION",staticContextIdentifiers:[],columnSizes:{customWidthsByLineItem:[{identifier:e.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_IMPORT_DATA_SOURCE_TYPE),
width:100},{identifier:e.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_IMPORT_DATA_SOURCE_PRODUCTION_DATA),width:100},{identifier:e.entityLongIdToEntityLongIdIdentifier(q.SYSTEM_PROPERTY_IMPORT_DATA_SOURCE_IMPORTS),width:300}],customWidthsByStyle:[],defaultColumnWidth:150}},r.getAxesForViewDefinition([q.SYSTEM_AXIS_IDENTIFIER_IMPORT_DATA_SOURCE_IDENTIFIER],[q.SYSTEM_AXIS_IDENTIFIER_IMPORT_DATA_SOURCE_DETAILS_PROPERTY_IDENTIFIER]))});for(var d,h=0;h<b.length;h++)d=b[h],d=new d.widgetClass(a.mixin(a.mixin({},
this._args),{id:d.id,title:d.title,viewDefinition:d.viewDefinition,modelContent:this._modelContent,showTipsOnStartup:this._showTipsOnStartup})),this.addChild(d)},_createTooltip:function(a,b){var d=a.get("label"),e=h["tooltip"+b.split(" ").join("")],e=g.searchAndReplacePlaceholders(e);return new p({label:e,connectId:[a.domNode],position:["below","above"],title:d})},_createTooltips:function(){if(this._tooltips.length)console.warn(this.declaredClass+" expected to find no tooltips, found "+this._tooltips.length);
else for(var a=this.tablist.getChildren(),b=a.length,d,e=0;e<b;e++)d=a[e],this._tooltips.push(this._createTooltip(d,d.get("label")))}})})},"dijit/RadioMenuItem":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/query!css2 ./CheckedMenuItem ./registry".split(" "),function(g,b,k,p,r,n){return b("dijit.RadioButtonMenuItem",r,{baseClass:"dijitMenuItem dijitRadioMenuItem",role:"menuitemradio",checkedChar:"*",group:"",_setGroupAttr:"domNode",_setCheckedAttr:function(b){this.inherited(arguments);
this._created&&b&&this.group&&g.forEach(this._getRelatedWidgets(),function(b){b!=this&&b.checked&&b.set("checked",!1)},this)},_onClick:function(b){!this.disabled&&!this.checked&&(this.set("checked",!0),this.onChange(!0));this.onClick(b)},_getRelatedWidgets:function(){var b=[];p("[group\x3d"+this.group+"][role\x3d"+this.role+"]").forEach(function(g){(g=n.getEnclosingWidget(g))&&b.push(g)});return b}})})},"anaplan/layout/Banner/_BannerHelp":function(){define("anaplan/data/automaticRefreshInterval anaplan/constants anaplan/common/SelectiveAccess anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/data/UserInfo anaplan/Exceptions anaplan/i18n/Locale anaplan/keyboard/shortcutsDialog anaplan/utils/CookieHelper anaplan/utils/FormatHelper anaplan/utils/UIHelper anaplan/utils/UrlHelper anaplan/view/AskAQuestion anaplan/widgets/DropDownButton anaplan/widgets/MenuItem anaplan/widgets/ArrowlessMenuItem dijit/Dialog dijit/DropDownMenu dijit/MenuSeparator dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/cookie dojo/i18n!anaplan/nls/banner dojo/string dojo/topic".split(" "),
function(g,b,k,p,r,n,f,s,l,a,e,d,q,h,u,c,t,m,w,z,x,A,B,y,v,E,C){return A([u],{constructor:function(){this._tipsEnabled=this._breakbackMarkersEnabled=!0},postCreate:function(){this.inherited(arguments);this.own(C.subscribe("anaplan/hide",B.hitch(this,"_onHide")),C.subscribe("anaplan/show",B.hitch(this,"_onShow")))},loadDropDown:function(a){var d=new w({style:"display:none;"});d.addChild(new c({label:v.menuItemAskAQuestion,onClick:B.hitch(this,"_onAskAQuestion")}));d.addChild(new z({}));d.addChild(new c({label:v.menuItemAnapedia,
onClick:B.hitch(this,"_onAnapedia")}));d.addChild(new c({label:v.menuItemShowHelpForThisPage,onClick:B.hitch(this,"_onShowHelpForThisPage")}));d.addChild(new t({label:v.menuItemShowKeyboardShortcuts,onClick:l.showHandler,accelKey:l.shortcutHTML}));d.addChild(new z({}));d.addChild(new c({label:v.menuItemGetHelpFromTheCommunity,onClick:B.hitch(this,"_onGetHelpFromTheCommunity")}));d.addChild(new c({label:v.menuItemChat,onClick:B.hitch(this,"_onChat")}));d.addChild(new z({}));var e=new c({label:this._tipsEnabled?
v.menuItemHideTips:v.menuItemShowTips,onClick:B.hitch(this,"_onToggleTips")});d.addChild(e);this._menuItemToggleTips=e;d.addChild(new c({label:v.menuItemShowAllConfirmations,onClick:B.hitch(this,"_onShowAllConfirmations")}));e=new c({label:this._breakbackMarkersEnabled?v.menuItemHideBreakbackMarkers:v.menuItemShowBreakbackMarkers,onClick:B.hitch(this,"_onToggleBreakbackMarkers")});d.addChild(e);this._menuItemToggleBreakbackMarkers=e;d.addChild(new z({}));k.isAuthorized(b.userActions.SUPPORT_POPULATE_MODEL_ORIGINS)&&
d.addChild(new c({label:v.menuItemOrigins,onClick:B.hitch(this,"_onModelOrigins")}));d.addChild(new c({label:v.menuItemAbout,onClick:B.hitch(this,"_onAbout")}));d.startup();this.dropDown=d;a()},_hideBreakbackMarkersForCurrentModel:function(){try{if(y.isSupported()){var c=a.loadCookie(b.DISABLED_BREAKBACK_MARKERS_COOKIE);c||(c={});if(c[workspaceId])if(B.isArray(c[workspaceId])){if(-1!==x.indexOf(c[workspaceId],modelId))return}else c[workspaceId]=[];else c[workspaceId]=[];c[workspaceId].push(modelId);
a.createCookie(b.DISABLED_BREAKBACK_MARKERS_COOKIE,c)}}catch(d){throw new f.ClientException("_HelpMenu: _hideBreakbackMarkersForCurrentModel",d);}},_onAskAQuestion:function(){App.interim.modals.showAskAQuestiondialog(App.interim.getReduxDispatch(),{})},_onAbout:function(){if(p.getApplicationProperty("aboutModal")){var a={content:{localeInfo:new s,workspaceId:workspaceId,modelSize:{cellCount:r.getFormattedCellCount(p),byteCount:r.getFormattedByteCount(p)},modelId:modelId,userInfo:{getLoggedInUserGuid:n.getLoggedInUserGuid(),
getLoggedInUserType:n.getLoggedInUserType(),getLoggedInUserCurrentModelRole:n.getLoggedInUserCurrentModelRole(),getLoggedInUserWorkspaceRole:n.getLoggedInUserWorkspaceRole()},sessionID:sessionId,copyrightYear:(new Date).getFullYear(),refreshInterval:g.getAutomaticRefreshInterval()}};App.interim.modals.showAboutdialog(App.interim.getReduxDispatch(),a)}else try{var b=new s,a=[[v.locale,b.language||"-"].join(" "),[v.decimalSeparator,b.decimalSeparator||"-"].join(" ")].join("\x3cbr\x3e"),c=[v.workspaceId,
workspaceId||"-"].join(" "),e=[r.getFormattedCellCount(p),r.getFormattedByteCount(p)].join(", "),h=[[v.modelId,modelId||"-"].join(" "),[v.modelSize,e].join(" ")].join("\x3cbr\x3e"),k=[[v.userId,n.getLoggedInUserGuid()||"-"].join(" "),[v.userType,n.getLoggedInUserType()||"-"].join(" "),[v.userCurrentModelRole,n.getLoggedInUserCurrentModelRole()||"-"].join(" "),[v.userWorkspaceRole,n.getLoggedInUserWorkspaceRole()||"-"].join(" ")].join("\x3cbr\x3e"),l=[v.sessionId,sessionId||"-"].join(" "),b=null,m=
g.getAutomaticRefreshInterval(),b=m?E.substitute(v.automaticRefreshInterval,{refreshInterval:m}):v.automaticRefreshOff,q=(new Date).getFullYear(),t=[v.copyrightLeading,v.copyrightTrailing].join(q);d.showInfoDialog([a,c,h,k,l,b,t].join("\x3cbr\x3e\x3cbr\x3e"),{title:v.titleAbout})}catch(u){d.showErrorReporter(new f.ClientException("_HelpMenu: _onAbout",u,{widgetId:this.id}))}},_onAnapedia:function(){var a=q.getUrl(b.URL_IDS.ANAPEDIA_BASE_URL_ID);a&&window.open(a,"_blank")},_onChat:function(){C.publish("anaplan/show",
b.LIVE_CHAT)},_onGetHelpFromTheCommunity:function(){var a=q.getUrl(b.URL_IDS.GET_HELP_FROM_THE_COMMUNITY_URL_ID);a&&window.open(a,"_blank")},_onHide:function(c){switch(c){case b.TIPS:a.createCookie("hideTooltips",!0);this._tipsEnabled=!1;this._menuItemToggleTips&&this._menuItemToggleTips.set("label",v.menuItemShowTips);break;case b.BREAKBACK_MARKERS:this._hideBreakbackMarkersForCurrentModel(),this._breakbackMarkersEnabled=!1,this._menuItemToggleBreakbackMarkers&&this._menuItemToggleBreakbackMarkers.set("label",
v.menuItemShowBreakbackMarkers)}},_onModelOrigins:function(){try{var a=p.getModelInfo(),b=v.labelEmptyOriginInfo;if(a.modelOrigins&&a.modelOrigins.length){for(var c=[],h=function(a,b,d){if(a.origins&&a.origins.length)for(var e=0;e<a.origins.length;++e)h(a.origins[e],b+1,e);c.push([E.rep("\u00a0",2*b)+(b?d?"\u251c":"\u250c":"")+a.method,a.instantiated,a.serviceInstance||"-",a.userGuid||"-",a.userEmailAddress||"-",a.workspaceGuid||"-",a.modelGuid||"-",a.modelName||"-",a.modelSerialNumber||"-",a.applicationGuid||
"-",a.applicationName||"-",a.applicationVersion||"-"])},g=0;g<a.modelOrigins.length;++g)h(a.modelOrigins[g],0);b='\x3ctable class\x3d"modelOrigins"\x3e\x3cthead\x3e\x3ctr\x3e\x3cth\x3e'+[v.labelHdrMethod,v.labelHdrDate,v.labelHdrServiceInstance,v.labelHdrUserGuid,v.labelHdrUserEmail,v.labelHdrWorkspaceGuid,v.labelHdrModelGuid,v.labelHdrModelName,v.labelHdrModelSerialNumber,v.labelHdrApplicationGuid,v.labelHdrApplicationName,v.labelHdrApplicationVersion].join("\x3c/th\x3e\x3cth\x3e")+"\x3c/th\x3e\x3c/tr\x3e\x3c/thead\x3e\x3ctbody\x3e\x3ctr\x3e"+
x.map(c,function(a){return"\x3ctd\x3e"+x.map(a,function(a){return e.escapeHTML(a,!0)}).join("\x3c/td\x3e\x3ctd\x3e")+"\x3c/td\x3e"}).join("\x3c/tr\x3e\x3ctr\x3e")+"\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e"}d.showInfoDialog(b,{title:v.titleOrigins})}catch(k){d.showErrorReporter(new f.ClientException("_HelpMenu: _onModelOrigins",k,{widgetId:this.id}))}},_onShow:function(c){switch(c){case b.TIPS:this._menuItemToggleTips&&this._menuItemToggleTips.set("label",v.menuItemHideTips);this._tipsEnabled=!0;a.deleteCookie("hideTooltips");
break;case b.BREAKBACK_MARKERS:this._menuItemToggleBreakbackMarkers&&this._menuItemToggleBreakbackMarkers.set("label",v.menuItemHideBreakbackMarkers),this._breakbackMarkersEnabled=!0,this._showBreakbackMarkersForCurrentModel()}},_onShowAllConfirmations:function(){a.deleteCookie(b.DISABLED_CONFIRMATIONS_COOKIE)},_onShowHelpForThisPage:function(){C.publish("anaplan/show",b.HELP_FOR_THIS_PAGE)},_onToggleBreakbackMarkers:function(){C.publish(this._breakbackMarkersEnabled?"anaplan/hide":"anaplan/show",
b.BREAKBACK_MARKERS)},_onToggleTips:function(){C.publish(this._tipsEnabled?"anaplan/hide":"anaplan/show",b.TIPS)},_showBreakbackMarkersForCurrentModel:function(){try{if(y.isSupported()){var c=a.loadCookie(b.DISABLED_BREAKBACK_MARKERS_COOKIE);if(c){if(c[workspaceId])if(B.isArray(c[workspaceId])){var d=x.indexOf(c[workspaceId],modelId);-1!==d&&c[workspaceId].splice(d,1);0===c[workspaceId].length&&delete c[workspaceId]}else delete c[workspaceId];a.createCookie(b.DISABLED_BREAKBACK_MARKERS_COOKIE,c)}}}catch(e){throw new f.ClientException("_HelpMenu _showBreakbackMarkersForCurrentModel",
e);}}})})},"anaplan/settings/Actions/_DataSources":function(){define("anaplan/data/Aggregator dojo/_base/declare anaplan/data/ModelContentHelper anaplan/common/ViewSerialNumbers anaplan/data/RequestFactory dojo/_base/lang dojo/json anaplan/constants".split(" "),function(g,b,k,p,r,n,f,s){return b([],{constructor:function(){this._dataSources=[];this._registeredObserver=!1;this._viewDefinition=null;this._serialNumbers=new p},destroy:function(){this._registeredObserver&&g.deleteObserver(this)},error:function(b){this.onError(b)},
getDataSources:function(){return this._dataSources},initialize:function(){g.addObserver(this);this._registeredObserver=!0},onError:function(){},onUpdate:function(){},update:function(b){b=b[0];var a=this._serialNumbers,e=this._serialNumbers=new p(b.serialNumbers);this._viewIndex=b.viewIndex;if(a.rowAxisSerialNumber!==e.rowAxisSerialNumber||a.dataSerialNumber!==e.dataSerialNumber){var a=0,d=null,d=null;if(0<b.rowLabelPages.length&&0<b.dataPages.length){var g=b.rowLabelPages[0],e=g.entityLongIds[0],
h=g.labels[0],g=g.count,d=b.dataPages[0],d=d.cellValues;for(b=[];a<g;a++)b.push({entityLongId:e[a],label:h[a],dataSourceDefinition:f.parse(d[a])});this._dataSources=b}else if(0<b.dataPages.length){d=b.dataPages[0];for(d=d.cellValues;a<this._dataSources.length;a++)this._dataSources[a].dataSourceDefinition=f.parse(d[a])}else this._dataSources=[];this.onUpdate()}},view:function(){var b={modelId:modelId,viewDefinition:this._getViewDefinition(),columnLabelPageRequests:[{start:0,count:-1}],dataPageRequests:[{startRow:0,
startColumn:0,rowCount:-1,columnCount:-1}],rowLabelPageRequests:[{start:0,count:-1}],cellSelectorLabelsRequired:!1,pageSelectorLabelsRequired:!1,serialNumbers:this._serialNumbers,viewIndex:this._viewIndex||-1};return r.createRequest(workspaceId,[],[b],[])},_getViewDefinition:function(){if(null===this._viewDefinition){var b={type:"MODEL_DEFINITION"},a=k.getAxesForViewDefinition([s.SYSTEM_AXIS_IDENTIFIER_IMPORT_DATA_SOURCE_IDENTIFIER],[s.SYSTEM_AXIS_IDENTIFIER_IMPORT_DATA_SOURCE_PROPERTY_IDENTIFIER]);
n.mixin(b,a);this._viewDefinition=b}return this._viewDefinition}})})},"anaplan/view/ModelManagement/ModelView":function(){define("anaplan/data/ModelContentCache dojo/_base/declare dojo/string dijit/_Container dijit/_FocusMixin dijit/_OnDijitClickMixin dijit/_TemplatedMixin dijit/_WidgetBase dijit/_WidgetsInTemplateMixin dijit/form/_FormMixin anaplan/Exceptions anaplan/utils/IdChecker dojo/i18n!anaplan/nls/modelManagement".split(" "),function(g,b,k,p,r,n,f,s,l,a,e,d,q){return b([s,n,r,f,l,p,a],{baseClass:"modelManagementModelView",
modelNameTextBox:null,tabIndex:-1,onCancel:function(){},onHelpChange:function(){},onHide:function(){try{this.modelNameTextBox&&this.modelNameTextBox.set("value","")}catch(a){throw new e.ClientException("ModelView#onHide",a);}},onTitleChange:function(){},_checkModelName:function(a){var b=new d;a=k.trim(a);if(!b.checkId(a))return b.getInvalidIdMessage();if((b=g.getWorkspaceInfo())&&b.modelSummaries)for(var b=b.modelSummaries,c=b.length,e=0;e<c;e++){var f=b[e].modelName.toLowerCase();if(a.toLowerCase()==
f)return q.errorDuplicateModelName}return null},_onCancel:function(){try{this.onCancel()}catch(a){throw new e.ClientException("ModelView#_onCancel",a);}},_onCancelButtonClick:function(a){this._onCancel()},_onKeyPress:function(a){a.currentTarget===this.domNode&&a.stopPropagation()}})})},"url:anaplan/templates/CheckedMenuItem.html":'\x3ctr class\x3d"dijitReset dijitMenuItem anaplanCheckBoxMenuItem" data-dojo-attach-point\x3d"focusNode" role\x3d"${role}" tabIndex\x3d"-1" aria-checked\x3d"${checked}"\x3e\n    \x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n        \x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n    \x3c/td\x3e\n    \x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" data-dojo-attach-point\x3d"containerNode,labelNode,textDirNode"\x3e\x3c/td\x3e\n    \x3ctd class\x3d"dijitReset dijitMenuItemAccelKey" style\x3d"display: none" data-dojo-attach-point\x3d"accelKeyNode"\x3e\x3c/td\x3e\n    \x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n        \x3cspan class\x3d"dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon"\x3e\x3c/span\x3e\n        \x3cspan class\x3d"dijitMenuItemIconChar dijitCheckedMenuItemIconChar"\x3e${checkedChar}\x3c/span\x3e\n    \x3c/td\x3e\n\x3c/tr\x3e\n',
"url:anaplan/templates/Slideout.html":'\x3cdiv class\x3d"dojoxExpandoPane"\x3e\n\t\x3cdiv class\x3d"dojoExpandoPaneInner"\x3e\n\t\t\x3cdiv data-dojo-attach-point\x3d"titleWrapper" class\x3d"dojoxExpandoTitle"\x3e\n\t\t\t\x3cdiv class\x3d"dojoxExpandoContainer"\x3e\n\t\t\t\t\x3cdiv class\x3d"dojoxExpandoIcon" data-dojo-attach-point\x3d"iconNode" data-dojo-attach-event\x3d"ondijitclick:_onIconNodeClick"\x3e\x3cspan\n\t\t\t\t\t\tclass\x3d"a11yNode"\x3eX\x3c/span\x3e\x3c/div\x3e\n\t\t\t\x3c/div\x3e\n\t\t\t\x3cbutton type\x3d"button" data-dojo-type\x3d"dijit/form/ToggleButton" data-dojo-attach-point\x3d"toggleAll"\n\t\t\t\t\tdata-dojo-attach-event\x3d"change:_onToggleAll" class\x3d"toggleAllButton" iconClass\x3d"toggleAll"\n\t\t\t\t\tchecked\x3d"checked"\x3e\x3c/button\x3e\n\t\t\t\x3cspan class\x3d"dojoxExpandoTitleNode" data-dojo-attach-point\x3d"titleNode"\x3e${title}\x3c/span\x3e\n\t\t\t\x3cbutton type\x3d"button" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"showHelp"\n\t\t\t\t\tdata-dojo-attach-event\x3d"click:_onShowHelp" class\x3d"showHelpButton" iconClass\x3d"showHelp"\x3e\x3c/button\x3e\n\t\t\x3c/div\x3e\n\t\t\x3cdiv class\x3d"dojoxExpandoWrapper" data-dojo-attach-point\x3d"cwrapper"\x3e\n\t\t\t\x3cdiv class\x3d"dojoxExpandoContent" data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\t\t\x3c/div\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/AddModuleFormula.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n    \x3cdiv class\x3d"addModuleFormulaInstructions" data-dojo-attach-point\x3d"addModuleFormulaInstructions"\x3e\n        Please select line item subset and version.\n    \x3c/div\x3e\n    \x3cdiv class\x3d"addModuleFormulaSelectorLeft" data-dojo-type\x3d"anaplan/widgets/MasterSelector" data-dojo-attach-point\x3d"lineItemSubsetSelector" data-dojo-attach-event\x3d"onSelectionChange:_onLineItemSubsetSelectionChange"\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"addModuleFormulaSelectorRight" data-dojo-type\x3d"anaplan/widgets/MasterSelector" data-dojo-attach-point\x3d"versionSelector" data-dojo-attach-event\x3d"onSelectionChange:_onVersionSelectionChange"\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"dijitReset buttons" role\x3d"presentation"\x3e\n        \x3cinput class\x3d"primary-button" data-dojo-attach-point\x3d"inputOk" data-dojo-type\x3d"anaplan/widgets/Button" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onInputOkClick"/\x3e\n        \x3cinput data-dojo-attach-point\x3d"inputCancel" data-dojo-type\x3d"anaplan/widgets/Button" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onInputCancelClick"\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/KeyboardShortcutGroup.html":'\x3cdiv class\x3d"form-group-heading"\x3e\n  \x3cspan class\x3d"form-group-heading-label"\x3e${name}\x3c/span\x3e\n  \x3cspan class\x3d"form-group-heading-fill"\x3e\x3c/span\x3e\n\x3c/div\x3e\n\n\x3ctable\x3e\n  ${rows}\n\x3c/table\x3e\n',"url:anaplan/templates/ViewBar.html":'\x3ctable class\x3d"${baseClass}-${themeClass}"\x3e\n    \x3ctbody\x3e\n        \x3ctr\x3e\n            \x3ctd class\x3d"viewIndicatorCell"\x3e\x3cdiv data-dojo-attach-point\x3d"viewIndicatorNode"\x3e\x3c/div\x3e\x3c/td\x3e\n            \x3ctd class\x3d"pageSelectorCell"\x3e\x3cdiv data-dojo-type\x3d"dijit/Toolbar" data-dojo-attach-point\x3d"pageSelectorToolbar" class\x3d"pageSelectorToolbar"\x3e\x3c/div\x3e\x3c/td\x3e\n            \x3ctd class\x3d"comparisonIndicatorCell" data-dojo-attach-point\x3d"comparisonIndicatorCell"\x3e\x3cdiv data-dojo-attach-point\x3d"comparisonIndicatorNode"\x3e\x3c/div\x3e\x3c/td\x3e\n        \x3c/tr\x3e\n    \x3c/tbody\x3e\n\x3c/table\x3e\n',
"url:anaplan/templates/ApplyChanges.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeypress:_onKeyPress" tabindex\x3d"${tabIndex}"\x3e\n    \x3cdiv class\x3d"message" data-dojo-attach-point\x3d"message"\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput type\x3d"button" class\x3d"primary-button" data-dojo-attach-point\x3d"applyButton" data-dojo-attach-event\x3d"onClick:_onApplyButtonClick" data-dojo-type\x3d"anaplan/widgets/Button" /\x3e\n        \x3cinput type\x3d"button" data-dojo-attach-point\x3d"discardButton" data-dojo-attach-event\x3d"onClick:_onDiscardButtonClick" data-dojo-type\x3d"anaplan/widgets/Button" /\x3e\n        \x3cinput type\x3d"button" data-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:_onCancelButtonClick" data-dojo-type\x3d"anaplan/widgets/Button" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/ModelManagement/StatusTab.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n    \x3cdiv class\x3d"modelSelector" data-dojo-type\x3d"anaplan/widgets/MasterSelector" data-dojo-attach-point\x3d"modelSelector"\n         data-dojo-attach-event\x3d"onSelectionChange:_onModelSelectionChange" data-dojo-props\x3d"tabIndex: 0"\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"actionButtons"\x3e\n        \x3cdiv class\x3d"vertical-button-group"\x3e\n            \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"cancelTaskButton"\n                   data-dojo-attach-event\x3d"onClick:_onCancelTaskButtonClick" /\x3e\n            \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"closeModelButton"\n                   data-dojo-attach-event\x3d"onClick:_onCloseModelButtonClick" /\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/ModuleFormula.html":'\x3cdiv class\x3d"${baseClass}" tabindex\x3d"${tabindex}"\x3e\n    \x3ctable class\x3d"formulaBarTable" cellspacing\x3d"3"\x3e\x3ctbody\x3e\x3ctr\x3e\n        \x3ctd class\x3d"formulaBarFormulaCell"\x3e\n            \x3ctable class\x3d"formulaBarFormulaTable" cellspacing\x3d"0"\x3e\x3ctbody\x3e\x3ctr\x3e\n                \x3ctd class\x3d"formulaBarRowLabelCell" data-dojo-attach-point\x3d"formulaRowLabelCell" data-dojo-attach-event\x3d"onclick:_onFormulaRowLabelCellClick"\x3e\n                    \x3cinput class\x3d"dijitInline formulaLabel" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"labelButton" data-dojo-attach-event\x3d"onClick:_onLabelButtonClick"\x3e\x3c/input\x3e\n                    \x3cinput class\x3d"dijitInline formulaScope" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"scopeButton" data-dojo-attach-event\x3d"onClick:_onLabelButtonClick"\x3e\x3c/input\x3e\n                    \x3cinput class\x3d"dijitInline formulaEquals" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"equalsButton" data-dojo-attach-event\x3d"onClick:_onLabelButtonClick" label\x3d"\x3d"\x3e\x3c/input\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"formulaBarExpressionCell"\x3e\n                    \x3ctextarea rows\x3d"1" class\x3d"formulaBarText" data-dojo-attach-point\x3d"formula" data-dojo-attach-event\x3d"ondblclick:_onDoubleClick,onkeypress:_onKeyPress,onkeydown:_onKeyDown"\x3e\x3c/textarea\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"formulaBarButtonsCell"\x3e\n                    \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" iconClass\x3d"anaplanEditorIcon anaplanEditorIconReset" showLabel\x3d"false" data-dojo-attach-point\x3d"resetButton" data-dojo-attach-event\x3d"onClick:_onReset"\x3e\x3c/input\x3e\n                    \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" iconClass\x3d"anaplanEditorIcon anaplanEditorIconOk" showLabel\x3d"false" data-dojo-attach-point\x3d"okButton" data-dojo-attach-event\x3d"onClick:_onSave"\x3e\x3c/input\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\n        \x3c/td\x3e\n        \x3ctd class\x3d"moduleFormulaRemoveButtonCell" data-dojo-attach-point\x3d"moduleFormulaRemoveButtonCell"\x3e\n            \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"removeButton" data-dojo-attach-event\x3d"onClick:_onRemoveButtonClick" class\x3d"removeButton" showLabel\x3d"false"\x3e\x3c/input\x3e\n        \x3c/td\x3e\n    \x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/View/CopyModule.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n\n    \x3ctable\x3e\n        \x3ctbody\x3e\n        \x3ctr\x3e\n            \x3ctd class\x3d"labelCell"\x3e\n                \x3clabel for\x3d"${id}_moduleName" class\x3d"moduleNameTextBoxLabel" data-dojo-attach-point\x3d"moduleNameTextBoxLabel"\x3e${nls.labelModuleName}\x3c/label\x3e\n            \x3c/td\x3e\n            \x3ctd class\x3d"valueCell"\x3e\n                \x3cinput id\x3d"${id}_moduleName" type\x3d"text" maxlength\x3d"60" class\x3d"moduleNameTextBox"\n                       data-dojo-type\x3d"anaplan/widgets/TextBox" data-dojo-attach-point\x3d"moduleNameTextBox"\n                       promptMessage\x3d"${nls.labelModuleName}" required\x3d"true"/\x3e\n            \x3c/td\x3e\n        \x3c/tr\x3e\n\n        \x3ctr class\x3d"labelCell"\x3e\n            \x3ctd class\x3d"labelCell"\x3e\n            \x3c/td\x3e\n            \x3ctd class\x3d"valueCell"\x3e\n                \x3cinput id\x3d"${id}_DefaultView" data-dojo-type\x3d"dijit/form/RadioButton" type\x3d"radio" name\x3d"includeViews"\n                       value\x3d"Defaults" data-dojo-attach-point\x3d"defaultViewsRadio" checked/\x3e\n                \x3clabel for\x3d"${id}_DefaultView"\x3e${nls.labelDefaultView}\x3c/label\x3e\n                \x3cinput id\x3d"${id}_AllViews" data-dojo-type\x3d"dijit/form/RadioButton" type\x3d"radio" name\x3d"includeViews"\n                       value\x3d"AllViews" data-dojo-attach-point\x3d"allViewsRadio"/\x3e\n                \x3clabel for\x3d"${id}_AllViews"\x3e${nls.labelAllViews}\x3c/label\x3e\n\n            \x3c/td\x3e\n        \x3c/tr\x3e\n\n        \x3ctr\x3e\n            \x3ctd class\x3d"labelCell"\x3e\n            \x3c/td\x3e\n            \x3ctd class\x3d"valueCell"\x3e\n                \x3cinput id\x3d"${id}_IncludeData" data-dojo-attach-point\x3d"includeDataCheckbox" data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\n                \x3cspan for\x3d"${id}_IncludeData"\x3e${nls.labelIncludeData}\x3c/span\x3e\n            \x3c/td\x3e\n        \x3c/tr\x3e\n\n        \x3ctr\x3e\n            \x3ctd class\x3d"labelCell"\x3e\n                \x3clabel class\x3d"functionalAreaLabel"\n                       data-dojo-attach-point\x3d"functionalAreaLabel"\x3e${nls.labelFunctionalAreas}\x3c/label\x3e\n            \x3c/td\x3e\n            \x3ctd class\x3d"controlCell"\x3e\n                \x3cinput data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-attach-point\x3d"functionalAreaSelect"\n                       autocomplete\x3d"true" hasDownArrow\x3d"true" searchAttr\x3d"label" required\x3d"false"/\x3e\n            \x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr\x3e\n            \x3ctd colspan\x3d"2"\x3e\n                \x3cdiv class\x3d"errorMessage" data-dojo-attach-point\x3d"validationMsg" style\x3d"visibility:hidden"\x3e\n                    \x3cspan class\x3d"dijitReset dijitInline dijitIcon anaplanEditorIcon anaplanEditorIconInvalid"\x3e\x3c/span\x3e\n                    \x3cspan class\x3d"error-red" data-dojo-attach-point\x3d"validationMsgText"\x3e\x3c/span\x3e\n                \x3c/div\x3e\n            \x3c/td\x3e\n        \x3c/tr\x3e\n        \x3c/tbody\x3e\n    \x3c/table\x3e\n\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput label\x3d"${lblOk}" class\x3d"primary-button" type\x3d"button" data-dojo-attach-point\x3d"okButton"\n               data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-event\x3d"onClick:_onSubmit"/\x3e\n        \x3cinput label\x3d"${lblCancel}" type\x3d"button" data-dojo-attach-point\x3d"cancelButton" data-dojo-type\x3d"anaplan/widgets/Button"\n               data-dojo-attach-event\x3d"onClick:onCancel"/\x3e\n    \x3c/div\x3e\n\n\x3c/div\x3e\n',
"url:anaplan/templates/AskAQuestion.html":'\x3cform class\x3d"${baseClass}"\x3e\n    \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"searchTextBox" /\x3e\n    \x3cinput type\x3d"submit" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"searchButton" class\x3d"${baseClass}SubmitButton"/\x3e\n\x3c/form\x3e',"url:anaplan/templates/RemoteModelEditor.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-event\x3d"onkeypress:_onKeyPress" tabindex\x3d"${tabIndex}"\x3e\n\t\x3cdiv class\x3d"messageContainer"\x3e\n        \x3cspan data-dojo-attach-point\x3d"messageIcon" class\x3d"messageIcon"\x3e\x3c/span\x3e\x3cspan data-dojo-attach-point\x3d"messageText"\x3e\x3c/span\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"workspaceDiv" class\x3d"modelSourceWorkspaceSelector"\x3e\n\t\t\x3clabel for\x3d"${id}_workspaceDropDown" class\x3d"label"\x3e${lblWorkspace}\x3c/label\x3e\n\t\t\x3cselect id\x3d"${id}_workspaceDropDown"\n\t\t\t\tdata-dojo-type\x3d"dijit/form/FilteringSelect"\n\t\t\t\tdata-dojo-attach-point\x3d"workspaceSelector"\n\t\t\t\tsearchAttr\x3d"label"\n\t\t\t\trequired\x3d"true"\n\t\t\t\thighlightMatch\x3d"first"\n\t\t\t\tdata-dojo-attach-event\x3d"onChange:_onWorkspaceSelectionChange"\x3e\n\t\t\x3c/select\x3e\n\t\x3c/div\x3e\n\t\x3cdiv data-dojo-attach-point\x3d"modelLabel" class\x3d"listLabelContainer"\x3e${lblModel}\x3c/div\x3e\n\t\x3cdiv class\x3d"modelSelector"\n\t\t data-dojo-type\x3d"anaplan/widgets/MasterSelector"\n\t\t data-dojo-attach-point\x3d"modelSelector"\n\t\t data-dojo-attach-event\x3d"onSelectionChange:_onModelSelectionChange"\n\t\t data-dojo-props\x3d"isModelManagement: true"\x3e\x3c/div\x3e\n\t\x3cspan class\x3d"buttons" role\x3d"presentation"\x3e\n\t\t\x3cspan data-dojo-attach-point\x3d"busyIndicator" class\x3d"indicator busyIndicator"\x3e\x3c/span\x3e\n\t\t\x3cinput class\x3d"primary-button" data-dojo-attach-point\x3d"inputOk" data-dojo-type\x3d"anaplan/widgets/Button" label\x3d"${lblOk}" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onInputOkClick"\x3e\x3c/input\x3e\n\t\t\x3cinput data-dojo-attach-point\x3d"inputCancel" data-dojo-type\x3d"anaplan/widgets/Button" label\x3d"${lblCancel}" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onInputCancelClick"\x3e\x3c/input\x3e\n\t\x3c/span\x3e\n\x3c/div\x3e',
"url:anaplan/templates/Workflow/WorkflowStatusConfirmationForm.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeypress:_onKeyPress" tabindex\x3d"${tabIndex}"\x3e\r\n    \x3cdiv class\x3d"workflowStatusConfirmationFormTitle" data-dojo-attach-point\x3d"confirmationFormTitle"\x3e\x3c/div\x3e\r\n    \x3ctable\x3e\r\n        \x3ctbody\x3e\r\n            \x3ctr\x3e\r\n                \x3ctd class\x3d"labelCell"\x3e\r\n                    \x3clabel data-dojo-attach-point\x3d"labelResetDescendents"\r\n                           for\x3d"${id}_checkBoxResetDescendents"\x3e${lblReset}\x3c/label\x3e\r\n                    \x26nbsp;\x26nbsp;\r\n                \x3c/td\x3e\r\n                \x3ctd class\x3d"controlCell"\x3e\r\n                    \x3cinput id\x3d"${id}_checkBoxResetDescendents"\r\n                           name\x3d"checkBoxResetDescendents"\r\n                           data-dojo-type\x3d"dijit/form/CheckBox"\r\n                           data-dojo-attach-point\x3d"checkBoxResetDescendents"\r\n                           tabindex\x3d"1"/\x3e\r\n                \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n        \x3c/tbody\x3e\r\n    \x3c/table\x3e\r\n    \x3cdiv class\x3d"buttons"\x3e\r\n        \x3cinput type\x3d"button"\r\n               class\x3d"primary-button"\r\n               label\x3d"${lblOk}"\r\n               data-dojo-attach-point\x3d"okButton" \r\n               data-dojo-type\x3d"anaplan/widgets/Button"\r\n               data-dojo-attach-event\x3d"onClick:_onOkButtonClick" \r\n               tabindex\x3d"2" /\x3e\r\n        \x3cinput type\x3d"button"\r\n               label\x3d"${lblCancel}"\r\n               data-dojo-attach-point\x3d"cancelButton" \r\n               data-dojo-type\x3d"anaplan/widgets/Button"\r\n               data-dojo-attach-event\x3d"onClick:_onCancelButtonClick"\r\n               tabindex\x3d"3"/\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:anaplan/templates/TableOfContents.html":'\x3cdiv class\x3d"${baseClass}" waiRole\x3d"presentation"\x3e\n    \x3cdiv class\x3d"waitMessage" data-dojo-attach-point\x3d"waitMessage"\x3e\n        \x3cdiv class\x3d"loadingMessage"\x3e\n            \x3cspan class\x3d"loadingMessageLabel"\x3e${loadingMessageLabel}\x3c/span\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"tableOfContentsWrapper" data-dojo-attach-point\x3d"tableOfContentsWrapper" style\x3d"visibility:hidden"\x3e\n        \x3cdiv class\x3d"tableOfContents aui" id\x3d"${id}_tree" data-dojo-attach-point\x3d"treeNode"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n\n\x3c/div\x3e',
"url:anaplan/templates/Settings/Time/Form.html":'\x3cdiv class\x3d"${baseClass} settingsTimeTable" data-dojo-attach-point\x3d"containerNode"\x3e\n\n    \x3ctable\x3e\n        \x3ctbody data-dojo-attach-point\x3d"timeCalendarTypeRow"\x3e\n            \x3ctr\x3e\n                \x3ctd\x3e\n                    \x3clabel class\x3d"timeCalendarTypeLabel" for\x3d"${id}_timeCalendarType"\x3e${i18n.labelTimeCalendarType}\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd\x3e\n                    \x3cinput\n                           id\x3d"${id}_timeCalendarType"\n                           name\x3d"${id}_timeCalendarType"\n                           data-dojo-attach-point\x3d"timeCalendarType"/\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n        \x3c/tbody\x3e\n\n        \x3c!-- Forms are placed here --\x3e\n        \x3ctbody\x3e\n            \x3ctr\x3e\n                \x3ctd\x3e\x3c/td\x3e\n                \x3ctd class\x3d"right"\x3e\n                    \x3cdiv class\x3d"buttons" style\x3d"clear:both;"\x3e\n                        \x3cinput type\x3d"button"\n                               class\x3d"primary-button"\n                               label\x3d"${i18n.buttonApply}"\n                               data-dojo-type\x3d"anaplan/widgets/Button"\n                               data-dojo-attach-point\x3d"btnApply"\n                               disabled\x3d"true"/\x3e\n\n                        \x3cinput type\x3d"button"\n                               label\x3d"${lblButtonCancel}"\n                               data-dojo-type\x3d"anaplan/widgets/Button"\n                               data-dojo-attach-point\x3d"btnCancel"\n                               disabled\x3d"true"/\x3e\n                    \x3c/div\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n        \x3c/tbody\x3e\n    \x3c/table\x3e\n\n\x3c/div\x3e',
"url:anaplan/templates/ModelManagement/RenameModelView.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeypress:_onKeyPress" tabindex\x3d"${tabIndex}"\x3e\n    \x3ctable class\x3d"editModelTable"\x3e\n        \x3ctbody\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"labelCell"\x3e\n                    \x3clabel data-dojo-attach-point\x3d"modelNameLabel"\x3e\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"valueCell"\x3e\n                    \x3cinput type\x3d"text" class\x3d"modelNameTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"modelNameTextBox" required\x3d"true" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n        \x3c/tbody\x3e\n    \x3c/table\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput class\x3d"primary-button" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"okButton" data-dojo-attach-event\x3d"onClick:_onOkButtonClick" disabled\x3d"true" /\x3e\n        \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:_onCancelButtonClick" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/ComparisonIndicator.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n    \x3cdiv class\x3d"wrapper" style\x3d"display: none;" data-dojo-attach-point\x3d"wrapper"\x3e\n        \x3cspan class\x3d"comparisonMode" data-dojo-attach-point\x3d"comparisonMode"\x3e\x3c/span\x3e: \x3cspan class\x3d"comparisonEntity" data-dojo-attach-point\x3d"comparisonEntity"\x3e\x3c/span\x3e\n        \x26nbsp;\n        \x3cinput name\x3d"displayComparisonCheckBox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"displayComparisonCheckBox" data-dojo-attach-event\x3d"onChange:_onDisplayComparisonCheckBoxChange" checked\x3d"checked"/\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/Settings/Time/Widgets/FiscalYearEndType.html":'\n\x3cul data-dojo-attach-point\x3d"containerNode" class\x3d"endoffiscalyear radiobutton-list"\x3e\n\n    \x3cli class\x3d"eof-last"\x3e\n        \x3cinput id\x3d"${id}_radio1" data-dojo-attach-point\x3d"radio1" /\x3e\n        \x3clabel class\x3d"eof-last-label" for\x3d"${id}_radio1"\x3e${i18n.labelLast}\x3c/label\x3e\n        \x3cinput class\x3d"eof-last-day-input" id\x3d"${id}_fiscalYearEndDayInWeek" data-dojo-attach-point\x3d"fiscalYearEndDayInWeek" /\x3e\n        \x3clabel class\x3d"eof-last-in-label" for\x3d"${id}_radio1"\x3e${i18n.labelIn}\x3c/label\x3e\n        \x3cinput class\x3d"eof-last-month-input" id\x3d"${id}_fiscalYearEndMonth" data-dojo-attach-point\x3d"fiscalYearEndMonth" /\x3e\n    \x3c/li\x3e\n    \x3cli class\x3d"eof-nearest"\x3e\n        \x3cinput id\x3d"${id}_radio2" data-dojo-attach-point\x3d"radio2" /\x3e\n        \x3cinput class\x3d"eof-nearest-day-input" id\x3d"${id}_fiscalYearStartDayInWeek" data-dojo-attach-point\x3d"fiscalYearStartDayInWeek" /\x3e\n        \x3clabel class\x3d"eof-nearest-day-label" for\x3d"${id}_radio2"\x3e${i18n.labelNearestToEndOf}\x3c/label\x3e\n        \x3cinput class\x3d"eof-nearest-month-input" id\x3d"${id}_fiscalYearStartMonth" data-dojo-attach-point\x3d"fiscalYearStartMonth" /\x3e\n    \x3c/li\x3e\n\n\x3c/ul\x3e',
"url:anaplan/templates/ProcessEditor.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"instructions" class\x3d"instructions"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"treeLabel" class\x3d"innerContainer treeLabelContainer"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"selectionListLabel" class\x3d"innerContainer selectionListLabelContainer"\x3e\x3c/div\x3e\n    \x3cdiv style\x3d"clear: both; height: 4px;"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"selectionDiv"\x3e\x3c/div\x3e\n    \x3cdiv style\x3d"clear: both; height: 10px;"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"errorMessage" class\x3d"errorMessage"\x3e\x3c/div\x3e\n\n    \x3cdiv style\x3d"float:left;" data-dojo-attach-point\x3d"pnlUseDetailedResults"\x3e\n        \x3cinput data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"chkUseDetailedResults" id\x3d"{$id}_chkUseDetailedResults"/\x3e\n        \x3clabel data-dojo-attach-point\x3d"lblUseDetailedResults" for\x3d"{$id}_chkUseDetailedResults"\x3e\x3c/label\x3e\n    \x3c/div\x3e\n\n    \x3cdiv data-dojo-attach-point\x3d"buttons" class\x3d"buttons"\x3e\n        \x3cinput class\x3d"primary-button" data-dojo-attach-point\x3d"okButton" data-dojo-type\x3d"anaplan/widgets/Button" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onOkButtonClick"/\x3e\n        \x3cinput data-dojo-attach-point\x3d"cancelButton" data-dojo-type\x3d"anaplan/widgets/Button" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onCancelButtonClick"/\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/Dialog2ContentAdapter.html":'\x3cdiv class\x3d"${baseClass} aui" tabindex\x3d"-1" data-dojo-attach-event\x3d"onkeydown:_onKeyDown"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"contentNode"\x3e\x3c/div\x3e\n\x3c/div\x3e',"url:anaplan/templates/SimpleTimeRangeCreateEditor.html":'\n\n\n\x3cdiv class\x3d"${baseClass} timeRanges"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"timeRangesForm" data-dojo-type\x3d"dijit/form/Form"\x3e\n        \x3cdiv class\x3d"timeRangeContainer" id\x3d"timeRangeNameContainer"\x3e\n            \x3cdiv class\x3d"timeRangeLabel"\x3e\n                \x3clabel id\x3d"timeRangeNameLabel"\x3eName\x3c/label\x3e\n            \x3c/div\x3e\n            \x3cinput type\x3d"text" data-dojo-attach-point\x3d"timeRangeName" data-dojo-type\x3d"dijit/form/ValidationTextBox" required\x3d"required"\n            /\x3e\n        \x3c/div\x3e\n\n        \x3cdiv class\x3d"timeRangeContainer"\x3e\n            \x3clabel class\x3d"timeRangeLabel"\x3eStart Period\x3c/label\x3e\n            \x3cdiv class\x3d"timeRangeContainerSelectBorder"\x3e\n                \x3cinput class\x3d"timeRangeContainerSelect" id\x3d"timeRangeStartPeriodSelector"\n                    data-dojo-attach-point\x3d"startPeriod" data-dojo-type\x3d"dijit/form/Select"\n                       data-dojo-props\x3d"\n                               required: true,\n                               name: \'startPeriod\',\n                               options: [],\n                               maxHeight: 290"\n\n                /\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n\n\n        \x3cdiv class\x3d"timeRangeContainer"\x3e\n            \x3cdiv class\x3d"timeRangeLabel"\x3e\n             \x3clabel class\x3d"timeRangeLabel"\x3eNumber of Periods\x3c/label\x3e\n            \x3c/div\x3e\n            \x3cinput data-dojo-attach-point\x3d"periodCount"\n                   data-dojo-type\x3d"dijit/form/NumberSpinner"\n                   value\x3d"1"\n                   data-dojo-props\x3d"constraints:{min:1,max:99}"\n            /\x3e\n        \x3c/div\x3e\n\n        \x3cdiv class\x3d"timeRangeContainer" id\x3d"timeRangeAggregationsCommonLabel" data-dojo-attach-point\x3d"checkBoxContainer"\x3e\n            \x3cdiv class\x3d"timeRangeLabel"\x3e\n                \x3clabel\x3eAvailable Aggregations\x3c/label\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"timeRangeContainerCheckboxList"\x3e\n                \x3cdiv class\x3d"timeRangeContainerCheckbox"\x3e\n                    \x3cinput class\x3d"layoutCheckBox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"checkBoxQuarter" tabindex\x3d"4"/\x3e\n                    \x3clabel class\x3d"timeRangeEditorLabel"\x3eQuarter\x3c/label\x3e\n                \x3c/div\x3e\n                \x3cdiv class\x3d"timeRangeContainerCheckbox"\x3e\n                    \x3cinput class\x3d"layoutCheckBox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"checkBoxHalfYear" tabindex\x3d"5"/\x3e\n                    \x3clabel class\x3d"timeRangeEditorLabel"\x3eHalf-Year\x3c/label\x3e\n                \x3c/div\x3e\n                \x3cdiv class\x3d"timeRangeContainerCheckbox"\x3e\n                    \x3cinput class\x3d"layoutCheckBox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"checkBoxYTD" tabindex\x3d"5"/\x3e\n                    \x3clabel class\x3d"timeRangeEditorLabel"\x3eYear To Date\x3c/label\x3e\n                \x3c/div\x3e\n                \x3cdiv class\x3d"timeRangeContainerCheckbox"\x3e\n                    \x3cinput class\x3d"layoutCheckBox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"checkBoxYTG" tabindex\x3d"5"/\x3e\n                    \x3clabel class\x3d"timeRangeEditorLabel"\x3eYear To Go\x3c/label\x3e\n                \x3c/div\x3e\n                \x3cdiv class\x3d"timeRangeContainerCheckbox"\x3e\n                    \x3cinput class\x3d"layoutCheckBox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"checkBoxTotalOfAll" tabindex\x3d"5"/\x3e\n                    \x3clabel class\x3d"timeRangeEditorLabel"\x3eTotal of All\x3c/label\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n\n        \x3cdiv class\x3d"footer"\x3e\n            \x3cdiv\x3e\n                \x3cselect data-dojo-attach-point\x3d"positionSelect" data-dojo-attach-event\x3d"onChange: _onChangeOfPosition"\x3e\n                    \x3coption\x3eBefore\x3c/option\x3e\n                    \x3coption\x3eAfter\x3c/option\x3e\n                    \x3coption\x3eStart\x3c/option\x3e\n                    \x3coption\x3eEnd\x3c/option\x3e\n                \x3c/select\x3e\n                \x3clabel data-dojo-attach-point\x3d"relativeToItemName"\x3e\x3c/label\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"footer-fill"\x3e\x3c/div\x3e\n            \x3cinput type\x3d"submit" class\x3d"primary-button" data-dojo-attach-point\x3d"applyButton" data-dojo-type\x3d"anaplan/widgets/Button" /\x3e\n            \x3cinput type\x3d"button" data-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:_onCancelButtonClick" data-dojo-type\x3d"anaplan/widgets/Button" /\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/ModelManagement/CopyAndSanitizeModelView.html":'\x3cdiv class\x3d"${baseClass} qa-copy-sanitize" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeypress:_onKeyPress" tabindex\x3d"${tabIndex}"\x3e\n    \x3ctable class\x3d"editModelTable"\x3e\n        \x3ctbody\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"labelCell"\x3e\n                    \x3clabel data-dojo-attach-point\x3d"modelNameLabel"\x3e\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"valueCell"\x3e\n                    \x3cinput type\x3d"text" class\x3d"modelNameTextBox qa-copy-sanitize__modelname" data-dojo-type\x3d"dijit/form/ValidationTextBox"\n                           data-dojo-attach-point\x3d"modelNameTextBox" required\x3d"true" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"labelCell"\x3e\n                    \x3clabel data-dojo-attach-point\x3d"passphraseLabel"\x3e\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"valueCell"\x3e\n                    \x3cinput type\x3d"text" class\x3d"sanitisationPassphraseTextBox qa-copy-sanitize__passphrase" data-dojo-type\x3d"dijit/form/ValidationTextBox"\n                           data-dojo-attach-point\x3d"passphraseTextBox" required\x3d"true" /\x3e\n                    \x3cinput type\x3d"button" class\x3d"qa-copy-sanitize__generate" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"generateButton"\n                           data-dojo-attach-event\x3d"onClick:_onGenerateButtonClick" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"labelCell" colspan\x3d"2"\x3e\n                    \x3cspan class\x3d"qa-copy-sanitize__info" data-dojo-attach-point\x3d"infoLabel"\x3e\x3c/span\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n        \x3c/tbody\x3e\n    \x3c/table\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput class\x3d"primary-button qa-copy-sanitize__start" type\x3d"button" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"copyAndSanitizeModelButton"\n               data-dojo-attach-event\x3d"onClick:_onCopyAndSanitizeModelButtonClick" disabled\x3d"true" /\x3e\n        \x3cinput type\x3d"button" class\x3d"qa-copy-sanitize__cancel" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"cancelButton"\n               data-dojo-attach-event\x3d"onClick:_onCancelButtonClick" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/FormulaBar.html":'\x3cdiv class\x3d"${baseClass}" tabindex\x3d"${tabindex}"\x3e\n    \x3cdiv class\x3d"formulaHeader" data-dojo-attach-point\x3d"formulaHeader"\x3e\x3ch3 data-dojo-attach-point\x3d"formulaTitle"\x3e\x3c/h3\x3e\x3c/div\x3e\n    \x3ctable class\x3d"formulaBarTable" cellspacing\x3d"3"\x3e\x3ctbody\x3e\x3ctr\x3e\n        \x3ctd class\x3d"formulaBarFormulaCell"\x3e\n            \x3ctable class\x3d"formulaBarFormulaTable" cellspacing\x3d"0"\x3e\x3ctbody\x3e\x3ctr\x3e\n                \x3ctd class\x3d"formulaBarRowLabelCell" data-dojo-attach-point\x3d"formulaRowLabelCell" data-dojo-attach-event\x3d"onclick:_onFormulaRowLabelCellClick"\x3e\n                    \x3cinput type\x3d"button" data-dojo-type\x3d"dijit/form/ToggleButton" data-dojo-attach-point\x3d"toggleButton" data-dojo-attach-event\x3d"onChange:onChange" iconClass\x3d"anaplanEditorIcon anaplanEditorIconFormulaPanelExpand" showLabel\x3d"false"\x3e\n                    \x3cinput class\x3d"dijitInline formulaLabel" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"labelButton" data-dojo-attach-event\x3d"onClick:_onLabelButtonClick"\x3e\n                    \x3cinput class\x3d"dijitInline formulaScope" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"scopeButton" data-dojo-attach-event\x3d"onClick:_onLabelButtonClick"\x3e\n                    \x3cinput class\x3d"dijitInline formulaEquals" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"equalsButton" data-dojo-attach-event\x3d"onClick:_onLabelButtonClick" label\x3d"\x3d"\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"formulaBarExpressionCell"\x3e\n                    \x3ctextarea rows\x3d"1" class\x3d"formulaBarText" data-dojo-attach-point\x3d"formula" data-dojo-attach-event\x3d"ondblclick:_onDoubleClick,onkeypress:_onKeyPress,onkeydown:_onKeyDown,onmouseup:_setInputSelection,onfocus:_setInputSelection,onkeyup:_setInputSelection"\x3e\x3c/textarea\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"formulaBarButtonsCell"\x3e\n                    \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" iconClass\x3d"anaplanEditorIcon anaplanEditorIconReset" showLabel\x3d"false" data-dojo-attach-point\x3d"resetButton" data-dojo-attach-event\x3d"onClick:_onReset"\x3e\n                    \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" iconClass\x3d"anaplanEditorIcon anaplanEditorIconOk" showLabel\x3d"false" data-dojo-attach-point\x3d"okButton" data-dojo-attach-event\x3d"onClick:_onSave"\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\n        \x3c/td\x3e\n        \x3ctd class\x3d"formulaBarDetailBox formulaBarWriteableLeafCellCountBox" data-dojo-attach-point\x3d"writeableLeafCellCount" style\x3d"display:none;"\x3e\x26nbsp;\x3c/td\x3e\n        \x3ctd class\x3d"formulaBarDetailBox" data-dojo-attach-point\x3d"cellPrecisionValue"\x3e\x26nbsp;\x3c/td\x3e\n    \x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/Workflow/EmailForm.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeypress:_onKeyPress" tabindex\x3d"${tabIndex}"\x3e\n    \x3cdiv class\x3d"emailFormTitle" data-dojo-attach-point\x3d"emailFormTitle"\x3e\x3c/div\x3e\n    \x3ctable\x3e\n        \x3ctbody\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"labelCell"\x3e\n                    \x3clabel data-dojo-attach-point\x3d"labelNotStarted" for\x3d"${id}_checkBoxNotStarted"\x3e${lblNotStarted}\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"controlCell"\x3e\n                    \x3cinput id\x3d"${id}_checkBoxNotStarted"\n                           name\x3d"${id}_checkBoxNotStarted"\n                           data-dojo-attach-event\x3d"onChange:_onCheckBoxChange"\n                           data-dojo-type\x3d"dijit/form/CheckBox"\n                           data-dojo-attach-point\x3d"checkBoxNotStarted"\n                           checked\x3d"checked"\n                           tabindex\x3d"1"/\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"labelCell"\x3e\n                    \x3clabel data-dojo-attach-point\x3d"labelInProgress" for\x3d"${id}_checkBoxInProgress"\x3e${lblProgress}\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"controlCell"\x3e\n                    \x3cinput id\x3d"${id}_checkBoxInProgress"\n                           name\x3d"${id}_checkBoxInProgress"\n                           data-dojo-attach-event\x3d"onChange:_onCheckBoxChange"\n                           data-dojo-type\x3d"dijit/form/CheckBox"\n                           data-dojo-attach-point\x3d"checkBoxInProgress"\n                           checked\x3d"checked"\n                           tabindex\x3d"1"/\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"labelCell"\x3e\n                    \x3clabel data-dojo-attach-point\x3d"labelComplete" for\x3d"${id}_checkBoxComplete"\x3e${lblComplete}\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"controlCell"\x3e\n                    \x3cinput id\x3d"${id}_checkBoxComplete"\n                           name\x3d"${id}_checkBoxComplete"\n                           data-dojo-attach-event\x3d"onChange:_onCheckBoxChange"\n                           data-dojo-type\x3d"dijit/form/CheckBox"\n                           data-dojo-attach-point\x3d"checkBoxComplete"\n                           tabindex\x3d"1"/\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n        \x3c/tbody\x3e\n    \x3c/table\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput type\x3d"button"\n               class\x3d"primary-button"\n               label\x3d"${lblOk}"\n               data-dojo-attach-point\x3d"okButton" \n               data-dojo-type\x3d"anaplan/widgets/Button" \n               data-dojo-attach-event\x3d"onClick:_onOkButtonClick" \n               tabindex\x3d"1" /\x3e\n        \x3cinput type\x3d"button"\n               label\x3d"${lblCancel}"\n               data-dojo-attach-point\x3d"cancelButton"\n               data-dojo-type\x3d"anaplan/widgets/Button"\n               data-dojo-attach-event\x3d"onClick:_onCancelButtonClick" \n               tabindex\x3d"1" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/BulkCopy.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown" tabindex\x3d"-1"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"dimensionSelectorNode" class\x3d"dimensionSelector"\x3e\n        \x3clabel data-dojo-attach-point\x3d"dimensionSelectorLabel"\x3e\x3c/label\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"source treeContainer"\x3e\n        \x3clabel data-dojo-attach-point\x3d"sourceMemberTreeLabel"\x3e\x3c/label\x3e\n        \x3cdiv data-dojo-attach-point\x3d"sourceMemberTreeNode" class\x3d"memberTree"\x3e\n            \x3cdiv class\x3d"loadingMessage" data-dojo-attach-point\x3d"sourceLoading"\x3e\n                \x3cspan class\x3d"loadingMessageLabel" data-dojo-attach-point\x3d"sourceLoadingLabel"\x3e\x3c/span\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"target treeContainer"\x3e\n        \x3clabel data-dojo-attach-point\x3d"targetMemberTreeLabel"\x3e\x3c/label\x3e\n        \x3cdiv data-dojo-attach-point\x3d"targetMemberTreeNode" class\x3d"memberTree"\x3e\n            \x3cdiv class\x3d"loadingMessage" data-dojo-attach-point\x3d"targetLoading"\x3e\n                \x3cspan class\x3d"loadingMessageLabel" data-dojo-attach-point\x3d"targetLoadingLabel"\x3e\x3c/span\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput class\x3d"primary-button" type\x3d"button" data-dojo-attach-point\x3d"okButton" data-dojo-attach-event\x3d"click:_onOkButtonClick" data-dojo-type\x3d"anaplan/widgets/Button" disabled\x3d"true"/\x3e\n        \x3cinput type\x3d"button" data-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"click:_onCancelButtonClick" data-dojo-type\x3d"anaplan/widgets/Button" disabled\x3d"true"/\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/Compare.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n    \x3cdiv class\x3d"compareBase" role\x3d"presentation"\x3e\n        \x3cdiv class\x3d"form-group-heading"\x3e\n            \x3cdiv class\x3d"form-group-heading-label" data-dojo-attach-point\x3d"comparisonBaseLegend"\x3e\x3c/div\x3e\n            \x3cdiv class\x3d"form-group-heading-fill"\x3e\x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"comparisonMode"\x3e\n            \x3cinput data-dojo-attach-point\x3d"comparisonPreviousVersion" data-dojo-attach-event\x3d"onclick:_onComparisonPreviousVersionClick" id\x3d"comparisonPreviousVersion" name\x3d"comparisonBase" value\x3d"PREVIOUS_VERSION" type\x3d"radio"\x3e\n            \x3c/input\x3e\n            \x3clabel data-dojo-attach-point\x3d"comparisonPreviousVersionLabel" for\x3d"comparisonPreviousVersion"\x3e\n            \x3c/label\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"comparisonMode"\x3e\n            \x3cinput data-dojo-attach-point\x3d"comparisonSpecificBase" data-dojo-attach-event\x3d"onclick:_onComparisonSpecificVersionClick" id\x3d"comparisonSpecificBase" name\x3d"comparisonBase" value\x3d"SPECIFIC_BASE" type\x3d"radio"\x3e\n            \x3c/input\x3e\n            \x3clabel data-dojo-attach-point\x3d"comparisonSpecificBaseLabel" for\x3d"comparisonSpecificBase"\x3e\n            \x3c/label\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"comparisonMode"\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3c!--Removed as per visual spec UCT-110--\x3e\n    \x3c!--\x3cdiv data-dojo-attach-point\x3d"instructions" class\x3d"compareInstructions"\x3e\x3c/div\x3e--\x3e\n    \x3cdiv class\x3d"comparePanelLeft" data-dojo-attach-point\x3d"formPanelLeft"\x3e\n        \x3cdiv class\x3d"compareType" role\x3d"presentation"\x3e\n            \x3cdiv class\x3d"form-group-heading"\x3e\n                \x3cdiv class\x3d"form-group-heading-label" data-dojo-attach-point\x3d"comparisonModeLegend"\x3e\x3c/div\x3e\n                \x3cdiv class\x3d"form-group-heading-fill"\x3e\x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"comparisonMode"\x3e\n                \x3cinput data-dojo-attach-point\x3d"comparisonValue" id\x3d"comparisonValue" name\x3d"comparisonMode" value\x3d"VALUE" type\x3d"radio"\x3e\n                \x3c/input\x3e\n                \x3clabel data-dojo-attach-point\x3d"comparisonValueLabel" for\x3d"comparisonValue"\x3e\n                \x3c/label\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"comparisonMode"\x3e\n                \x3cinput data-dojo-attach-point\x3d"comparisonDiff" id\x3d"comparisonDiff" name\x3d"comparisonMode" value\x3d"DIFFERENCE" type\x3d"radio"\x3e\n                \x3c/input\x3e\n                \x3clabel data-dojo-attach-point\x3d"comparisonDiffLabel" for\x3d"comparisonDiff"\x3e\n                \x3c/label\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"comparisonMode"\x3e\n                \x3cinput data-dojo-attach-point\x3d"comparisonPerc" id\x3d"comparisonPerc" name\x3d"comparisonMode" value\x3d"PERCENTAGE" type\x3d"radio"\x3e\n                \x3c/input\x3e\n                \x3clabel data-dojo-attach-point\x3d"comparisonPercLabel" for\x3d"comparisonPerc"\x3e\n                \x3c/label\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"comparisonMode"\x3e\n                \x3cinput data-dojo-attach-point\x3d"comparisonPercDiff" id\x3d"comparisonPercDiff" name\x3d"comparisonMode" value\x3d"PERCENTAGE_DIFFERENCE" type\x3d"radio"\x3e\n                \x3c/input\x3e\n                \x3clabel data-dojo-attach-point\x3d"comparisonPercDiffLabel" for\x3d"comparisonPercDiff"\x3e\n                \x3c/label\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"form-group-heading-fill"\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"comparisonMode colorCodingCheckBox"\x3e\n            \x3cinput data-dojo-attach-point\x3d"useColourCoding" id\x3d"useColourCoding" name\x3d"useColourCoding" type\x3d"checkbox"\x3e\n            \x3c/input\x3e\n            \x3clabel data-dojo-attach-point\x3d"useColourCodingLabel" for\x3d"useColourCoding"\x3e\n            \x3c/label\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"comparePanelRight" data-dojo-attach-point\x3d"specificVersionSelectorPanel"\x3e\n        \x3cdiv class\x3d"dimensionSelectBox"\x3e\n            \x3cselect class\x3d"dimensionSelector" data-dojo-attach-point\x3d\'focusNode,dimensionSelector\' data-dojo-attach-event\x3d\'change:_onDimensionSelectorChange\'\x3e\n            \x3c/select\x3e\n        \x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"memberSelector" class\x3d"memberSelector"\x3e\n            \x3cdiv class\x3d"loadingMessage" data-dojo-attach-point\x3d"loading"\x3e\n                \x3cspan class\x3d"loadingMessageLabel" data-dojo-attach-point\x3d"loadingLabel"\x3e\x3c/span\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"compareButtons"\x3e\n        \x3cinput type\x3d"button" data-dojo-attach-point\x3d"okButton" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-event\x3d"onClick:_onCompare" class\x3d"primary-button" /\x3e\n        \x3cinput type\x3d"button" data-dojo-attach-point\x3d"cancelButton" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-event\x3d"onClick:_onCancel" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/ModelMap/ModelMap.html":'\x3cdiv class\x3d"map-wrapper"\x3e\r\n\r\n    \x3cdiv class\x3d"topbar"\x3e\r\n        \x3cdiv id\x3d"modelmap_toolbar" class\x3d"toolbar"\x3e\r\n            \x3cdiv class\x3d"modelmapButton" title\x3d"Zoom In" data-dojo-attach-event\x3d"onClick:_onZoomInClick" \x3e\x3cdiv type\x3d"button" class\x3d"anaplanModelMapsSprite zoomInIcon"\x3e\x3c/div\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"modelmapButton" title\x3d"Zoom Out" data-dojo-attach-event\x3d"onClick:_onZoomOutClick"\x3e\x3cdiv class\x3d"anaplanModelMapsSprite zoomOutIcon"\x3e\x3c/div\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"modelmapButton" title\x3d"1:1"  data-dojo-attach-event\x3d"onClick:_onZoomResetClick"\x3e\x3cdiv class\x3d"anaplanModelMapsSprite resetIcon"\x3e\x3c/div\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"modelmapButton" title\x3d"Fit To Screen" data-dojo-attach-event\x3d"onClick:_onFitToWindowClick"\x3e\x3cdiv class\x3d"anaplanModelMapsSprite fullscreenIcon"\x3e\x3c/div\x3e\x3c/div\x3e\r\n            \x3cspan data-dojo-type\x3d"dijit/ToolbarSeparator"\x3e\x3c/span\x3e\r\n            \x3cdiv class\x3d"modelmapButton" title\x3d"Expand All Functional Areas" data-dojo-attach-event\x3d"onClick:_onExpandClick"\x3e\x3cdiv class\x3d"anaplanModelMapsSprite expandAllIcon"\x3e\x3c/div\x3e\x3c/div\x3e\r\n            \x3cdiv class\x3d"modelmapButton" title\x3d"Collapse All Functional Areas" data-dojo-attach-event\x3d"onClick:_onCollapseClick"\x3e\x3cdiv class\x3d"anaplanModelMapsSprite collapseAllIcon"\x3e\x3c/div\x3e\x3c/div\x3e\r\n            \x3c!--\x3cinput type\x3d"button" title\x3d"Toggle Import Overlay" class\x3d"anaplanModelMapsSprite toggleImports"/\x3e \x26lt;!\x26ndash;data-dojo-attach-event\x3d"onClick:_onCollapseClick"\x26ndash;\x26gt;--\x3e\r\n\r\n            \x3cdiv class\x3d"isolationModeGroup groupedDropdown disabled" data-dojo-attach-point\x3d"isolateModeButtonGroup"\x3e\r\n            \x3c/div\x3e\r\n\r\n            \x3c!--\x3cinput type\x3d"button" title\x3d"Print" data-dojo-attach-event\x3d"onClick:_onPrintClick" class\x3d"anaplanModelMapsSprite printIcon"/\x3e--\x3e\r\n\r\n\r\n        \x3c/div\x3e\r\n\r\n        \x3cdiv class\x3d"searchBar" title\x3d"Search" data-dojo-type\x3d"anaplan/widgets/SearchBarFull"\r\n             data-dojo-attach-point\x3d"searchBar"\x3e\x3c/div\x3e\r\n        \x3c!--\x3cinput type\x3d"button" title\x3d"Help" data-dojo-attach-event\x3d"onClick:_onHelpClick" class\x3d"helpIcon"/\x3e--\x3e\r\n    \x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"graphContainer"\x3e\r\n        \x3c!--\x3cdiv id\x3d"${id}_yfilesGraph"  class\x3d"canvasArea" data-dojo-attach-point\x3d"graphEl"\x3e\x3c/div\x3e--\x3e\r\n        \x3c!--\x3cdiv class\x3d"canvasArea" data-dojo-attach-point\x3d"isolateGraphEl"\x3e\x3c/div\x3e--\x3e\r\n    \x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n\r\n\r\n',
"url:anaplan/templates/SubsetSelector.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n    \x3ctable border\x3d"0" cellspacing\x3d"0" cellpadding\x3d"0"\x3e\n\t    \x3ctbody\x3e\n\t      \x3ctr\x3e\n\t    \t  \x3cth data-dojo-attach-point\x3d"treeLabel" class\x3d"innerContainer treeLabelContainer"\x3e\x3c/th\x3e\n\t      \t  \x3cth class\x3dbuttonPanel\x3e\x3c/th\x3e\n\t\t\t  \x3cth data-dojo-attach-point\x3d"selectionListLabel" class\x3d"innerContainer selectionListLabelContainer"\x3e\x3c/th\x3e\n\t\t\t  \x3cth class\x3dbuttonPanel\x3e\x3c/th\x3e\n\t      \x3c/tr\x3e\n\t      \x3ctr\x3e\n\t        \x3ctd data-dojo-attach-point\x3d"treeContainer" class\x3d"innerContainer treeContainer"\x3e\n\t            \x3cdiv data-dojo-attach-point\x3d"loading" class\x3d"loadingMessage"\x3e\n\t                \x3cspan data-dojo-attach-point\x3d"loadingLabel" class\x3d"loadingMessageLabel"\x3e\x3c/span\x3e\n\t            \x3c/div\x3e\n\t        \x3c/td\x3e\n\t        \x3ctd data-dojo-attach-point\x3d"buttonPanel" class\x3d"buttonPanel"\x3e\n\t        \t\x3cdiv data-dojo-attach-point\x3d"arrowIndicatorDiv"\x3e\x3c/div\x3e\n\t            \x3cinput data-dojo-attach-point\x3d"selectButton" data-dojo-type\x3d"anaplan/widgets/Button" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onSelectButtonClick"\x3e\x3cbr/\x3e\n\t            \x3cinput data-dojo-attach-point\x3d"deselectButton" data-dojo-type\x3d"anaplan/widgets/Button" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onDeselectButtonClick"\x3e\x3cbr/\x3e\n\t            \x3cinput data-dojo-attach-point\x3d"selectAllButton" data-dojo-type\x3d"anaplan/widgets/Button" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onSelectAllButtonClick"\x3e\x3cbr/\x3e\n\t            \x3cinput data-dojo-attach-point\x3d"selectAllLeafItemsButton" data-dojo-type\x3d"anaplan/widgets/Button" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onSelectAllLeafItemsButtonClick"\x3e\x3cbr/\x3e\n\t            \x3cinput data-dojo-attach-point\x3d"selectDescendantsButton" data-dojo-type\x3d"anaplan/widgets/Button" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onSelectDescendantsButtonClick"\x3e\x3cbr/\x3e\n\t            \x3cinput data-dojo-attach-point\x3d"deselectAllButton" data-dojo-type\x3d"anaplan/widgets/Button" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onDeselectAllButtonClick"\x3e\x3cbr/\x3e\n\t        \x3c/td\x3e\n\t        \x3ctd data-dojo-attach-point\x3d"selectionListContainer" data-dojo-attach-event\x3d"onclick:_onSelectionListContainerClick" class\x3d"innerContainer selectionListContainer"\x3e\x3cdiv data-dojo-attach-point\x3d"selectionListContainerWrapper" class\x3d"selectionListContainerWrapper"\x3e\x3c/div\x3e\x3c/td\x3e\n\t        \x3ctd data-dojo-attach-point\x3d"rightButtonPanel" class\x3d"buttonPanel"\x3e\n\t            \x3cinput data-dojo-attach-point\x3d"moveUpButton" class\x3d"upIcon" data-dojo-type\x3d"anaplan/widgets/Button" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onMoveUpButtonClick"\x3e\x3cbr/\x3e\n\t            \x3cinput data-dojo-attach-point\x3d"moveDownButton" class\x3d"downIcon" data-dojo-type\x3d"anaplan/widgets/Button" type\x3d"button" data-dojo-attach-event\x3d"onClick:_onMoveDownButtonClick"\x3e\n\t        \x3c/td\x3e\n\t      \x3c/tr\x3e\n\t\t\x3c/tbody\x3e\n\t\x3c/table\x3e\n\x3c/div\x3e',
"url:anaplan/templates/Tabs/Settings/Header.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n    \x3cspan data-dojo-attach-point\x3d"_header"\x3e\x3c/span\x3e\n\x3c/div\x3e',"url:anaplan/templates/ModelContentsTree/Header.html":'\x3ctable class\x3d"${baseClass}" data-dojo-attach-point\x3d"headerTable"\x3e\n    \x3ctbody\x3e\n        \x3ctr\x3e\n            \x3ctd data-dojo-attach-point\x3d"headerTitle"\x3e\x3c/td\x3e\n            \x3ctd class\x3d"modelSize" data-dojo-attach-point\x3d"modelSize"\x3e\x3c/td\x3e\n        \x3c/tr\x3e\n    \x3c/tbody\x3e\n\x3c/table\x3e',
"url:anaplan/templates/ColourPaletteMenuItem.html":'\x3ctr class\x3d"dijitReset" class\x3d\'colour-palette\' data-dojo-attach-point\x3d"focusNode" role\x3d"menuitem" tabIndex\x3d"-1"\x3e\n    \x3ctd class\x3d"dijitReset dijitMenuItemIconCell" role\x3d"presentation"\x3e\n        \x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitMenuItemIcon" class\x3d\'colour-palette\' data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n    \x3c/td\x3e\n    \x3ctd class\x3d"dijitReset dijitMenuItemLabel" colspan\x3d"2" class\x3d\'colour-palette\' data-dojo-attach-point\x3d"containerNode,textDirNode"\n        role\x3d"presentation"\x3e\x3c/td\x3e\n    \x3ctd class\x3d"dijitReset dijitMenuItemColourPalette colour-palette-menu" colspan\x3d"2" data-dojo-attach-point\x3d"colourSwatchNode"\x3e\n        \x3cspan class\x3d\'colour-palette\' data-dojo-attach-point\x3d"colourSwatchNode1" \x3e\x3c/span\x3e\n        \x3cspan class\x3d\'colour-palette\' data-dojo-attach-point\x3d"colourSwatchNode2" \x3e\x3c/span\x3e\n        \x3cspan class\x3d\'colour-palette\' data-dojo-attach-point\x3d"colourSwatchNode3" \x3e\x3c/span\x3e\n        \x3cspan class\x3d\'colour-palette\' data-dojo-attach-point\x3d"colourSwatchNode4" \x3e\x3c/span\x3e\n        \x3cspan class\x3d\'colour-palette\' data-dojo-attach-point\x3d"colourSwatchNode5" \x3e\x3c/span\x3e\n        \x3cspan class\x3d\'colour-palette\' data-dojo-attach-point\x3d"colourSwatchNode6" \x3e\x3c/span\x3e\n        \x3cspan class\x3d\'colour-palette\' data-dojo-attach-point\x3d"colourSwatchNode7" \x3e\x3c/span\x3e\n        \x3cspan class\x3d\'colour-palette\' data-dojo-attach-point\x3d"colourSwatchNode8" \x3e\x3c/span\x3e\n        \x3cspan class\x3d\'colour-palette\' data-dojo-attach-point\x3d"colourSwatchNode9" \x3e\x3c/span\x3e\n    \x3c/td\x3e\n\x3c/tr\x3e\n',
"url:anaplan/templates/Settings/Time/Widgets/FiscalYearLabelAlignmentWeeks.html":'\x3cul data-dojo-attach-point\x3d"containerNode" class\x3d"radiobutton-list"\x3e\n\n    \x3cli\x3e\n        \x3cinput id\x3d"${id}_takeFiscalYearFromEnd" data-dojo-attach-point\x3d"takeFiscalYearFromEnd" /\x3e\n        \x3clabel for\x3d"${id}_takeFiscalYearFromEnd"\x3e${i18n.labelTakeFiscalYearFromEndWeek}\x3c/label\x3e\n        \x3cspan class\x3d"dijitIcon questionmarkicon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n    \x3c/li\x3e\n    \x3cli\x3e\n        \x3cinput id\x3d"${id}_takeFiscalYearFromStart" data-dojo-attach-point\x3d"takeFiscalYearFromStart" /\x3e\n        \x3clabel for\x3d"${id}_takeFiscalYearFromStart"\x3e${i18n.labelTakeFiscalYearFromStartWeek}\x3c/label\x3e\n    \x3c/li\x3e\n\n\x3c/ul\x3e',
"url:anaplan/templates/Settings/Time/Widgets/FiscalYearLabelAlignment.html":'\x3cul data-dojo-attach-point\x3d"containerNode" class\x3d"radiobutton-list"\x3e\n\n    \x3cli\x3e\n        \x3cinput id\x3d"${id}_takeFiscalYearFromEnd" data-dojo-attach-point\x3d"takeFiscalYearFromEnd" /\x3e\n        \x3clabel for\x3d"${id}_takeFiscalYearFromEnd"\x3e${i18n.labelTakeFiscalYearFromEndMonth}\x3c/label\x3e\n    \x3c/li\x3e\n    \x3cli\x3e\n        \x3cinput id\x3d"${id}_takeFiscalYearFromStart" data-dojo-attach-point\x3d"takeFiscalYearFromStart" /\x3e\n        \x3clabel for\x3d"${id}_takeFiscalYearFromStart"\x3e${i18n.labelTakeFiscalYearFromStartMonth}\x3c/label\x3e\n    \x3c/li\x3e\n\n\x3c/ul\x3e',
"url:anaplan/templates/NewModule.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n    \x3cdiv class\x3d"dimensionsHeading"\x3e\n        \x3cdiv class\x3d"dimensionItemIconWrapper"\x3e\n            \x3cspan class\x3d"dimensionItemIcon anaplanEditorIconGeneralList" draggable\x3d"false"\x3e\x3c/span\x3e\n            \x3cspan class\x3d"dimensionsHeadingText" data-dojo-attach-point\x3d"dimensionsHeading"\x3e\x3c/span\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"dimensionsBox"\x3e\n        \x3cdiv class\x3d"dimensionsBoxTop"\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"dimensionsBoxBottom"\x3e\x3c/div\x3e\n        \x3cdiv class\x3d"dimensionsBoxContent" data-dojo-type\x3d"anaplan/view/NewModule/_DropArea" data-dojo-attach-point\x3d"dimensionsBox" tabindex\x3d"-1"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"mockTab" data-dojo-attach-point\x3d"mockTab"\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"mockTabLabel"\x3e\n        \x3clabel class\x3d"moduleNameTextBoxLabel" data-dojo-attach-point\x3d"moduleNameTextBoxLabel"\x3eEnter module name\x3c/label\x3e\n        \x3cinput type\x3d"text" class\x3d"moduleNameTextBox" data-dojo-type\x3d"anaplan/widgets/TextBox" data-dojo-attach-point\x3d"moduleNameTextBox" data-dojo-attach-event\x3d"onKeyUp:_onModuleNameTextBoxKeyDown" required\x3d"true"/\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"cellCount" data-dojo-attach-point\x3d"cellCount" style\x3d"display: none;"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/FormulaWindow.html":'\x3cdiv class\x3d"${baseClass}" tabindex\x3d"${tabindex}"\x3e\n    \x3cdiv class\x3d"formulaEditor" style\x3d"width:100%;"\x3e\n        \x3cdiv class\x3d"dijitDialogTitleBar" data-dojo-attach-point\x3d"titleBar"\x3e\n            \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" iconClass\x3d"anaplanEditorIcon"\n                   data-dojo-attach-event\x3d"onClick:_onAttachButtonClick" data-dojo-attach-point\x3d"attachButton" showLabel\x3d"false"\n                   label\x3d"Attach"/\x3e\n            \x3cspan class\x3d"dijitDialogTitle" data-dojo-attach-point\x3d"moduleName"\x3e\x3c/span\x3e\n        \x3c/div\x3e\n\n        \x3cdiv class\x3d"formulaHeader" data-dojo-attach-point\x3d"formulaHeader"\x3e\n            \x3ch3 data-dojo-attach-point\x3d"formulaTitle"\x3e\x3c/h3\x3e\n        \x3c/div\x3e\n\n        \x3ctable data-dojo-attach-point\x3d"top" class\x3d"formulaEditorTable formulaEditorLabelTable"\x3e\n            \x3ctbody\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"formulaEditorFormulaCell"\x3e\n                    \x3ctable class\x3d"formulaEditorFormulaTable" cellspacing\x3d"0"\x3e\n                        \x3ctbody\x3e\n                        \x3ctr\x3e\n                            \x3ctd class\x3d"formulaEditorRowLabelCell" data-dojo-attach-point\x3d"formulaRowLabelCell"\n                                data-dojo-attach-event\x3d"onclick:_onFormulaRowLabelCellClick"\x3e\n                                \x3cinput type\x3d"button" data-dojo-type\x3d"dijit/form/ToggleButton"\n                                       data-dojo-attach-point\x3d"toggleButton" data-dojo-attach-event\x3d"onChange:onChange"\n                                       iconClass\x3d"anaplanEditorIcon anaplanEditorIconFormulaPanelContract" showLabel\x3d"false"\n                                       style\x3d"display:none;"/\x3e\n                                \x3cinput class\x3d"dijitInline formulaLabel" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button"\n                                       data-dojo-attach-point\x3d"labelButton" data-dojo-attach-event\x3d"onClick:_onLabelButtonClick"/\x3e\n                                \x3cinput class\x3d"dijitInline formulaScope" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button"\n                                       data-dojo-attach-point\x3d"scopeButton" data-dojo-attach-event\x3d"onClick:_onLabelButtonClick"/\x3e\n                                \x3cinput class\x3d"dijitInline formulaEquals" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button"\n                                       data-dojo-attach-point\x3d"equalsButton" data-dojo-attach-event\x3d"onClick:_onLabelButtonClick"\n                                       label\x3d"\x3d"/\x3e\n                            \x3c/td\x3e\n                            \x3ctd class\x3d"formulaEditorButtonsCell"\x3e\n                                \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button"\n                                       iconClass\x3d"anaplanEditorIcon anaplanEditorIconReset" showLabel\x3d"false"\n                                       data-dojo-attach-point\x3d"resetButton" data-dojo-attach-event\x3d"onClick:_onReset"/\x3e\n                                \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button"\n                                       iconClass\x3d"anaplanEditorIcon anaplanEditorIconOk" showLabel\x3d"false"\n                                       data-dojo-attach-point\x3d"okButton" data-dojo-attach-event\x3d"onClick:_onSave"/\x3e\n                            \x3c/td\x3e\n                        \x3c/tr\x3e\n                        \x3c/tbody\x3e\n                    \x3c/table\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n            \x3c/tbody\x3e\n\n        \x3c/table\x3e\n        \x3ctable class\x3d"formulaEditorTable formulaEditorExpressionTable"\x3e\n            \x3ctbody\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"formulaEditorExpressionCell"\x3e\n                    \x3ctextarea rows\x3d"1" class\x3d"formulaEditorText" data-dojo-attach-point\x3d"formula"\n                              data-dojo-attach-event\x3d"ondblclick:_onDoubleClick,onkeypress:_onKeyPress,onkeydown:_onKeyDown,onmouseup:_setInputSelection,onfocus:_setInputSelection,onkeyup:_setInputSelection"\x3e\x3c/textarea\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"formulaEditorToolbar" waiRole\x3d"toolbar" data-dojo-attach-point\x3d"containerNode,toolbar"\x3e\x3c/td\x3e\n            \x3c/tr\x3e\n            \x3c/tbody\x3e\n        \x3c/table\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/SavedViewSaveAs.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeypress:_onKeyPress" tabindex\x3d"-1"\x3e\n    \x3clabel for\x3d"${id}_saveAsTextBox" class\x3d"savedViewSaveAsSaveAsLabel" data-dojo-attach-point\x3d"saveAsTextBoxLabel"\x3e${lblSaveAs}\x3c/label\x3e\n    \x3cinput id\x3d"${id}_saveAsTextBox" type\x3d"text" class\x3d"savedViewSaveAsTextBox" data-dojo-type\x3d"anaplan/view/SavedViewSaveAs/_SaveAsTextBox" data-dojo-attach-point\x3d"saveAsTextBox" required\x3d"true" /\x3e\n    \x3cdiv class\x3d"savedViewSaveAsOptionContainer"\x3e\n        \x3cdiv class\x3d"savedViewSaveAsOptions"\x3e\n            \x3cdiv class\x3d"savedViewSaveAsOption"\x3e\n                \x3cinput id\x3d"${id}_storePageCheckBox" checked\x3d"true" data-dojo-attach-point\x3d"storePageCheckBox" data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\n                \x3clabel for\x3d"${id}_storePageCheckBox" class\x3d"savedViewSaveAsCheckBoxLabel" data-dojo-attach-point\x3d"storePageCheckBoxLabel"\x3e${lblStorePage}\x3c/label\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"savedViewSaveAsOption"\x3e\n                \x3cinput id\x3d"${id}_saveAsDefaultCheckBox" data-dojo-attach-point\x3d"saveAsDefaultCheckBox" data-dojo-type\x3d"dijit/form/CheckBox" /\x3e\n                \x3clabel for\x3d"${id}_saveAsDefaultCheckBox" class\x3d"savedViewSaveAsCheckBoxLabel" data-dojo-attach-point\x3d"saveAsDefaultCheckBoxLabel"\x3e${lblSaveAsDefault}\x3c/label\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"buttons savedViewSaveAsButtons"\x3e\n        \x3cinput class\x3d"primary-button" label\x3d"${lblSave}" data-dojo-attach-point\x3d"saveButton" data-dojo-type\x3d"anaplan/widgets/Button" disabled\x3d"true" /\x3e\n        \x3cinput type\x3d"button" label\x3d"${lblCancel}" data-dojo-attach-point\x3d"cancelButton" data-dojo-type\x3d"anaplan/widgets/Button" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/Workflow.html":'\x3cdiv class\x3d"${baseClass}" waiRole\x3d"presentation"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"header"\x3e\n        \x3ch2 class\x3d"homeHeadline" data-dojo-attach-point\x3d"workflowHeadline"\x3e\x3c/h2\x3e\n        \x3cp class\x3d"workflowMessageOfTheDay"\n           data-dojo-attach-point\x3d"messageOfTheDay"\n           data-dojo-type\x3d"dijit/InlineEditBox"\n           data-dojo-attach-event\x3d"onChange:_messageOfTheDayOnChange"\n           autoSave\x3d"false"\n           noValueIndicator\x3d"\x26nbsp;"\x3e\n        \x3c/p\x3e\n        \x3cdiv data-dojo-attach-point\x3d"toolbar"\n             data-dojo-type\x3d"dijit/Toolbar"\n             style\x3d"white-space:nowrap;overflow:hidden"\x3e\n            \x3cdiv data-dojo-attach-point\x3d"buttonComplete"\n                 data-dojo-type\x3d"anaplan/widgets/Button"\n                 data-dojo-attach-event\x3d"onClick:_onComplete"\x3e\n            \x3c/div\x3e\n            \x3cdiv data-dojo-type\x3d"dijit/ToolbarSeparator"\x3e\n            \x3c/div\x3e\n            \x3cdiv data-dojo-attach-point\x3d"buttonInProgress"\n                 data-dojo-attach-event\x3d"onClick:_onInProgress"\n                 data-dojo-type\x3d"anaplan/widgets/Button"\x3e\n            \x3c/div\x3e\n            \x3cdiv data-dojo-type\x3d"dijit/ToolbarSeparator"\x3e\n            \x3c/div\x3e\n            \x3cdiv data-dojo-attach-point\x3d"buttonNotStarted"\n                 data-dojo-attach-event\x3d"onClick:_onNotStarted"\n                 data-dojo-type\x3d"anaplan/widgets/Button"\x3e\n            \x3c/div\x3e\n            \x3cdiv data-dojo-type\x3d"dijit/ToolbarSeparator"\x3e\n            \x3c/div\x3e\n            \x3cdiv  data-dojo-attach-point\x3d"buttonBulkEmail"\n                  data-dojo-type\x3d"anaplan/widgets/Button"\n                  iconClass\x3d"workflowIconBulkEmail"\n                  data-dojo-attach-event\x3d"onClick:_displayEmailFormDialog"\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"workflowTreeContainer" data-dojo-attach-point\x3d"treeContainer"\x3e\n    \x3c/div\x3e\n    \x3cdiv style\x3d"overflow:hidden;width:100%;height:100%;" data-dojo-attach-point\x3d"_waitMessage"\x3e\n        \x3cdiv class\x3d"loadingMessage"\x3e\n            \x3cspan class\x3d"loadingMessageLabel" data-dojo-attach-point\x3d"_loadingMessageLabel"\x3e\x3c/span\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/HierarchyConfigureView.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"totalItemCount" class\x3d"hierarchyInfo"\x3e\x3c/div\x3e\n    \x3ctable hierarchyInfo\x3e\n        \x3ctbody\x3e\n            \x3ctr\x3e\n                \x3ctd\x3e\n                    \x3clabel for\x3d"${id}_topLevelItemTextBox" data-dojo-attach-point\x3d"topLevelItemLabel"\x3e${lblTopLevelItem}\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd\x3e\n                    \x3cinput id\x3d"${id}_topLevelItemTextBox"\n                           data-dojo-attach-point\x3d"topLevelItemTextBox"\n                           data-dojo-type\x3d"dijit/form/TextBox"\n                           data-dojo-attach-event\x3d"onChange: _onChange, onKeyPress: _onKeyPress"\n                           data-dojo-props\x3d"intermediateChanges: true" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr\x3e\n                \x3ctd\x3e\n                    \x3clabel for\x3d"${id}_parentHierarchyFilteringSelect" data-dojo-attach-point\x3d"parentHierarchyLabel"\x3e${lblParentHierarchy}\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd\x3e\n                    \x3cinput id\x3d"${id}_parentHierarchyFilteringSelect"\n                           data-dojo-attach-point\x3d"parentHierarchyFilteringSelect"\n                           data-dojo-type\x3d"dijit/form/FilteringSelect"\n                           data-dojo-attach-event\x3d"onChange: _onChange, onKeyPress: _onKeyPress"\n                           data-dojo-props\x3d"searchAttr: \'label\', required: false" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr\x3e\n                \x3ctd\x3e\n                    \x3clabel for\x3d"${id}_categoryFilteringSelect" data-dojo-attach-point\x3d"categoryLabel"\x3e${lblCategory}\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd\x3e\n                    \x3cinput id\x3d"${id}_categoryFilteringSelect"\n                           data-dojo-attach-point\x3d"categoryFilteringSelect"\n                           data-dojo-type\x3d"dijit/form/FilteringSelect"\n                           data-dojo-attach-event\x3d"onChange: _onChange, onKeyPress: _onKeyPress"\n                           data-dojo-props\x3d"searchAttr: \'label\', required: false" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr\x3e\n                \x3ctd\x3e\n                    \x3clabel for\x3d"${id}_dataTagTextBox"\n                           data-dojo-attach-point\x3d"dataTagLabel"\x3e${lblDataTag}\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd\x3e\n                    \x3cinput id\x3d"${id}_dataTagTextBox"\n                           data-dojo-attach-point\x3d"dataTagTextBox"\n                           data-dojo-type\x3d"anaplan/widgets/TextBoxSelector"\n                           data-dojo-attach-event\x3d"onSecondaryAction: _onDataTagButtonClick,\n                                                   onChange: _onDataTagTextChange"/\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr\x3e\n                \x3ctd\x3e\n                    \x3clabel for\x3d"${id}_selectiveAccessCheckBox" data-dojo-attach-point\x3d"selectiveAccessLabel"\x3e${lblSelectiveAccess}\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd\x3e\n                    \x3cinput id\x3d"${id}_selectiveAccessCheckBox"\n                           data-dojo-attach-point\x3d"selectiveAccessCheckBox"\n                           data-dojo-type\x3d"dijit/form/CheckBox"\n                           data-dojo-attach-event\x3d"onChange: _onChange,\n                                                   onClick: _onSelectiveAccessClick" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n\n            \x3ctr\x3e\n              \x3ctd\x3e\n                \x3clabel for\x3d"${id}_productionDataCheckBox" data-dojo-attach-point\x3d"productionDataLabel"\x3e${lblProductionData}\x3c/label\x3e\n              \x3c/td\x3e\n              \x3ctd\x3e\n                \x3cinput id\x3d"${id}_productionDataCheckBox"\n                       data-dojo-attach-point\x3d"productionDataCheckBox"\n                       data-dojo-type\x3d"dijit/form/CheckBox"\n                       data-dojo-attach-event\x3d"onChange: _onChange,\n                       onClick: _onProductionDataClick" /\x3e\n              \x3c/td\x3e\n            \x3c/tr\x3e\n\n            \x3ctr\x3e\n                \x3ctd\x3e\n                    \x3clabel for\x3d"${id}_managedByTextBox" data-dojo-attach-point\x3d"managedByLabel"\x3e${lblManagedBy}\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd\x3e\n                    \x3cinput id\x3d"${id}_managedByTextBox"\n                           data-dojo-attach-point\x3d"managedByTextBox"\n                           data-dojo-type\x3d"dijit/form/TextBox" /\x3e\n                    \x3c!-- doesn\'t require onClick since it is never editable --\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n\n            \x3ctr\x3e\n                \x3ctd\x3e\n                    \x3clabel for\x3d"${id}_workflowCheckBox" data-dojo-attach-point\x3d"workflowLabel"\x3e${lblWorkflow}\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd\x3e\n                    \x3cinput id\x3d"${id}_workflowCheckBox"\n                            data-dojo-attach-point\x3d"workflowCheckBox"\n                           data-dojo-type\x3d"dijit/form/CheckBox"\n                           data-dojo-attach-event\x3d"onChange: _onChange,\n                                                   onClick: _onWorkflowClick" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n\n            \x3ctr\x3e\n                \x3ctd\x3e\n                    \x3clabel for\x3d"${id}_numberedListCheckBox" data-dojo-attach-point\x3d"numberedListLabel"\x3e${lblNumberedList}\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd\x3e\n                    \x3cinput id\x3d"${id}_numberedListCheckBox"\n                           data-dojo-attach-point\x3d"numberedListCheckBox"\n                           data-dojo-type\x3d"dijit/form/CheckBox"\n                           data-dojo-attach-event\x3d"onChange: _onChange,\n                       onClick: _onNumberedListClick" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n        \x3c/tbody\x3e\n    \x3c/table\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput data-dojo-attach-point\x3d"applyButton"\n               class\x3d"primary-button"\n               label\x3d"${lblApply}"\n               data-dojo-type\x3d"anaplan/widgets/Button"\n               data-dojo-attach-event\x3d"onClick: _onApplyButtonClick"\n               data-dojo-props\x3d"disabled: true" /\x3e\n        \x3cinput data-dojo-attach-point\x3d"cancelButton"\n               label\x3d"${lblCancel}"\n               data-dojo-type\x3d"anaplan/widgets/Button"\n               data-dojo-attach-event\x3d"onClick: _onCancelButtonClick" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/ModelManagement/MainView.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeypress:_onKeyPress" tabindex\x3d"${tabIndex}"\x3e\n    \x3cdiv class\x3d"workspaceSummary" data-dojo-attach-point\x3d"workspaceSummary"\x3e\x3cspan class\x3d"dijitInline"\n         data-dojo-attach-point\x3d"workspaceSummaryIcon"\x3e\x3c/span\x3e\x3cspan class\x3d"dijitInline workspaceSummaryMessage"\n         data-dojo-attach-point\x3d"workspaceSummaryMessage" style\x3d"height:16px;padding:3px 0 0 3px;"\x3e\x3c/span\x3e\x3cspan\n         class\x3d"workspaceSummaryHelp" data-dojo-attach-point\x3d"workspaceSummaryHelp"\x3e\x3c/span\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-type\x3d"dijit/layout/TabContainer" data-dojo-attach-point\x3d"tabContainer"\n         data-dojo-props\x3d"doLayout: false, useSlider: false, useMenu: false"\x3e\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"modelsTab"\x3e\x3c/div\x3e\n        \x3cdiv data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"statusTab"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput type\x3d"button" class\x3d"primary-button" data-dojo-attach-point\x3d"closeButton" data-dojo-type\x3d"anaplan/widgets/Button"\n               data-dojo-attach-event\x3d"onClick:_onCloseButtonClick"\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/HierarchyTreeView/Tree.html":"\x3cdiv class\x3d'${baseClass}'\x3e\n    \x3cdiv data-dojo-attach-point\x3d'loading' class\x3d'loadingMessage'\x3e\n        \x3cspan data-dojo-attach-point\x3d'loadingLabel' class\x3d'loadingMessageLabel'\x3e\x3c/span\x3e\n    \x3c/div\x3e\n\x3c/div\x3e","url:anaplan/templates/ModelManagement/ModelManagementTaskProgress.html":'\x3cdiv class\x3d"${baseClass} qa-mm-taskprogress" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeypress:_onKeyPress" tabindex\x3d"${tabIndex}"\x3e\n    \x3cdiv class\x3d"message qa-mm-taskprogress__message" data-dojo-attach-point\x3d"message"\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"taskProgressMonitor" data-dojo-type\x3d"anaplan/widgets/TaskProgressMonitor" style\x3d"width: 300px;"\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput type\x3d"button" class\x3d"qa-mm-taskprogress__cancel" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"cancelButton"\n               data-dojo-attach-event\x3d"onClick:_onCancel" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/HierarchyTreeView/Form/Header.html":"\x3ch3 class\x3d'${baseClass}' data-dojo-attach-point\x3d'_header'\x3e\x3c/h3\x3e","url:anaplan/templates/ManagedTab.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"loadingMessage" class\x3d"loadingMessage"\x3e\x3cspan data-dojo-attach-point\x3d"loadingMessageLabel" class\x3d"loadingMessageLabel"\x3e\x3c/span\x3e\x3c/div\x3e\n    \x3cdiv data-dojo-attach-point\x3d"containerNode"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/ManageViewsDialog.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeypress:_onKeyPress" tabindex\x3d"-1"\x3e\n    \x3cdiv class\x3d"customViewSelector" data-dojo-type\x3d"anaplan/widgets/MasterSelector" data-dojo-attach-point\x3d"customViewSelector" data-dojo-attach-event\x3d"onSelectionChange:_onSelectionChange,onRenameItem:_onViewSelectorRenameView,onDblClick:_onRename,onCancel:_onCustomViewSelectorCancel" isEditable\x3d"true"\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"actionsPanel"\x3e\n        \x3cdiv class\x3d"vertical-button-group"\x3e\n            \x3cinput type\x3d"button" data-dojo-attach-point\x3d"openButton" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-event\x3d"onClick:_onOpen" disabled\x3d"true"/\x3e\n            \x3cinput type\x3d"button" data-dojo-attach-point\x3d"moveUpButton" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-event\x3d"onClick:_onMoveUp" disabled\x3d"true"/\x3e\n            \x3cinput type\x3d"button" data-dojo-attach-point\x3d"moveDownButton" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-event\x3d"onClick:_onMoveDown" disabled\x3d"true"/\x3e\n            \x3cinput type\x3d"button" data-dojo-attach-point\x3d"renameButton" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-event\x3d"onClick:_onRename" disabled\x3d"true"/\x3e\n            \x3cinput type\x3d"button" data-dojo-attach-point\x3d"deleteButton" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-event\x3d"onClick:_onDelete" disabled\x3d"true"/\x3e\n            \x3cinput type\x3d"button" data-dojo-attach-point\x3d"resetDefaultViewButton" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-event\x3d"onClick:_onResetDefaultView"/\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput class\x3d"primary-button" type\x3d"button" data-dojo-attach-point\x3d"closeButton" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-event\x3d"onClick:_onClose"/\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/ModelManagement/CopyAndArchiveModelView.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeypress:_onKeyPress" tabindex\x3d"${tabIndex}"\x3e\n    \x3ctable class\x3d"editModelTable"\x3e\n        \x3ctbody\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"labelCell"\x3e\n                    \x3clabel data-dojo-attach-point\x3d"modelNameLabel"\x3e\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"valueCell"\x3e\n                    \x3cinput type\x3d"text" class\x3d"modelNameTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\n                           data-dojo-attach-point\x3d"modelNameTextBox" required\x3d"true" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n        \x3c/tbody\x3e\n    \x3c/table\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput class\x3d"primary-button" type\x3d"button" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"copyAndArchiveModelButton"\n               data-dojo-attach-event\x3d"onClick:_onCopyAndArchiveModelButtonClick" disabled\x3d"true" /\x3e\n        \x3cinput type\x3d"button" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-point\x3d"cancelButton"\n               data-dojo-attach-event\x3d"onClick:_onCancelButtonClick" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/KeyboardShortcuts.html":'\x3cdiv id\x3d"keyboard-shortcuts-dialog"\x3e\n  \x3cdiv id\x3d"shortcuts-table-wrapper"\x3e\x3c/div\x3e\n\x3c/div\x3e\n',"url:anaplan/templates/ModelManagement/ImportModelView.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeypress:_onKeyPress" tabindex\x3d"${tabIndex}"\x3e\n    \x3ctable class\x3d"editModelTable"\x3e\n        \x3ctbody\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"labelCell"\x3e\n                    \x3clabel data-dojo-attach-point\x3d"modelNameLabel"\x3e\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"valueCell"\x3e\n                    \x3cinput type\x3d"text" class\x3d"modelNameTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\n                           data-dojo-attach-point\x3d"modelNameTextBox" required\x3d"true" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"labelCell"\x3e\n                    \x3clabel data-dojo-attach-point\x3d"modelSourceLabel"\x3e\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"valueCell"\x3e\n                    \x3cinput data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-attach-point\x3d"modelSourceSelect"\n                           required\x3d"true" autocomplete\x3d"true"\n                           data-dojo-props\x3d"hasDownArrow: true, searchAttr: \'label\'" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n        \x3c/tbody\x3e\n    \x3c/table\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput class\x3d"primary-button" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"importModelButton"\n               data-dojo-attach-event\x3d"onClick:_onImportModelButtonClick" disabled\x3d"true" /\x3e\n        \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"cancelButton"\n               data-dojo-attach-event\x3d"onClick:_onCancelButtonClick" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/ModelMap/GraphSvgTemplate.html":'\r\n\x3csvg version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" id\x3d"template_svg_static" height\x3d"300" style\x3d"display: none"\x3e\r\n    \x3cdefs id\x3d"template_svg_static_defs"\x3e\r\n\r\n        \x3csvg id\x3d"collapsed_icon" class\x3d"node_toggle_icon" fill\x3d"#ABABAB" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\r\n         x\x3d"0px" y\x3d"0px" width\x3d"19px" height\x3d"19px" viewBox\x3d"0 0 960 960" enable-background\x3d"new 0 0 960 960" xml:space\x3d"preserve"\x3e\r\n         \x3crect fill\x3d"transparent" width\x3d"100%" height\x3d"100%"/\x3e\r\n         \x3cpolygon transform\x3d"translate(185 185)" points\x3d"142.332,104.886 197.48,50 402.5,256 197.48,462 142.332,407.113 292.727,256"/\x3e\r\n    \x3c/svg\x3e\r\n\r\n     \x3csvg id\x3d"expanded_icon" class\x3d"node_toggle_icon" fill\x3d"#ABABAB" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\r\n          x\x3d"0px" y\x3d"0px" width\x3d"19px" height\x3d"19px" viewBox\x3d"0 0 960 960" enable-background\x3d"new 0 0 960 960" xml:space\x3d"preserve"\x3e\r\n           \x3crect fill\x3d"transparent" width\x3d"100%" height\x3d"100%"/\x3e\r\n           \x3cpolygon transform\x3d"rotate(90 0 0) translate(180 -740)" points\x3d"142.332,104.886 197.48,50 402.5,256 197.48,462 142.332,407.113 292.727,256 "/\x3e\r\n    \x3c/svg\x3e\r\n\r\n        \x3csvg id\x3d"clock_icon" x\x3d"0px" y\x3d"0px"  width\x3d"10px" height\x3d"10px" viewBox\x3d"0 0 16 16" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" xmlns:sketch\x3d"http://www.bohemiancoding.com/sketch/ns"\x3e\r\n            \x3ctitle\x3etime\x3c/title\x3e\r\n            \x3cg id\x3d"Page-1" stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd" sketch:type\x3d"MSPage"\x3e\r\n                \x3cg id\x3d"sprite-14x14" sketch:type\x3d"MSArtboardGroup" transform\x3d"translate(-32.000000, 0.000000)"\x3e\r\n                    \x3cg id\x3d"time" sketch:type\x3d"MSLayerGroup" transform\x3d"translate(32.000000, 0.000000)"\x3e\r\n                        \x3cpath d\x3d"M8.003,1 C4.204,1 1.113,4.091 1.113,7.891 C1.113,11.69 4.204,14.781 8.003,14.781 C11.802,14.781 14.894,11.69 14.894,7.891 C14.894,4.091 11.802,1 8.003,1 L8.003,1 L8.003,1 Z M8.003,13.49 C4.916,13.49 2.404,10.978 2.404,7.891 C2.404,4.803 4.916,2.291 8.003,2.291 C11.091,2.291 13.603,4.803 13.603,7.891 C13.603,10.978 11.091,13.49 8.003,13.49 L8.003,13.49 L8.003,13.49 Z" id\x3d"Fill-1" fill\x3d"#666666" sketch:type\x3d"MSShapeGroup"\x3e\x3c/path\x3e\r\n                        \x3cpath d\x3d"M8,6.334 L8,5 L7,5 L7,10 L10,10 L10,9 L8,9 L8,6.334" id\x3d"Fill-2" fill\x3d"#3179B1" sketch:type\x3d"MSShapeGroup"\x3e\x3c/path\x3e\r\n                    \x3c/g\x3e\r\n                \x3c/g\x3e\r\n            \x3c/g\x3e\r\n        \x3c/svg\x3e\r\n\r\n        \x3csvg id\x3d"versions_icon" width\x3d"10px" height\x3d"10px" viewBox\x3d"0 0 16 16" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" xmlns:sketch\x3d"http://www.bohemiancoding.com/sketch/ns"\x3e\r\n            \x3ctitle\x3eversions\x3c/title\x3e\r\n            \x3cg id\x3d"Page-1" stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd" sketch:type\x3d"MSPage"\x3e\r\n                \x3cg id\x3d"sprite-14x14" sketch:type\x3d"MSArtboardGroup" transform\x3d"translate(-48.000000, 0.000000)"\x3e\r\n                    \x3cg id\x3d"versions" sketch:type\x3d"MSLayerGroup" transform\x3d"translate(48.000000, 0.000000)"\x3e\r\n                        \x3cpath d\x3d"M13.849,5 L7,5 L7,15 L15,15 L15,5 L13.849,5 L13.849,5 Z M9,7 L13,7 L13,13 L9,13 L9,7 L9,7 Z" id\x3d"Fill-2" fill\x3d"#3179B1" sketch:type\x3d"MSShapeGroup"\x3e\x3c/path\x3e\r\n                        \x3cpath d\x3d"M7.671,1 L1,1 L1,11 L6,11 L6,9 L3,9 L3,3 L7,3 L7,4 L9,4 L9,1 L7.671,1" id\x3d"Fill-3" fill\x3d"#666666" sketch:type\x3d"MSShapeGroup"\x3e\x3c/path\x3e\r\n                    \x3c/g\x3e\r\n                \x3c/g\x3e\r\n            \x3c/g\x3e\r\n        \x3c/svg\x3e\r\n\r\n        \x3csvg id\x3d"lineitem_icon" width\x3d"10px" height\x3d"10px" viewBox\x3d"0 0 16 16" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\r\n\r\n            \x3cg stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd"\x3e\r\n                \x3cg transform\x3d"translate(1.000000, 0.000000)"\x3e\r\n                    \x3crect id\x3d"Rectangle-52" fill\x3d"#8EA9A8" x\x3d"0" y\x3d"0" width\x3d"14" height\x3d"16"\x3e\x3c/rect\x3e\r\n                    \x3crect id\x3d"Rectangle-52-copy" fill\x3d"#E9F5F5" x\x3d"1" y\x3d"1" width\x3d"12" height\x3d"14"\x3e\x3c/rect\x3e\r\n                    \x3cpath d\x3d"M4.17303467,6.01025391 L3.83612061,6.32519531 L3.8727417,6.44238281 L4.78094482,6.44238281 C4.60516357,7.48242188 4.4586792,8.40527344 4.20233154,9.89208984 C3.85076904,11.9428711 3.62371826,12.3457031 3.49920654,12.4921875 C3.4039917,12.6240234 3.22821045,12.7045898 3.0524292,12.7045898 C2.85467529,12.7045898 2.50311279,12.5874023 2.33465576,12.4189453 C2.26873779,12.3530273 2.21746826,12.3457031 2.12225342,12.4189453 C1.96112061,12.5507812 1.81463623,12.7412109 1.79998779,12.9023438 C1.79998779,13.144043 2.18817139,13.378418 2.50311279,13.378418 C2.8180542,13.378418 3.24285889,13.2099609 3.71160889,12.7412109 C4.34881592,12.1113281 4.74432373,11.3642578 5.13250732,9.5625 C5.3961792,8.32470703 5.5133667,7.60693359 5.70379639,6.46435547 L6.81707764,6.36181641 L7.0368042,6.01025391 L5.79168701,6.01025391 C6.12127686,3.98144531 6.42889404,3.52001953 6.79510498,3.52001953 C7.02215576,3.52001953 7.25653076,3.68115234 7.49090576,3.9375 C7.57147217,4.02539062 7.66668701,4.02539062 7.76190186,3.95947266 C7.87176514,3.87158203 8.05487061,3.67382812 8.05487061,3.48339844 C8.06219482,3.27832031 7.78387451,3 7.38104248,3 C6.96356201,3 6.34832764,3.28564453 5.81365967,3.84228516 C5.30828857,4.38427734 5.0446167,5.18994141 4.87615967,6.01025391 L4.17303467,6.01025391 Z M7.27850342,7.20410156 C7.65936279,6.72070312 7.84979248,6.60351562 7.95965576,6.60351562 C8.06951904,6.60351562 8.16473389,6.74267578 8.33319092,7.27001953 L8.69207764,8.35400391 C8.03289795,9.328125 7.54217529,9.89941406 7.24188232,9.89941406 C7.13934326,9.89941406 7.04412842,9.86279297 6.98553467,9.78222656 C6.93426514,9.72363281 6.88299561,9.6796875 6.80975342,9.6796875 C6.59735107,9.6796875 6.34832764,9.93603516 6.34832764,10.199707 C6.34100342,10.5219727 6.58270264,10.7416992 6.86102295,10.7416992 C7.38104248,10.7416992 7.87176514,10.2363281 8.82391357,8.76416016 L9.17547607,9.80419922 C9.3805542,10.4487305 9.6149292,10.7416992 9.91522217,10.7416992 C10.2960815,10.7416992 10.8307495,10.331543 11.3434448,9.54785156 L11.1456909,9.328125 C10.7941284,9.73095703 10.5377808,9.95800781 10.3693237,9.95800781 C10.1862183,9.95800781 10.0324097,9.64306641 9.83465576,9.03515625 L9.45379639,7.90722656 C9.69549561,7.57763672 9.94451904,7.29931641 10.1569214,7.05029297 C10.4205933,6.74267578 10.6256714,6.57421875 10.7721558,6.57421875 C10.882019,6.57421875 10.9699097,6.62548828 11.0285034,6.69873047 C11.0944214,6.76464844 11.1383667,6.80126953 11.2042847,6.80126953 C11.3873901,6.80126953 11.6364136,6.57421875 11.6364136,6.31054688 C11.651062,6.06152344 11.482605,5.81982422 11.1676636,5.81982422 C10.6915894,5.81982422 10.2301636,6.26660156 9.33660889,7.53369141 L9.13153076,6.95507812 C8.87518311,6.20800781 8.71405029,5.81982422 8.42108154,5.81982422 C8.05487061,5.81982422 7.56414795,6.28857422 7.07342529,6.96972656 L7.27850342,7.20410156 Z" fill\x3d"#000000"\x3e\x3c/path\x3e\r\n                \x3c/g\x3e\r\n            \x3c/g\x3e\r\n        \x3c/svg\x3e\r\n\r\n        \x3csvg id\x3d"list_icon" width\x3d"10px" height\x3d"10px" viewBox\x3d"0 0 16 16" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" xmlns:sketch\x3d"http://www.bohemiancoding.com/sketch/ns"\x3e\r\n            \x3ctitle\x3egeneralList\x3c/title\x3e\r\n            \x3cg id\x3d"Page-1" stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd" sketch:type\x3d"MSPage"\x3e\r\n                \x3cg id\x3d"sprite-14x14" sketch:type\x3d"MSArtboardGroup" transform\x3d"translate(-128.000000, 0.000000)"\x3e\r\n                    \x3cg id\x3d"generalList" sketch:type\x3d"MSLayerGroup" transform\x3d"translate(128.000000, 0.000000)"\x3e\r\n                        \x3cpath d\x3d"M6,7 L14,7 L14,9 L6,9 L6,7 L6,7 Z" id\x3d"Fill-1" fill\x3d"#666666" sketch:type\x3d"MSShapeGroup"\x3e\x3c/path\x3e\r\n                        \x3cpath d\x3d"M6,10.98 L14,10.98 L14,12.98 L6,12.98 L6,10.98 L6,10.98 Z" id\x3d"Fill-2" fill\x3d"#666666" sketch:type\x3d"MSShapeGroup"\x3e\x3c/path\x3e\r\n                        \x3cpath d\x3d"M2,6.98 L4,6.98 L4,8.98 L2,8.98 L2,6.98 L2,6.98 Z" id\x3d"Fill-3" fill\x3d"#3179B1" sketch:type\x3d"MSShapeGroup"\x3e\x3c/path\x3e\r\n                        \x3cpath d\x3d"M6,3.02 L14,3.02 L14,4.98 L6,4.98 L6,3.02 L6,3.02 Z" id\x3d"Fill-5" fill\x3d"#666666" sketch:type\x3d"MSShapeGroup"\x3e\x3c/path\x3e\r\n                        \x3cpath d\x3d"M2,3.02 L4,3.02 L4,4.98 L2,4.98 L2,3.02 L2,3.02 Z" id\x3d"Fill-6" fill\x3d"#3179B1" sketch:type\x3d"MSShapeGroup"\x3e\x3c/path\x3e\r\n                        \x3cpath d\x3d"M2,10.98 L4,10.98 L4,12.98 L2,12.98 L2,10.98 L2,10.98 Z" id\x3d"Fill-4" fill\x3d"#3179B1" sketch:type\x3d"MSShapeGroup"\x3e\x3c/path\x3e\r\n                    \x3c/g\x3e\r\n                \x3c/g\x3e\r\n            \x3c/g\x3e\r\n        \x3c/svg\x3e\r\n        \r\n        \x3csvg id\x3d"users_icon" width\x3d"10px" height\x3d"10px" viewBox\x3d"0 0 16 16" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" xmlns:sketch\x3d"http://www.bohemiancoding.com/sketch/ns"\x3e\r\n            \x3ctitle\x3euser\x3c/title\x3e\r\n            \x3cg id\x3d"Page-1" stroke\x3d"none" stroke-width\x3d"1" fill\x3d"none" fill-rule\x3d"evenodd" sketch:type\x3d"MSPage"\x3e\r\n                \x3cg id\x3d"sprite-14x14" sketch:type\x3d"MSArtboardGroup" transform\x3d"translate(-64.000000, 0.000000)" fill\x3d"#666666"\x3e\r\n                    \x3cg id\x3d"user" sketch:type\x3d"MSLayerGroup" transform\x3d"translate(64.000000, 0.000000)"\x3e\r\n                        \x3cpath d\x3d"M12.189,5.557 C12.189,7.515 10.823,9.102 9.138,9.102 C7.453,9.102 6.088,7.515 6.088,5.557 C6.088,3.6 7.453,2.013 9.138,2.013 C10.823,2.013 12.189,3.6 12.189,5.557" id\x3d"Fill-1" sketch:type\x3d"MSShapeGroup"\x3e\x3c/path\x3e\r\n                        \x3cpath d\x3d"M15.056,11.58 C15.056,10.635 14.291,9.869 13.346,9.869 L4.795,9.869 C3.851,9.869 3.085,10.635 3.085,11.58 L3.085,15 L15.056,15 L15.056,11.58" id\x3d"Fill-2" sketch:type\x3d"MSShapeGroup"\x3e\x3c/path\x3e\r\n                    \x3c/g\x3e\r\n                \x3c/g\x3e\r\n            \x3c/g\x3e\r\n        \x3c/svg\x3e\r\n\r\n        \x3cradialGradient cx\x3d"50%" cy\x3d"50%" r\x3d"1" fx\x3d"50%" fy\x3d"50%" id\x3d"background_gradient"\x3e\r\n            \x3cstop offset\x3d"0%" stop-color\x3d"#FFFFFF" stop-opacity\x3d"0"/\x3e\r\n            \x3cstop offset\x3d"100%" stop-color\x3d"#DBDBDB" stop-opacity\x3d"1"/\x3e\r\n        \x3c/radialGradient\x3e\r\n\r\n        \x3clinearGradient x1\x3d"0.5" y1\x3d"0" x2\x3d"0.5" y2\x3d"1" id\x3d"background_gradient_focused"\x3e\r\n            \x3cstop stop-color\x3d"#FFFFFF" stop-opacity\x3d"1" offset\x3d"0"\x3e\x3c/stop\x3e\r\n            \x3cstop stop-color\x3d"#FFA500" stop-opacity\x3d"1" offset\x3d"1"\x3e\x3c/stop\x3e\r\n        \x3c/linearGradient\x3e\r\n\r\n        \x3clinearGradient x1\x3d"0.5" y1\x3d"0" x2\x3d"0.5" y2\x3d"1" id\x3d"background_gradient_hover"\x3e\r\n            \x3cstop stop-color\x3d"#FFFFFF" stop-opacity\x3d"0.6" offset\x3d"0"\x3e\x3c/stop\x3e\r\n            \x3cstop stop-color\x3d"#FFFFFF" stop-opacity\x3d"0.6" offset\x3d"1"\x3e\x3c/stop\x3e\r\n        \x3c/linearGradient\x3e\r\n\r\n        \x3cfilter id\x3d"dropshadow" height\x3d"130%"\x3e\r\n            \x3cfeGaussianBlur in\x3d"SourceAlpha" stdDeviation\x3d"3"/\x3e\r\n            \x3cfeOffset dx\x3d"2" dy\x3d"2" result\x3d"offsetblur"/\x3e\r\n            \x3cfeComponentTransfer\x3e\r\n                \x3cfeFuncA type\x3d"linear" slope\x3d"0.2"/\x3e\r\n            \x3c/feComponentTransfer\x3e\r\n            \x3cfeMerge\x3e\r\n                \x3cfeMergeNode/\x3e\r\n                \x3cfeMergeNode in\x3d"SourceGraphic"/\x3e\r\n            \x3c/feMerge\x3e\r\n        \x3c/filter\x3e\r\n\r\n    \x3c/defs\x3e\r\n\x3c/svg\x3e\r\n\r\n\x3csvg id\x3d"svgtestelement" style\x3d"position:absolute; left:-10000px; top:-10000px;" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink"\x3e\r\n    \x3ctext class\x3d"detailsNode-list"\x3e\r\n        \x3ctspan id\x3d"detailsNode-list_tester" dy\x3d"0" x\x3d"0"\x3e\x3c/tspan\x3e\r\n    \x3c/text\x3e\r\n    \x3ctext class\x3d"lowNode-headertext"\x3e\r\n        \x3ctspan id\x3d"lowNode-headertext_tester" dy\x3d"0" x\x3d"0"\x3e\x3c/tspan\x3e\r\n    \x3c/text\x3e\r\n    \x3ctext class\x3d"midNode-headertext"\x3e\r\n        \x3ctspan id\x3d"midNode-headertext_tester" dy\x3d"0" x\x3d"0"\x3e\x3c/tspan\x3e\r\n    \x3c/text\x3e\r\n    \x3ctext class\x3d"groupNode-headertext"\x3e\r\n        \x3ctspan id\x3d"groupNode_tester" dy\x3d"0" x\x3d"0"\x3e\x3c/tspan\x3e\r\n    \x3c/text\x3e\r\n    \x3ctext class\x3d"interNode-headertext"\x3e\r\n        \x3ctspan id\x3d"interNode-headertext_tester" dy\x3d"24" x\x3d"0"\x3e\x3c/tspan\x3e\r\n    \x3c/text\x3e\r\n\x3c/svg\x3e\r\n\r\n\x3csvg version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" style\x3d"display: none"\x3e\r\n    \x3cdefs id\x3d"template_svg_defs"\x3e\r\n\r\n\r\n    \x3c/defs\x3e\r\n\x3c/svg\x3e\r\n\r\n\x3csvg id\x3d"template_svg" version\x3d"1.1" xmlns\x3d"http://www.w3.org/2000/svg" xmlns:xlink\x3d"http://www.w3.org/1999/xlink" style\x3d"display: none"\x3e\r\n\r\n    \x3cg id\x3d"lowZoomNodeStyleTemplate" title\x3d"{Binding name}" class\x3d"{Binding, Converter\x3dmodelmap.selectednodeconverter}" data-id\x3d"{Binding id}" data-label\x3d"{Binding name}"\x3e\r\n        \x3crect fill\x3d"{Binding backgroundColor}" class\x3d"{TemplateBinding, Converter\x3dmodelmap.focusclassconverter}" width\x3d"{Binding width}" height\x3d"{Binding height}"/\x3e\r\n        \x3crect fill\x3d"{Binding colour}" class\x3d"select-node" width\x3d"{Binding widthInner}" height\x3d"23" transform\x3d"translate(0.5 0.5)"/\x3e\r\n\r\n        \x3crect class\x3d"modelmap-checkbox select-node" fill\x3d"{Binding backgroundColor}" width\x3d"12" height\x3d"12" transform\x3d"translate(208 5.5)"\x3e\x3c/rect\x3e\r\n        \x3cpolygon class\x3d"tick select-node" points\x3d"561.6,205.4 533,176.8 447.1,262.7 408.9,224.5 380.3,253.2 447.1,320 447.1,320 447.1,320 " transform\x3d"translate(186 -3.5) scale(0.06)"\x3e\x3c/polygon\x3e\r\n\r\n        \x3c!--Header Text --\x3e\r\n        \x3ctext data-content\x3d"{Binding, Converter\x3dmodelmap.headertextconverter, Parameter\x3dL}" transform\x3d"translate(3 16)" class\x3d"select-node lowNode-headertext" \x3e\x3c/text\x3e\r\n        \x3c!--Cell Count Text --\x3e\r\n        \x3ctext data-content\x3d"{Binding cellcountm}" transform\x3d"modelmap-node {Binding, Converter\x3dmodelmap.cellcounttransformconverter}" class\x3d"lowNode-cellCounttext"\x3e\x3c/text\x3e\r\n        \x3c!-- List of items --\x3e\r\n        \x3cuse xlink:href\x3d"{Binding, Converter\x3dmodelmap.listwrapconverter, Parameter\x3dL}" transform\x3d"translate(2 24)"/\x3e\r\n\r\n    \x3c/g\x3e\r\n\r\n    \x3cg id\x3d"midZoomNodeStyleTemplate" title\x3d"{Binding name}" class\x3d"{Binding, Converter\x3dmodelmap.selectednodeconverter}" data-id\x3d"{Binding id}" data-label\x3d"{Binding name}"\x3e\r\n\r\n        \x3crect fill\x3d"{Binding backgroundColor}" class\x3d"{TemplateBinding, Converter\x3dmodelmap.focusclassconverter}" width\x3d"{Binding width}" height\x3d"{Binding height}"/\x3e\r\n        \x3crect class\x3d"select-node" fill\x3d"{Binding colour}" width\x3d"{Binding width}" height\x3d"23"/\x3e\r\n\r\n        \x3crect class\x3d"modelmap-checkbox select-node" fill\x3d"{Binding backgroundColor}" width\x3d"12" height\x3d"12" transform\x3d"translate(208 5)"\x3e\x3c/rect\x3e\r\n        \x3cpolygon class\x3d"tick select-node" points\x3d"561.6,205.4 533,176.8 447.1,262.7 408.9,224.5 380.3,253.2 447.1,320 447.1,320 447.1,320 " transform\x3d"translate(186 -3.5) scale(0.06)"\x3e\x3c/polygon\x3e\r\n\r\n        \x3c!--Header Text --\x3e\r\n        \x3ctext transform\x3d"translate(3 16)" class\x3d"midNode-headertext select-node " data-content\x3d"{Binding, Converter\x3dmodelmap.headertextconverter, Parameter\x3dM}"\x3e\x3c/text\x3e\r\n        \x3c!--Cell Count Text   --\x3e\r\n        \x3ctext data-content\x3d"{Binding cellcountm}" transform\x3d"{Binding, Converter\x3dmodelmap.cellcounttransformconverter}" class\x3d"lowNode-cellCounttext"\x3e\x3c/text\x3e\r\n\r\n        \x3c!-- List of items --\x3e\r\n        \x3cuse xlink:href\x3d"{Binding, Converter\x3dmodelmap.listwrapconverter, Parameter\x3dM}" transform\x3d"translate(5 24)"/\x3e\r\n\r\n    \x3c/g\x3e\r\n\r\n    \x3cg id\x3d"highZoomNodeStyleTemplate" title\x3d"{Binding name}" class\x3d"{Binding, Converter\x3dmodelmap.selectednodeconverter}" data-id\x3d"{Binding id}" data-label\x3d"{Binding name}"\x3e\r\n        \x3crect fill\x3d"{Binding colour}" width\x3d"{Binding width}" height\x3d"{Binding height}" class\x3d"select-node"/\x3e\r\n        \x3crect class\x3d"modelmap-checkbox select-node" fill\x3d"{Binding backgroundColor}" width\x3d"12" height\x3d"12" transform\x3d"translate(208 5)"\x3e\x3c/rect\x3e\r\n        \x3cpolygon class\x3d"tick select-node" points\x3d"561.6,205.4 533,176.8 447.1,262.7 408.9,224.5 380.3,253.2 447.1,320 447.1,320 447.1,320 " transform\x3d"translate(186 -3.5) scale(0.06)"\x3e\x3c/polygon\x3e\r\n\r\n        \x3cuse xlink:href\x3d"{Binding, Converter\x3dmodelmap.textwrapconverter}" class\x3d"select-node" transform\x3d"translate(0 0)"/\x3e\r\n    \x3c/g\x3e\r\n\r\n\r\n\x3c/svg\x3e',
"url:anaplan/templates/Workflow/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" waiRole\x3d"presentation" style\x3d"position: absolute; visibility:hidden" class\x3d"dijitReset dijitInline"\n\tdata-dojo-attach-event\x3d"onkeypress: _onKeyPress"\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\n\t\t\x3e\x3cbutton class\x3d\'saveButton\'\n                 data-dojo-attach-point\x3d"saveButton"\n                 data-dojo-type\x3d"anaplan/widgets/Button"\n                 data-dojo-attach-event\x3d"onClick:save"\n                 iconClass\x3d"anaplanEditorIcon anaplanEditorIconOk"\n                 showLabel\x3d"false"\x3e\x3c/button\n\t\t\x3e\x3cbutton class\x3d\'cancelButton\'\n                 data-dojo-attach-point\x3d"cancelButton"\n                 data-dojo-type\x3d"anaplan/widgets/Button"\n                 data-dojo-attach-event\x3d"onClick:cancel"\n                 iconClass\x3d"anaplanEditorIcon anaplanEditorIconReset" showLabel\x3d"false"\x3e\x3c/button\n\t\x3e\x3c/span\n\x3e\x3c/span\x3e\n',
"url:anaplan/templates/_UserDetails.html":'\x3cdiv class\x3d"${baseClass}" tabindex\x3d"${tabindex}"\x3e\n    \x3cform class\x3d"userDetailsForm"\x3e\n        \x3cdiv class\x3d"userDetailsFormItem"\x3e\n            \x3clabel class\x3d"userDetailsLabel" data-dojo-attach-point\x3d"labelEmailAddress"\x3e\n                $EmailAddress\n            \x3c/label\x3e\n            \x3cinput\n                class\x3d"userDetailsInput"\n                data-dojo-type\x3d"dijit/form/ValidationTextBox"\n                data-dojo-attach-point\x3d"inputEmailAddress"\n                trim\x3d"true"\n                required\x3d"true"\n                tabindex\x3d"1"\n                data-dojo-attach-event\x3d"onBlur:_onEmailBlur,onKeyPress:_onEmailKeyPress"\n            /\x3e\n        \x3c/div\x3e\n        \x3cdiv data-dojo-attach-point\x3d"labelAddressValidationLoadingWrapper" style\x3d"display: none" class\x3d"userDetailsFormItem"\x3e\n            \x3cspan data-dojo-attach-point\x3d"labelAddressValidationLoading" class\x3d"workspaceInputValidationLoading"\x3e\x3c/span\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"userDetailsFormItem"\x3e\n            \x3clabel class\x3d"userDetailsLabel" data-dojo-attach-point\x3d"labelFirstName"\x3e\n                $FirstName\n            \x3c/label\x3e\n            \x3cinput class\x3d"userDetailsInput" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"inputFirstName" maxlength\x3d30 required\x3d"true" tabindex\x3d"1" trim\x3d"true"/\x3e\n\n        \x3c/div\x3e\n        \x3cdiv class\x3d"userDetailsFormItem"\x3e\n            \x3clabel class\x3d"userDetailsLabel" data-dojo-attach-point\x3d"labelLastName"\x3e\n                $LastName\n            \x3c/label\x3e\n            \x3cinput class\x3d"userDetailsInput" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"inputLastName" maxlength\x3d30 required\x3d"true" tabindex\x3d"1" trim\x3d"true"/\x3e\n\n        \x3c/div\x3e\n        \x3cdiv class\x3d"userDetailsFormCheckboxItem"\x3e\n            \x3cinput class\x3d"userDetailsInput" type\x3d"checkbox" data-dojo-attach-point\x3d"inputIsWorkspaceAdministrator" tabindex\x3d"1"/\x3e\n            \x3clabel class\x3d"userDetailsCheckboxLabel" data-dojo-attach-point\x3d"labelIsWorkspaceAdministrator"\x3e\n                $IsWorkspaceAdministrator\n            \x3c/label\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"userDetailsFormCheckboxItem"\x3e\n            \x3cinput class\x3d"userDetailsInput" id\x3d"idIsExceptionUser" style\x3d"width: 20px;" type\x3d"checkbox" data-dojo-attach-point\x3d"inputIsExceptionUser" tabindex\x3d"1" checked/\x3e\n            \x3clabel class\x3d"userDetailsCheckboxSSOLabel" for\x3d"idIsExceptionUser" data-dojo-attach-point\x3d"labelIsExceptionUser"\x3e\n                $IsExceptionUser\n            \x3c/label\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"userDetailsFormItem"\x3e\n            \x3clabel class\x3d"userDetailsLabel" data-dojo-attach-point\x3d"labelRole"\x3e\n                $Role\n            \x3c/label\x3e\n            \x3cinput class\x3d"userDetailsInput" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-attach-point\x3d"filteringSelectRoles" tabindex\x3d"1" required\x3d"false" autocomplete\x3d"true" hasDownArrow\x3d"true" \x3e\x3c/span\x3e\n        \x3c/div\x3e\n\n        \x3cdiv class\x3d"buttons userDetailsButtons"\x3e\n            \x3cinput class\x3d"primary-button" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"buttonSubmit" data-dojo-attach-event\x3d"onClick:_onSubmit"/\x3e\n            \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"buttonCancel" data-dojo-attach-event\x3d"onClick:_onCancel"/\x3e\n        \x3c/div\x3e\n\n    \x3c/form\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/Settings/Time/Widgets/IncludeOptions.html":'\n\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"includeoptions"\x3e\n\n    \x3cul class\x3d"checkbox-list"\x3e\n        \x3cli class\x3d"quarterTotalsIncluded"\x3e\n            \x3cinput id\x3d"${id}_quarterTotalsIncluded" data-dojo-attach-point\x3d"quarterTotalsIncluded" data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\n            \x3clabel for\x3d"${id}_quarterTotalsIncluded"\x3e${i18n.labelQuarterTotalsIncluded}\x3c/label\x3e\n            \x3cdiv class\x3d"fiscalYearExtraMonthQuarterWrapper" data-dojo-attach-point\x3d"fiscalYearExtraMonthQuarterWrapper"\x3e\n                \x3cinput id\x3d"${id}_fiscalYearExtraMonthQuarter" data-dojo-attach-point\x3d"fiscalYearExtraMonthQuarter" /\x3e\n                \x3cspan class\x3d"dijitIcon questionmarkicon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\n            \x3c/div\x3e\n\n        \x3c/li\x3e\n        \x3cli class\x3d"halfYearTotalsIncluded" data-dojo-attach-point\x3d"halfYearTotalsIncludedRow"\x3e\n            \x3cinput id\x3d"${id}_halfYearTotalsIncluded" data-dojo-attach-point\x3d"halfYearTotalsIncluded" data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\n            \x3clabel for\x3d"${id}_halfYearTotalsIncluded"\x3e${i18n.labelHalfYearTotalsIncluded}\x3c/label\x3e\n        \x3c/li\x3e\n        \x3cli class\x3d"yearToDateIncluded"\x3e\n            \x3cinput id\x3d"${id}_yearToDateIncluded" data-dojo-attach-point\x3d"yearToDateIncluded" data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\n            \x3clabel for\x3d"${id}_yearToDateIncluded"\x3e${i18n.labelYearToDateIncluded}\x3c/label\x3e\n        \x3c/li\x3e\n        \x3cli class\x3d"yearToGoIncluded"\x3e\n            \x3cinput id\x3d"${id}_yearToGoIncluded" data-dojo-attach-point\x3d"yearToGoIncluded" data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\n            \x3clabel for\x3d"${id}_yearToGoIncluded"\x3e${i18n.labelYearToGoIncluded}\x3c/label\x3e\n        \x3c/li\x3e\n        \x3cli class\x3d"totalOfAllPeriodsIncluded"\x3e\n            \x3cinput id\x3d"${id}_totalOfAllPeriodsIncluded" data-dojo-attach-point\x3d"totalOfAllPeriodsIncluded" data-dojo-type\x3d"dijit/form/CheckBox"/\x3e\n            \x3clabel for\x3d"${id}_totalOfAllPeriodsIncluded"\x3e${i18n.labelTotalOfAllPeriodsIncluded}\x3c/label\x3e\n        \x3c/li\x3e\n\n    \x3c/ul\x3e\n\n    \x3c!--\x3cdiv data-dojo-attach-point\x3d"quarterlyTotalsInfoBox" class\x3d"quarterlyTotalsInfoBox"\x3e--\x3e\n        \x3c!--\x3clabel\x3e${i18n.labelQuarterlyTotalsInfoBoxHeader}\x3c/label\x3e\x3cbr\x3e\x3cbr\x3e--\x3e\n        \x3c!--\x26nbsp;\x26nbsp;\x26nbsp;\x3clabel data-dojo-attach-point\x3d"quarterlyTotalsInfoBoxLine1"\x3e\x3c/label\x3e\x3cbr\x3e--\x3e\n        \x3c!--\x26nbsp;\x26nbsp;\x26nbsp;\x3clabel data-dojo-attach-point\x3d"quarterlyTotalsInfoBoxLine2"\x3e\x3c/label\x3e\x3cbr\x3e--\x3e\n        \x3c!--\x26nbsp;\x26nbsp;\x26nbsp;\x3clabel data-dojo-attach-point\x3d"quarterlyTotalsInfoBoxLine3"\x3e\x3c/label\x3e\x3cbr\x3e--\x3e\n        \x3c!--\x26nbsp;\x26nbsp;\x26nbsp;\x3clabel data-dojo-attach-point\x3d"quarterlyTotalsInfoBoxLine4"\x3e\x3c/label\x3e\x3cbr\x3e\x3cbr\x3e--\x3e\n        \x3c!--\x26nbsp;\x26nbsp;\x26nbsp;\x3clabel\x3e${i18n.labelQuarterlyTotalsInfoBoxFooter}\x3c/label\x3e--\x3e\n    \x3c!--\x3c/div\x3e--\x3e\n\n\x3c/div\x3e\n\n\n\n\n',
"url:anaplan/templates/ModelMap/yFilesCanvas.html":'\x3cdiv class\x3d"canvasArea"\x3e\r\n    \x3cdiv id\x3d"${id}_graphView" data-dojo-attach-point\x3d"graphCanvas" data-dojo-type\x3d\'anaplan/modelmap/yfiles/widgets/GraphView\' class\x3d"mainCanvas"\x3e\x3c/div\x3e\r\n    \x3cdiv id\x3d"${id}_overview" data-dojo-attach-point\x3d"overviewCanvas" data-dojo-type\x3d\'anaplan/modelmap/yfiles/widgets/GraphView\' class\x3d"overviewCanvas"\x3e\r\n        \x3cdiv class\x3d"hideshow" data-dojo-attach-point\x3d"btnToggleOverview" data-dojo-attach-event\x3d"onClick:_onToggleOverviewClick"\x3e\r\n            \x3cdiv class\x3d"hideshowicon"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e\r\n\r\n\r\n\r\n',
"url:anaplan/templates/History_Form.html":'\x3cdiv class\x3d"${baseClass}" tabindex\x3d"${tabindex}"\x3e\n    \x3cdiv class\x3d"showHistoryTitle"\x3e\n        \x3clabel data-dojo-attach-point\x3d"showHistoryTitleLabel"\x3eShow History:\x3c/label\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"showHistoryForm"\x3e\n        \x3cradioGroup\x3e\n            \x3cdiv class\x3d"showHistoryRadioButtonsItem"\x3e\n                \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-event\x3d"onChange:_onDateRangeChange"\n                       data-dojo-attach-point\x3d"showHistoryRadio24hrs" name\x3d"showHistoryRadio" id\x3d"showHistory24hrs" value\x3d"24" checked /\x3e\n                \x3clabel data-dojo-attach-point\x3d"showHistory24hrsLabel" for\x3d"showHistory24hrs"\x3e\x3c/label\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"showHistoryRadioButtonsItem"\x3e\n                \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-event\x3d"onChange:_onDateRangeChange"\n                       data-dojo-attach-point\x3d"showHistoryRadio7d" name\x3d"showHistoryRadio" id\x3d"showHistory7d" value\x3d"7" /\x3e\n                \x3clabel data-dojo-attach-point\x3d"showHistory7dLabel" for\x3d"showHistory7d"\x3e\x3c/label\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"showHistoryRadioButtonsItem"\x3e\n                \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-event\x3d"onChange:_onDateRangeChange"\n                       data-dojo-attach-point\x3d"showHistoryRadio30d" name\x3d"showHistoryRadio" id\x3d"showHistory30d" value\x3d"30" /\x3e\n                \x3clabel data-dojo-attach-point\x3d"showHistory30dLabel" for\x3d"showHistory30d"\x3e\x3c/label\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"showHistoryRadioButtonsItem"\x3e\n                \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-event\x3d"onChange:_onDateRangeChange"\n                       data-dojo-attach-point\x3d"showHistoryRadioAll" name\x3d"showHistoryRadio" id\x3d"showHistoryAll" value\x3d"ALL" /\x3e\n                \x3clabel data-dojo-attach-point\x3d"showHistoryAllLabel" for\x3d"showHistoryAll"\x3e\x3c/label\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"showHistoryRadioButtonsItem"\x3e\n                \x3cinput type\x3d"radio" data-dojo-type\x3d"dijit/form/RadioButton" data-dojo-attach-event\x3d"onChange:_onDateRangeChange"\n                       data-dojo-attach-point\x3d"showHistoryRadioDateRange" name\x3d"showHistoryRadio" id\x3d"showHistoryDateRange" value\x3d"RANGE" /\x3e\n                \x3clabel data-dojo-attach-point\x3d"showHistoryDateRangeLabel" for\x3d"showHistoryDateRange"\x3e\x3c/label\x3e\n            \x3c/div\x3e\n        \x3c/radioGroup\x3e\n\n        \x3cdiv class\x3d"showHistoryDateRangeItem"\x3e\n            \x3clabel data-dojo-attach-point\x3d"historyFromDateLabel" for\x3d"showHistoryFromDate" disabled \x3eFrom:\x3c/label\x3e\n            \x3cinput data-dojo-id\x3d"showHistoryFromDate" type\x3d"text" id\x3d"showHistoryFromDate" name\x3d"showHistoryFromDate"\n                   data-dojo-attach-event\x3d"onChange:_validateDate"\n                   data-dojo-type\x3d"dijit/form/DateTextBox" data-dojo-attach-point\x3d"showHistoryFromDate"\n                   onChange\x3d"showHistoryToDate.constraints.min \x3d arguments[0];" disabled /\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"showHistoryDateRangeItem"\x3e\n            \x3clabel data-dojo-attach-point\x3d"showHistoryToDateLabel" for\x3d"showHistoryToDate" disabled \x3eTo:\x3c/label\x3e\n            \x3cinput data-dojo-id\x3d"showHistoryToDate" type\x3d"text" id\x3d"showHistoryToDate" name\x3d"showHistoryToDate"\n                   data-dojo-attach-event\x3d"onChange:_validateDate"\n                   data-dojo-type\x3d"dijit/form/DateTextBox"  data-dojo-attach-point\x3d"showHistoryToDate"\n                   onChange\x3d"showHistoryFromDate.constraints.max \x3d arguments[0];" disabled /\x3e\n        \x3c/div\x3e\n        \x3cdiv class\x3d"showHistoryRadioButtonsItem"\x3e\n            \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-event\x3d"onChange:_onSaveOptionsChange"\n                   data-dojo-attach-point\x3d"showHistorySaveOptionsCheck" name\x3d"showHistorySaveOptionsCheck" id\x3d"showHistorySaveOptionsCheck" /\x3e\n            \x3clabel data-dojo-attach-point\x3d"showHistorySaveOptionsCheckLabel" for\x3d"showHistorySaveOptionsCheck" id\x3d"showHistorySaveOptionsCheckLabel"\x3e\x3c/label\x3e\n        \x3c/div\x3e\n\n        \x3cdiv class\x3d"showHistoryDateRangeItem"\x3e\n            \x3clabel data-dojo-attach-point\x3d"showHistorySaveOptionsExportNameLabel" id\x3d"showHistorySaveOptionsExportNameLabel" for\x3d"showHistorySaveOptionsExportName" disabled \x3eName:\x3c/label\x3e\n            \x3cinput data-dojo-id\x3d"showHistoryExportName" type\x3d"text" id\x3d"showHistorySaveOptionsExportName" name\x3d"showHistorySaveOptionsExportName"\n                   data-dojo-type\x3d"dijit/form/TextBox"  data-dojo-attach-point\x3d"showHistorySaveOptionsExportName"\n                   data-dojo-props\x3d"maxlength:60" style\x3d"float: right"  disabled /\x3e\n        \x3c/div\x3e\n\n    \x3c/div\x3e\n\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput class\x3d"primary-button" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"auditLogButton"\n               data-dojo-attach-event\x3d"onClick:_onAuditLogButtonClick" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/ModelManagement/ModelsTab.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n    \x3cdiv class\x3d"modelSelector" data-dojo-type\x3d"anaplan/widgets/MasterSelector" data-dojo-attach-point\x3d"modelSelector" data-dojo-attach-event\x3d"onSelectionChange:_onModelSelectionChange" data-dojo-props\x3d"tabIndex: 0, isModelManagement: true"\x3e\x3c/div\x3e\n\n    \x3cdiv data-dojo-attach-point\x3d"actionButtons" class\x3d"actionButtons"\x3e\x3c/div\x3e\n\n    \x3cdiv style\x3d"clear:both;"\x3e\x3c/div\x3e\n    \x3cdiv class\x3d"modelSelectorOptions"\x3e\n        \x3clabel data-dojo-attach-point\x3d"showArchivedModelsLabel"\x3e\x3c/label\x3e\n        \x3cinput type\x3d"checkbox" data-dojo-type\x3d"dijit/form/CheckBox" data-dojo-attach-point\x3d"showArchivedModelsCheckBox" data-dojo-attach-event\x3d"onChange:_onShowArchivedModelsCheckBoxChange" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/ModelManagement/NewModelView.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-event\x3d"keydown:_onKeyDown,keypress:_onKeyPress" tabindex\x3d"${tabIndex}"\x3e\n    \x3ctable class\x3d"editModelTable"\x3e\n        \x3ctbody\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"labelCell"\x3e\n                    \x3clabel data-dojo-attach-point\x3d"modelNameLabel"\x3e\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"valueCell"\x3e\n                    \x3cinput type\x3d"text" class\x3d"modelNameTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\n                           data-dojo-attach-point\x3d"modelNameTextBox" required\x3d"true" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n        \x3c/tbody\x3e\n    \x3c/table\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput class\x3d"primary-button" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"createModelButton"\n               data-dojo-attach-event\x3d"click:_onCreateModelButtonClick" disabled\x3d"true" /\x3e\n        \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"cancelButton"\n               data-dojo-attach-event\x3d"click:_onCancelButtonClick" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/_TagSearchFields.html":'\x3cdiv class\x3d"${baseClass}" tabindex\x3d"${tabindex}"\x3e\n    \x3cp class\x3d"tagSearchDescription" data-dojo-attach-point\x3d"labelSearchTextDescription"\x3e\n        $SearchTagDescription\n    \x3c/p\x3e\n\n    \x3cform class\x3d"tagSearchDetailsForm"\x3e\n        \x3cdiv class\x3d"formDetails"\x3e\n            \x3cdiv class\x3d"tagSearchFormItem"\x3e\n                \x3clabel class\x3d"searchTextLabel" data-dojo-attach-point\x3d"labelSearchText"\x3e\n                    $SearchText\n                \x3c/label\x3e\n                \x3cinput class\x3d"searchTextInput" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"inputSearchText"\n                       trim\x3d"true" required\x3d"true" tabindex\x3d"1"\n                       data-dojo-props\x3d"intermediateChanges: true"\n                       data-dojo-attach-event\x3d"onBlur: _onSearchTextBlur, onChange: _onSearchTextChange" /\x3e\n\n            \x3c/div\x3e\n            \x3cdiv class\x3d"tagSearchFormItem"\x3e\n                \x3clabel class\x3d"searchTextLabel" data-dojo-attach-point\x3d"labelSearchTag"\x3e\n                    $SearchTag\n                \x3c/label\x3e\n                \x3cinput class\x3d"searchTextInput" data-dojo-type\x3d"dijit/form/FilteringSelect" data-dojo-attach-point\x3d"filteringSelectTags"\n                       tabindex\x3d"1" required\x3d"true" autocomplete\x3d"true" hasDownArrow\x3d"true"\n                       data-dojo-attach-event\x3d"onBlur: _onSelectInputBlur, onChange: _onSelectInputChange" /\x3e\n            \x3c/div\x3e\n\n            \x3cdiv class\x3d"buttons" data-dojo-attach-point\x3d"buttons"\x3e\n                \x3cinput type\x3d"button" class\x3d"primary-button" data-dojo-attach-point\x3d"okButton" data-dojo-type\x3d"anaplan/widgets/Button"\n                       data-dojo-attach-event\x3d"click:_doSearch"/\x3e\n                \x3cinput type\x3d"button" data-dojo-attach-point\x3d"cancelButton" data-dojo-type\x3d"anaplan/widgets/Button"\n                       data-dojo-attach-event\x3d"click:onCancel"/\x3e\n            \x3c/div\x3e\n        \x3c/div\x3e\n    \x3c/form\x3e\n\x3c/div\x3e',
"url:anaplan/templates/KeyboardShortcut.html":'\x3ctr id\x3d"${id}" class\x3d"keyboard-shortcut"\x3e\x3ctd class\x3d"description"\x3e${descriptionHtml}\x3c/td\x3e\x3ctd\x3e${shortcutHtml}\x3c/td\x3e\x3c/tr\x3e\n',"url:dijit/templates/InlineEditBox.html":'\x3cspan data-dojo-attach-point\x3d"editNode" role\x3d"presentation" class\x3d"dijitReset dijitInline dijitOffScreen"\n\t\x3e\x3cspan data-dojo-attach-point\x3d"editorPlaceholder"\x3e\x3c/span\n\t\x3e\x3cspan data-dojo-attach-point\x3d"buttonContainer"\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button" data-dojo-props\x3d"label: \'${buttonSave}\', \'class\': \'saveButton\'"\n\t\t\tdata-dojo-attach-point\x3d"saveButton" data-dojo-attach-event\x3d"onClick:save"\x3e\x3c/button\n\t\t\x3e\x3cbutton data-dojo-type\x3d"./form/Button"  data-dojo-props\x3d"label: \'${buttonCancel}\', \'class\': \'cancelButton\'"\n\t\t\tdata-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onClick:cancel"\x3e\x3c/button\n\t\x3e\x3c/span\n\x3e\x3c/span\x3e\n',
"url:anaplan/templates/ModelManagement/CopyModelView.html":'\x3cdiv class\x3d"${baseClass}" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeypress:_onKeyPress" tabindex\x3d"${tabIndex}"\x3e\n    \x3ctable class\x3d"editModelTable"\x3e\n        \x3ctbody\x3e\n            \x3ctr\x3e\n                \x3ctd class\x3d"labelCell"\x3e\n                    \x3clabel data-dojo-attach-point\x3d"modelNameLabel"\x3e\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"valueCell"\x3e\n                    \x3cinput type\x3d"text" class\x3d"modelNameTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\n                           data-dojo-attach-point\x3d"modelNameTextBox" required\x3d"true" /\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n        \x3c/tbody\x3e\n    \x3c/table\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput class\x3d"primary-button" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"copyModelButton"\n               data-dojo-attach-event\x3d"onClick:_onCopyModelButtonClick" disabled\x3d"true" /\x3e\n        \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"cancelButton"\n               data-dojo-attach-event\x3d"onClick:_onCancelButtonClick" /\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/Information.html":'\x3cdiv class\x3d"${baseClass}" tabindex\x3d"-1" data-dojo-attach-event\x3d"onkeydown:_onKeyDown,onkeypress:_onKeyPress"\x3e\n\t\x3cdiv class\x3d"informationMessage" data-dojo-attach-point\x3d"informationMessage"\x3e\x3c/div\x3e\n\t\x3cdiv class\x3d"buttons"\x3e\n\t    \x3cinput class\x3d"primary-button" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"okButton" data-dojo-attach-event\x3d"onClick:_onOkButtonClick" /\x3e\n\t\x3c/div\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/FormulaEditor.html":'\x3cdiv class\x3d"${baseClass}" tabindex\x3d"${tabindex}"\x3e\n    \x3cdiv class\x3d"formulaHeader" data-dojo-attach-point\x3d"formulaHeader"\x3e\x3ch3 data-dojo-attach-point\x3d"formulaTitle"\x3e\x3c/h3\x3e\x3c/div\x3e\n    \x3ctable data-dojo-attach-point\x3d"top" class\x3d"formulaEditorTable formulaEditorLabelTable"\x3e\x3ctbody\x3e\x3ctr\x3e\n        \x3ctd class\x3d"formulaEditorFormulaCell"\x3e\n            \x3ctable class\x3d"formulaEditorFormulaTable" cellspacing\x3d"0"\x3e\x3ctbody\x3e\x3ctr\x3e\n                \x3ctd class\x3d"formulaEditorRowLabelCell" data-dojo-attach-point\x3d"formulaRowLabelCell" data-dojo-attach-event\x3d"onclick:_onFormulaRowLabelCellClick"\x3e\n                    \x3cinput type\x3d"button" data-dojo-type\x3d"dijit/form/ToggleButton" data-dojo-attach-point\x3d"toggleButton" data-dojo-attach-event\x3d"onChange:onChange" iconClass\x3d"anaplanEditorIcon anaplanEditorIconFormulaPanelContract" showLabel\x3d"false"\x3e\x3c/input\x3e\n                    \x3cinput class\x3d"dijitInline formulaLabel" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"labelButton" data-dojo-attach-event\x3d"onClick:_onLabelButtonClick"\x3e\x3c/input\x3e\n                    \x3cinput class\x3d"dijitInline formulaScope" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"scopeButton" data-dojo-attach-event\x3d"onClick:_onLabelButtonClick"\x3e\x3c/input\x3e\n                    \x3cinput class\x3d"dijitInline formulaEquals" type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" data-dojo-attach-point\x3d"equalsButton" data-dojo-attach-event\x3d"onClick:_onLabelButtonClick" label\x3d"\x3d"\x3e\x3c/input\x3e\n                \x3c/td\x3e\n                \x3ctd class\x3d"formulaEditorButtonsCell"\x3e\n                    \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" iconClass\x3d"anaplanEditorIcon anaplanEditorIconReset" showLabel\x3d"false" data-dojo-attach-point\x3d"resetButton" data-dojo-attach-event\x3d"onClick:_onReset"\x3e\x3c/input\x3e\n                    \x3cinput type\x3d"button" data-dojo-type\x3d"anaplan/widgets/Button" iconClass\x3d"anaplanEditorIcon anaplanEditorIconOk" showLabel\x3d"false" data-dojo-attach-point\x3d"okButton" data-dojo-attach-event\x3d"onClick:_onSave"\x3e\x3c/input\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\n        \x3c/td\x3e\n    \x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\n    \x3ctable class\x3d"formulaEditorTable formulaEditorExpressionTable"\x3e\x3ctbody\x3e\x3ctr\x3e\n        \x3ctd class\x3d"formulaEditorExpressionCell"\x3e\n            \x3ctextarea rows\x3d"1" class\x3d"formulaEditorText" data-dojo-attach-point\x3d"formula" data-dojo-attach-event\x3d"ondblclick:_onDoubleClick,onkeypress:_onKeyPress,onkeydown:_onKeyDown,onmouseup:_setInputSelection,onfocus:_setInputSelection,onkeyup:_setInputSelection"\x3e\x3c/textarea\x3e\n        \x3c/td\x3e\n        \x3ctd class\x3d"formulaEditorToolbar" waiRole\x3d"toolbar" data-dojo-attach-point\x3d"containerNode,toolbar"\x3e\x3c/td\x3e\n    \x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\n\x3c/div\x3e',
"url:anaplan/templates/Widgets/SearchBar.html":'\x3cdiv class\x3d"anaplanSearchBar" data-dojo-attach-event\x3d"onclick:_onClick"\x3e\n    \x3cspan class\x3d"icon" data-dojo-attach-point\x3d"icon"\x3e\x3c/span\x3e\n    \x3cinput data-dojo-attach-point\x3d"textBox," data-dojo-attach-event\x3d"onkeyup:_onKeyUp, onchange:_onChange, onkeydown:_onKeyDown, onblur:_onBlur, onfocus:_onFocus" type\x3d"text"/\x3e\n    \x3cspan class\x3d"cancelButton hidden" data-dojo-attach-point\x3d"cancelButton" data-dojo-attach-event\x3d"onclick:_onClickCancel"\x3e\x3c/span\x3e\n\x3c/div\x3e',
"url:anaplan/templates/ViewIndicator.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n    \x3ctable\x3e\n        \x3ctbody\x3e\n            \x3ctr\x3e\n                \x3ctd\x3e\n                    \x3clabel data-dojo-attach-point\x3d"viewLabel"\x3e\x3c/label\x3e\n                \x3c/td\x3e\n                \x3ctd\x3e\n                    \x3cinput type\x3d"button"\n                           data-dojo-type\x3d"anaplan/widgets/Button"\n                           data-dojo-attach-point\x3d"closeViewButton"\n                           data-dojo-attach-event\x3d"onClick:_onCloseViewButtonClick"\n                           iconClass\x3d"anaplanEditorIcon anaplanEditorIconCloseView"\n                           showLabel\x3d"false"\n                           style\x3d"display: none;"/\x3e\n                \x3c/td\x3e\n            \x3c/tr\x3e\n        \x3c/tbody\x3e\n    \x3c/table\x3e\n\x3c/div\x3e\n',
"url:anaplan/templates/TextBoxSelector.html":'\x3cdiv class\x3d"${baseClass} dijitReset dijitInline dijitLeft"\n     id\x3d"widget_${id}"\n     role\x3d"textbox"\x3e\n\n    \x3cdiv class\x3d\'dijitReset dijitValidationContainer textBoxSelectorElement\'\x3e\n        \x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner"\n               value\x3d"\x26#935; "\n               type\x3d"text"\n               tabIndex\x3d"-1"\n               readonly\x3d"readonly"\n               role\x3d"presentation"/\x3e\n    \x3c/div\x3e\n\n    \x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer textBoxSelectorElement"\x3e\n        \x3cinput class\x3d"dijitReset dijitInputInner"\n               type\x3d"text"\n               role\x3d"textbox"\n               data-element-id\x3d"textbox"\n               data-dojo-attach-point\x3d"textbox,focusNode"\n               data-dojo-attach-event\x3d"keyup:_onTextBoxKeyUpHandler, onblur:_onTextBoxBlurHandler"\n               ${!nameAttrSetting}/\x3e\n    \x3c/div\x3e\n\n    \x3cdiv class\x3d"dijitReset dijitEllipsisButtonNode dijitEllipsisButtonContainer textBoxSelectorElement"\x3e\n\n        \x3cbutton class\x3d"dijitReset dijitEllipsisButtonInner"\n                data-element-id\x3d"secondaryActionButton"\n                data-dojo-attach-event\x3d"click:_onSecondaryActionHandler"\n                ${_buttonInputDisabled}\x3e\x26#x22ef;\x3c/button\x3e\n    \x3c/div\x3e\n\x3c/div\x3e',
"url:anaplan/templates/ManageImportSources/BottomButton.html":'\x3cdiv class\x3d"${baseClass}"\x3e\n    \x3cdiv class\x3d"buttons"\x3e\n        \x3cinput type\x3d"button qa-button__close"\n               label\x3d"${lblClose}"\n               class\x3d"primary-button"\n               data-dojo-attach-point\x3d"closeButton"\n               data-dojo-type\x3d"anaplan/widgets/Button"\n               data-dojo-attach-event\x3d"onClick:_onClose"/\x3e\n    \x3c/div\x3e\n\x3c/div\x3e\n',"*now":function(g){g(['dojo/i18n!*preload*anaplan/nls/coreloader*["ar","am","bg","bn","c","ca","cs","cs-cz","da","de","de-ch","de-de","el","en","en-au","en-ca","en-gb","en-nz","en-ph","en-sg","en-us","en-za","es","es-ar","es-419","es-es","et","et-ee","fa","fi","fi-fi","fil","fr","fr-fr","gu","he","hi","hr","hr-hr","hu","hu-hu","id","it","it-it","ja","ja-jp","kn","ko","lt","lv","ml","mr","ms","nl","nb","nb-no","nl-nl","no","pl","pl-pl","pt-br","pt-pt","ro","ro-ro","ru","ru-ru","sk","sk-sk","sl","sr","sv","sv-se","sw","ta","te","th","tr","tr-tr","uk","vi","zh-cn","zh-tw","ROOT"]'])}}});
define("anaplan/coreloader","dojo/_base/declare dojo/_base/lang dojo/Deferred anaplan/constants anaplan/common/SelectiveAccess anaplan/data/ModelContentCache anaplan/data/ModelContentHelper anaplan/modellingloader anaplan/utils/JsHelper anaplan/utils/UIHelper anaplan/gridlet/gridletHelper".split(" "),function(g,b,k,p,r,n,f,s,l,a,e){return g([],{constructor:function(a){this._takeAction=a.takeAction;this._selectedModelId=a.selectedModelId},load:function(){var d=new k;try{if(!l.isNullOrUndefined(this._selectedModelId)){var e=
n.getWorkspaceInfo(),g=r.isAuthorized(p.userActions.CAN_ASSERT_MODEL);if(!f.assertModel(e,this._selectedModelId,g))return a.showRedirectToTiles(function(){d.reject()}),d.promise}this._loadCore().then(b.hitch(this,function(){d.resolve()}),b.hitch(this,function(a){d.reject(a)}))}catch(s){d.reject(s)}return d.promise},_loadCore:function(){return(new s({selectedModelId:this._selectedModelId,takeAction:this._takeAction})).load()}})});
//# sourceMappingURL=coreloader.js.map